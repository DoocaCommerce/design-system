var UY=Object.defineProperty;var ZY=(W,f,gs)=>f in W?UY(W,f,{enumerable:!0,configurable:!0,writable:!0,value:gs}):W[f]=gs;var Me=(W,f,gs)=>(ZY(W,typeof f!="symbol"?f+"":f,gs),gs);(function(W,f){typeof exports=="object"&&typeof module<"u"?f(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],f):(W=typeof globalThis<"u"?globalThis:W||self,f(W["design-system"]={},W.Vue))})(this,function(W,f){var Ke;"use strict";function gs(o,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in o)){const n=Object.getOwnPropertyDescriptor(i,s);n&&Object.defineProperty(o,s,n.get?n:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}const qY="",ge=f.defineComponent({__name:"Icon",props:{filled:{type:Boolean},name:{},size:{default:16}},setup(o){const e=o,t=f.computed(()=>{let i={};return e.filled&&(i.fontVariationSettings="'FILL' 1"),e.size&&(i.fontSize=e.size+"px",i.height=e.size+"px"),i});return(i,s)=>(f.openBlock(),f.createElementBlock("i",{class:"ui-icon material-symbols-outlined",style:f.normalizeStyle(t.value)},f.toDisplayString(i.name),5))}}),KY="",j0={class:"ui-toast-body"},U0=["innerHTML"],eu=f.defineComponent({__name:"Toast",props:{className:{},closeable:{type:Boolean},duration:{default:2e3},id:{},message:{},variant:{default:"default"}},setup(o){const e=o,t=f.ref(!1),i=f.reactive({option:{},showing:!1,timer:null}),s=f.computed(()=>{let l=[];return e.variant&&l.push(`-variant-${e.variant}`),l}),n=()=>{t.value=!0,i.timer=null,i.showing=!1,s.value.push("-leave"),setTimeout(()=>{if(e.id){const l=document.getElementById(e.id);l&&document.body.removeChild(l)}},300)};f.onMounted(()=>{a(),i.showing=!0});const a=()=>{e.duration>0&&(i.timer=setTimeout(()=>{t.value||n()},e.duration))};return(l,c)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-toast",s.value])},[f.createElementVNode("div",j0,[f.createElementVNode("div",{innerHTML:l.message},null,8,U0)]),l.closeable?(f.openBlock(),f.createBlock(ge,{key:0,class:"ui-toast-close",name:"close",onClick:n})):f.createCommentVNode("",!0)],2))}}),Z0={horizontalPosition:"center",verticalPosition:"bottom",transition:"slide-down",duration:3e3,message:"",closeable:!1};let q0=1;const Ol=(o,e={})=>{let t=null,i=null;const s="ui-toast-"+q0++;t=document.createElement("div"),t.id=s,i=f.createVNode(eu,{...Z0,...e,message:o,id:s,variant:e.type},null),f.render(i,t),document.body.appendChild(t)},tu={open:Ol,success(o){Ol(o,{type:"success"})},danger(o){Ol(o,{type:"critical"})}},JY="",Fi=f.defineComponent({__name:"Spinner",props:{border:{default:3},color:{},size:{default:22},variant:{}},setup(o){const e=o,t=f.computed(()=>{let s=[];return e.variant&&s.push(`-variant-${e.variant}`),s}),i=f.computed(()=>{let s={};return e.border&&(s.borderWidth=e.border+"px"),e.color&&(s.color=e.color),e.size&&(s.width=e.size+"px"),s});return(s,n)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-spinner",t.value]),style:f.normalizeStyle(i.value)},null,6))}}),eH="",K0={class:"ui-button-content"},J0={key:2,class:"ui-button-label"},ye=f.defineComponent({__name:"Button",props:{variant:{},label:{},leadingIcon:{},trailingIcon:{},size:{default:"md"},href:{},flush:{},block:{type:Boolean},to:{},spinnerBorder:{default:2},type:{default:"button"},loading:{type:Boolean},outline:{type:Boolean},disclosure:{type:Boolean},target:{},disabled:{type:Boolean}},setup(o){const e=o,t=f.computed(()=>e.to?"router-link":e.href?"a":"BUTTON"),i=f.computed(()=>[e.size?`-${e.size}`:"",e.variant?`-${e.variant}`:"-default",e.leadingIcon?"-icon":"",e.flush?`-flush-${e.flush}`:"",e.block?"-block":"",e.outline?"-outline":"",e.disclosure?"-disclosure":"",(e.trailingIcon||e.leadingIcon)&&!e.label?"-only-icon":""]),s=f.computed(()=>e.disclosure?"arrow_drop_down":e.trailingIcon);return(n,a)=>(f.openBlock(),f.createBlock(f.resolveDynamicComponent(t.value),{class:f.normalizeClass(["ui-button",[i.value,{"-loading":n.loading,"-disabled":n.disabled}]]),type:n.type,disabled:n.disabled,to:n.to,href:n.href,target:n.target},{default:f.withCtx(()=>[f.createElementVNode("div",K0,[n.leadingIcon?(f.openBlock(),f.createBlock(ge,{key:0,name:n.leadingIcon},null,8,["name"])):f.createCommentVNode("",!0),n.loading?(f.openBlock(),f.createBlock(Fi,{key:1,size:16,border:n.spinnerBorder},null,8,["border"])):f.createCommentVNode("",!0),n.label||n.$slots.default?(f.openBlock(),f.createElementBlock("div",J0,[f.renderSlot(n.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(n.label),1)])])):f.createCommentVNode("",!0),s.value?(f.openBlock(),f.createBlock(ge,{key:3,name:s.value},null,8,["name"])):f.createCommentVNode("",!0)])]),_:3},8,["type","class","disabled","to","href","target"]))}});/*! maska v2.1.11 | (c) Alexander Shabunevich | Released under the MIT license */var ev=Object.defineProperty,tv=(o,e,t)=>e in o?ev(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,Gn=(o,e,t)=>(tv(o,typeof e!="symbol"?e+"":e,t),t);const iu={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}};class su{constructor(e={}){Gn(this,"opts",{}),Gn(this,"memo",new Map);const t={...e};if(t.tokens!=null){t.tokens=t.tokensReplace?{...t.tokens}:{...iu,...t.tokens};for(const i of Object.values(t.tokens))typeof i.pattern=="string"&&(i.pattern=new RegExp(i.pattern))}else t.tokens=iu;Array.isArray(t.mask)&&(t.mask.length>1?t.mask=[...t.mask].sort((i,s)=>i.length-s.length):t.mask=t.mask[0]??""),t.mask===""&&(t.mask=null),this.opts=t}masked(e){return this.process(e,this.findMask(e))}unmasked(e){return this.process(e,this.findMask(e),!1)}isEager(){return this.opts.eager===!0}isReversed(){return this.opts.reversed===!0}completed(e){const t=this.findMask(e);if(this.opts.mask==null||t==null)return!1;const i=this.process(e,t).length;return typeof this.opts.mask=="string"?i>=this.opts.mask.length:typeof this.opts.mask=="function"?i>=t.length:this.opts.mask.filter(s=>i>=s.length).length===this.opts.mask.length}findMask(e){const t=this.opts.mask;if(t==null)return null;if(typeof t=="string")return t;if(typeof t=="function")return t(e);const i=this.process(e,t.slice(-1).pop()??"",!1);return t.find(s=>this.process(e,s,!1).length>=i.length)??""}escapeMask(e){const t=[],i=[];return e.split("").forEach((s,n)=>{s==="!"&&e[n-1]!=="!"?i.push(n-i.length):t.push(s)}),{mask:t.join(""),escaped:i}}process(e,t,i=!0){if(t==null)return e;const s=`value=${e},mask=${t},masked=${i?1:0}`;if(this.memo.has(s))return this.memo.get(s);const{mask:n,escaped:a}=this.escapeMask(t),l=[],c=this.opts.tokens!=null?this.opts.tokens:{},d=this.isReversed()?-1:1,p=this.isReversed()?"unshift":"push",g=this.isReversed()?0:n.length-1,b=this.isReversed()?()=>u>-1&&m>-1:()=>u<n.length&&m<e.length,O=v=>!this.isReversed()&&v<=g||this.isReversed()&&v>=g;let r,h=-1,u=this.isReversed()?n.length-1:0,m=this.isReversed()?e.length-1:0,y=!1;for(;b();){const v=n.charAt(u),w=c[v],S=(w==null?void 0:w.transform)!=null?w.transform(e.charAt(m)):e.charAt(m);if(!a.includes(u)&&w!=null?(S.match(w.pattern)!=null?(l[p](S),w.repeated?(h===-1?h=u:u===g&&u!==h&&(u=h-d),g===h&&(u-=d)):w.multiple&&(y=!0,u-=d),u+=d):w.multiple?y&&(u+=d,m-=d,y=!1):S===r?r=void 0:w.optional&&(u+=d,m-=d),m+=d):(i&&!this.isEager()&&l[p](v),S===v&&!this.isEager()?m+=d:r=v,this.isEager()||(u+=d)),this.isEager())for(;O(u)&&(c[n.charAt(u)]==null||a.includes(u));)i?l[p](n.charAt(u)):n.charAt(u)===e.charAt(m)&&(m+=d),u+=d}return this.memo.set(s,l.join("")),this.memo.get(s)}}const nu=o=>JSON.parse(o.replaceAll("'",'"')),ru=(o,e={})=>{const t={...e};return o.dataset.maska!=null&&o.dataset.maska!==""&&(t.mask=iv(o.dataset.maska)),o.dataset.maskaEager!=null&&(t.eager=xl(o.dataset.maskaEager)),o.dataset.maskaReversed!=null&&(t.reversed=xl(o.dataset.maskaReversed)),o.dataset.maskaTokensReplace!=null&&(t.tokensReplace=xl(o.dataset.maskaTokensReplace)),o.dataset.maskaTokens!=null&&(t.tokens=sv(o.dataset.maskaTokens)),t},xl=o=>o!==""?!!JSON.parse(o):!0,iv=o=>o.startsWith("[")&&o.endsWith("]")?nu(o):o,sv=o=>{if(o.startsWith("{")&&o.endsWith("}"))return nu(o);const e={};return o.split("|").forEach(t=>{const i=t.split(":");e[i[0]]={pattern:new RegExp(i[1]),optional:i[2]==="optional",multiple:i[2]==="multiple",repeated:i[2]==="repeated"}}),e};class nv{constructor(e,t={}){Gn(this,"items",new Map),Gn(this,"beforeinputEvent",i=>{const s=i.target,n=this.items.get(s);n.isEager()&&"inputType"in i&&i.inputType.startsWith("delete")&&n.unmasked(s.value).length<=1&&this.setMaskedValue(s,"")}),Gn(this,"inputEvent",i=>{if(i instanceof CustomEvent&&i.type==="input"&&i.detail!=null&&typeof i.detail=="object"&&"masked"in i.detail)return;const s=i.target,n=this.items.get(s),a=s.value,l=s.selectionStart,c=s.selectionEnd;let d=a;if(n.isEager()){const p=n.masked(a),g=n.unmasked(a);g===""&&"data"in i&&i.data!=null?d=i.data:g!==n.unmasked(p)&&(d=g)}if(this.setMaskedValue(s,d),"inputType"in i&&(i.inputType.startsWith("delete")||l!=null&&l<a.length))try{s.setSelectionRange(l,c)}catch{}}),this.options=t,typeof e=="string"?this.init(Array.from(document.querySelectorAll(e)),this.getMaskOpts(t)):this.init("length"in e?Array.from(e):[e],this.getMaskOpts(t))}destroy(){for(const e of this.items.keys())e.removeEventListener("input",this.inputEvent),e.removeEventListener("beforeinput",this.beforeinputEvent);this.items.clear()}needUpdateOptions(e,t){const i=this.items.get(e),s=new su(ru(e,this.getMaskOpts(t)));return JSON.stringify(i.opts)!==JSON.stringify(s.opts)}needUpdateValue(e){const t=e.dataset.maskaValue;return t==null&&e.value!==""||t!=null&&t!==e.value}getMaskOpts(e){const{onMaska:t,preProcess:i,postProcess:s,...n}=e;return n}init(e,t){for(const i of e){const s=new su(ru(i,t));this.items.set(i,s),i.value!==""&&this.setMaskedValue(i,i.value),i.addEventListener("input",this.inputEvent),i.addEventListener("beforeinput",this.beforeinputEvent)}}setMaskedValue(e,t){const i=this.items.get(e);this.options.preProcess!=null&&(t=this.options.preProcess(t));const s=i.masked(t),n=i.unmasked(i.isEager()?s:t),a=i.completed(t),l={masked:s,unmasked:n,completed:a};t=s,this.options.postProcess!=null&&(t=this.options.postProcess(t)),e.value=t,e.dataset.maskaValue=t,this.options.onMaska!=null&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(c=>c(l)):this.options.onMaska(l)),e.dispatchEvent(new CustomEvent("maska",{detail:l})),e.dispatchEvent(new CustomEvent("input",{detail:l}))}}const vl=new WeakMap,rv=o=>{setTimeout(()=>{var e;((e=vl.get(o))==null?void 0:e.needUpdateValue(o))===!0&&o.dispatchEvent(new CustomEvent("input"))})},ov=(o,e)=>{const t=o instanceof HTMLInputElement?o:o.querySelector("input"),i={...e.arg};if(t==null||(t==null?void 0:t.type)==="file")return;rv(t);const s=vl.get(t);if(s!=null){if(!s.needUpdateOptions(t,i))return;s.destroy()}if(e.value!=null){const n=e.value,a=l=>{n.masked=l.masked,n.unmasked=l.unmasked,n.completed=l.completed};i.onMaska=i.onMaska==null?a:Array.isArray(i.onMaska)?[...i.onMaska,a]:[i.onMaska,a]}vl.set(t,new nv(t,i))},ou={mounted(o,e){au(o,e)},updated(o,e){au(o,e)}};function au(o,e){const t=e.arg||"top",i=e.value||"Tooltip text";o.setAttribute("position",t),o.setAttribute("tooltip",i)}const tH="",av={key:0,class:"form-wrapper-label"},lv=["for","innerHTML"],cv={key:0,class:"form-wrapper-label-icon"},hv={class:"ui-form-wrapper-main"},dv={class:"form-wrapper-content-item form-wrapper-content-bx"},uv={class:"form-wrapper-notched"},fv=f.createElementVNode("div",{class:"form-wrapper-notched-prepend"},null,-1),pv={key:0,class:"form-wrapper-notched-label"},gv=["for","innerHTML"],mv=f.createElementVNode("div",{class:"form-wrapper-notched-append"},null,-1),bv={class:"trailing-wrapper"},yv={key:1,class:"trailing-icon-text"},Ov={key:1,class:"form-control-loader"},xv={key:0,class:"form-wrapper-append"},vv={key:1,class:"form-invalid-feedback"},jn=f.defineComponent({__name:"FormWrapper",props:{leadingIcon:{},trailingIcon:{},labelInfo:{},trailingText:{},state:{type:Boolean},loading:{type:Boolean},last:{type:Boolean},float:{type:Boolean},disabled:{type:Boolean},invalidFeedback:{},autofocus:{type:Boolean},size:{},label:{},id:{}},setup(o){var l;const e=o,t=f.ref(),i=f.ref(e.id||`__VID__${(l=f.getCurrentInstance())==null?void 0:l.uid}`),s=f.useSlots();f.onMounted(()=>{f.nextTick(()=>{var d;const c=(d=t.value)==null?void 0:d.querySelectorAll("input, textarea, select");c&&c[0]&&(c[0].setAttribute("id",i.value),e.autofocus&&c[0].focus(),e.float&&c[0].setAttribute("placeholder"," "))})});const n=f.computed(()=>["ui-form-wrapper",e.leadingIcon&&"-with-leading-icon",e.trailingIcon&&"-with-trailing-icon",e.loading&&"-loading",e.last&&"-last",(e.disabled||e.loading)&&"-disabled",e.float&&"-float",e.size&&`-${e.size}`]),a=f.computed(()=>e.state===!0?"-valid":e.state===!1?"-invalid":"");return(c,d)=>(f.openBlock(),f.createElementBlock("div",{ref_key:"elementRef",ref:t,class:f.normalizeClass([...n.value,a.value])},[!c.float&&e.label?(f.openBlock(),f.createElementBlock("div",av,[f.createElementVNode("label",{class:"form-control-label",for:i.value,innerHTML:e.label},null,8,lv),c.labelInfo?f.withDirectives((f.openBlock(),f.createElementBlock("span",cv,[f.createVNode(ge,{name:"help",class:"icon",size:14})])),[[f.unref(ou),c.labelInfo,"top"]]):f.createCommentVNode("",!0)])):f.createCommentVNode("",!0),f.createElementVNode("div",hv,[f.createElementVNode("div",dv,[c.leadingIcon?(f.openBlock(),f.createBlock(ge,{key:0,class:"leading-icon",name:c.leadingIcon,size:20},null,8,["name"])):f.createCommentVNode("",!0),f.renderSlot(c.$slots,"default"),f.createElementVNode("div",uv,[fv,c.float?(f.openBlock(),f.createElementBlock("div",pv,[f.createElementVNode("label",{class:"form-wrapper-label",for:i.value,innerHTML:e.label},null,8,gv)])):f.createCommentVNode("",!0),mv]),f.createElementVNode("div",bv,[c.trailingIcon&&!c.loading?(f.openBlock(),f.createBlock(ge,{key:0,class:"trailing-icon",name:c.trailingIcon,size:20},null,8,["name"])):f.createCommentVNode("",!0),c.trailingText?(f.openBlock(),f.createElementBlock("span",yv,f.toDisplayString(c.trailingText),1)):f.createCommentVNode("",!0),f.renderSlot(c.$slots,"trailingIcon")]),c.loading?(f.openBlock(),f.createElementBlock("div",Ov,[f.createVNode(Fi,{class:"form-control-loader-spinner"})])):f.createCommentVNode("",!0)]),f.unref(s).append?(f.openBlock(),f.createElementBlock("div",xv,[f.renderSlot(c.$slots,"append")])):f.createCommentVNode("",!0)]),c.state===!1&&c.invalidFeedback?(f.openBlock(),f.createElementBlock("div",vv,f.toDisplayString(c.invalidFeedback),1)):f.createCommentVNode("",!0)],2))}}),wv=["mask","data-maska-tokens","value","placeholder","type","step","inputmode","autocomplete","disabled","minlength","maxlength","pattern","autofocus","readonly","tabindex","name","title","id","max","min","required"],kv={key:0,class:"actions"},Tt=f.defineComponent({__name:"FormTextfield",props:{leadingIcon:{},trailingIcon:{},labelInfo:{},trailingText:{},state:{type:Boolean,default:void 0},invalidFeedback:{},loading:{type:Boolean},last:{type:Boolean},float:{type:Boolean},modelValue:{},label:{},id:{},placeholder:{},step:{},tabindex:{},inputmode:{},size:{},pattern:{},title:{},name:{},clearable:{type:Boolean},autocomplete:{},minlength:{},maxlength:{},autofocus:{type:Boolean},disabled:{type:Boolean},required:{type:Boolean},readonly:{type:Boolean},type:{},mask:{},raw:{},actions:{},max:{},min:{},dataMaskaTokens:{}},emits:["update:modelValue","update","focus","blur","keydown","keydownEnter","clear","updateRaw"],setup(o,{emit:e}){const t=o,i=e,s=f.computed(()=>[t.size?`-${t.size}`:""]),n=f.computed(()=>({mask:t.mask,eager:!1})),a=O=>{const h=O.target.value;i("update:modelValue",h),i("update",h)},l=O=>{const r=O.target;t.modelValue!=r.value.replace(/\.|-/g,"")&&(a(O),i("updateRaw",r.dataset.maskRawValue))},c=O=>{i("focus",O)},d=O=>{i("blur",O)},p=O=>{i("keydown",O)},g=O=>{i("keydownEnter",O)},b=()=>{i("clear"),i("update:modelValue",null),i("update",null)};return(O,r)=>(f.openBlock(),f.createBlock(jn,{id:O.id,leadingIcon:O.leadingIcon,trailingIcon:O.trailingIcon,trailingText:O.trailingText,label:O.label,loading:O.loading,last:O.last,disabled:O.disabled,float:O.float,state:O.state,labelInfo:O.labelInfo,autofocus:O.autofocus,size:O.size,invalidFeedback:O.invalidFeedback,class:"ui-form-textfield"},f.createSlots({default:f.withCtx(()=>[f.renderSlot(O.$slots,"before"),f.withDirectives(f.createElementVNode("input",{class:f.normalizeClass(["form-control",s.value]),mask:O.mask,"data-maska-tokens":O.dataMaskaTokens,onFocus:c,onBlur:d,onKeydown:[p,f.withKeys(g,["enter"])],onMaska:l,value:O.modelValue,placeholder:O.float?"":O.placeholder,type:O.type,step:O.step,inputmode:O.inputmode,autocomplete:O.autocomplete,disabled:O.disabled,minlength:O.minlength,maxlength:O.maxlength,pattern:O.pattern,autofocus:O.autofocus,readonly:O.readonly,tabindex:O.tabindex,name:O.name,title:O.title,id:O.id,max:O.max,min:O.min,required:O.required},null,42,wv),[[f.unref(ov),void 0,n.value]]),f.renderSlot(O.$slots,"after"),O.clearable&&O.modelValue?(f.openBlock(),f.createElementBlock("div",{key:0,class:"close",onClick:b},[f.createVNode(ge,{name:"cancel",filled:"",size:"24"})])):f.createCommentVNode("",!0)]),_:2},[O.$slots.append||O.actions?{name:"append",fn:f.withCtx(()=>[O.actions?(f.openBlock(),f.createElementBlock("div",kv,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(O.actions,h=>(f.openBlock(),f.createBlock(ye,{key:h.label,variant:h.variant,type:h.type,label:h.label,leadingIcon:h.leadingIcon,onClick:h.onAction},null,8,["variant","type","label","leadingIcon","onClick"]))),128))])):f.createCommentVNode("",!0),f.renderSlot(O.$slots,"append")]),key:"0"}:void 0]),1032,["id","leadingIcon","trailingIcon","trailingText","label","loading","last","disabled","float","state","labelInfo","autofocus","size","invalidFeedback"]))}}),iH="",Sv={key:0,class:"ui-dialog-header"},Cv=["innerHTML"],_v={class:"ui-dialog-body"},Tv=["innerHTML"],Av={key:0,class:"ui-dialog-prompt mt-5"},Ev={key:1,class:"ui-dialog-footer"},lu=f.defineComponent({__name:"Dialog",props:{id:{},title:{},hideFooter:{type:Boolean},message:{},onCallback:{},onClose:{},closeOnBackdrop:{type:Boolean},promptLabel:{},promptType:{default:"text"},promptPlaceholder:{},cancelLabel:{default:"Cancelar"},destructLabel:{default:"Deletar"},destructVariant:{default:"danger"},destructIcon:{},type:{},opened:{type:Boolean},hideCancel:{type:Boolean}},emits:["close","callback"],setup(o,{expose:e,emit:t}){const i=o,s=t,n=f.ref(!1),a=f.ref([]),l=f.ref(!1),c=f.ref({}),d=f.ref(),p=f.reactive({option:{},showing:!1,timer:null}),g=f.ref(),b=f.reactive({destructLabel:i.destructLabel,destructIcon:i.destructIcon,destructVariant:i.destructVariant}),O=y=>{document.body.classList.remove("dialog-open"),window.removeEventListener("keydown",u,!1),n.value=!0,p.timer=null,p.showing=!1,s("close",y),y&&s("callback",y),setTimeout(()=>{if(i.id){const v=document.getElementById(i.id);v&&document.body.removeChild(v)}},300)},r=()=>{O(d.value||!0)},h=()=>{i.closeOnBackdrop?O():(c.value.transform="scale(1.03)",setTimeout(()=>{c.value.transform="scale(1)"},100))};i.type=="prompt"&&(l.value=!0);const u=y=>{y.key=="Escape"&&h()},m=()=>{p.showing=!0,window.addEventListener("keydown",u,!1),document.body.classList.add("dialog-open"),f.nextTick(()=>{g.value.focus()})};return f.onMounted(()=>{i.opened&&m()}),e({open:m}),(y,v)=>p.showing?(f.openBlock(),f.createElementBlock("div",{key:0,class:f.normalizeClass(["ui-dialog -show",a.value]),tabindex:"0",ref_key:"dialogRef",ref:g},[f.createElementVNode("div",{class:"ui-dialog-wrapper",style:f.normalizeStyle(c.value)},[f.createElementVNode("div",{class:"ui-dialog-overlay",onClick:h}),f.createElementVNode("form",{class:"ui-dialog-content",onSubmit:f.withModifiers(r,["prevent"]),ref:"form"},[y.title?(f.openBlock(),f.createElementBlock("div",Sv,[f.createElementVNode("h4",{class:"title",innerHTML:y.title},null,8,Cv)])):f.createCommentVNode("",!0),f.createElementVNode("div",_v,[f.renderSlot(y.$slots,"default"),f.createElementVNode("div",{innerHTML:y.message,class:"ui-dialog-message"},null,8,Tv),l.value?(f.openBlock(),f.createElementBlock("div",Av,[f.createVNode(Tt,{label:y.promptLabel,placeholder:y.promptPlaceholder,type:y.promptType,modelValue:d.value,"onUpdate:modelValue":v[0]||(v[0]=w=>d.value=w),size:"sm",id:"prompt",required:"",last:""},null,8,["label","placeholder","type","modelValue"])])):f.createCommentVNode("",!0)]),y.hideFooter?f.createCommentVNode("",!0):(f.openBlock(),f.createElementBlock("div",Ev,[f.createVNode(ye,{leadingIcon:b.destructIcon,variant:y.destructVariant,type:"submit",class:"btn-destruct",tabindex:"0"},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(b.destructLabel),1)]),_:1},8,["leadingIcon","variant"]),y.type!="confirm"&&!y.hideCancel?(f.openBlock(),f.createBlock(ye,{key:0,onClick:v[1]||(v[1]=()=>O(!1)),class:"ui-dialog-btn-cancel"},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(y.cancelLabel),1)]),_:1})):f.createCommentVNode("",!0)]))],544)],4)],2)):f.createCommentVNode("",!0)}}),$v={opened:!0};let Pv=1;const ao=(o={})=>{let e=null,t=null;const i="ui-dialog-"+Pv++;e=document.createElement("div"),e.id=i,t=f.createVNode(lu,{...$v,...o,id:i}),f.render(t,e),document.body.appendChild(e)},lo={open:ao,delete(o={}){o.destructLabel="Deletar",o.destructIcon="delete",o.destructVariant="danger",ao(o)},prompt(o={}){o={type:"prompt",destructVariant:"danger",destructLabel:"Confirmar",...o},ao(o)},confirm(o={}){o.type="confirm",o.destructLabel=o.destructLabel||"Confirmar",o.destructIcon="check",o.destructVariant="success",o.hideCancel=!0,ao(o)}},sH="",je=(o,e)=>{const t=o.__vccOpts||o;for(const[i,s]of e)t[i]=s;return t},Lv={},Nv={class:"ui-description-list"};function Dv(o,e){return f.openBlock(),f.createElementBlock("div",Nv,[f.renderSlot(o.$slots,"default")])}const Mv=je(Lv,[["render",Dv]]),Rv={class:"ui-description-list-item"},Iv={class:"ui-description-list-item-label"},Bv={key:0,class:"ui-description-list-item-description"},Qv=f.defineComponent({__name:"DescriptionListItem",props:{label:{},description:{}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",Rv,[f.createElementVNode("div",Iv,f.toDisplayString(e.label),1),e.$slots.default?(f.openBlock(),f.createElementBlock("div",Bv,[f.renderSlot(e.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(e.description),1)])])):f.createCommentVNode("",!0)]))}}),nH="",wl=f.defineComponent({__name:"Stack",props:{distribution:{},spacing:{},alignment:{},vertical:{type:Boolean},wrap:{type:Boolean},columns:{},horizontal:{type:Boolean}},setup(o){const e=o,t=f.computed(()=>[e.distribution!=="default"&&e.distribution!=null&&`-distribute-${e.distribution}`,e.spacing!=="default"&&e.spacing!=null&&`-spacing-${e.spacing}`,e.vertical==!0&&"-vertical",e.alignment&&`-align-${e.alignment}`,e.wrap==null||e.wrap==!1&&"-no-wrap",e.horizontal&&"-sm-horizontal",e.columns&&e.columns>1&&"-custom-grid"]),i=f.computed(()=>{const s={};return e.columns&&window.innerWidth>800&&(s.gridTemplateColumns=`repeat(${e.columns}, 1fr)`),s});return(s,n)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-stack",t.value]),style:f.normalizeStyle(i.value)},[f.renderSlot(s.$slots,"default")],6))}}),rH="",Vv={},Fv={class:"ui-button-group"};function Wv(o,e){return f.openBlock(),f.createElementBlock("div",Fv,[f.renderSlot(o.$slots,"default")])}const zv=je(Vv,[["render",Wv]]),oH="",Xv={class:"ui-alert-content"},Yv={key:0,class:"ui-alert-title"},Hv={class:"ui-alert-text"},co=f.defineComponent({__name:"Alert",props:{title:{},variant:{},icon:{},dismissible:{type:Boolean},show:{type:Boolean},center:{type:Boolean},label:{}},emits:["dismissed"],setup(o,{emit:e}){const t=o,i=e,s=f.ref(!!t.show),n={success:"check_circle",danger:"error",warning:"warning"},a=()=>{s.value=!1,i("dismissed")},l=f.computed(()=>{let d=[];return t.variant&&d.push(`-${t.variant}`),t.center&&d.push("-center"),t.dismissible&&d.push("-dismissible"),d}),c=f.computed(()=>{let d=t.icon;return!t.icon&&t.variant&&(d=n[t.variant]),d});return f.watchEffect(()=>{s.value=!!t.show}),(d,p)=>s.value?(f.openBlock(),f.createElementBlock("div",{key:0,class:f.normalizeClass(["ui-alert",l.value])},[c.value?(f.openBlock(),f.createBlock(ge,{key:0,class:"ui-alert-icon",filled:"",name:c.value,size:"24"},null,8,["name"])):f.createCommentVNode("",!0),f.createElementVNode("div",Xv,[d.title?(f.openBlock(),f.createElementBlock("h5",Yv,f.toDisplayString(d.title),1)):f.createCommentVNode("",!0),f.createElementVNode("div",Hv,[f.renderSlot(d.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(d.label),1)])])]),d.dismissible?(f.openBlock(),f.createElementBlock("button",{key:1,type:"button",class:"ui-alert-close",onClick:a},[f.createVNode(ge,{name:"close"})])):f.createCommentVNode("",!0)],2)):f.createCommentVNode("",!0)}}),aH="",Rt=f.defineComponent({__name:"IconButton",props:{icon:{},variant:{},size:{default:"md"},fab:{type:Boolean},disabled:{type:Boolean},onColor:{type:Boolean},customClass:{}},setup(o){const e=o,t=f.ref(["ui-icon-button",e.customClass]),i=f.computed(()=>{switch(e.size){case"sm":return 16;case"md":return 24;case"lg":return 24}});return(s,n)=>(f.openBlock(),f.createBlock(ye,{class:f.normalizeClass([t.value,s.fab?"-fab":"",s.onColor?"-on-color":""]),size:s.size,variant:s.variant,disabled:s.disabled},{default:f.withCtx(()=>[f.createVNode(ge,{name:s.icon,size:i.value},null,8,["name","size"])]),_:1},8,["class","size","variant","disabled"]))}}),lH="",Gv=["id"],jv={class:"header-wrapper"},Uv={class:"title"},Zv={key:0,class:"d-block text-muted mb-0"},qv={class:"ui-aside-body"},Kv={key:0,class:"ui-aside-footer"},Jv={key:1,class:"ui-aside-footer"},Un=f.defineComponent({__name:"Aside",props:{modelValue:{type:Boolean},title:{},subtitle:{},scrollable:{type:Boolean},noCloseOnBackdrop:{type:Boolean},size:{},tag:{},inner:{type:Boolean},primaryAction:{},secondaryActions:{},scrollableContentId:{}},emits:["update:modelValue","open","close","save"],setup(o,{emit:e}){const t=e,i=o,s=f.useSlots(),n=f.ref(!1),a=i.size?`-${i.size}`:"-md",l=(O="default")=>!!s[O],c=()=>{window.removeEventListener("keydown",b,!1),document.body.classList.remove("aside-open"),setTimeout(()=>{t("close"),n.value=!1},300)},d=()=>{n.value=!0,window.addEventListener("keydown",b,!1),document.body.classList.add("aside-open"),t("open")},p=()=>{i.noCloseOnBackdrop||t("update:modelValue",!1)},g=()=>t("update:modelValue",!1),b=O=>{O.key=="Escape"&&p()};return f.watchEffect(()=>{i.modelValue?d():c()}),(O,r)=>(f.openBlock(),f.createBlock(f.Teleport,{to:"body"},[(f.openBlock(),f.createBlock(f.resolveDynamicComponent(O.tag?O.tag:"div"),{class:"ui-aside",onSubmit:r[0]||(r[0]=f.withModifiers(h=>O.$emit("save"),["prevent"]))},{default:f.withCtx(()=>[n.value?(f.openBlock(),f.createElementBlock("div",{key:0,class:f.normalizeClass(["ui-aside-wrapper",[f.unref(a),{"-hide":!O.modelValue,"-scrollable":O.scrollable,"-inner":O.inner}]])},[f.createElementVNode("div",{class:f.normalizeClass(["ui-aside-overlay",{"-close":!O.noCloseOnBackdrop}]),onClick:p},null,2),f.createElementVNode("div",{class:"ui-aside-content",id:O.scrollableContentId},[f.createElementVNode("div",{class:"ui-aside-header",style:f.normalizeStyle(O.subtitle?"align-items: flex-start":"align-items: center")},[f.createElementVNode("div",jv,[f.createElementVNode("h4",Uv,f.toDisplayString(O.title),1),O.subtitle?(f.openBlock(),f.createElementBlock("p",Zv,f.toDisplayString(O.subtitle),1)):f.createCommentVNode("",!0)]),f.createVNode(Rt,{onClick:g,id:"btn-close",icon:"close",variant:"plain",type:"rounded"})],4),f.createElementVNode("div",qv,[f.renderSlot(O.$slots,"default")]),O.primaryAction?(f.openBlock(),f.createElementBlock("div",Kv,[f.createVNode(ye,{type:"submit",onClick:O.primaryAction.onAction,label:O.primaryAction.label,disabled:O.primaryAction.disabled,variant:O.primaryAction.variant??"primary",form:O.primaryAction.form},null,8,["onClick","label","disabled","variant","form"]),(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(O.secondaryActions,h=>(f.openBlock(),f.createBlock(ye,{type:"button",onClick:h.onAction,label:h.label},null,8,["onClick","label"]))),256))])):f.createCommentVNode("",!0),l("footer")?(f.openBlock(),f.createElementBlock("div",Jv,[f.renderSlot(O.$slots,"footer")])):f.createCommentVNode("",!0)],8,Gv)],2)):f.createCommentVNode("",!0)]),_:3},32))]))}}),cH="",ew={class:"ui-link-content"},It=f.defineComponent({__name:"Link",props:{disabled:{type:Boolean},external:{type:Boolean},href:{},label:{},to:{},wrapText:{type:Boolean}},setup(o){const e=o,t=f.computed(()=>e.to?"router-link":"a"),i=f.computed(()=>{let n=[];return e.external&&n.push("-external"),e.disabled&&n.push("-disabled"),e.wrapText&&n.push("-wrap"),n}),s=f.computed(()=>{let n={};return e.href&&Object.assign(n,{href:e.href}),e.to&&Object.assign(n,{to:e.to}),e.external&&Object.assign(n,{target:"_blank"}),n});return(n,a)=>(f.openBlock(),f.createBlock(f.resolveDynamicComponent(t.value),f.mergeProps({class:["ui-link",i.value]},s.value),{default:f.withCtx(()=>[f.createElementVNode("span",ew,[f.renderSlot(n.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(n.label),1)])]),n.external?(f.openBlock(),f.createBlock(ge,{key:0,name:"open_in_new",class:"ui-link-icon",size:14})):f.createCommentVNode("",!0)]),_:3},16,["class"]))}}),tw={class:"ui-aside-section"},iw={key:0,class:"ui-aside-section-header"},sw={class:"ui-aside-section-title"},nw={key:0,class:"ui-aside-section-actions"},kl=f.defineComponent({__name:"AsideSection",props:{title:{},actions:{}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",tw,[e.title?(f.openBlock(),f.createElementBlock("div",iw,[f.createElementVNode("h6",sw,f.toDisplayString(e.title),1),e.actions?(f.openBlock(),f.createElementBlock("div",nw,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(e.actions,i=>(f.openBlock(),f.createBlock(It,{key:i.label,onClick:i.onAction},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(i.label),1)]),_:2},1032,["onClick"]))),128))])):f.createCommentVNode("",!0)])):f.createCommentVNode("",!0),f.renderSlot(e.$slots,"default")]))}}),hH="",cu=f.defineComponent({__name:"Badge",props:{label:{},pill:{type:Boolean},size:{default:"md"},variant:{default:"default"}},setup(o){const e=o,t=f.computed(()=>{let i=[];return e.pill&&i.push("-pill"),e.size&&i.push(`-size-${e.size}`),e.variant&&i.push(`-variant-${e.variant}`),i});return(i,s)=>(f.openBlock(),f.createElementBlock("span",{class:f.normalizeClass(["ui-badge",t.value])},[f.renderSlot(i.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(i.label),1)])],2))}}),dH="",rw=["for"],ow=["id","value","tabindex","required","indeterminate","name","disabled"],aw=f.createElementVNode("span",{class:"ui-form-checkbox-checkmark"},null,-1),lw={key:0,class:"ui-form-checkbox-text"},ms=f.defineComponent({__name:"FormCheckbox",props:{modelValue:{},value:{},switch:{type:Boolean},label:{},id:{},name:{},tabindex:{},required:{type:Boolean},indeterminate:{type:Boolean},noEvents:{type:Boolean},disabled:{type:Boolean}},emits:["update:modelValue","update"],setup(o,{emit:e}){var c;const t=e,i=o,s=i.id??`ui-form-checkbox-${(c=f.getCurrentInstance())==null?void 0:c.uid}`,n=f.computed(()=>[i.switch?"-switch":"",i.disabled?"-disabled":"",i.noEvents?"-no-events":""]),a=f.computed({get(){return i.modelValue},set(d){l(d)}}),l=d=>{t("update",d),t("update:modelValue",d)};return(d,p)=>(f.openBlock(),f.createElementBlock("label",{class:f.normalizeClass(["ui-form-checkbox",n.value]),for:f.unref(s)},[f.withDirectives(f.createElementVNode("input",{"onUpdate:modelValue":p[0]||(p[0]=g=>a.value=g),type:"checkbox",id:f.unref(s),value:d.value,tabindex:d.tabindex,required:d.required,indeterminate:d.indeterminate,name:d.name,disabled:d.disabled,"true-value":!0,"on:update:modelValue":l},null,40,ow),[[f.vModelCheckbox,a.value]]),aw,d.label||d.$slots.default?(f.openBlock(),f.createElementBlock("div",lw,[f.renderSlot(d.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(d.label),1)])])):f.createCommentVNode("",!0)],10,rw))}}),cw=["value","inputmode","autocomplete","autofocus","disabled","minlength","maxlength","pattern","placeholder","readonly","tabindex","name","title","id","required","rows"],hw=f.defineComponent({__name:"FormTextarea",props:{leadingIcon:{},trailingIcon:{},state:{type:Boolean,default:void 0},loading:{type:Boolean},last:{type:Boolean},float:{type:Boolean},invalidFeedback:{},modelValue:{},rows:{default:4},label:{},placeholder:{},tabindex:{},inputmode:{},id:{},pattern:{},title:{},name:{},autocomplete:{},minlength:{},maxlength:{},autofocus:{type:Boolean},disabled:{type:Boolean},required:{type:Boolean},readonly:{type:Boolean},labelInfo:{}},emits:["update:modelValue","update"],setup(o,{emit:e}){const t=e,i=o,s=f.computed(()=>[i.state===!0?"-valid":i.state===!1?"-invalid":""]),n=a=>{const l=a.target;t("update:modelValue",l.value),t("update",l.value)};return(a,l)=>(f.openBlock(),f.createBlock(jn,{id:a.id,leadingIcon:a.leadingIcon,trailingIcon:a.trailingIcon,label:a.label,loading:a.loading,last:a.last,disabled:a.disabled,float:a.float,state:a.state,labelInfo:a.labelInfo,invalidFeedback:a.invalidFeedback},{default:f.withCtx(()=>[f.createElementVNode("textarea",{class:f.normalizeClass(["form-control",s.value]),onInput:n,value:a.modelValue,inputmode:a.inputmode,autocomplete:a.autocomplete,autofocus:a.autofocus,disabled:a.disabled,minlength:a.minlength,maxlength:a.maxlength,pattern:a.pattern,placeholder:a.placeholder,readonly:a.readonly,tabindex:a.tabindex,name:a.name,title:a.title,id:a.id,required:a.required,rows:a.rows},null,42,cw)]),_:1},8,["id","leadingIcon","trailingIcon","label","loading","last","disabled","float","state","labelInfo","invalidFeedback"]))}}),uH="",dw=["modelValue","value","tabindex","required","name","disabled","checked"],uw=f.createElementVNode("span",{class:"ui-form-radio-checkmark"},null,-1),fw={key:0,class:"ui-form-radio-text"},Sl=f.defineComponent({__name:"FormRadio",props:{modelValue:{},value:{default:!0},label:{},name:{},required:{type:Boolean},disabled:{type:Boolean},tabindex:{}},emits:["update:modelValue","update"],setup(o,{emit:e}){var l;const t=o,i=e,s=`ui-form-radio-${(l=f.getCurrentInstance())==null?void 0:l.uid}`,n=f.computed(()=>JSON.stringify(t.value)==JSON.stringify(t.modelValue)),a=c=>{i("update:modelValue",c),i("update",c)};return(c,d)=>(f.openBlock(),f.createElementBlock("label",{class:f.normalizeClass(["ui-form-radio",{"-disabled":c.disabled}]),for:s},[f.createElementVNode("input",{type:"radio",id:s,modelValue:c.modelValue,value:c.value,tabindex:c.tabindex,required:c.required,name:c.name,disabled:c.disabled,checked:n.value,onInput:d[0]||(d[0]=p=>a(c.value))},null,40,dw),uw,c.label||c.$slots.default?(f.openBlock(),f.createElementBlock("div",fw,[f.renderSlot(c.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(c.label),1)])])):f.createCommentVNode("",!0)],2))}}),fH="",pw=["min","max","value","step","name","required","disabled"],gw=f.defineComponent({__name:"FormRange",props:{modelValue:{},required:{type:Boolean},name:{},min:{},max:{},step:{},width:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(o,{emit:e}){var b;const t=o,i=`ui-form-range-${(b=f.getCurrentInstance())==null?void 0:b.uid}`,s=f.ref(!1),n=e,a=f.computed({get(){return t.modelValue},set(O){c(O)}}),l=f.computed(()=>{const O={};return t.width&&(O.width=t.width+"px"),O}),c=O=>{n("update:modelValue",O)},d=O=>{const r=O.target;c(r.value),s.value=!1};function p(O,r){const h=O.value,u=O.min?O.min:0,m=O.max?O.max:100,y=(Number(h)-Number(u))*100/(Number(m)-Number(u));r.innerHTML=h,r.style.left=`calc(${y}%)`}const g=()=>{document.querySelectorAll(".ui-slider").forEach(r=>{const h=r.querySelector(".ui-slider-range"),u=r.querySelector(".ui-slider-bubble");h&&u&&(h.addEventListener("input",()=>{p(h,u)}),p(h,u))})};return f.onMounted(g),(O,r)=>(f.openBlock(),f.createElementBlock("label",{class:"ui-slider",for:i,style:f.normalizeStyle(l.value)},[f.createElementVNode("input",{type:"range",min:O.min,max:O.max,value:a.value,step:O.step,id:i,name:O.name,required:O.required,class:"ui-slider-range",onChange:d,onMousedown:r[0]||(r[0]=h=>s.value=!0),disabled:O.disabled},null,40,pw),f.createElementVNode("output",{class:f.normalizeClass(["ui-slider-bubble",{"-active":s.value}])},null,2)],4))}}),mw={class:"form-control-label",style:{display:"block"}},ho=f.defineComponent({__name:"FormLabel",props:{label:{}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("label",mw,[f.renderSlot(e.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(e.label),1)])]))}});/**
 * Vue Currency Input 3.1.0
 * (c) 2018-2024 Matthias Stiller
 * @license MIT
 */var Wi;(function(o){o.symbol="symbol",o.narrowSymbol="narrowSymbol",o.code="code",o.name="name",o.hidden="hidden"})(Wi||(Wi={}));var bs;(function(o){o.precision="precision",o.thousands="thousands",o.millions="millions",o.billions="billions"})(bs||(bs={}));const uo=o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),hu=o=>o.replace(/^0+(0$|[^0])/,"$1"),Cl=(o,e)=>(o.match(new RegExp(uo(e),"g"))||[]).length,bw=(o,e)=>o.substring(0,o.indexOf(e)),du=[",",".","٫","。"],uu="(0|[1-9]\\d*)";class yw{constructor(e){var t,i,s,n,a,l;const{currency:c,currencyDisplay:d,locale:p,precision:g,accountingSign:b,useGrouping:O}=e;this.locale=p,this.options={currency:c,useGrouping:O,style:"currency",currencySign:b?"accounting":void 0,currencyDisplay:d!==Wi.hidden?d:void 0};const r=new Intl.NumberFormat(p,this.options),h=r.formatToParts(123456);this.currency=(t=h.find(({type:y})=>y==="currency"))===null||t===void 0?void 0:t.value,this.digits=[0,1,2,3,4,5,6,7,8,9].map(y=>y.toLocaleString(p)),this.decimalSymbol=(i=h.find(({type:y})=>y==="decimal"))===null||i===void 0?void 0:i.value,this.groupingSymbol=(s=h.find(({type:y})=>y==="group"))===null||s===void 0?void 0:s.value,this.minusSign=(n=r.formatToParts(-1).find(({type:y})=>y==="minusSign"))===null||n===void 0?void 0:n.value,this.decimalSymbol===void 0?this.minimumFractionDigits=this.maximumFractionDigits=0:typeof g=="number"?this.minimumFractionDigits=this.maximumFractionDigits=g:(this.minimumFractionDigits=(a=g==null?void 0:g.min)!==null&&a!==void 0?a:r.resolvedOptions().minimumFractionDigits,this.maximumFractionDigits=(l=g==null?void 0:g.max)!==null&&l!==void 0?l:r.resolvedOptions().maximumFractionDigits);const u=y=>bw(y,this.digits[1]),m=y=>y.substring(y.lastIndexOf(this.decimalSymbol?this.digits[0]:this.digits[1])+1);this.prefix=u(r.format(1)),this.suffix=m(r.format(1)),this.negativePrefix=u(r.format(-1)),this.negativeSuffix=m(r.format(-1))}parse(e){if(e){const t=this.isNegative(e);e=this.normalizeDigits(e),e=this.stripCurrency(e,t),e=this.stripSignLiterals(e);const i=this.decimalSymbol?`(?:${uo(this.decimalSymbol)}(\\d*))?`:"",s=this.stripGroupingSeparator(e).match(new RegExp(`^${uu}${i}$`));if(s&&this.isValidIntegerFormat(this.decimalSymbol?e.split(this.decimalSymbol)[0]:e,Number(s[1])))return+`${t?"-":""}${this.onlyDigits(s[1])}.${this.onlyDigits(s[2]||"")}`}return null}isValidIntegerFormat(e,t){const i={...this.options,minimumFractionDigits:0};return[this.stripCurrency(this.normalizeDigits(t.toLocaleString(this.locale,{...i,useGrouping:!0})),!1),this.stripCurrency(this.normalizeDigits(t.toLocaleString(this.locale,{...i,useGrouping:!1})),!1)].includes(e)}format(e,t={minimumFractionDigits:this.minimumFractionDigits,maximumFractionDigits:this.maximumFractionDigits}){return e!=null?e.toLocaleString(this.locale,{...this.options,...t}):""}toFraction(e){return`${this.digits[0]}${this.decimalSymbol}${this.onlyLocaleDigits(e.substring(1)).substring(0,this.maximumFractionDigits)}`}isFractionIncomplete(e){return!!this.normalizeDigits(this.stripGroupingSeparator(e)).match(new RegExp(`^${uu}${uo(this.decimalSymbol)}$`))}isNegative(e){return e.startsWith(this.negativePrefix)||this.minusSign===void 0&&(e.startsWith("(")||e.startsWith("-"))||this.minusSign!==void 0&&e.replace("-",this.minusSign).startsWith(this.minusSign)}insertCurrency(e,t){return`${t?this.negativePrefix:this.prefix}${e}${t?this.negativeSuffix:this.suffix}`}stripGroupingSeparator(e){return this.groupingSymbol!==void 0?e.replace(new RegExp(uo(this.groupingSymbol),"g"),""):e}stripSignLiterals(e){return this.minusSign!==void 0?e.replace("-",this.minusSign).replace(this.minusSign,""):e.replace(/[-()]/g,"")}stripCurrency(e,t){return e.replace(t?this.negativePrefix:this.prefix,"").replace(t?this.negativeSuffix:this.suffix,"")}normalizeDecimalSeparator(e,t){return du.forEach(i=>{e=e.substring(0,t)+e.substring(t).replace(i,this.decimalSymbol)}),e}normalizeDigits(e){return this.digits[0]!=="0"&&this.digits.forEach((t,i)=>{e=e.replace(new RegExp(t,"g"),String(i))}),e}onlyDigits(e){return this.normalizeDigits(e).replace(/\D+/g,"")}onlyLocaleDigits(e){return e.replace(new RegExp(`[^${this.digits.join("")}]*`,"g"),"")}}class fu{constructor(e){this.currencyFormat=e}}class Ow extends fu{conformToMask(e,t=""){const i=this.currencyFormat.isNegative(e),s=r=>r===""&&i&&!(this.currencyFormat.minusSign===void 0?t===this.currencyFormat.negativePrefix+this.currencyFormat.negativeSuffix:t===this.currencyFormat.negativePrefix),n=r=>{if(s(r))return"";if(this.currencyFormat.maximumFractionDigits>0){if(this.currencyFormat.isFractionIncomplete(r))return r;if(r.startsWith(this.currencyFormat.decimalSymbol))return this.currencyFormat.toFraction(r)}return null};let a=e;a=this.currencyFormat.stripCurrency(a,i),a=this.currencyFormat.stripSignLiterals(a);const l=n(a);if(l!=null)return this.currencyFormat.insertCurrency(l,i);const[c,...d]=a.split(this.currencyFormat.decimalSymbol),p=hu(this.currencyFormat.onlyDigits(c)),g=this.currencyFormat.onlyDigits(d.join("")).substring(0,this.currencyFormat.maximumFractionDigits),b=d.length>0&&g.length===0,O=p===""&&i&&(this.currencyFormat.minusSign===void 0?t===e.slice(0,-2)+this.currencyFormat.negativeSuffix:t===e.slice(0,-1));return b||O||s(p)?t:p.match(/\d+/)?{numberValue:+`${i?"-":""}${p}.${g}`,fractionDigits:g}:""}}class xw extends fu{conformToMask(e,t=""){if(e===""||this.currencyFormat.parse(t)===0&&this.currencyFormat.stripCurrency(t,!0).slice(0,-1)===this.currencyFormat.stripCurrency(e,!0))return"";const i=this.currencyFormat.isNegative(e),s=this.currencyFormat.stripSignLiterals(e)===""?-0:+`${i?"-":""}${hu(this.currencyFormat.onlyDigits(e))}`/Math.pow(10,this.currencyFormat.maximumFractionDigits);return{numberValue:s,fractionDigits:s.toFixed(this.currencyFormat.maximumFractionDigits).slice(-this.currencyFormat.maximumFractionDigits)}}}const vw={locale:void 0,currency:void 0,currencyDisplay:void 0,hideGroupingSeparatorOnFocus:!0,hideCurrencySymbolOnFocus:!0,hideNegligibleDecimalDigitsOnFocus:!0,precision:void 0,autoDecimalDigits:!1,valueRange:void 0,useGrouping:void 0,valueScaling:void 0};class ww{constructor(e){this.el=e.el,this.onInput=e.onInput,this.onChange=e.onChange,this.addEventListener(),this.init(e.options)}setOptions(e){this.init(e),this.format(this.currencyFormat.format(this.validateValueRange(this.numberValue))),this.onChange(this.getValue())}getValue(){return{number:this.valueScaling&&this.numberValue!=null?this.toInteger(this.numberValue,this.valueScaling):this.numberValue,formatted:this.formattedValue}}setValue(e){const t=this.valueScaling!==void 0&&e!=null?this.toFloat(e,this.valueScaling):e;t!==this.numberValue&&(this.format(this.currencyFormat.format(this.validateValueRange(t))),this.onChange(this.getValue()))}init(e){this.options={...vw,...e},this.options.autoDecimalDigits&&(this.options.hideNegligibleDecimalDigitsOnFocus=!1),this.el.getAttribute("inputmode")||this.el.setAttribute("inputmode",this.options.autoDecimalDigits?"numeric":"decimal"),this.currencyFormat=new yw(this.options),this.numberMask=this.options.autoDecimalDigits?new xw(this.currencyFormat):new Ow(this.currencyFormat);const t={[bs.precision]:this.currencyFormat.maximumFractionDigits,[bs.thousands]:3,[bs.millions]:6,[bs.billions]:9};this.valueScaling=this.options.valueScaling?t[this.options.valueScaling]:void 0,this.valueScalingFractionDigits=this.valueScaling!==void 0&&this.options.valueScaling!==bs.precision?this.valueScaling+this.currencyFormat.maximumFractionDigits:this.currencyFormat.maximumFractionDigits,this.minValue=this.getMinValue(),this.maxValue=this.getMaxValue()}getMinValue(){var e,t;let i=this.toFloat(-Number.MAX_SAFE_INTEGER);return((e=this.options.valueRange)===null||e===void 0?void 0:e.min)!==void 0&&(i=Math.max((t=this.options.valueRange)===null||t===void 0?void 0:t.min,this.toFloat(-Number.MAX_SAFE_INTEGER))),i}getMaxValue(){var e,t;let i=this.toFloat(Number.MAX_SAFE_INTEGER);return((e=this.options.valueRange)===null||e===void 0?void 0:e.max)!==void 0&&(i=Math.min((t=this.options.valueRange)===null||t===void 0?void 0:t.max,this.toFloat(Number.MAX_SAFE_INTEGER))),i}toFloat(e,t){return e/Math.pow(10,t??this.valueScalingFractionDigits)}toInteger(e,t){return Number(e.toFixed(t??this.valueScalingFractionDigits).split(".").join(""))}validateValueRange(e){return e!=null?Math.min(Math.max(e,this.minValue),this.maxValue):e}format(e,t=!1){if(e!=null){this.decimalSymbolInsertedAt!==void 0&&(e=this.currencyFormat.normalizeDecimalSeparator(e,this.decimalSymbolInsertedAt),this.decimalSymbolInsertedAt=void 0);const i=this.numberMask.conformToMask(e,this.formattedValue);let s;if(typeof i=="object"){const{numberValue:n,fractionDigits:a}=i;let{maximumFractionDigits:l,minimumFractionDigits:c}=this.currencyFormat;this.focus?c=t?a.replace(/0+$/,"").length:Math.min(l,a.length):Number.isInteger(n)&&!this.options.autoDecimalDigits&&(this.options.precision===void 0||c===0)&&(c=l=0),s=this.toInteger(Math.abs(n))>Number.MAX_SAFE_INTEGER?this.formattedValue:this.currencyFormat.format(n,{useGrouping:this.options.useGrouping!==!1&&!(this.focus&&this.options.hideGroupingSeparatorOnFocus),minimumFractionDigits:c,maximumFractionDigits:l})}else s=i;this.maxValue<=0&&!this.currencyFormat.isNegative(s)&&this.currencyFormat.parse(s)!==0&&(s=s.replace(this.currencyFormat.prefix,this.currencyFormat.negativePrefix)),this.minValue>=0&&(s=s.replace(this.currencyFormat.negativePrefix,this.currencyFormat.prefix)),(this.options.currencyDisplay===Wi.hidden||this.focus&&this.options.hideCurrencySymbolOnFocus)&&(s=s.replace(this.currencyFormat.negativePrefix,this.currencyFormat.minusSign!==void 0?this.currencyFormat.minusSign:"(").replace(this.currencyFormat.negativeSuffix,this.currencyFormat.minusSign!==void 0?"":")").replace(this.currencyFormat.prefix,"").replace(this.currencyFormat.suffix,"")),this.el.value=s,this.numberValue=this.currencyFormat.parse(s)}else this.el.value="",this.numberValue=null;this.formattedValue=this.el.value,this.onInput(this.getValue())}addEventListener(){this.el.addEventListener("input",e=>{const{value:t,selectionStart:i}=this.el,s=e;if(i&&s.data&&du.includes(s.data)&&(this.decimalSymbolInsertedAt=i-1),this.format(t),this.focus&&i!=null){const n=()=>{const{prefix:a,suffix:l,decimalSymbol:c,maximumFractionDigits:d,groupingSymbol:p}=this.currencyFormat;let g=t.length-i;const b=this.formattedValue.length;if(this.currencyFormat.minusSign===void 0&&(t.startsWith("(")||t.startsWith("-"))&&!t.endsWith(")"))return b-this.currencyFormat.negativeSuffix.length>1?this.formattedValue.substring(i).length:1;if(this.formattedValue.substring(i,1)===p&&Cl(this.formattedValue,p)===Cl(t,p)+1)return b-g-1;if(b<g)return i;if(c!==void 0&&t.indexOf(c)!==-1){const O=t.indexOf(c)+1;if(Math.abs(b-t.length)>1&&i<=O)return this.formattedValue.indexOf(c)+1;!this.options.autoDecimalDigits&&i>O&&this.currencyFormat.onlyDigits(t.substring(O)).length-1===d&&(g-=1)}return this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===Wi.hidden?b-g:Math.max(b-Math.max(g,l.length),a.length)};this.setCaretPosition(n())}}),this.el.addEventListener("focus",()=>{this.focus=!0,this.numberValueOnFocus=this.numberValue,setTimeout(()=>{const{value:e,selectionStart:t,selectionEnd:i}=this.el;if(this.format(e,this.options.hideNegligibleDecimalDigitsOnFocus),t!=null&&i!=null&&Math.abs(t-i)>0)this.setCaretPosition(0,this.el.value.length);else if(t!=null){const s=this.getCaretPositionOnFocus(e,t);this.setCaretPosition(s)}})}),this.el.addEventListener("blur",()=>{this.focus=!1,this.format(this.currencyFormat.format(this.validateValueRange(this.numberValue))),this.numberValueOnFocus!==this.numberValue&&this.onChange(this.getValue())})}getCaretPositionOnFocus(e,t){if(this.numberValue==null)return t;const{prefix:i,negativePrefix:s,suffix:n,negativeSuffix:a,groupingSymbol:l,currency:c}=this.currencyFormat,d=this.numberValue<0,p=d?s:i,g=p.length;if(this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===Wi.hidden){if(d){if(t<=1)return 1;if(e.endsWith(")")&&t>e.indexOf(")"))return this.formattedValue.length-1}}else{const O=d?a.length:n.length;if(t>=e.length-O)return this.formattedValue.length-O;if(t<g)return g}let b=t;return this.options.hideCurrencySymbolOnFocus&&this.options.currencyDisplay!==Wi.hidden&&t>=g&&c!==void 0&&p.includes(c)&&(b-=g,d&&(b+=1)),this.options.hideGroupingSeparatorOnFocus&&l!==void 0&&(b-=Cl(e.substring(0,t),l)),b}setCaretPosition(e,t=e){this.el.setSelectionRange(e,t)}}const kw=o=>o!=null&&o.matches("input")?o:o==null?void 0:o.querySelector("input");function Sw(o,e){var t,i,s,n;let a;const l=f.ref(null),c=f.ref(null),d=f.ref(null),p=f.getCurrentInstance(),g=(p==null?void 0:p.emit)||((i=(t=p==null?void 0:p.proxy)===null||t===void 0?void 0:t.$emit)===null||i===void 0?void 0:i.bind(p==null?void 0:p.proxy)),b=(p==null?void 0:p.props)||((s=p==null?void 0:p.proxy)===null||s===void 0?void 0:s.$props),O=f.version.startsWith("3"),r=O&&((n=p==null?void 0:p.attrs.modelModifiers)===null||n===void 0?void 0:n.lazy),h=f.computed(()=>b==null?void 0:b[O?"modelValue":"value"]),u=O?"update:modelValue":"input",m=r?"update:modelValue":"change";return f.watch(l,y=>{var v;if(y){const w=kw((v=y==null?void 0:y.$el)!==null&&v!==void 0?v:y);w?(a=new ww({el:w,options:o,onInput:S=>{!r&&e!==!1&&h.value!==S.number&&(g==null||g(u,S.number)),d.value=S.number,c.value=S.formatted},onChange:S=>{e!==!1&&(g==null||g(m,S.number))}}),a.setValue(h.value)):console.error('No input element found. Please make sure that the "inputRef" template ref is properly assigned.')}else a=null}),{inputRef:l,numberValue:d,formattedValue:c,setValue:y=>a==null?void 0:a.setValue(y),setOptions:y=>a==null?void 0:a.setOptions(y)}}const Cw=["min","step","placeholder","disabled","required","readonly","autocomplete"],_w=f.defineComponent({__name:"FormCurrency",props:{leadingIcon:{},trailingIcon:{},labelInfo:{},state:{type:Boolean,default:void 0},invalidFeedback:{},loading:{type:Boolean},last:{type:Boolean},float:{type:Boolean},modelValue:{},label:{},placeholder:{default:"0.00"},size:{},id:{},autocomplete:{},min:{},max:{default:999999.99},step:{},autofocus:{type:Boolean},disabled:{type:Boolean},required:{type:Boolean},readonly:{type:Boolean},options:{}},emits:["update:modelValue","change"],setup(o,{emit:e}){const t=e,i=o,s=f.ref(i.autofocus??!1),n=f.computed(()=>["form-control",i.state===!0?"-valid":i.state===!1?"-invalid":""]),a={...i.options,locale:"pt-BR",currency:"BRL",currencyDisplay:Wi.symbol,hideCurrencySymbolOnFocus:!1,hideGroupingSeparatorOnFocus:!1,hideNegligibleDecimalDigitsOnFocus:!1,autoDecimalDigits:!0,autoSign:!0,useGrouping:!0,accountingSign:!1,valueRange:{min:i.min,max:i.max}},{inputRef:l,setValue:c}=Sw(a);return f.watch(()=>i.modelValue,d=>{d!==null&&c(parseFloat(d))},{immediate:!0}),f.watch(()=>s.value,d=>{d&&t("change",d)},{immediate:!0}),(d,p)=>(f.openBlock(),f.createBlock(jn,{id:d.id,leadingIcon:d.leadingIcon,trailingIcon:d.trailingIcon,label:d.label,loading:d.loading,last:d.last,disabled:d.disabled,labelInfo:d.labelInfo,float:d.float,state:d.state,size:d.size,invalidFeedback:d.invalidFeedback},{default:f.withCtx(()=>[f.createElementVNode("input",{min:d.min,step:d.step,ref_key:"inputRef",ref:l,class:f.normalizeClass(n.value),placeholder:d.float?"":d.placeholder,onFocus:p[0]||(p[0]=g=>s.value=!0),onBlur:p[1]||(p[1]=g=>s.value=!1),disabled:d.disabled,required:d.required,readonly:d.readonly,autocomplete:d.autocomplete},null,42,Cw)]),_:1},8,["id","leadingIcon","trailingIcon","label","loading","last","disabled","labelInfo","float","state","size","invalidFeedback"]))}}),pH="",Tw=f.defineComponent({__name:"Divider",props:{height:{default:"2px"},margin:{},transparent:{type:Boolean}},setup(o){const e=o,t=f.computed(()=>{let s=[];return e.transparent&&s.push("-transparent"),s}),i=f.computed(()=>{let s={};return e.margin&&(s.marginBottom=e.margin,s.marginTop=e.margin),e.height&&(s.height=e.height),s});return(s,n)=>(f.openBlock(),f.createElementBlock("hr",{class:f.normalizeClass(["ui-divider",t.value]),style:f.normalizeStyle(i.value)},null,6))}});var Aw=typeof global=="object"&&global&&global.Object===Object&&global;const pu=Aw;var Ew=typeof self=="object"&&self&&self.Object===Object&&self,$w=pu||Ew||Function("return this")();const oi=$w;var Pw=oi.Symbol;const Bt=Pw;var gu=Object.prototype,Lw=gu.hasOwnProperty,Nw=gu.toString,Zn=Bt?Bt.toStringTag:void 0;function Dw(o){var e=Lw.call(o,Zn),t=o[Zn];try{o[Zn]=void 0;var i=!0}catch{}var s=Nw.call(o);return i&&(e?o[Zn]=t:delete o[Zn]),s}var Mw=Object.prototype,Rw=Mw.toString;function Iw(o){return Rw.call(o)}var Bw="[object Null]",Qw="[object Undefined]",mu=Bt?Bt.toStringTag:void 0;function zi(o){return o==null?o===void 0?Qw:Bw:mu&&mu in Object(o)?Dw(o):Iw(o)}function qt(o){return o!=null&&typeof o=="object"}var Vw="[object Symbol]";function fo(o){return typeof o=="symbol"||qt(o)&&zi(o)==Vw}function bu(o,e){for(var t=-1,i=o==null?0:o.length,s=Array(i);++t<i;)s[t]=e(o[t],t,o);return s}var Fw=Array.isArray;const rt=Fw;var Ww=1/0,yu=Bt?Bt.prototype:void 0,Ou=yu?yu.toString:void 0;function xu(o){if(typeof o=="string")return o;if(rt(o))return bu(o,xu)+"";if(fo(o))return Ou?Ou.call(o):"";var e=o+"";return e=="0"&&1/o==-Ww?"-0":e}var zw=/\s/;function Xw(o){for(var e=o.length;e--&&zw.test(o.charAt(e)););return e}var Yw=/^\s+/;function Hw(o){return o&&o.slice(0,Xw(o)+1).replace(Yw,"")}function At(o){var e=typeof o;return o!=null&&(e=="object"||e=="function")}var vu=0/0,Gw=/^[-+]0x[0-9a-f]+$/i,jw=/^0b[01]+$/i,Uw=/^0o[0-7]+$/i,Zw=parseInt;function qw(o){if(typeof o=="number")return o;if(fo(o))return vu;if(At(o)){var e=typeof o.valueOf=="function"?o.valueOf():o;o=At(e)?e+"":e}if(typeof o!="string")return o===0?o:+o;o=Hw(o);var t=jw.test(o);return t||Uw.test(o)?Zw(o.slice(2),t?2:8):Gw.test(o)?vu:+o}var wu=1/0,Kw=17976931348623157e292;function Jw(o){if(!o)return o===0?o:0;if(o=qw(o),o===wu||o===-wu){var e=o<0?-1:1;return e*Kw}return o===o?o:0}function ku(o){var e=Jw(o),t=e%1;return e===e?t?e-t:e:0}function po(o){return o}var ek="[object AsyncFunction]",tk="[object Function]",ik="[object GeneratorFunction]",sk="[object Proxy]";function qn(o){if(!At(o))return!1;var e=zi(o);return e==tk||e==ik||e==ek||e==sk}var nk=oi["__core-js_shared__"];const _l=nk;var Su=function(){var o=/[^.]+$/.exec(_l&&_l.keys&&_l.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}();function rk(o){return!!Su&&Su in o}var ok=Function.prototype,ak=ok.toString;function ys(o){if(o!=null){try{return ak.call(o)}catch{}try{return o+""}catch{}}return""}var lk=/[\\^$.*+?()[\]{}|]/g,ck=/^\[object .+?Constructor\]$/,hk=Function.prototype,dk=Object.prototype,uk=hk.toString,fk=dk.hasOwnProperty,pk=RegExp("^"+uk.call(fk).replace(lk,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gk(o){if(!At(o)||rk(o))return!1;var e=qn(o)?pk:ck;return e.test(ys(o))}function mk(o,e){return o==null?void 0:o[e]}function Os(o,e){var t=mk(o,e);return gk(t)?t:void 0}var bk=Os(oi,"WeakMap");const Tl=bk;var Cu=Object.create,yk=function(){function o(){}return function(e){if(!At(e))return{};if(Cu)return Cu(e);o.prototype=e;var t=new o;return o.prototype=void 0,t}}();const Ok=yk;function xk(o,e,t){switch(t.length){case 0:return o.call(e);case 1:return o.call(e,t[0]);case 2:return o.call(e,t[0],t[1]);case 3:return o.call(e,t[0],t[1],t[2])}return o.apply(e,t)}function vk(){}function _u(o,e){var t=-1,i=o.length;for(e||(e=Array(i));++t<i;)e[t]=o[t];return e}var wk=800,kk=16,Sk=Date.now;function Ck(o){var e=0,t=0;return function(){var i=Sk(),s=kk-(i-t);if(t=i,s>0){if(++e>=wk)return arguments[0]}else e=0;return o.apply(void 0,arguments)}}function _k(o){return function(){return o}}var Tk=function(){try{var o=Os(Object,"defineProperty");return o({},"",{}),o}catch{}}();const go=Tk;var Ak=go?function(o,e){return go(o,"toString",{configurable:!0,enumerable:!1,value:_k(e),writable:!0})}:po,Ek=Ck(Ak);const Tu=Ek;function Au(o,e){for(var t=-1,i=o==null?0:o.length;++t<i&&e(o[t],t,o)!==!1;);return o}function Eu(o,e,t,i){for(var s=o.length,n=t+(i?1:-1);i?n--:++n<s;)if(e(o[n],n,o))return n;return-1}function $k(o){return o!==o}function Pk(o,e,t){for(var i=t-1,s=o.length;++i<s;)if(o[i]===e)return i;return-1}function $u(o,e,t){return e===e?Pk(o,e,t):Eu(o,$k,t)}function Lk(o,e){var t=o==null?0:o.length;return!!t&&$u(o,e,0)>-1}var Nk=9007199254740991,Dk=/^(?:0|[1-9]\d*)$/;function Al(o,e){var t=typeof o;return e=e??Nk,!!e&&(t=="number"||t!="symbol"&&Dk.test(o))&&o>-1&&o%1==0&&o<e}function Pu(o,e,t){e=="__proto__"&&go?go(o,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):o[e]=t}function El(o,e){return o===e||o!==o&&e!==e}var Mk=Object.prototype,Rk=Mk.hasOwnProperty;function $l(o,e,t){var i=o[e];(!(Rk.call(o,e)&&El(i,t))||t===void 0&&!(e in o))&&Pu(o,e,t)}function Kn(o,e,t,i){var s=!t;t||(t={});for(var n=-1,a=e.length;++n<a;){var l=e[n],c=i?i(t[l],o[l],l,t,o):void 0;c===void 0&&(c=o[l]),s?Pu(t,l,c):$l(t,l,c)}return t}var Lu=Math.max;function Nu(o,e,t){return e=Lu(e===void 0?o.length-1:e,0),function(){for(var i=arguments,s=-1,n=Lu(i.length-e,0),a=Array(n);++s<n;)a[s]=i[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=i[s];return l[e]=t(a),xk(o,this,l)}}function Ik(o,e){return Tu(Nu(o,e,po),o+"")}var Bk=9007199254740991;function Pl(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Bk}function Jn(o){return o!=null&&Pl(o.length)&&!qn(o)}var Qk=Object.prototype;function Ll(o){var e=o&&o.constructor,t=typeof e=="function"&&e.prototype||Qk;return o===t}function Vk(o,e){for(var t=-1,i=Array(o);++t<o;)i[t]=e(t);return i}var Fk="[object Arguments]";function Du(o){return qt(o)&&zi(o)==Fk}var Mu=Object.prototype,Wk=Mu.hasOwnProperty,zk=Mu.propertyIsEnumerable,Xk=Du(function(){return arguments}())?Du:function(o){return qt(o)&&Wk.call(o,"callee")&&!zk.call(o,"callee")};const Nl=Xk;function Yk(){return!1}var Ru=typeof W=="object"&&W&&!W.nodeType&&W,Iu=Ru&&typeof module=="object"&&module&&!module.nodeType&&module,Hk=Iu&&Iu.exports===Ru,Bu=Hk?oi.Buffer:void 0,Gk=Bu?Bu.isBuffer:void 0,jk=Gk||Yk;const mo=jk;var Uk="[object Arguments]",Zk="[object Array]",qk="[object Boolean]",Kk="[object Date]",Jk="[object Error]",eS="[object Function]",tS="[object Map]",iS="[object Number]",sS="[object Object]",nS="[object RegExp]",rS="[object Set]",oS="[object String]",aS="[object WeakMap]",lS="[object ArrayBuffer]",cS="[object DataView]",hS="[object Float32Array]",dS="[object Float64Array]",uS="[object Int8Array]",fS="[object Int16Array]",pS="[object Int32Array]",gS="[object Uint8Array]",mS="[object Uint8ClampedArray]",bS="[object Uint16Array]",yS="[object Uint32Array]",Pe={};Pe[hS]=Pe[dS]=Pe[uS]=Pe[fS]=Pe[pS]=Pe[gS]=Pe[mS]=Pe[bS]=Pe[yS]=!0,Pe[Uk]=Pe[Zk]=Pe[lS]=Pe[qk]=Pe[cS]=Pe[Kk]=Pe[Jk]=Pe[eS]=Pe[tS]=Pe[iS]=Pe[sS]=Pe[nS]=Pe[rS]=Pe[oS]=Pe[aS]=!1;function OS(o){return qt(o)&&Pl(o.length)&&!!Pe[zi(o)]}function Dl(o){return function(e){return o(e)}}var Qu=typeof W=="object"&&W&&!W.nodeType&&W,er=Qu&&typeof module=="object"&&module&&!module.nodeType&&module,xS=er&&er.exports===Qu,Ml=xS&&pu.process,vS=function(){try{var o=er&&er.require&&er.require("util").types;return o||Ml&&Ml.binding&&Ml.binding("util")}catch{}}();const Hs=vS;var Vu=Hs&&Hs.isTypedArray,wS=Vu?Dl(Vu):OS;const Fu=wS;var kS=Object.prototype,SS=kS.hasOwnProperty;function Wu(o,e){var t=rt(o),i=!t&&Nl(o),s=!t&&!i&&mo(o),n=!t&&!i&&!s&&Fu(o),a=t||i||s||n,l=a?Vk(o.length,String):[],c=l.length;for(var d in o)(e||SS.call(o,d))&&!(a&&(d=="length"||s&&(d=="offset"||d=="parent")||n&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Al(d,c)))&&l.push(d);return l}function zu(o,e){return function(t){return o(e(t))}}var CS=zu(Object.keys,Object);const _S=CS;var TS=Object.prototype,AS=TS.hasOwnProperty;function ES(o){if(!Ll(o))return _S(o);var e=[];for(var t in Object(o))AS.call(o,t)&&t!="constructor"&&e.push(t);return e}function Xi(o){return Jn(o)?Wu(o):ES(o)}function $S(o){var e=[];if(o!=null)for(var t in Object(o))e.push(t);return e}var PS=Object.prototype,LS=PS.hasOwnProperty;function NS(o){if(!At(o))return $S(o);var e=Ll(o),t=[];for(var i in o)i=="constructor"&&(e||!LS.call(o,i))||t.push(i);return t}function Rl(o){return Jn(o)?Wu(o,!0):NS(o)}var DS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,MS=/^\w*$/;function Il(o,e){if(rt(o))return!1;var t=typeof o;return t=="number"||t=="symbol"||t=="boolean"||o==null||fo(o)?!0:MS.test(o)||!DS.test(o)||e!=null&&o in Object(e)}var RS=Os(Object,"create");const tr=RS;function IS(){this.__data__=tr?tr(null):{},this.size=0}function BS(o){var e=this.has(o)&&delete this.__data__[o];return this.size-=e?1:0,e}var QS="__lodash_hash_undefined__",VS=Object.prototype,FS=VS.hasOwnProperty;function WS(o){var e=this.__data__;if(tr){var t=e[o];return t===QS?void 0:t}return FS.call(e,o)?e[o]:void 0}var zS=Object.prototype,XS=zS.hasOwnProperty;function YS(o){var e=this.__data__;return tr?e[o]!==void 0:XS.call(e,o)}var HS="__lodash_hash_undefined__";function GS(o,e){var t=this.__data__;return this.size+=this.has(o)?0:1,t[o]=tr&&e===void 0?HS:e,this}function xs(o){var e=-1,t=o==null?0:o.length;for(this.clear();++e<t;){var i=o[e];this.set(i[0],i[1])}}xs.prototype.clear=IS,xs.prototype.delete=BS,xs.prototype.get=WS,xs.prototype.has=YS,xs.prototype.set=GS;function jS(){this.__data__=[],this.size=0}function bo(o,e){for(var t=o.length;t--;)if(El(o[t][0],e))return t;return-1}var US=Array.prototype,ZS=US.splice;function qS(o){var e=this.__data__,t=bo(e,o);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():ZS.call(e,t,1),--this.size,!0}function KS(o){var e=this.__data__,t=bo(e,o);return t<0?void 0:e[t][1]}function JS(o){return bo(this.__data__,o)>-1}function e1(o,e){var t=this.__data__,i=bo(t,o);return i<0?(++this.size,t.push([o,e])):t[i][1]=e,this}function Si(o){var e=-1,t=o==null?0:o.length;for(this.clear();++e<t;){var i=o[e];this.set(i[0],i[1])}}Si.prototype.clear=jS,Si.prototype.delete=qS,Si.prototype.get=KS,Si.prototype.has=JS,Si.prototype.set=e1;var t1=Os(oi,"Map");const ir=t1;function i1(){this.size=0,this.__data__={hash:new xs,map:new(ir||Si),string:new xs}}function s1(o){var e=typeof o;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?o!=="__proto__":o===null}function yo(o,e){var t=o.__data__;return s1(e)?t[typeof e=="string"?"string":"hash"]:t.map}function n1(o){var e=yo(this,o).delete(o);return this.size-=e?1:0,e}function r1(o){return yo(this,o).get(o)}function o1(o){return yo(this,o).has(o)}function a1(o,e){var t=yo(this,o),i=t.size;return t.set(o,e),this.size+=t.size==i?0:1,this}function Ci(o){var e=-1,t=o==null?0:o.length;for(this.clear();++e<t;){var i=o[e];this.set(i[0],i[1])}}Ci.prototype.clear=i1,Ci.prototype.delete=n1,Ci.prototype.get=r1,Ci.prototype.has=o1,Ci.prototype.set=a1;var l1="Expected a function";function Bl(o,e){if(typeof o!="function"||e!=null&&typeof e!="function")throw new TypeError(l1);var t=function(){var i=arguments,s=e?e.apply(this,i):i[0],n=t.cache;if(n.has(s))return n.get(s);var a=o.apply(this,i);return t.cache=n.set(s,a)||n,a};return t.cache=new(Bl.Cache||Ci),t}Bl.Cache=Ci;var c1=500;function h1(o){var e=Bl(o,function(i){return t.size===c1&&t.clear(),i}),t=e.cache;return e}var d1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u1=/\\(\\)?/g,f1=h1(function(o){var e=[];return o.charCodeAt(0)===46&&e.push(""),o.replace(d1,function(t,i,s,n){e.push(s?n.replace(u1,"$1"):i||t)}),e});const p1=f1;function g1(o){return o==null?"":xu(o)}function Gs(o,e){return rt(o)?o:Il(o,e)?[o]:p1(g1(o))}var m1=1/0;function js(o){if(typeof o=="string"||fo(o))return o;var e=o+"";return e=="0"&&1/o==-m1?"-0":e}function Oo(o,e){e=Gs(e,o);for(var t=0,i=e.length;o!=null&&t<i;)o=o[js(e[t++])];return t&&t==i?o:void 0}function b1(o,e,t){var i=o==null?void 0:Oo(o,e);return i===void 0?t:i}function xo(o,e){for(var t=-1,i=e.length,s=o.length;++t<i;)o[s+t]=e[t];return o}var Xu=Bt?Bt.isConcatSpreadable:void 0;function y1(o){return rt(o)||Nl(o)||!!(Xu&&o&&o[Xu])}function vo(o,e,t,i,s){var n=-1,a=o.length;for(t||(t=y1),s||(s=[]);++n<a;){var l=o[n];e>0&&t(l)?e>1?vo(l,e-1,t,i,s):xo(s,l):i||(s[s.length]=l)}return s}function O1(o){var e=o==null?0:o.length;return e?vo(o,1):[]}function Yu(o){return Tu(Nu(o,void 0,O1),o+"")}var x1=zu(Object.getPrototypeOf,Object);const Ql=x1;var v1="[object Object]",w1=Function.prototype,k1=Object.prototype,Hu=w1.toString,S1=k1.hasOwnProperty,C1=Hu.call(Object);function _1(o){if(!qt(o)||zi(o)!=v1)return!1;var e=Ql(o);if(e===null)return!0;var t=S1.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Hu.call(t)==C1}function T1(o,e,t){var i=-1,s=o.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var n=Array(s);++i<s;)n[i]=o[i+e];return n}function A1(){this.__data__=new Si,this.size=0}function E1(o){var e=this.__data__,t=e.delete(o);return this.size=e.size,t}function $1(o){return this.__data__.get(o)}function P1(o){return this.__data__.has(o)}var L1=200;function N1(o,e){var t=this.__data__;if(t instanceof Si){var i=t.__data__;if(!ir||i.length<L1-1)return i.push([o,e]),this.size=++t.size,this;t=this.__data__=new Ci(i)}return t.set(o,e),this.size=t.size,this}function ai(o){var e=this.__data__=new Si(o);this.size=e.size}ai.prototype.clear=A1,ai.prototype.delete=E1,ai.prototype.get=$1,ai.prototype.has=P1,ai.prototype.set=N1;function D1(o,e){return o&&Kn(e,Xi(e),o)}function M1(o,e){return o&&Kn(e,Rl(e),o)}var Gu=typeof W=="object"&&W&&!W.nodeType&&W,ju=Gu&&typeof module=="object"&&module&&!module.nodeType&&module,R1=ju&&ju.exports===Gu,Uu=R1?oi.Buffer:void 0,Zu=Uu?Uu.allocUnsafe:void 0;function I1(o,e){if(e)return o.slice();var t=o.length,i=Zu?Zu(t):new o.constructor(t);return o.copy(i),i}function B1(o,e){for(var t=-1,i=o==null?0:o.length,s=0,n=[];++t<i;){var a=o[t];e(a,t,o)&&(n[s++]=a)}return n}function qu(){return[]}var Q1=Object.prototype,V1=Q1.propertyIsEnumerable,Ku=Object.getOwnPropertySymbols,F1=Ku?function(o){return o==null?[]:(o=Object(o),B1(Ku(o),function(e){return V1.call(o,e)}))}:qu;const Vl=F1;function W1(o,e){return Kn(o,Vl(o),e)}var z1=Object.getOwnPropertySymbols,X1=z1?function(o){for(var e=[];o;)xo(e,Vl(o)),o=Ql(o);return e}:qu;const Ju=X1;function Y1(o,e){return Kn(o,Ju(o),e)}function ef(o,e,t){var i=e(o);return rt(o)?i:xo(i,t(o))}function Fl(o){return ef(o,Xi,Vl)}function tf(o){return ef(o,Rl,Ju)}var H1=Os(oi,"DataView");const Wl=H1;var G1=Os(oi,"Promise");const zl=G1;var j1=Os(oi,"Set");const Us=j1;var sf="[object Map]",U1="[object Object]",nf="[object Promise]",rf="[object Set]",of="[object WeakMap]",af="[object DataView]",Z1=ys(Wl),q1=ys(ir),K1=ys(zl),J1=ys(Us),eC=ys(Tl),vs=zi;(Wl&&vs(new Wl(new ArrayBuffer(1)))!=af||ir&&vs(new ir)!=sf||zl&&vs(zl.resolve())!=nf||Us&&vs(new Us)!=rf||Tl&&vs(new Tl)!=of)&&(vs=function(o){var e=zi(o),t=e==U1?o.constructor:void 0,i=t?ys(t):"";if(i)switch(i){case Z1:return af;case q1:return sf;case K1:return nf;case J1:return rf;case eC:return of}return e});const sr=vs;var tC=Object.prototype,iC=tC.hasOwnProperty;function sC(o){var e=o.length,t=new o.constructor(e);return e&&typeof o[0]=="string"&&iC.call(o,"index")&&(t.index=o.index,t.input=o.input),t}var nC=oi.Uint8Array;const wo=nC;function Xl(o){var e=new o.constructor(o.byteLength);return new wo(e).set(new wo(o)),e}function rC(o,e){var t=e?Xl(o.buffer):o.buffer;return new o.constructor(t,o.byteOffset,o.byteLength)}var oC=/\w*$/;function aC(o){var e=new o.constructor(o.source,oC.exec(o));return e.lastIndex=o.lastIndex,e}var lf=Bt?Bt.prototype:void 0,cf=lf?lf.valueOf:void 0;function lC(o){return cf?Object(cf.call(o)):{}}function cC(o,e){var t=e?Xl(o.buffer):o.buffer;return new o.constructor(t,o.byteOffset,o.length)}var hC="[object Boolean]",dC="[object Date]",uC="[object Map]",fC="[object Number]",pC="[object RegExp]",gC="[object Set]",mC="[object String]",bC="[object Symbol]",yC="[object ArrayBuffer]",OC="[object DataView]",xC="[object Float32Array]",vC="[object Float64Array]",wC="[object Int8Array]",kC="[object Int16Array]",SC="[object Int32Array]",CC="[object Uint8Array]",_C="[object Uint8ClampedArray]",TC="[object Uint16Array]",AC="[object Uint32Array]";function EC(o,e,t){var i=o.constructor;switch(e){case yC:return Xl(o);case hC:case dC:return new i(+o);case OC:return rC(o,t);case xC:case vC:case wC:case kC:case SC:case CC:case _C:case TC:case AC:return cC(o,t);case uC:return new i;case fC:case mC:return new i(o);case pC:return aC(o);case gC:return new i;case bC:return lC(o)}}function $C(o){return typeof o.constructor=="function"&&!Ll(o)?Ok(Ql(o)):{}}var PC="[object Map]";function LC(o){return qt(o)&&sr(o)==PC}var hf=Hs&&Hs.isMap,NC=hf?Dl(hf):LC;const DC=NC;var MC="[object Set]";function RC(o){return qt(o)&&sr(o)==MC}var df=Hs&&Hs.isSet,IC=df?Dl(df):RC;const BC=IC;var QC=1,VC=2,FC=4,uf="[object Arguments]",WC="[object Array]",zC="[object Boolean]",XC="[object Date]",YC="[object Error]",ff="[object Function]",HC="[object GeneratorFunction]",GC="[object Map]",jC="[object Number]",pf="[object Object]",UC="[object RegExp]",ZC="[object Set]",qC="[object String]",KC="[object Symbol]",JC="[object WeakMap]",e_="[object ArrayBuffer]",t_="[object DataView]",i_="[object Float32Array]",s_="[object Float64Array]",n_="[object Int8Array]",r_="[object Int16Array]",o_="[object Int32Array]",a_="[object Uint8Array]",l_="[object Uint8ClampedArray]",c_="[object Uint16Array]",h_="[object Uint32Array]",Ee={};Ee[uf]=Ee[WC]=Ee[e_]=Ee[t_]=Ee[zC]=Ee[XC]=Ee[i_]=Ee[s_]=Ee[n_]=Ee[r_]=Ee[o_]=Ee[GC]=Ee[jC]=Ee[pf]=Ee[UC]=Ee[ZC]=Ee[qC]=Ee[KC]=Ee[a_]=Ee[l_]=Ee[c_]=Ee[h_]=!0,Ee[YC]=Ee[ff]=Ee[JC]=!1;function Zs(o,e,t,i,s,n){var a,l=e&QC,c=e&VC,d=e&FC;if(t&&(a=s?t(o,i,s,n):t(o)),a!==void 0)return a;if(!At(o))return o;var p=rt(o);if(p){if(a=sC(o),!l)return _u(o,a)}else{var g=sr(o),b=g==ff||g==HC;if(mo(o))return I1(o,l);if(g==pf||g==uf||b&&!s){if(a=c||b?{}:$C(o),!l)return c?Y1(o,M1(a,o)):W1(o,D1(a,o))}else{if(!Ee[g])return s?o:{};a=EC(o,g,l)}}n||(n=new ai);var O=n.get(o);if(O)return O;n.set(o,a),BC(o)?o.forEach(function(u){a.add(Zs(u,e,t,u,o,n))}):DC(o)&&o.forEach(function(u,m){a.set(m,Zs(u,e,t,m,o,n))});var r=d?c?tf:Fl:c?Rl:Xi,h=p?void 0:r(o);return Au(h||o,function(u,m){h&&(m=u,u=o[m]),$l(a,m,Zs(u,e,t,m,o,n))}),a}var d_=4;function qs(o){return Zs(o,d_)}var u_=1,f_=4;function Ks(o){return Zs(o,u_|f_)}function p_(){var o=arguments.length;if(!o)return[];for(var e=Array(o-1),t=arguments[0],i=o;i--;)e[i-1]=arguments[i];return xo(rt(t)?_u(t):[t],vo(e,1))}var g_="__lodash_hash_undefined__";function m_(o){return this.__data__.set(o,g_),this}function b_(o){return this.__data__.has(o)}function nr(o){var e=-1,t=o==null?0:o.length;for(this.__data__=new Ci;++e<t;)this.add(o[e])}nr.prototype.add=nr.prototype.push=m_,nr.prototype.has=b_;function y_(o,e){for(var t=-1,i=o==null?0:o.length;++t<i;)if(e(o[t],t,o))return!0;return!1}function gf(o,e){return o.has(e)}var O_=1,x_=2;function mf(o,e,t,i,s,n){var a=t&O_,l=o.length,c=e.length;if(l!=c&&!(a&&c>l))return!1;var d=n.get(o),p=n.get(e);if(d&&p)return d==e&&p==o;var g=-1,b=!0,O=t&x_?new nr:void 0;for(n.set(o,e),n.set(e,o);++g<l;){var r=o[g],h=e[g];if(i)var u=a?i(h,r,g,e,o,n):i(r,h,g,o,e,n);if(u!==void 0){if(u)continue;b=!1;break}if(O){if(!y_(e,function(m,y){if(!gf(O,y)&&(r===m||s(r,m,t,i,n)))return O.push(y)})){b=!1;break}}else if(!(r===h||s(r,h,t,i,n))){b=!1;break}}return n.delete(o),n.delete(e),b}function v_(o){var e=-1,t=Array(o.size);return o.forEach(function(i,s){t[++e]=[s,i]}),t}function Yl(o){var e=-1,t=Array(o.size);return o.forEach(function(i){t[++e]=i}),t}var w_=1,k_=2,S_="[object Boolean]",C_="[object Date]",__="[object Error]",T_="[object Map]",A_="[object Number]",E_="[object RegExp]",$_="[object Set]",P_="[object String]",L_="[object Symbol]",N_="[object ArrayBuffer]",D_="[object DataView]",bf=Bt?Bt.prototype:void 0,Hl=bf?bf.valueOf:void 0;function M_(o,e,t,i,s,n,a){switch(t){case D_:if(o.byteLength!=e.byteLength||o.byteOffset!=e.byteOffset)return!1;o=o.buffer,e=e.buffer;case N_:return!(o.byteLength!=e.byteLength||!n(new wo(o),new wo(e)));case S_:case C_:case A_:return El(+o,+e);case __:return o.name==e.name&&o.message==e.message;case E_:case P_:return o==e+"";case T_:var l=v_;case $_:var c=i&w_;if(l||(l=Yl),o.size!=e.size&&!c)return!1;var d=a.get(o);if(d)return d==e;i|=k_,a.set(o,e);var p=mf(l(o),l(e),i,s,n,a);return a.delete(o),p;case L_:if(Hl)return Hl.call(o)==Hl.call(e)}return!1}var R_=1,I_=Object.prototype,B_=I_.hasOwnProperty;function Q_(o,e,t,i,s,n){var a=t&R_,l=Fl(o),c=l.length,d=Fl(e),p=d.length;if(c!=p&&!a)return!1;for(var g=c;g--;){var b=l[g];if(!(a?b in e:B_.call(e,b)))return!1}var O=n.get(o),r=n.get(e);if(O&&r)return O==e&&r==o;var h=!0;n.set(o,e),n.set(e,o);for(var u=a;++g<c;){b=l[g];var m=o[b],y=e[b];if(i)var v=a?i(y,m,b,e,o,n):i(m,y,b,o,e,n);if(!(v===void 0?m===y||s(m,y,t,i,n):v)){h=!1;break}u||(u=b=="constructor")}if(h&&!u){var w=o.constructor,S=e.constructor;w!=S&&"constructor"in o&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof S=="function"&&S instanceof S)&&(h=!1)}return n.delete(o),n.delete(e),h}var V_=1,yf="[object Arguments]",Of="[object Array]",ko="[object Object]",F_=Object.prototype,xf=F_.hasOwnProperty;function W_(o,e,t,i,s,n){var a=rt(o),l=rt(e),c=a?Of:sr(o),d=l?Of:sr(e);c=c==yf?ko:c,d=d==yf?ko:d;var p=c==ko,g=d==ko,b=c==d;if(b&&mo(o)){if(!mo(e))return!1;a=!0,p=!1}if(b&&!p)return n||(n=new ai),a||Fu(o)?mf(o,e,t,i,s,n):M_(o,e,c,t,i,s,n);if(!(t&V_)){var O=p&&xf.call(o,"__wrapped__"),r=g&&xf.call(e,"__wrapped__");if(O||r){var h=O?o.value():o,u=r?e.value():e;return n||(n=new ai),s(h,u,t,i,n)}}return b?(n||(n=new ai),Q_(o,e,t,i,s,n)):!1}function So(o,e,t,i,s){return o===e?!0:o==null||e==null||!qt(o)&&!qt(e)?o!==o&&e!==e:W_(o,e,t,i,So,s)}var z_=1,X_=2;function Y_(o,e,t,i){var s=t.length,n=s,a=!i;if(o==null)return!n;for(o=Object(o);s--;){var l=t[s];if(a&&l[2]?l[1]!==o[l[0]]:!(l[0]in o))return!1}for(;++s<n;){l=t[s];var c=l[0],d=o[c],p=l[1];if(a&&l[2]){if(d===void 0&&!(c in o))return!1}else{var g=new ai;if(i)var b=i(d,p,c,o,e,g);if(!(b===void 0?So(p,d,z_|X_,i,g):b))return!1}}return!0}function vf(o){return o===o&&!At(o)}function H_(o){for(var e=Xi(o),t=e.length;t--;){var i=e[t],s=o[i];e[t]=[i,s,vf(s)]}return e}function wf(o,e){return function(t){return t==null?!1:t[o]===e&&(e!==void 0||o in Object(t))}}function G_(o){var e=H_(o);return e.length==1&&e[0][2]?wf(e[0][0],e[0][1]):function(t){return t===o||Y_(t,o,e)}}function j_(o,e){return o!=null&&e in Object(o)}function U_(o,e,t){e=Gs(e,o);for(var i=-1,s=e.length,n=!1;++i<s;){var a=js(e[i]);if(!(n=o!=null&&t(o,a)))break;o=o[a]}return n||++i!=s?n:(s=o==null?0:o.length,!!s&&Pl(s)&&Al(a,s)&&(rt(o)||Nl(o)))}function kf(o,e){return o!=null&&U_(o,e,j_)}var Z_=1,q_=2;function K_(o,e){return Il(o)&&vf(e)?wf(js(o),e):function(t){var i=b1(t,o);return i===void 0&&i===e?kf(t,o):So(e,i,Z_|q_)}}function J_(o){return function(e){return e==null?void 0:e[o]}}function eT(o){return function(e){return Oo(e,o)}}function tT(o){return Il(o)?J_(js(o)):eT(o)}function Sf(o){return typeof o=="function"?o:o==null?po:typeof o=="object"?rt(o)?K_(o[0],o[1]):G_(o):tT(o)}function iT(o){return function(e,t,i){for(var s=-1,n=Object(e),a=i(e),l=a.length;l--;){var c=a[o?l:++s];if(t(n[c],c,n)===!1)break}return e}}var sT=iT();const nT=sT;function rT(o,e){return o&&nT(o,e,Xi)}function oT(o,e){return function(t,i){if(t==null)return t;if(!Jn(t))return o(t,i);for(var s=t.length,n=e?s:-1,a=Object(t);(e?n--:++n<s)&&i(a[n],n,a)!==!1;);return t}}var aT=oT(rT);const lT=aT;function cT(o){return qt(o)&&Jn(o)}function hT(o,e,t){for(var i=-1,s=o==null?0:o.length;++i<s;)if(t(e,o[i]))return!0;return!1}function dT(o){var e=o==null?0:o.length;return e?o[e-1]:void 0}function uT(o){return typeof o=="function"?o:po}function Qt(o,e){var t=rt(o)?Au:lT;return t(o,uT(e))}function fT(o){return function(e,t,i){var s=Object(e);if(!Jn(e)){var n=Sf(t);e=Xi(e),t=function(l){return n(s[l],l,s)}}var a=o(e,t,i);return a>-1?s[n?e[a]:a]:void 0}}var pT=Math.max;function gT(o,e,t){var i=o==null?0:o.length;if(!i)return-1;var s=t==null?0:ku(t);return s<0&&(s=pT(i+s,0)),Eu(o,Sf(e),s)}var mT=fT(gT);const rr=mT;function bT(o){return o&&o.length?o[0]:void 0}var yT=Math.max;function Gl(o,e,t){var i=o==null?0:o.length;if(!i)return-1;var s=t==null?0:ku(t);return s<0&&(s=yT(i+s,0)),$u(o,e,s)}function OT(o,e){return e.length<2?o:Oo(o,T1(e,0,-1))}function xT(o,e){return So(o,e)}var vT="[object Number]";function wT(o){return typeof o=="number"||qt(o)&&zi(o)==vT}function kT(o,e){return e=Gs(e,o),o=OT(o,e),o==null||delete o[js(dT(e))]}function ST(o){return _1(o)?void 0:o}var CT=1,_T=2,TT=4,AT=Yu(function(o,e){var t={};if(o==null)return t;var i=!1;e=bu(e,function(n){return n=Gs(n,o),i||(i=n.length>1),n}),Kn(o,tf(o),t),i&&(t=Zs(t,CT|_T|TT,ST));for(var s=e.length;s--;)kT(t,e[s]);return t});const or=AT;function ET(o,e,t,i){if(!At(o))return o;e=Gs(e,o);for(var s=-1,n=e.length,a=n-1,l=o;l!=null&&++s<n;){var c=js(e[s]),d=t;if(c==="__proto__"||c==="constructor"||c==="prototype")return o;if(s!=a){var p=l[c];d=i?i(p,c,l):void 0,d===void 0&&(d=At(p)?p:Al(e[s+1])?[]:{})}$l(l,c,d),l=l[c]}return o}function $T(o,e,t){for(var i=-1,s=e.length,n={};++i<s;){var a=e[i],l=Oo(o,a);t(l,a)&&ET(n,Gs(a,o),l)}return n}function PT(o,e){return $T(o,e,function(t,i){return kf(o,i)})}var LT=Yu(function(o,e){return o==null?{}:PT(o,e)});const NT=LT;var DT=1/0,MT=Us&&1/Yl(new Us([,-0]))[1]==DT?function(o){return new Us(o)}:vk;const RT=MT;var IT=200;function BT(o,e,t){var i=-1,s=Lk,n=o.length,a=!0,l=[],c=l;if(t)a=!1,s=hT;else if(n>=IT){var d=e?null:RT(o);if(d)return Yl(d);a=!1,s=gf,c=new nr}else c=e?[]:l;e:for(;++i<n;){var p=o[i],g=e?e(p):p;if(p=t||p!==0?p:0,a&&g===g){for(var b=c.length;b--;)if(c[b]===g)continue e;e&&c.push(g),l.push(p)}else s(c,g,t)||(c!==l&&c.push(g),l.push(p))}return l}var QT=Ik(function(o){return BT(vo(o,1,cT,!0))});const VT=QT;var FT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function WT(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Cf={exports:{}};/*! choices.js v10.2.0 | © 2022 Josh Johnson | https://github.com/jshjohnson/Choices#readme */(function(o,e){(function(i,s){o.exports=s()})(window,function(){return function(){var t={282:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.clearChoices=l.activateChoices=l.filterChoices=l.addChoice=void 0;var d=c(883),p=function(r){var h=r.value,u=r.label,m=r.id,y=r.groupId,v=r.disabled,w=r.elementId,S=r.customProperties,C=r.placeholder,T=r.keyCode;return{type:d.ACTION_TYPES.ADD_CHOICE,value:h,label:u,id:m,groupId:y,disabled:v,elementId:w,customProperties:S,placeholder:C,keyCode:T}};l.addChoice=p;var g=function(r){return{type:d.ACTION_TYPES.FILTER_CHOICES,results:r}};l.filterChoices=g;var b=function(r){return r===void 0&&(r=!0),{type:d.ACTION_TYPES.ACTIVATE_CHOICES,active:r}};l.activateChoices=b;var O=function(){return{type:d.ACTION_TYPES.CLEAR_CHOICES}};l.clearChoices=O},783:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addGroup=void 0;var d=c(883),p=function(g){var b=g.value,O=g.id,r=g.active,h=g.disabled;return{type:d.ACTION_TYPES.ADD_GROUP,value:b,id:O,active:r,disabled:h}};l.addGroup=p},464:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.highlightItem=l.removeItem=l.addItem=void 0;var d=c(883),p=function(O){var r=O.value,h=O.label,u=O.id,m=O.choiceId,y=O.groupId,v=O.customProperties,w=O.placeholder,S=O.keyCode;return{type:d.ACTION_TYPES.ADD_ITEM,value:r,label:h,id:u,choiceId:m,groupId:y,customProperties:v,placeholder:w,keyCode:S}};l.addItem=p;var g=function(O,r){return{type:d.ACTION_TYPES.REMOVE_ITEM,id:O,choiceId:r}};l.removeItem=g;var b=function(O,r){return{type:d.ACTION_TYPES.HIGHLIGHT_ITEM,id:O,highlighted:r}};l.highlightItem=b},137:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.setIsLoading=l.resetTo=l.clearAll=void 0;var d=c(883),p=function(){return{type:d.ACTION_TYPES.CLEAR_ALL}};l.clearAll=p;var g=function(O){return{type:d.ACTION_TYPES.RESET_TO,state:O}};l.resetTo=g;var b=function(O){return{type:d.ACTION_TYPES.SET_IS_LOADING,isLoading:O}};l.setIsLoading=b},373:function(a,l,c){var d=this&&this.__spreadArray||function(P,E,x){if(x||arguments.length===2)for(var k=0,A=E.length,L;k<A;k++)(L||!(k in E))&&(L||(L=Array.prototype.slice.call(E,0,k)),L[k]=E[k]);return P.concat(L||Array.prototype.slice.call(E))},p=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(l,"__esModule",{value:!0});var g=p(c(996)),b=p(c(221)),O=c(282),r=c(783),h=c(464),u=c(137),m=c(520),y=c(883),v=c(789),w=c(799),S=c(655),C=p(c(744)),T=p(c(686)),_="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,$={},N=function(){function P(E,x){E===void 0&&(E="[data-choice]"),x===void 0&&(x={});var k=this;x.allowHTML===void 0&&console.warn("Deprecation warning: allowHTML will default to false in a future release. To render HTML in Choices, you will need to set it to true. Setting allowHTML will suppress this message."),this.config=g.default.all([v.DEFAULT_CONFIG,P.defaults.options,x],{arrayMerge:function(X,te){return d([],te,!0)}});var A=(0,w.diff)(this.config,v.DEFAULT_CONFIG);A.length&&console.warn("Unknown config option(s) passed",A.join(", "));var L=typeof E=="string"?document.querySelector(E):E;if(!(L instanceof HTMLInputElement||L instanceof HTMLSelectElement))throw TypeError("Expected one of the following types text|select-one|select-multiple");if(this._isTextElement=L.type===y.TEXT_TYPE,this._isSelectOneElement=L.type===y.SELECT_ONE_TYPE,this._isSelectMultipleElement=L.type===y.SELECT_MULTIPLE_TYPE,this._isSelectElement=this._isSelectOneElement||this._isSelectMultipleElement,this.config.searchEnabled=this._isSelectMultipleElement||this.config.searchEnabled,["auto","always"].includes("".concat(this.config.renderSelectedChoices))||(this.config.renderSelectedChoices="auto"),x.addItemFilter&&typeof x.addItemFilter!="function"){var D=x.addItemFilter instanceof RegExp?x.addItemFilter:new RegExp(x.addItemFilter);this.config.addItemFilter=D.test.bind(D)}if(this._isTextElement?this.passedElement=new m.WrappedInput({element:L,classNames:this.config.classNames,delimiter:this.config.delimiter}):this.passedElement=new m.WrappedSelect({element:L,classNames:this.config.classNames,template:function(X){return k._templates.option(X)}}),this.initialised=!1,this._store=new C.default,this._initialState=S.defaultState,this._currentState=S.defaultState,this._prevState=S.defaultState,this._currentValue="",this._canSearch=!!this.config.searchEnabled,this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=this._generatePlaceholderValue(),this._baseId=(0,w.generateId)(this.passedElement.element,"choices-"),this._direction=this.passedElement.dir,!this._direction){var M=window.getComputedStyle(this.passedElement.element).direction,Q=window.getComputedStyle(document.documentElement).direction;M!==Q&&(this._direction=M)}if(this._idNames={itemChoice:"item-choice"},this._isSelectElement&&(this._presetGroups=this.passedElement.optionGroups,this._presetOptions=this.passedElement.options),this._presetChoices=this.config.choices,this._presetItems=this.config.items,this.passedElement.value&&this._isTextElement){var B=this.passedElement.value.split(this.config.delimiter);this._presetItems=this._presetItems.concat(B)}if(this.passedElement.options&&this.passedElement.options.forEach(function(X){k._presetChoices.push({value:X.value,label:X.innerHTML,selected:!!X.selected,disabled:X.disabled||X.parentNode.disabled,placeholder:X.value===""||X.hasAttribute("placeholder"),customProperties:(0,w.parseCustomProperties)(X.dataset.customProperties)})}),this._render=this._render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this._onSelectKey=this._onSelectKey.bind(this),this._onEnterKey=this._onEnterKey.bind(this),this._onEscapeKey=this._onEscapeKey.bind(this),this._onDirectionKey=this._onDirectionKey.bind(this),this._onDeleteKey=this._onDeleteKey.bind(this),this.passedElement.isActive){this.config.silent||console.warn("Trying to initialise Choices on element already initialised",{element:E}),this.initialised=!0;return}this.init()}return Object.defineProperty(P,"defaults",{get:function(){return Object.preventExtensions({get options(){return $},get templates(){return T.default}})},enumerable:!1,configurable:!0}),P.prototype.init=function(){if(!this.initialised){this._createTemplates(),this._createElements(),this._createStructure(),this._store.subscribe(this._render),this._render(),this._addEventListeners();var E=!this.config.addItems||this.passedElement.element.hasAttribute("disabled");E&&this.disable(),this.initialised=!0;var x=this.config.callbackOnInit;x&&typeof x=="function"&&x.call(this)}},P.prototype.destroy=function(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this.clearStore(),this._isSelectElement&&(this.passedElement.options=this._presetOptions),this._templates=T.default,this.initialised=!1)},P.prototype.enable=function(){return this.passedElement.isDisabled&&this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this},P.prototype.disable=function(){return this.passedElement.isDisabled||this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this},P.prototype.highlightItem=function(E,x){if(x===void 0&&(x=!0),!E||!E.id)return this;var k=E.id,A=E.groupId,L=A===void 0?-1:A,D=E.value,M=D===void 0?"":D,Q=E.label,B=Q===void 0?"":Q,X=L>=0?this._store.getGroupById(L):null;return this._store.dispatch((0,h.highlightItem)(k,!0)),x&&this.passedElement.triggerEvent(y.EVENTS.highlightItem,{id:k,value:M,label:B,groupValue:X&&X.value?X.value:null}),this},P.prototype.unhighlightItem=function(E){if(!E||!E.id)return this;var x=E.id,k=E.groupId,A=k===void 0?-1:k,L=E.value,D=L===void 0?"":L,M=E.label,Q=M===void 0?"":M,B=A>=0?this._store.getGroupById(A):null;return this._store.dispatch((0,h.highlightItem)(x,!1)),this.passedElement.triggerEvent(y.EVENTS.highlightItem,{id:x,value:D,label:Q,groupValue:B&&B.value?B.value:null}),this},P.prototype.highlightAll=function(){var E=this;return this._store.items.forEach(function(x){return E.highlightItem(x)}),this},P.prototype.unhighlightAll=function(){var E=this;return this._store.items.forEach(function(x){return E.unhighlightItem(x)}),this},P.prototype.removeActiveItemsByValue=function(E){var x=this;return this._store.activeItems.filter(function(k){return k.value===E}).forEach(function(k){return x._removeItem(k)}),this},P.prototype.removeActiveItems=function(E){var x=this;return this._store.activeItems.filter(function(k){var A=k.id;return A!==E}).forEach(function(k){return x._removeItem(k)}),this},P.prototype.removeHighlightedItems=function(E){var x=this;return E===void 0&&(E=!1),this._store.highlightedActiveItems.forEach(function(k){x._removeItem(k),E&&x._triggerChange(k.value)}),this},P.prototype.showDropdown=function(E){var x=this;return this.dropdown.isActive?this:(requestAnimationFrame(function(){x.dropdown.show(),x.containerOuter.open(x.dropdown.distanceFromTopWindow),!E&&x._canSearch&&x.input.focus(),x.passedElement.triggerEvent(y.EVENTS.showDropdown,{})}),this)},P.prototype.hideDropdown=function(E){var x=this;return this.dropdown.isActive?(requestAnimationFrame(function(){x.dropdown.hide(),x.containerOuter.close(),!E&&x._canSearch&&(x.input.removeActiveDescendant(),x.input.blur()),x.passedElement.triggerEvent(y.EVENTS.hideDropdown,{})}),this):this},P.prototype.getValue=function(E){E===void 0&&(E=!1);var x=this._store.activeItems.reduce(function(k,A){var L=E?A.value:A;return k.push(L),k},[]);return this._isSelectOneElement?x[0]:x},P.prototype.setValue=function(E){var x=this;return this.initialised?(E.forEach(function(k){return x._setChoiceOrItem(k)}),this):this},P.prototype.setChoiceByValue=function(E){var x=this;if(!this.initialised||this._isTextElement)return this;var k=Array.isArray(E)?E:[E];return k.forEach(function(A){return x._findAndSelectChoiceByValue(A)}),this},P.prototype.setChoices=function(E,x,k,A){var L=this;if(E===void 0&&(E=[]),x===void 0&&(x="value"),k===void 0&&(k="label"),A===void 0&&(A=!1),!this.initialised)throw new ReferenceError("setChoices was called on a non-initialized instance of Choices");if(!this._isSelectElement)throw new TypeError("setChoices can't be used with INPUT based Choices");if(typeof x!="string"||!x)throw new TypeError("value parameter must be a name of 'value' field in passed objects");if(A&&this.clearChoices(),typeof E=="function"){var D=E(this);if(typeof Promise=="function"&&D instanceof Promise)return new Promise(function(M){return requestAnimationFrame(M)}).then(function(){return L._handleLoadingState(!0)}).then(function(){return D}).then(function(M){return L.setChoices(M,x,k,A)}).catch(function(M){L.config.silent||console.error(M)}).then(function(){return L._handleLoadingState(!1)}).then(function(){return L});if(!Array.isArray(D))throw new TypeError(".setChoices first argument function must return either array of choices or Promise, got: ".concat(typeof D));return this.setChoices(D,x,k,!1)}if(!Array.isArray(E))throw new TypeError(".setChoices must be called either with array of choices with a function resulting into Promise of array of choices");return this.containerOuter.removeLoadingState(),this._startLoading(),E.forEach(function(M){if(M.choices)L._addGroup({id:M.id?parseInt("".concat(M.id),10):null,group:M,valueKey:x,labelKey:k});else{var Q=M;L._addChoice({value:Q[x],label:Q[k],isSelected:!!Q.selected,isDisabled:!!Q.disabled,placeholder:!!Q.placeholder,customProperties:Q.customProperties})}}),this._stopLoading(),this},P.prototype.clearChoices=function(){return this._store.dispatch((0,O.clearChoices)()),this},P.prototype.clearStore=function(){return this._store.dispatch((0,u.clearAll)()),this},P.prototype.clearInput=function(){var E=!this._isSelectOneElement;return this.input.clear(E),!this._isTextElement&&this._canSearch&&(this._isSearching=!1,this._store.dispatch((0,O.activateChoices)(!0))),this},P.prototype._render=function(){if(!this._store.isLoading()){this._currentState=this._store.state;var E=this._currentState.choices!==this._prevState.choices||this._currentState.groups!==this._prevState.groups||this._currentState.items!==this._prevState.items,x=this._isSelectElement,k=this._currentState.items!==this._prevState.items;E&&(x&&this._renderChoices(),k&&this._renderItems(),this._prevState=this._currentState)}},P.prototype._renderChoices=function(){var E=this,x=this._store,k=x.activeGroups,A=x.activeChoices,L=document.createDocumentFragment();if(this.choiceList.clear(),this.config.resetScrollPosition&&requestAnimationFrame(function(){return E.choiceList.scrollToTop()}),k.length>=1&&!this._isSearching){var D=A.filter(function(te){return te.placeholder===!0&&te.groupId===-1});D.length>=1&&(L=this._createChoicesFragment(D,L)),L=this._createGroupsFragment(k,A,L)}else A.length>=1&&(L=this._createChoicesFragment(A,L));if(L.childNodes&&L.childNodes.length>0){var M=this._store.activeItems,Q=this._canAddItem(M,this.input.value);if(Q.response)this.choiceList.append(L),this._highlightChoice();else{var B=this._getTemplate("notice",Q.notice);this.choiceList.append(B)}}else{var X=void 0,B=void 0;this._isSearching?(B=typeof this.config.noResultsText=="function"?this.config.noResultsText():this.config.noResultsText,X=this._getTemplate("notice",B,"no-results")):(B=typeof this.config.noChoicesText=="function"?this.config.noChoicesText():this.config.noChoicesText,X=this._getTemplate("notice",B,"no-choices")),this.choiceList.append(X)}},P.prototype._renderItems=function(){var E=this._store.activeItems||[];this.itemList.clear();var x=this._createItemsFragment(E);x.childNodes&&this.itemList.append(x)},P.prototype._createGroupsFragment=function(E,x,k){var A=this;k===void 0&&(k=document.createDocumentFragment());var L=function(D){return x.filter(function(M){return A._isSelectOneElement?M.groupId===D.id:M.groupId===D.id&&(A.config.renderSelectedChoices==="always"||!M.selected)})};return this.config.shouldSort&&E.sort(this.config.sorter),E.forEach(function(D){var M=L(D);if(M.length>=1){var Q=A._getTemplate("choiceGroup",D);k.appendChild(Q),A._createChoicesFragment(M,k,!0)}}),k},P.prototype._createChoicesFragment=function(E,x,k){var A=this;x===void 0&&(x=document.createDocumentFragment()),k===void 0&&(k=!1);var L=this.config,D=L.renderSelectedChoices,M=L.searchResultLimit,Q=L.renderChoiceLimit,B=this._isSearching?w.sortByScore:this.config.sorter,X=function(Ge){var De=D==="auto"?A._isSelectOneElement||!Ge.selected:!0;if(De){var Mt=A._getTemplate("choice",Ge,A.config.itemSelectText);x.appendChild(Mt)}},te=E;D==="auto"&&!this._isSelectOneElement&&(te=E.filter(function(Ge){return!Ge.selected}));var he=te.reduce(function(Ge,De){return De.placeholder?Ge.placeholderChoices.push(De):Ge.normalChoices.push(De),Ge},{placeholderChoices:[],normalChoices:[]}),j=he.placeholderChoices,se=he.normalChoices;(this.config.shouldSort||this._isSearching)&&se.sort(B);var me=te.length,Oe=this._isSelectOneElement?d(d([],j,!0),se,!0):se;this._isSearching?me=M:Q&&Q>0&&!k&&(me=Q);for(var ke=0;ke<me;ke+=1)Oe[ke]&&X(Oe[ke]);return x},P.prototype._createItemsFragment=function(E,x){var k=this;x===void 0&&(x=document.createDocumentFragment());var A=this.config,L=A.shouldSortItems,D=A.sorter,M=A.removeItemButton;L&&!this._isSelectOneElement&&E.sort(D),this._isTextElement?this.passedElement.value=E.map(function(B){var X=B.value;return X}).join(this.config.delimiter):this.passedElement.options=E;var Q=function(B){var X=k._getTemplate("item",B,M);x.appendChild(X)};return E.forEach(Q),x},P.prototype._triggerChange=function(E){E!=null&&this.passedElement.triggerEvent(y.EVENTS.change,{value:E})},P.prototype._selectPlaceholderChoice=function(E){this._addItem({value:E.value,label:E.label,choiceId:E.id,groupId:E.groupId,placeholder:E.placeholder}),this._triggerChange(E.value)},P.prototype._handleButtonAction=function(E,x){if(!(!E||!x||!this.config.removeItems||!this.config.removeItemButton)){var k=x.parentNode&&x.parentNode.dataset.id,A=k&&E.find(function(L){return L.id===parseInt(k,10)});A&&(this._removeItem(A),this._triggerChange(A.value),this._isSelectOneElement&&this._store.placeholderChoice&&this._selectPlaceholderChoice(this._store.placeholderChoice))}},P.prototype._handleItemAction=function(E,x,k){var A=this;if(k===void 0&&(k=!1),!(!E||!x||!this.config.removeItems||this._isSelectOneElement)){var L=x.dataset.id;E.forEach(function(D){D.id===parseInt("".concat(L),10)&&!D.highlighted?A.highlightItem(D):!k&&D.highlighted&&A.unhighlightItem(D)}),this.input.focus()}},P.prototype._handleChoiceAction=function(E,x){if(!(!E||!x)){var k=x.dataset.id,A=k&&this._store.getChoiceById(k);if(A){var L=E[0]&&E[0].keyCode?E[0].keyCode:void 0,D=this.dropdown.isActive;if(A.keyCode=L,this.passedElement.triggerEvent(y.EVENTS.choice,{choice:A}),!A.selected&&!A.disabled){var M=this._canAddItem(E,A.value);M.response&&(this._addItem({value:A.value,label:A.label,choiceId:A.id,groupId:A.groupId,customProperties:A.customProperties,placeholder:A.placeholder,keyCode:A.keyCode}),this._triggerChange(A.value))}this.clearInput(),D&&this._isSelectOneElement&&(this.hideDropdown(!0),this.containerOuter.focus())}}},P.prototype._handleBackspace=function(E){if(!(!this.config.removeItems||!E)){var x=E[E.length-1],k=E.some(function(A){return A.highlighted});this.config.editItems&&!k&&x?(this.input.value=x.value,this.input.setWidth(),this._removeItem(x),this._triggerChange(x.value)):(k||this.highlightItem(x,!1),this.removeHighlightedItems(!0))}},P.prototype._startLoading=function(){this._store.dispatch((0,u.setIsLoading)(!0))},P.prototype._stopLoading=function(){this._store.dispatch((0,u.setIsLoading)(!1))},P.prototype._handleLoadingState=function(E){E===void 0&&(E=!0);var x=this.itemList.getChild(".".concat(this.config.classNames.placeholder));E?(this.disable(),this.containerOuter.addLoadingState(),this._isSelectOneElement?x?x.innerHTML=this.config.loadingText:(x=this._getTemplate("placeholder",this.config.loadingText),x&&this.itemList.append(x)):this.input.placeholder=this.config.loadingText):(this.enable(),this.containerOuter.removeLoadingState(),this._isSelectOneElement?x&&(x.innerHTML=this._placeholderValue||""):this.input.placeholder=this._placeholderValue||"")},P.prototype._handleSearch=function(E){if(this.input.isFocussed){var x=this._store.choices,k=this.config,A=k.searchFloor,L=k.searchChoices,D=x.some(function(Q){return!Q.active});if(E!==null&&typeof E<"u"&&E.length>=A){var M=L?this._searchChoices(E):0;this.passedElement.triggerEvent(y.EVENTS.search,{value:E,resultCount:M})}else D&&(this._isSearching=!1,this._store.dispatch((0,O.activateChoices)(!0)))}},P.prototype._canAddItem=function(E,x){var k=!0,A=typeof this.config.addItemText=="function"?this.config.addItemText(x):this.config.addItemText;if(!this._isSelectOneElement){var L=(0,w.existsInArray)(E,x);this.config.maxItemCount>0&&this.config.maxItemCount<=E.length&&(k=!1,A=typeof this.config.maxItemText=="function"?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),!this.config.duplicateItemsAllowed&&L&&k&&(k=!1,A=typeof this.config.uniqueItemText=="function"?this.config.uniqueItemText(x):this.config.uniqueItemText),this._isTextElement&&this.config.addItems&&k&&typeof this.config.addItemFilter=="function"&&!this.config.addItemFilter(x)&&(k=!1,A=typeof this.config.customAddItemText=="function"?this.config.customAddItemText(x):this.config.customAddItemText)}return{response:k,notice:A}},P.prototype._searchChoices=function(E){var x=typeof E=="string"?E.trim():E,k=typeof this._currentValue=="string"?this._currentValue.trim():this._currentValue;if(x.length<1&&x==="".concat(k," "))return 0;var A=this._store.searchableChoices,L=x,D=Object.assign(this.config.fuseOptions,{keys:d([],this.config.searchFields,!0),includeMatches:!0}),M=new b.default(A,D),Q=M.search(L);return this._currentValue=x,this._highlightPosition=0,this._isSearching=!0,this._store.dispatch((0,O.filterChoices)(Q)),Q.length},P.prototype._addEventListeners=function(){var E=document.documentElement;E.addEventListener("touchend",this._onTouchEnd,!0),this.containerOuter.element.addEventListener("keydown",this._onKeyDown,!0),this.containerOuter.element.addEventListener("mousedown",this._onMouseDown,!0),E.addEventListener("click",this._onClick,{passive:!0}),E.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.dropdown.element.addEventListener("mouseover",this._onMouseOver,{passive:!0}),this._isSelectOneElement&&(this.containerOuter.element.addEventListener("focus",this._onFocus,{passive:!0}),this.containerOuter.element.addEventListener("blur",this._onBlur,{passive:!0})),this.input.element.addEventListener("keyup",this._onKeyUp,{passive:!0}),this.input.element.addEventListener("focus",this._onFocus,{passive:!0}),this.input.element.addEventListener("blur",this._onBlur,{passive:!0}),this.input.element.form&&this.input.element.form.addEventListener("reset",this._onFormReset,{passive:!0}),this.input.addEventListeners()},P.prototype._removeEventListeners=function(){var E=document.documentElement;E.removeEventListener("touchend",this._onTouchEnd,!0),this.containerOuter.element.removeEventListener("keydown",this._onKeyDown,!0),this.containerOuter.element.removeEventListener("mousedown",this._onMouseDown,!0),E.removeEventListener("click",this._onClick),E.removeEventListener("touchmove",this._onTouchMove),this.dropdown.element.removeEventListener("mouseover",this._onMouseOver),this._isSelectOneElement&&(this.containerOuter.element.removeEventListener("focus",this._onFocus),this.containerOuter.element.removeEventListener("blur",this._onBlur)),this.input.element.removeEventListener("keyup",this._onKeyUp),this.input.element.removeEventListener("focus",this._onFocus),this.input.element.removeEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()},P.prototype._onKeyDown=function(E){var x=E.keyCode,k=this._store.activeItems,A=this.input.isFocussed,L=this.dropdown.isActive,D=this.itemList.hasChildren(),M=String.fromCharCode(x),Q=/[^\x00-\x1F]/.test(M),B=y.KEY_CODES.BACK_KEY,X=y.KEY_CODES.DELETE_KEY,te=y.KEY_CODES.ENTER_KEY,he=y.KEY_CODES.A_KEY,j=y.KEY_CODES.ESC_KEY,se=y.KEY_CODES.UP_KEY,me=y.KEY_CODES.DOWN_KEY,Oe=y.KEY_CODES.PAGE_UP_KEY,ke=y.KEY_CODES.PAGE_DOWN_KEY;switch(!this._isTextElement&&!L&&Q&&(this.showDropdown(),this.input.isFocussed||(this.input.value+=E.key.toLowerCase())),x){case he:return this._onSelectKey(E,D);case te:return this._onEnterKey(E,k,L);case j:return this._onEscapeKey(L);case se:case Oe:case me:case ke:return this._onDirectionKey(E,L);case X:case B:return this._onDeleteKey(E,k,A)}},P.prototype._onKeyUp=function(E){var x=E.target,k=E.keyCode,A=this.input.value,L=this._store.activeItems,D=this._canAddItem(L,A),M=y.KEY_CODES.BACK_KEY,Q=y.KEY_CODES.DELETE_KEY;if(this._isTextElement){var B=D.notice&&A;if(B){var X=this._getTemplate("notice",D.notice);this.dropdown.element.innerHTML=X.outerHTML,this.showDropdown(!0)}else this.hideDropdown(!0)}else{var te=k===M||k===Q,he=te&&x&&!x.value,j=!this._isTextElement&&this._isSearching,se=this._canSearch&&D.response;he&&j?(this._isSearching=!1,this._store.dispatch((0,O.activateChoices)(!0))):se&&this._handleSearch(this.input.rawValue)}this._canSearch=this.config.searchEnabled},P.prototype._onSelectKey=function(E,x){var k=E.ctrlKey,A=E.metaKey,L=k||A;if(L&&x){this._canSearch=!1;var D=this.config.removeItems&&!this.input.value&&this.input.element===document.activeElement;D&&this.highlightAll()}},P.prototype._onEnterKey=function(E,x,k){var A=E.target,L=y.KEY_CODES.ENTER_KEY,D=A&&A.hasAttribute("data-button");if(this._isTextElement&&A&&A.value){var M=this.input.value,Q=this._canAddItem(x,M);Q.response&&(this.hideDropdown(!0),this._addItem({value:M}),this._triggerChange(M),this.clearInput())}if(D&&(this._handleButtonAction(x,A),E.preventDefault()),k){var B=this.dropdown.getChild(".".concat(this.config.classNames.highlightedState));B&&(x[0]&&(x[0].keyCode=L),this._handleChoiceAction(x,B)),E.preventDefault()}else this._isSelectOneElement&&(this.showDropdown(),E.preventDefault())},P.prototype._onEscapeKey=function(E){E&&(this.hideDropdown(!0),this.containerOuter.focus())},P.prototype._onDirectionKey=function(E,x){var k=E.keyCode,A=E.metaKey,L=y.KEY_CODES.DOWN_KEY,D=y.KEY_CODES.PAGE_UP_KEY,M=y.KEY_CODES.PAGE_DOWN_KEY;if(x||this._isSelectOneElement){this.showDropdown(),this._canSearch=!1;var Q=k===L||k===M?1:-1,B=A||k===M||k===D,X="[data-choice-selectable]",te=void 0;if(B)Q>0?te=this.dropdown.element.querySelector("".concat(X,":last-of-type")):te=this.dropdown.element.querySelector(X);else{var he=this.dropdown.element.querySelector(".".concat(this.config.classNames.highlightedState));he?te=(0,w.getAdjacentEl)(he,X,Q):te=this.dropdown.element.querySelector(X)}te&&((0,w.isScrolledIntoView)(te,this.choiceList.element,Q)||this.choiceList.scrollToChildElement(te,Q),this._highlightChoice(te)),E.preventDefault()}},P.prototype._onDeleteKey=function(E,x,k){var A=E.target;!this._isSelectOneElement&&!A.value&&k&&(this._handleBackspace(x),E.preventDefault())},P.prototype._onTouchMove=function(){this._wasTap&&(this._wasTap=!1)},P.prototype._onTouchEnd=function(E){var x=(E||E.touches[0]).target,k=this._wasTap&&this.containerOuter.element.contains(x);if(k){var A=x===this.containerOuter.element||x===this.containerInner.element;A&&(this._isTextElement?this.input.focus():this._isSelectMultipleElement&&this.showDropdown()),E.stopPropagation()}this._wasTap=!0},P.prototype._onMouseDown=function(E){var x=E.target;if(x instanceof HTMLElement){if(_&&this.choiceList.element.contains(x)){var k=this.choiceList.element.firstElementChild,A=this._direction==="ltr"?E.offsetX>=k.offsetWidth:E.offsetX<k.offsetLeft;this._isScrollingOnIe=A}if(x!==this.input.element){var L=x.closest("[data-button],[data-item],[data-choice]");if(L instanceof HTMLElement){var D=E.shiftKey,M=this._store.activeItems,Q=L.dataset;"button"in Q?this._handleButtonAction(M,L):"item"in Q?this._handleItemAction(M,L,D):"choice"in Q&&this._handleChoiceAction(M,L)}E.preventDefault()}}},P.prototype._onMouseOver=function(E){var x=E.target;x instanceof HTMLElement&&"choice"in x.dataset&&this._highlightChoice(x)},P.prototype._onClick=function(E){var x=E.target,k=this.containerOuter.element.contains(x);if(k)!this.dropdown.isActive&&!this.containerOuter.isDisabled?this._isTextElement?document.activeElement!==this.input.element&&this.input.focus():(this.showDropdown(),this.containerOuter.focus()):this._isSelectOneElement&&x!==this.input.element&&!this.dropdown.element.contains(x)&&this.hideDropdown();else{var A=this._store.highlightedActiveItems.length>0;A&&this.unhighlightAll(),this.containerOuter.removeFocusState(),this.hideDropdown(!0)}},P.prototype._onFocus=function(E){var x,k=this,A=E.target,L=A&&this.containerOuter.element.contains(A);if(L){var D=(x={},x[y.TEXT_TYPE]=function(){A===k.input.element&&k.containerOuter.addFocusState()},x[y.SELECT_ONE_TYPE]=function(){k.containerOuter.addFocusState(),A===k.input.element&&k.showDropdown(!0)},x[y.SELECT_MULTIPLE_TYPE]=function(){A===k.input.element&&(k.showDropdown(!0),k.containerOuter.addFocusState())},x);D[this.passedElement.element.type]()}},P.prototype._onBlur=function(E){var x,k=this,A=E.target,L=A&&this.containerOuter.element.contains(A);if(L&&!this._isScrollingOnIe){var D=this._store.activeItems,M=D.some(function(B){return B.highlighted}),Q=(x={},x[y.TEXT_TYPE]=function(){A===k.input.element&&(k.containerOuter.removeFocusState(),M&&k.unhighlightAll(),k.hideDropdown(!0))},x[y.SELECT_ONE_TYPE]=function(){k.containerOuter.removeFocusState(),(A===k.input.element||A===k.containerOuter.element&&!k._canSearch)&&k.hideDropdown(!0)},x[y.SELECT_MULTIPLE_TYPE]=function(){A===k.input.element&&(k.containerOuter.removeFocusState(),k.hideDropdown(!0),M&&k.unhighlightAll())},x);Q[this.passedElement.element.type]()}else this._isScrollingOnIe=!1,this.input.element.focus()},P.prototype._onFormReset=function(){this._store.dispatch((0,u.resetTo)(this._initialState))},P.prototype._highlightChoice=function(E){var x=this;E===void 0&&(E=null);var k=Array.from(this.dropdown.element.querySelectorAll("[data-choice-selectable]"));if(k.length){var A=E,L=Array.from(this.dropdown.element.querySelectorAll(".".concat(this.config.classNames.highlightedState)));L.forEach(function(D){D.classList.remove(x.config.classNames.highlightedState),D.setAttribute("aria-selected","false")}),A?this._highlightPosition=k.indexOf(A):(k.length>this._highlightPosition?A=k[this._highlightPosition]:A=k[k.length-1],A||(A=k[0])),A.classList.add(this.config.classNames.highlightedState),A.setAttribute("aria-selected","true"),this.passedElement.triggerEvent(y.EVENTS.highlightChoice,{el:A}),this.dropdown.isActive&&(this.input.setActiveDescendant(A.id),this.containerOuter.setActiveDescendant(A.id))}},P.prototype._addItem=function(E){var x=E.value,k=E.label,A=k===void 0?null:k,L=E.choiceId,D=L===void 0?-1:L,M=E.groupId,Q=M===void 0?-1:M,B=E.customProperties,X=B===void 0?{}:B,te=E.placeholder,he=te===void 0?!1:te,j=E.keyCode,se=j===void 0?-1:j,me=typeof x=="string"?x.trim():x,Oe=this._store.items,ke=A||me,Ge=D||-1,De=Q>=0?this._store.getGroupById(Q):null,Mt=Oe?Oe.length+1:1;this.config.prependValue&&(me=this.config.prependValue+me.toString()),this.config.appendValue&&(me+=this.config.appendValue.toString()),this._store.dispatch((0,h.addItem)({value:me,label:ke,id:Mt,choiceId:Ge,groupId:Q,customProperties:X,placeholder:he,keyCode:se})),this._isSelectOneElement&&this.removeActiveItems(Mt),this.passedElement.triggerEvent(y.EVENTS.addItem,{id:Mt,value:me,label:ke,customProperties:X,groupValue:De&&De.value?De.value:null,keyCode:se})},P.prototype._removeItem=function(E){var x=E.id,k=E.value,A=E.label,L=E.customProperties,D=E.choiceId,M=E.groupId,Q=M&&M>=0?this._store.getGroupById(M):null;!x||!D||(this._store.dispatch((0,h.removeItem)(x,D)),this.passedElement.triggerEvent(y.EVENTS.removeItem,{id:x,value:k,label:A,customProperties:L,groupValue:Q&&Q.value?Q.value:null}))},P.prototype._addChoice=function(E){var x=E.value,k=E.label,A=k===void 0?null:k,L=E.isSelected,D=L===void 0?!1:L,M=E.isDisabled,Q=M===void 0?!1:M,B=E.groupId,X=B===void 0?-1:B,te=E.customProperties,he=te===void 0?{}:te,j=E.placeholder,se=j===void 0?!1:j,me=E.keyCode,Oe=me===void 0?-1:me;if(!(typeof x>"u"||x===null)){var ke=this._store.choices,Ge=A||x,De=ke?ke.length+1:1,Mt="".concat(this._baseId,"-").concat(this._idNames.itemChoice,"-").concat(De);this._store.dispatch((0,O.addChoice)({id:De,groupId:X,elementId:Mt,value:x,label:Ge,disabled:Q,customProperties:he,placeholder:se,keyCode:Oe})),D&&this._addItem({value:x,label:Ge,choiceId:De,customProperties:he,placeholder:se,keyCode:Oe})}},P.prototype._addGroup=function(E){var x=this,k=E.group,A=E.id,L=E.valueKey,D=L===void 0?"value":L,M=E.labelKey,Q=M===void 0?"label":M,B=(0,w.isType)("Object",k)?k.choices:Array.from(k.getElementsByTagName("OPTION")),X=A||Math.floor(new Date().valueOf()*Math.random()),te=k.disabled?k.disabled:!1;if(B){this._store.dispatch((0,r.addGroup)({value:k.label,id:X,active:!0,disabled:te}));var he=function(j){var se=j.disabled||j.parentNode&&j.parentNode.disabled;x._addChoice({value:j[D],label:(0,w.isType)("Object",j)?j[Q]:j.innerHTML,isSelected:j.selected,isDisabled:se,groupId:X,customProperties:j.customProperties,placeholder:j.placeholder})};B.forEach(he)}else this._store.dispatch((0,r.addGroup)({value:k.label,id:k.id,active:!1,disabled:k.disabled}))},P.prototype._getTemplate=function(E){for(var x,k=[],A=1;A<arguments.length;A++)k[A-1]=arguments[A];return(x=this._templates[E]).call.apply(x,d([this,this.config],k,!1))},P.prototype._createTemplates=function(){var E=this.config.callbackOnCreateTemplates,x={};E&&typeof E=="function"&&(x=E.call(this,w.strToEl)),this._templates=(0,g.default)(T.default,x)},P.prototype._createElements=function(){this.containerOuter=new m.Container({element:this._getTemplate("containerOuter",this._direction,this._isSelectElement,this._isSelectOneElement,this.config.searchEnabled,this.passedElement.element.type,this.config.labelId),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.containerInner=new m.Container({element:this._getTemplate("containerInner"),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.input=new m.Input({element:this._getTemplate("input",this._placeholderValue),classNames:this.config.classNames,type:this.passedElement.element.type,preventPaste:!this.config.paste}),this.choiceList=new m.List({element:this._getTemplate("choiceList",this._isSelectOneElement)}),this.itemList=new m.List({element:this._getTemplate("itemList",this._isSelectOneElement)}),this.dropdown=new m.Dropdown({element:this._getTemplate("dropdown"),classNames:this.config.classNames,type:this.passedElement.element.type})},P.prototype._createStructure=function(){this.passedElement.conceal(),this.containerInner.wrap(this.passedElement.element),this.containerOuter.wrap(this.containerInner.element),this._isSelectOneElement?this.input.placeholder=this.config.searchPlaceholderValue||"":this._placeholderValue&&(this.input.placeholder=this._placeholderValue,this.input.setWidth()),this.containerOuter.element.appendChild(this.containerInner.element),this.containerOuter.element.appendChild(this.dropdown.element),this.containerInner.element.appendChild(this.itemList.element),this._isTextElement||this.dropdown.element.appendChild(this.choiceList.element),this._isSelectOneElement?this.config.searchEnabled&&this.dropdown.element.insertBefore(this.input.element,this.dropdown.element.firstChild):this.containerInner.element.appendChild(this.input.element),this._isSelectElement&&(this._highlightPosition=0,this._isSearching=!1,this._startLoading(),this._presetGroups.length?this._addPredefinedGroups(this._presetGroups):this._addPredefinedChoices(this._presetChoices),this._stopLoading()),this._isTextElement&&this._addPredefinedItems(this._presetItems)},P.prototype._addPredefinedGroups=function(E){var x=this,k=this.passedElement.placeholderOption;k&&k.parentNode&&k.parentNode.tagName==="SELECT"&&this._addChoice({value:k.value,label:k.innerHTML,isSelected:k.selected,isDisabled:k.disabled,placeholder:!0}),E.forEach(function(A){return x._addGroup({group:A,id:A.id||null})})},P.prototype._addPredefinedChoices=function(E){var x=this;this.config.shouldSort&&E.sort(this.config.sorter);var k=E.some(function(L){return L.selected}),A=E.findIndex(function(L){return L.disabled===void 0||!L.disabled});E.forEach(function(L,D){var M=L.value,Q=M===void 0?"":M,B=L.label,X=L.customProperties,te=L.placeholder;if(x._isSelectElement)if(L.choices)x._addGroup({group:L,id:L.id||null});else{var he=x._isSelectOneElement&&!k&&D===A,j=he?!0:L.selected,se=L.disabled;x._addChoice({value:Q,label:B,isSelected:!!j,isDisabled:!!se,placeholder:!!te,customProperties:X})}else x._addChoice({value:Q,label:B,isSelected:!!L.selected,isDisabled:!!L.disabled,placeholder:!!L.placeholder,customProperties:X})})},P.prototype._addPredefinedItems=function(E){var x=this;E.forEach(function(k){typeof k=="object"&&k.value&&x._addItem({value:k.value,label:k.label,choiceId:k.id,customProperties:k.customProperties,placeholder:k.placeholder}),typeof k=="string"&&x._addItem({value:k})})},P.prototype._setChoiceOrItem=function(E){var x=this,k=(0,w.getType)(E).toLowerCase(),A={object:function(){E.value&&(x._isTextElement?x._addItem({value:E.value,label:E.label,choiceId:E.id,customProperties:E.customProperties,placeholder:E.placeholder}):x._addChoice({value:E.value,label:E.label,isSelected:!0,isDisabled:!1,customProperties:E.customProperties,placeholder:E.placeholder}))},string:function(){x._isTextElement?x._addItem({value:E}):x._addChoice({value:E,label:E,isSelected:!0,isDisabled:!1})}};A[k]()},P.prototype._findAndSelectChoiceByValue=function(E){var x=this,k=this._store.choices,A=k.find(function(L){return x.config.valueComparer(L.value,E)});A&&!A.selected&&this._addItem({value:A.value,label:A.label,choiceId:A.id,groupId:A.groupId,customProperties:A.customProperties,placeholder:A.placeholder,keyCode:A.keyCode})},P.prototype._generatePlaceholderValue=function(){if(this._isSelectElement&&this.passedElement.placeholderOption){var E=this.passedElement.placeholderOption;return E?E.text:null}var x=this.config,k=x.placeholder,A=x.placeholderValue,L=this.passedElement.element.dataset;if(k){if(A)return A;if(L.placeholder)return L.placeholder}return null},P}();l.default=N},613:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var d=c(799),p=c(883),g=function(){function b(O){var r=O.element,h=O.type,u=O.classNames,m=O.position;this.element=r,this.classNames=u,this.type=h,this.position=m,this.isOpen=!1,this.isFlipped=!1,this.isFocussed=!1,this.isDisabled=!1,this.isLoading=!1,this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return b.prototype.addEventListeners=function(){this.element.addEventListener("focus",this._onFocus),this.element.addEventListener("blur",this._onBlur)},b.prototype.removeEventListeners=function(){this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur)},b.prototype.shouldFlip=function(O){if(typeof O!="number")return!1;var r=!1;return this.position==="auto"?r=!window.matchMedia("(min-height: ".concat(O+1,"px)")).matches:this.position==="top"&&(r=!0),r},b.prototype.setActiveDescendant=function(O){this.element.setAttribute("aria-activedescendant",O)},b.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},b.prototype.open=function(O){this.element.classList.add(this.classNames.openState),this.element.setAttribute("aria-expanded","true"),this.isOpen=!0,this.shouldFlip(O)&&(this.element.classList.add(this.classNames.flippedState),this.isFlipped=!0)},b.prototype.close=function(){this.element.classList.remove(this.classNames.openState),this.element.setAttribute("aria-expanded","false"),this.removeActiveDescendant(),this.isOpen=!1,this.isFlipped&&(this.element.classList.remove(this.classNames.flippedState),this.isFlipped=!1)},b.prototype.focus=function(){this.isFocussed||this.element.focus()},b.prototype.addFocusState=function(){this.element.classList.add(this.classNames.focusState)},b.prototype.removeFocusState=function(){this.element.classList.remove(this.classNames.focusState)},b.prototype.enable=function(){this.element.classList.remove(this.classNames.disabledState),this.element.removeAttribute("aria-disabled"),this.type===p.SELECT_ONE_TYPE&&this.element.setAttribute("tabindex","0"),this.isDisabled=!1},b.prototype.disable=function(){this.element.classList.add(this.classNames.disabledState),this.element.setAttribute("aria-disabled","true"),this.type===p.SELECT_ONE_TYPE&&this.element.setAttribute("tabindex","-1"),this.isDisabled=!0},b.prototype.wrap=function(O){(0,d.wrap)(O,this.element)},b.prototype.unwrap=function(O){this.element.parentNode&&(this.element.parentNode.insertBefore(O,this.element),this.element.parentNode.removeChild(this.element))},b.prototype.addLoadingState=function(){this.element.classList.add(this.classNames.loadingState),this.element.setAttribute("aria-busy","true"),this.isLoading=!0},b.prototype.removeLoadingState=function(){this.element.classList.remove(this.classNames.loadingState),this.element.removeAttribute("aria-busy"),this.isLoading=!1},b.prototype._onFocus=function(){this.isFocussed=!0},b.prototype._onBlur=function(){this.isFocussed=!1},b}();l.default=g},217:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});var c=function(){function d(p){var g=p.element,b=p.type,O=p.classNames;this.element=g,this.classNames=O,this.type=b,this.isActive=!1}return Object.defineProperty(d.prototype,"distanceFromTopWindow",{get:function(){return this.element.getBoundingClientRect().bottom},enumerable:!1,configurable:!0}),d.prototype.getChild=function(p){return this.element.querySelector(p)},d.prototype.show=function(){return this.element.classList.add(this.classNames.activeState),this.element.setAttribute("aria-expanded","true"),this.isActive=!0,this},d.prototype.hide=function(){return this.element.classList.remove(this.classNames.activeState),this.element.setAttribute("aria-expanded","false"),this.isActive=!1,this},d}();l.default=c},520:function(a,l,c){var d=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0}),l.WrappedSelect=l.WrappedInput=l.List=l.Input=l.Container=l.Dropdown=void 0;var p=d(c(217));l.Dropdown=p.default;var g=d(c(613));l.Container=g.default;var b=d(c(11));l.Input=b.default;var O=d(c(624));l.List=O.default;var r=d(c(541));l.WrappedInput=r.default;var h=d(c(982));l.WrappedSelect=h.default},11:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var d=c(799),p=c(883),g=function(){function b(O){var r=O.element,h=O.type,u=O.classNames,m=O.preventPaste;this.element=r,this.type=h,this.classNames=u,this.preventPaste=m,this.isFocussed=this.element.isEqualNode(document.activeElement),this.isDisabled=r.disabled,this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return Object.defineProperty(b.prototype,"placeholder",{set:function(O){this.element.placeholder=O},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"value",{get:function(){return(0,d.sanitise)(this.element.value)},set:function(O){this.element.value=O},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"rawValue",{get:function(){return this.element.value},enumerable:!1,configurable:!0}),b.prototype.addEventListeners=function(){this.element.addEventListener("paste",this._onPaste),this.element.addEventListener("input",this._onInput,{passive:!0}),this.element.addEventListener("focus",this._onFocus,{passive:!0}),this.element.addEventListener("blur",this._onBlur,{passive:!0})},b.prototype.removeEventListeners=function(){this.element.removeEventListener("input",this._onInput),this.element.removeEventListener("paste",this._onPaste),this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur)},b.prototype.enable=function(){this.element.removeAttribute("disabled"),this.isDisabled=!1},b.prototype.disable=function(){this.element.setAttribute("disabled",""),this.isDisabled=!0},b.prototype.focus=function(){this.isFocussed||this.element.focus()},b.prototype.blur=function(){this.isFocussed&&this.element.blur()},b.prototype.clear=function(O){return O===void 0&&(O=!0),this.element.value&&(this.element.value=""),O&&this.setWidth(),this},b.prototype.setWidth=function(){var O=this.element,r=O.style,h=O.value,u=O.placeholder;r.minWidth="".concat(u.length+1,"ch"),r.width="".concat(h.length+1,"ch")},b.prototype.setActiveDescendant=function(O){this.element.setAttribute("aria-activedescendant",O)},b.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},b.prototype._onInput=function(){this.type!==p.SELECT_ONE_TYPE&&this.setWidth()},b.prototype._onPaste=function(O){this.preventPaste&&O.preventDefault()},b.prototype._onFocus=function(){this.isFocussed=!0},b.prototype._onBlur=function(){this.isFocussed=!1},b}();l.default=g},624:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var d=c(883),p=function(){function g(b){var O=b.element;this.element=O,this.scrollPos=this.element.scrollTop,this.height=this.element.offsetHeight}return g.prototype.clear=function(){this.element.innerHTML=""},g.prototype.append=function(b){this.element.appendChild(b)},g.prototype.getChild=function(b){return this.element.querySelector(b)},g.prototype.hasChildren=function(){return this.element.hasChildNodes()},g.prototype.scrollToTop=function(){this.element.scrollTop=0},g.prototype.scrollToChildElement=function(b,O){var r=this;if(b){var h=this.element.offsetHeight,u=this.element.scrollTop+h,m=b.offsetHeight,y=b.offsetTop+m,v=O>0?this.element.scrollTop+y-u:b.offsetTop;requestAnimationFrame(function(){r._animateScroll(v,O)})}},g.prototype._scrollDown=function(b,O,r){var h=(r-b)/O,u=h>1?h:1;this.element.scrollTop=b+u},g.prototype._scrollUp=function(b,O,r){var h=(b-r)/O,u=h>1?h:1;this.element.scrollTop=b-u},g.prototype._animateScroll=function(b,O){var r=this,h=d.SCROLLING_SPEED,u=this.element.scrollTop,m=!1;O>0?(this._scrollDown(u,h,b),u<b&&(m=!0)):(this._scrollUp(u,h,b),u>b&&(m=!0)),m&&requestAnimationFrame(function(){r._animateScroll(b,O)})},g}();l.default=p},730:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var d=c(799),p=function(){function g(b){var O=b.element,r=b.classNames;if(this.element=O,this.classNames=r,!(O instanceof HTMLInputElement)&&!(O instanceof HTMLSelectElement))throw new TypeError("Invalid element passed");this.isDisabled=!1}return Object.defineProperty(g.prototype,"isActive",{get:function(){return this.element.dataset.choice==="active"},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"dir",{get:function(){return this.element.dir},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"value",{get:function(){return this.element.value},set:function(b){this.element.value=b},enumerable:!1,configurable:!0}),g.prototype.conceal=function(){this.element.classList.add(this.classNames.input),this.element.hidden=!0,this.element.tabIndex=-1;var b=this.element.getAttribute("style");b&&this.element.setAttribute("data-choice-orig-style",b),this.element.setAttribute("data-choice","active")},g.prototype.reveal=function(){this.element.classList.remove(this.classNames.input),this.element.hidden=!1,this.element.removeAttribute("tabindex");var b=this.element.getAttribute("data-choice-orig-style");b?(this.element.removeAttribute("data-choice-orig-style"),this.element.setAttribute("style",b)):this.element.removeAttribute("style"),this.element.removeAttribute("data-choice"),this.element.value=this.element.value},g.prototype.enable=function(){this.element.removeAttribute("disabled"),this.element.disabled=!1,this.isDisabled=!1},g.prototype.disable=function(){this.element.setAttribute("disabled",""),this.element.disabled=!0,this.isDisabled=!0},g.prototype.triggerEvent=function(b,O){(0,d.dispatchEvent)(this.element,b,O)},g}();l.default=p},541:function(a,l,c){var d=this&&this.__extends||function(){var O=function(r,h){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(u[y]=m[y])},O(r,h)};return function(r,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");O(r,h);function u(){this.constructor=r}r.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}(),p=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(l,"__esModule",{value:!0});var g=p(c(730)),b=function(O){d(r,O);function r(h){var u=h.element,m=h.classNames,y=h.delimiter,v=O.call(this,{element:u,classNames:m})||this;return v.delimiter=y,v}return Object.defineProperty(r.prototype,"value",{get:function(){return this.element.value},set:function(h){this.element.setAttribute("value",h),this.element.value=h},enumerable:!1,configurable:!0}),r}(g.default);l.default=b},982:function(a,l,c){var d=this&&this.__extends||function(){var O=function(r,h){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(u[y]=m[y])},O(r,h)};return function(r,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");O(r,h);function u(){this.constructor=r}r.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}(),p=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(l,"__esModule",{value:!0});var g=p(c(730)),b=function(O){d(r,O);function r(h){var u=h.element,m=h.classNames,y=h.template,v=O.call(this,{element:u,classNames:m})||this;return v.template=y,v}return Object.defineProperty(r.prototype,"placeholderOption",{get:function(){return this.element.querySelector('option[value=""]')||this.element.querySelector("option[placeholder]")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"optionGroups",{get:function(){return Array.from(this.element.getElementsByTagName("OPTGROUP"))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"options",{get:function(){return Array.from(this.element.options)},set:function(h){var u=this,m=document.createDocumentFragment(),y=function(v){var w=u.template(v);m.appendChild(w)};h.forEach(function(v){return y(v)}),this.appendDocFragment(m)},enumerable:!1,configurable:!0}),r.prototype.appendDocFragment=function(h){this.element.innerHTML="",this.element.appendChild(h)},r}(g.default);l.default=b},883:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.SCROLLING_SPEED=l.SELECT_MULTIPLE_TYPE=l.SELECT_ONE_TYPE=l.TEXT_TYPE=l.KEY_CODES=l.ACTION_TYPES=l.EVENTS=void 0,l.EVENTS={showDropdown:"showDropdown",hideDropdown:"hideDropdown",change:"change",choice:"choice",search:"search",addItem:"addItem",removeItem:"removeItem",highlightItem:"highlightItem",highlightChoice:"highlightChoice",unhighlightItem:"unhighlightItem"},l.ACTION_TYPES={ADD_CHOICE:"ADD_CHOICE",FILTER_CHOICES:"FILTER_CHOICES",ACTIVATE_CHOICES:"ACTIVATE_CHOICES",CLEAR_CHOICES:"CLEAR_CHOICES",ADD_GROUP:"ADD_GROUP",ADD_ITEM:"ADD_ITEM",REMOVE_ITEM:"REMOVE_ITEM",HIGHLIGHT_ITEM:"HIGHLIGHT_ITEM",CLEAR_ALL:"CLEAR_ALL",RESET_TO:"RESET_TO",SET_IS_LOADING:"SET_IS_LOADING"},l.KEY_CODES={BACK_KEY:46,DELETE_KEY:8,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34},l.TEXT_TYPE="text",l.SELECT_ONE_TYPE="select-one",l.SELECT_MULTIPLE_TYPE="select-multiple",l.SCROLLING_SPEED=4},789:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CONFIG=l.DEFAULT_CLASSNAMES=void 0;var d=c(799);l.DEFAULT_CLASSNAMES={containerOuter:"choices",containerInner:"choices__inner",input:"choices__input",inputCloned:"choices__input--cloned",list:"choices__list",listItems:"choices__list--multiple",listSingle:"choices__list--single",listDropdown:"choices__list--dropdown",item:"choices__item",itemSelectable:"choices__item--selectable",itemDisabled:"choices__item--disabled",itemChoice:"choices__item--choice",placeholder:"choices__placeholder",group:"choices__group",groupHeading:"choices__heading",button:"choices__button",activeState:"is-active",focusState:"is-focused",openState:"is-open",disabledState:"is-disabled",highlightedState:"is-highlighted",selectedState:"is-selected",flippedState:"is-flipped",loadingState:"is-loading",noResults:"has-no-results",noChoices:"has-no-choices"},l.DEFAULT_CONFIG={items:[],choices:[],silent:!1,renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,addItemFilter:null,removeItems:!0,removeItemButton:!1,editItems:!1,allowHTML:!0,duplicateItemsAllowed:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,shouldSort:!0,shouldSortItems:!1,sorter:d.sortByAlpha,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added",customAddItemText:"Only values matching specific conditions can be added",addItemText:function(p){return'Press Enter to add <b>"'.concat((0,d.sanitise)(p),'"</b>')},maxItemText:function(p){return"Only ".concat(p," values can be added")},valueComparer:function(p,g){return p===g},fuseOptions:{includeScore:!0},labelId:"",callbackOnInit:null,callbackOnCreateTemplates:null,classNames:l.DEFAULT_CLASSNAMES}},18:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},978:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},948:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},359:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},285:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},533:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},187:function(a,l,c){var d=this&&this.__createBinding||(Object.create?function(g,b,O,r){r===void 0&&(r=O);var h=Object.getOwnPropertyDescriptor(b,O);(!h||("get"in h?!b.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return b[O]}}),Object.defineProperty(g,r,h)}:function(g,b,O,r){r===void 0&&(r=O),g[r]=b[O]}),p=this&&this.__exportStar||function(g,b){for(var O in g)O!=="default"&&!Object.prototype.hasOwnProperty.call(b,O)&&d(b,g,O)};Object.defineProperty(l,"__esModule",{value:!0}),p(c(18),l),p(c(978),l),p(c(948),l),p(c(359),l),p(c(285),l),p(c(533),l),p(c(287),l),p(c(132),l),p(c(837),l),p(c(598),l),p(c(369),l),p(c(37),l),p(c(47),l),p(c(923),l),p(c(876),l)},287:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},132:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},837:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},598:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},37:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},369:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},47:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},923:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},876:function(a,l){Object.defineProperty(l,"__esModule",{value:!0})},799:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCustomProperties=l.diff=l.cloneObject=l.existsInArray=l.dispatchEvent=l.sortByScore=l.sortByAlpha=l.strToEl=l.sanitise=l.isScrolledIntoView=l.getAdjacentEl=l.wrap=l.isType=l.getType=l.generateId=l.generateChars=l.getRandomNumber=void 0;var c=function(_,$){return Math.floor(Math.random()*($-_)+_)};l.getRandomNumber=c;var d=function(_){return Array.from({length:_},function(){return(0,l.getRandomNumber)(0,36).toString(36)}).join("")};l.generateChars=d;var p=function(_,$){var N=_.id||_.name&&"".concat(_.name,"-").concat((0,l.generateChars)(2))||(0,l.generateChars)(4);return N=N.replace(/(:|\.|\[|\]|,)/g,""),N="".concat($,"-").concat(N),N};l.generateId=p;var g=function(_){return Object.prototype.toString.call(_).slice(8,-1)};l.getType=g;var b=function(_,$){return $!=null&&(0,l.getType)($)===_};l.isType=b;var O=function(_,$){return $===void 0&&($=document.createElement("div")),_.parentNode&&(_.nextSibling?_.parentNode.insertBefore($,_.nextSibling):_.parentNode.appendChild($)),$.appendChild(_)};l.wrap=O;var r=function(_,$,N){N===void 0&&(N=1);for(var P="".concat(N>0?"next":"previous","ElementSibling"),E=_[P];E;){if(E.matches($))return E;E=E[P]}return E};l.getAdjacentEl=r;var h=function(_,$,N){if(N===void 0&&(N=1),!_)return!1;var P;return N>0?P=$.scrollTop+$.offsetHeight>=_.offsetTop+_.offsetHeight:P=_.offsetTop>=$.scrollTop,P};l.isScrolledIntoView=h;var u=function(_){return typeof _!="string"?_:_.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")};l.sanitise=u,l.strToEl=function(){var _=document.createElement("div");return function($){var N=$.trim();_.innerHTML=N;for(var P=_.children[0];_.firstChild;)_.removeChild(_.firstChild);return P}}();var m=function(_,$){var N=_.value,P=_.label,E=P===void 0?N:P,x=$.value,k=$.label,A=k===void 0?x:k;return E.localeCompare(A,[],{sensitivity:"base",ignorePunctuation:!0,numeric:!0})};l.sortByAlpha=m;var y=function(_,$){var N=_.score,P=N===void 0?0:N,E=$.score,x=E===void 0?0:E;return P-x};l.sortByScore=y;var v=function(_,$,N){N===void 0&&(N=null);var P=new CustomEvent($,{detail:N,bubbles:!0,cancelable:!0});return _.dispatchEvent(P)};l.dispatchEvent=v;var w=function(_,$,N){return N===void 0&&(N="value"),_.some(function(P){return typeof $=="string"?P[N]===$.trim():P[N]===$})};l.existsInArray=w;var S=function(_){return JSON.parse(JSON.stringify(_))};l.cloneObject=S;var C=function(_,$){var N=Object.keys(_).sort(),P=Object.keys($).sort();return N.filter(function(E){return P.indexOf(E)<0})};l.diff=C;var T=function(_){if(typeof _<"u")try{return JSON.parse(_)}catch{return _}return{}};l.parseCustomProperties=T},273:function(a,l){var c=this&&this.__spreadArray||function(p,g,b){if(b||arguments.length===2)for(var O=0,r=g.length,h;O<r;O++)(h||!(O in g))&&(h||(h=Array.prototype.slice.call(g,0,O)),h[O]=g[O]);return p.concat(h||Array.prototype.slice.call(g))};Object.defineProperty(l,"__esModule",{value:!0}),l.defaultState=void 0,l.defaultState=[];function d(p,g){switch(p===void 0&&(p=l.defaultState),g===void 0&&(g={}),g.type){case"ADD_CHOICE":{var b=g,O={id:b.id,elementId:b.elementId,groupId:b.groupId,value:b.value,label:b.label||b.value,disabled:b.disabled||!1,selected:!1,active:!0,score:9999,customProperties:b.customProperties,placeholder:b.placeholder||!1};return c(c([],p,!0),[O],!1)}case"ADD_ITEM":{var r=g;return r.choiceId>-1?p.map(function(y){var v=y;return v.id===parseInt("".concat(r.choiceId),10)&&(v.selected=!0),v}):p}case"REMOVE_ITEM":{var h=g;return h.choiceId&&h.choiceId>-1?p.map(function(y){var v=y;return v.id===parseInt("".concat(h.choiceId),10)&&(v.selected=!1),v}):p}case"FILTER_CHOICES":{var u=g;return p.map(function(y){var v=y;return v.active=u.results.some(function(w){var S=w.item,C=w.score;return S.id===v.id?(v.score=C,!0):!1}),v})}case"ACTIVATE_CHOICES":{var m=g;return p.map(function(y){var v=y;return v.active=m.active,v})}case"CLEAR_CHOICES":return l.defaultState;default:return p}}l.default=d},871:function(a,l){var c=this&&this.__spreadArray||function(p,g,b){if(b||arguments.length===2)for(var O=0,r=g.length,h;O<r;O++)(h||!(O in g))&&(h||(h=Array.prototype.slice.call(g,0,O)),h[O]=g[O]);return p.concat(h||Array.prototype.slice.call(g))};Object.defineProperty(l,"__esModule",{value:!0}),l.defaultState=void 0,l.defaultState=[];function d(p,g){switch(p===void 0&&(p=l.defaultState),g===void 0&&(g={}),g.type){case"ADD_GROUP":{var b=g;return c(c([],p,!0),[{id:b.id,value:b.value,active:b.active,disabled:b.disabled}],!1)}case"CLEAR_CHOICES":return[];default:return p}}l.default=d},655:function(a,l,c){var d=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0}),l.defaultState=void 0;var p=c(791),g=d(c(52)),b=d(c(871)),O=d(c(273)),r=d(c(502)),h=c(799);l.defaultState={groups:[],items:[],choices:[],loading:!1};var u=(0,p.combineReducers)({items:g.default,groups:b.default,choices:O.default,loading:r.default}),m=function(y,v){var w=y;if(v.type==="CLEAR_ALL")w=l.defaultState;else if(v.type==="RESET_TO")return(0,h.cloneObject)(v.state);return u(w,v)};l.default=m},52:function(a,l){var c=this&&this.__spreadArray||function(p,g,b){if(b||arguments.length===2)for(var O=0,r=g.length,h;O<r;O++)(h||!(O in g))&&(h||(h=Array.prototype.slice.call(g,0,O)),h[O]=g[O]);return p.concat(h||Array.prototype.slice.call(g))};Object.defineProperty(l,"__esModule",{value:!0}),l.defaultState=void 0,l.defaultState=[];function d(p,g){switch(p===void 0&&(p=l.defaultState),g===void 0&&(g={}),g.type){case"ADD_ITEM":{var b=g,O=c(c([],p,!0),[{id:b.id,choiceId:b.choiceId,groupId:b.groupId,value:b.value,label:b.label,active:!0,highlighted:!1,customProperties:b.customProperties,placeholder:b.placeholder||!1,keyCode:null}],!1);return O.map(function(h){var u=h;return u.highlighted=!1,u})}case"REMOVE_ITEM":return p.map(function(h){var u=h;return u.id===g.id&&(u.active=!1),u});case"HIGHLIGHT_ITEM":{var r=g;return p.map(function(h){var u=h;return u.id===r.id&&(u.highlighted=r.highlighted),u})}default:return p}}l.default=d},502:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.defaultState=void 0,l.defaultState=!1;var c=function(d,p){switch(d===void 0&&(d=l.defaultState),p===void 0&&(p={}),p.type){case"SET_IS_LOADING":return p.isLoading;default:return d}};l.default=c},744:function(a,l,c){var d=this&&this.__spreadArray||function(r,h,u){if(u||arguments.length===2)for(var m=0,y=h.length,v;m<y;m++)(v||!(m in h))&&(v||(v=Array.prototype.slice.call(h,0,m)),v[m]=h[m]);return r.concat(v||Array.prototype.slice.call(h))},p=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});var g=c(791),b=p(c(655)),O=function(){function r(){this._store=(0,g.createStore)(b.default,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}return r.prototype.subscribe=function(h){this._store.subscribe(h)},r.prototype.dispatch=function(h){this._store.dispatch(h)},Object.defineProperty(r.prototype,"state",{get:function(){return this._store.getState()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"items",{get:function(){return this.state.items},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"activeItems",{get:function(){return this.items.filter(function(h){return h.active===!0})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"highlightedActiveItems",{get:function(){return this.items.filter(function(h){return h.active&&h.highlighted})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"choices",{get:function(){return this.state.choices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"activeChoices",{get:function(){return this.choices.filter(function(h){return h.active===!0})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selectableChoices",{get:function(){return this.choices.filter(function(h){return h.disabled!==!0})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"searchableChoices",{get:function(){return this.selectableChoices.filter(function(h){return h.placeholder!==!0})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"placeholderChoice",{get:function(){return d([],this.choices,!0).reverse().find(function(h){return h.placeholder===!0})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"groups",{get:function(){return this.state.groups},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"activeGroups",{get:function(){var h=this,u=h.groups,m=h.choices;return u.filter(function(y){var v=y.active===!0&&y.disabled===!1,w=m.some(function(S){return S.active===!0&&S.disabled===!1});return v&&w},[])},enumerable:!1,configurable:!0}),r.prototype.isLoading=function(){return this.state.loading},r.prototype.getChoiceById=function(h){return this.activeChoices.find(function(u){return u.id===parseInt(h,10)})},r.prototype.getGroupById=function(h){return this.groups.find(function(u){return u.id===h})},r}();l.default=O},686:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});var c={containerOuter:function(d,p,g,b,O,r,h){var u=d.classNames.containerOuter,m=Object.assign(document.createElement("div"),{className:u});return m.dataset.type=r,p&&(m.dir=p),b&&(m.tabIndex=0),g&&(m.setAttribute("role",O?"combobox":"listbox"),O&&m.setAttribute("aria-autocomplete","list")),m.setAttribute("aria-haspopup","true"),m.setAttribute("aria-expanded","false"),h&&m.setAttribute("aria-labelledby",h),m},containerInner:function(d){var p=d.classNames.containerInner;return Object.assign(document.createElement("div"),{className:p})},itemList:function(d,p){var g=d.classNames,b=g.list,O=g.listSingle,r=g.listItems;return Object.assign(document.createElement("div"),{className:"".concat(b," ").concat(p?O:r)})},placeholder:function(d,p){var g,b=d.allowHTML,O=d.classNames.placeholder;return Object.assign(document.createElement("div"),(g={className:O},g[b?"innerHTML":"innerText"]=p,g))},item:function(d,p,g){var b,O,r=d.allowHTML,h=d.classNames,u=h.item,m=h.button,y=h.highlightedState,v=h.itemSelectable,w=h.placeholder,S=p.id,C=p.value,T=p.label,_=p.customProperties,$=p.active,N=p.disabled,P=p.highlighted,E=p.placeholder,x=Object.assign(document.createElement("div"),(b={className:u},b[r?"innerHTML":"innerText"]=T,b));if(Object.assign(x.dataset,{item:"",id:S,value:C,customProperties:_}),$&&x.setAttribute("aria-selected","true"),N&&x.setAttribute("aria-disabled","true"),E&&x.classList.add(w),x.classList.add(P?y:v),g){N&&x.classList.remove(v),x.dataset.deletable="";var k="Remove item",A=Object.assign(document.createElement("button"),(O={type:"button",className:m},O[r?"innerHTML":"innerText"]=k,O));A.setAttribute("aria-label","".concat(k,": '").concat(C,"'")),A.dataset.button="",x.appendChild(A)}return x},choiceList:function(d,p){var g=d.classNames.list,b=Object.assign(document.createElement("div"),{className:g});return p||b.setAttribute("aria-multiselectable","true"),b.setAttribute("role","listbox"),b},choiceGroup:function(d,p){var g,b=d.allowHTML,O=d.classNames,r=O.group,h=O.groupHeading,u=O.itemDisabled,m=p.id,y=p.value,v=p.disabled,w=Object.assign(document.createElement("div"),{className:"".concat(r," ").concat(v?u:"")});return w.setAttribute("role","group"),Object.assign(w.dataset,{group:"",id:m,value:y}),v&&w.setAttribute("aria-disabled","true"),w.appendChild(Object.assign(document.createElement("div"),(g={className:h},g[b?"innerHTML":"innerText"]=y,g))),w},choice:function(d,p,g){var b,O=d.allowHTML,r=d.classNames,h=r.item,u=r.itemChoice,m=r.itemSelectable,y=r.selectedState,v=r.itemDisabled,w=r.placeholder,S=p.id,C=p.value,T=p.label,_=p.groupId,$=p.elementId,N=p.disabled,P=p.selected,E=p.placeholder,x=Object.assign(document.createElement("div"),(b={id:$},b[O?"innerHTML":"innerText"]=T,b.className="".concat(h," ").concat(u),b));return P&&x.classList.add(y),E&&x.classList.add(w),x.setAttribute("role",_&&_>0?"treeitem":"option"),Object.assign(x.dataset,{choice:"",id:S,value:C,selectText:g}),N?(x.classList.add(v),x.dataset.choiceDisabled="",x.setAttribute("aria-disabled","true")):(x.classList.add(m),x.dataset.choiceSelectable=""),x},input:function(d,p){var g=d.classNames,b=g.input,O=g.inputCloned,r=Object.assign(document.createElement("input"),{type:"search",name:"search_terms",className:"".concat(b," ").concat(O),autocomplete:"off",autocapitalize:"off",spellcheck:!1});return r.setAttribute("role","textbox"),r.setAttribute("aria-autocomplete","list"),r.setAttribute("aria-label",p),r},dropdown:function(d){var p=d.classNames,g=p.list,b=p.listDropdown,O=document.createElement("div");return O.classList.add(g,b),O.setAttribute("aria-expanded","false"),O},notice:function(d,p,g){var b,O=d.allowHTML,r=d.classNames,h=r.item,u=r.itemChoice,m=r.noResults,y=r.noChoices;g===void 0&&(g="");var v=[h,u];return g==="no-choices"?v.push(y):g==="no-results"&&v.push(m),Object.assign(document.createElement("div"),(b={},b[O?"innerHTML":"innerText"]=p,b.className=v.join(" "),b))},option:function(d){var p=d.label,g=d.value,b=d.customProperties,O=d.active,r=d.disabled,h=new Option(p,g,!1,O);return b&&(h.dataset.customProperties="".concat(b)),h.disabled=!!r,h}};l.default=c},996:function(a){var l=function($){return c($)&&!d($)};function c(_){return!!_&&typeof _=="object"}function d(_){var $=Object.prototype.toString.call(_);return $==="[object RegExp]"||$==="[object Date]"||b(_)}var p=typeof Symbol=="function"&&Symbol.for,g=p?Symbol.for("react.element"):60103;function b(_){return _.$$typeof===g}function O(_){return Array.isArray(_)?[]:{}}function r(_,$){return $.clone!==!1&&$.isMergeableObject(_)?C(O(_),_,$):_}function h(_,$,N){return _.concat($).map(function(P){return r(P,N)})}function u(_,$){if(!$.customMerge)return C;var N=$.customMerge(_);return typeof N=="function"?N:C}function m(_){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(_).filter(function($){return _.propertyIsEnumerable($)}):[]}function y(_){return Object.keys(_).concat(m(_))}function v(_,$){try{return $ in _}catch{return!1}}function w(_,$){return v(_,$)&&!(Object.hasOwnProperty.call(_,$)&&Object.propertyIsEnumerable.call(_,$))}function S(_,$,N){var P={};return N.isMergeableObject(_)&&y(_).forEach(function(E){P[E]=r(_[E],N)}),y($).forEach(function(E){w(_,E)||(v(_,E)&&N.isMergeableObject($[E])?P[E]=u(E,N)(_[E],$[E],N):P[E]=r($[E],N))}),P}function C(_,$,N){N=N||{},N.arrayMerge=N.arrayMerge||h,N.isMergeableObject=N.isMergeableObject||l,N.cloneUnlessOtherwiseSpecified=r;var P=Array.isArray($),E=Array.isArray(_),x=P===E;return x?P?N.arrayMerge(_,$,N):S(_,$,N):r($,N)}C.all=function($,N){if(!Array.isArray($))throw new Error("first argument should be an array");return $.reduce(function(P,E){return C(P,E,N)},{})};var T=C;a.exports=T},221:function(a,l,c){c.r(l),c.d(l,{default:function(){return zn}});function d(F){return Array.isArray?Array.isArray(F):w(F)==="[object Array]"}const p=1/0;function g(F){if(typeof F=="string")return F;let I=F+"";return I=="0"&&1/F==-p?"-0":I}function b(F){return F==null?"":g(F)}function O(F){return typeof F=="string"}function r(F){return typeof F=="number"}function h(F){return F===!0||F===!1||m(F)&&w(F)=="[object Boolean]"}function u(F){return typeof F=="object"}function m(F){return u(F)&&F!==null}function y(F){return F!=null}function v(F){return!F.trim().length}function w(F){return F==null?F===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(F)}const S="Incorrect 'index' type",C=F=>`Invalid value for key ${F}`,T=F=>`Pattern length exceeds max of ${F}.`,_=F=>`Missing ${F} property in key`,$=F=>`Property 'weight' in key '${F}' must be a positive integer`,N=Object.prototype.hasOwnProperty;class P{constructor(I){this._keys=[],this._keyMap={};let z=0;I.forEach(H=>{let U=E(H);z+=U.weight,this._keys.push(U),this._keyMap[U.id]=U,z+=U.weight}),this._keys.forEach(H=>{H.weight/=z})}get(I){return this._keyMap[I]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function E(F){let I=null,z=null,H=null,U=1,Z=null;if(O(F)||d(F))H=F,I=x(F),z=k(F);else{if(!N.call(F,"name"))throw new Error(_("name"));const K=F.name;if(H=K,N.call(F,"weight")&&(U=F.weight,U<=0))throw new Error($(K));I=x(K),z=k(K),Z=F.getFn}return{path:I,id:z,weight:U,src:H,getFn:Z}}function x(F){return d(F)?F:F.split(".")}function k(F){return d(F)?F.join("."):F}function A(F,I){let z=[],H=!1;const U=(Z,K,ie)=>{if(y(Z))if(!K[ie])z.push(Z);else{let ne=K[ie];const le=Z[ne];if(!y(le))return;if(ie===K.length-1&&(O(le)||r(le)||h(le)))z.push(b(le));else if(d(le)){H=!0;for(let de=0,be=le.length;de<be;de+=1)U(le[de],K,ie+1)}else K.length&&U(le,K,ie+1)}};return U(F,O(I)?I.split("."):I,0),H?z:z[0]}var B={...{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(F,I)=>F.score===I.score?F.idx<I.idx?-1:1:F.score<I.score?-1:1},...{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},...{location:0,threshold:.6,distance:100},...{useExtendedSearch:!1,getFn:A,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const X=/[^ ]+/g;function te(F=1,I=3){const z=new Map,H=Math.pow(10,I);return{get(U){const Z=U.match(X).length;if(z.has(Z))return z.get(Z);const K=1/Math.pow(Z,.5*F),ie=parseFloat(Math.round(K*H)/H);return z.set(Z,ie),ie},clear(){z.clear()}}}class he{constructor({getFn:I=B.getFn,fieldNormWeight:z=B.fieldNormWeight}={}){this.norm=te(z,3),this.getFn=I,this.isCreated=!1,this.setIndexRecords()}setSources(I=[]){this.docs=I}setIndexRecords(I=[]){this.records=I}setKeys(I=[]){this.keys=I,this._keysMap={},I.forEach((z,H)=>{this._keysMap[z.id]=H})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,O(this.docs[0])?this.docs.forEach((I,z)=>{this._addString(I,z)}):this.docs.forEach((I,z)=>{this._addObject(I,z)}),this.norm.clear())}add(I){const z=this.size();O(I)?this._addString(I,z):this._addObject(I,z)}removeAt(I){this.records.splice(I,1);for(let z=I,H=this.size();z<H;z+=1)this.records[z].i-=1}getValueForItemAtKeyId(I,z){return I[this._keysMap[z]]}size(){return this.records.length}_addString(I,z){if(!y(I)||v(I))return;let H={v:I,i:z,n:this.norm.get(I)};this.records.push(H)}_addObject(I,z){let H={i:z,$:{}};this.keys.forEach((U,Z)=>{let K=U.getFn?U.getFn(I):this.getFn(I,U.path);if(y(K)){if(d(K)){let ie=[];const ne=[{nestedArrIndex:-1,value:K}];for(;ne.length;){const{nestedArrIndex:le,value:de}=ne.pop();if(y(de))if(O(de)&&!v(de)){let be={v:de,i:le,n:this.norm.get(de)};ie.push(be)}else d(de)&&de.forEach((be,Se)=>{ne.push({nestedArrIndex:Se,value:be})})}H.$[Z]=ie}else if(O(K)&&!v(K)){let ie={v:K,n:this.norm.get(K)};H.$[Z]=ie}}}),this.records.push(H)}toJSON(){return{keys:this.keys,records:this.records}}}function j(F,I,{getFn:z=B.getFn,fieldNormWeight:H=B.fieldNormWeight}={}){const U=new he({getFn:z,fieldNormWeight:H});return U.setKeys(F.map(E)),U.setSources(I),U.create(),U}function se(F,{getFn:I=B.getFn,fieldNormWeight:z=B.fieldNormWeight}={}){const{keys:H,records:U}=F,Z=new he({getFn:I,fieldNormWeight:z});return Z.setKeys(H),Z.setIndexRecords(U),Z}function me(F,{errors:I=0,currentLocation:z=0,expectedLocation:H=0,distance:U=B.distance,ignoreLocation:Z=B.ignoreLocation}={}){const K=I/F.length;if(Z)return K;const ie=Math.abs(H-z);return U?K+ie/U:ie?1:K}function Oe(F=[],I=B.minMatchCharLength){let z=[],H=-1,U=-1,Z=0;for(let K=F.length;Z<K;Z+=1){let ie=F[Z];ie&&H===-1?H=Z:!ie&&H!==-1&&(U=Z-1,U-H+1>=I&&z.push([H,U]),H=-1)}return F[Z-1]&&Z-H>=I&&z.push([H,Z-1]),z}const ke=32;function Ge(F,I,z,{location:H=B.location,distance:U=B.distance,threshold:Z=B.threshold,findAllMatches:K=B.findAllMatches,minMatchCharLength:ie=B.minMatchCharLength,includeMatches:ne=B.includeMatches,ignoreLocation:le=B.ignoreLocation}={}){if(I.length>ke)throw new Error(T(ke));const de=I.length,be=F.length,Se=Math.max(0,Math.min(H,be));let Ve=Z,tt=Se;const Ut=ie>1||ne,Xs=Ut?Array(be):[];let Vi;for(;(Vi=F.indexOf(I,tt))>-1;){let Zt=me(I,{currentLocation:Vi,expectedLocation:Se,distance:U,ignoreLocation:le});if(Ve=Math.min(Zt,Ve),tt=Vi+de,Ut){let fs=0;for(;fs<de;)Xs[Vi+fs]=1,fs+=1}}tt=-1;let Xn=[],Ys=1,bl=de+be;const jY=1<<de-1;for(let Zt=0;Zt<de;Zt+=1){let fs=0,ps=bl;for(;fs<ps;)me(I,{errors:Zt,currentLocation:Se+ps,expectedLocation:Se,distance:U,ignoreLocation:le})<=Ve?fs=ps:bl=ps,ps=Math.floor((bl-fs)/2+fs);bl=ps;let Y0=Math.max(1,Se-ps+1),Kd=K?be:Math.min(Se+ps,be)+de,Yn=Array(Kd+2);Yn[Kd+1]=(1<<Zt)-1;for(let ri=Kd;ri>=Y0;ri-=1){let yl=ri-1,H0=z[F.charAt(yl)];if(Ut&&(Xs[yl]=+!!H0),Yn[ri]=(Yn[ri+1]<<1|1)&H0,Zt&&(Yn[ri]|=(Xn[ri+1]|Xn[ri])<<1|1|Xn[ri+1]),Yn[ri]&jY&&(Ys=me(I,{errors:Zt,currentLocation:yl,expectedLocation:Se,distance:U,ignoreLocation:le}),Ys<=Ve)){if(Ve=Ys,tt=yl,tt<=Se)break;Y0=Math.max(1,2*Se-tt)}}if(me(I,{errors:Zt+1,currentLocation:Se,expectedLocation:Se,distance:U,ignoreLocation:le})>Ve)break;Xn=Yn}const qd={isMatch:tt>=0,score:Math.max(.001,Ys)};if(Ut){const Zt=Oe(Xs,ie);Zt.length?ne&&(qd.indices=Zt):qd.isMatch=!1}return qd}function De(F){let I={};for(let z=0,H=F.length;z<H;z+=1){const U=F.charAt(z);I[U]=(I[U]||0)|1<<H-z-1}return I}class Mt{constructor(I,{location:z=B.location,threshold:H=B.threshold,distance:U=B.distance,includeMatches:Z=B.includeMatches,findAllMatches:K=B.findAllMatches,minMatchCharLength:ie=B.minMatchCharLength,isCaseSensitive:ne=B.isCaseSensitive,ignoreLocation:le=B.ignoreLocation}={}){if(this.options={location:z,threshold:H,distance:U,includeMatches:Z,findAllMatches:K,minMatchCharLength:ie,isCaseSensitive:ne,ignoreLocation:le},this.pattern=ne?I:I.toLowerCase(),this.chunks=[],!this.pattern.length)return;const de=(Se,Ve)=>{this.chunks.push({pattern:Se,alphabet:De(Se),startIndex:Ve})},be=this.pattern.length;if(be>ke){let Se=0;const Ve=be%ke,tt=be-Ve;for(;Se<tt;)de(this.pattern.substr(Se,ke),Se),Se+=ke;if(Ve){const Ut=be-ke;de(this.pattern.substr(Ut),Ut)}}else de(this.pattern,0)}searchIn(I){const{isCaseSensitive:z,includeMatches:H}=this.options;if(z||(I=I.toLowerCase()),this.pattern===I){let tt={isMatch:!0,score:0};return H&&(tt.indices=[[0,I.length-1]]),tt}const{location:U,distance:Z,threshold:K,findAllMatches:ie,minMatchCharLength:ne,ignoreLocation:le}=this.options;let de=[],be=0,Se=!1;this.chunks.forEach(({pattern:tt,alphabet:Ut,startIndex:Xs})=>{const{isMatch:Vi,score:Xn,indices:Ys}=Ge(I,tt,Ut,{location:U+Xs,distance:Z,threshold:K,findAllMatches:ie,minMatchCharLength:ne,includeMatches:H,ignoreLocation:le});Vi&&(Se=!0),be+=Xn,Vi&&Ys&&(de=[...de,...Ys])});let Ve={isMatch:Se,score:Se?be/this.chunks.length:1};return Se&&H&&(Ve.indices=de),Ve}}class ki{constructor(I){this.pattern=I}static isMultiMatch(I){return Q0(I,this.multiRegex)}static isSingleMatch(I){return Q0(I,this.singleRegex)}search(){}}function Q0(F,I){const z=F.match(I);return z?z[1]:null}class $Y extends ki{constructor(I){super(I)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(I){const z=I===this.pattern;return{isMatch:z,score:z?0:1,indices:[0,this.pattern.length-1]}}}class PY extends ki{constructor(I){super(I)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(I){const H=I.indexOf(this.pattern)===-1;return{isMatch:H,score:H?0:1,indices:[0,I.length-1]}}}class LY extends ki{constructor(I){super(I)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(I){const z=I.startsWith(this.pattern);return{isMatch:z,score:z?0:1,indices:[0,this.pattern.length-1]}}}class NY extends ki{constructor(I){super(I)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(I){const z=!I.startsWith(this.pattern);return{isMatch:z,score:z?0:1,indices:[0,I.length-1]}}}class DY extends ki{constructor(I){super(I)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(I){const z=I.endsWith(this.pattern);return{isMatch:z,score:z?0:1,indices:[I.length-this.pattern.length,I.length-1]}}}class MY extends ki{constructor(I){super(I)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(I){const z=!I.endsWith(this.pattern);return{isMatch:z,score:z?0:1,indices:[0,I.length-1]}}}class V0 extends ki{constructor(I,{location:z=B.location,threshold:H=B.threshold,distance:U=B.distance,includeMatches:Z=B.includeMatches,findAllMatches:K=B.findAllMatches,minMatchCharLength:ie=B.minMatchCharLength,isCaseSensitive:ne=B.isCaseSensitive,ignoreLocation:le=B.ignoreLocation}={}){super(I),this._bitapSearch=new Mt(I,{location:z,threshold:H,distance:U,includeMatches:Z,findAllMatches:K,minMatchCharLength:ie,isCaseSensitive:ne,ignoreLocation:le})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(I){return this._bitapSearch.searchIn(I)}}class F0 extends ki{constructor(I){super(I)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(I){let z=0,H;const U=[],Z=this.pattern.length;for(;(H=I.indexOf(this.pattern,z))>-1;)z=H+Z,U.push([H,z-1]);const K=!!U.length;return{isMatch:K,score:K?0:1,indices:U}}}const Hd=[$Y,F0,LY,NY,MY,DY,PY,V0],W0=Hd.length,RY=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,IY="|";function BY(F,I={}){return F.split(IY).map(z=>{let H=z.trim().split(RY).filter(Z=>Z&&!!Z.trim()),U=[];for(let Z=0,K=H.length;Z<K;Z+=1){const ie=H[Z];let ne=!1,le=-1;for(;!ne&&++le<W0;){const de=Hd[le];let be=de.isMultiMatch(ie);be&&(U.push(new de(be,I)),ne=!0)}if(!ne)for(le=-1;++le<W0;){const de=Hd[le];let be=de.isSingleMatch(ie);if(be){U.push(new de(be,I));break}}}return U})}const QY=new Set([V0.type,F0.type]);class VY{constructor(I,{isCaseSensitive:z=B.isCaseSensitive,includeMatches:H=B.includeMatches,minMatchCharLength:U=B.minMatchCharLength,ignoreLocation:Z=B.ignoreLocation,findAllMatches:K=B.findAllMatches,location:ie=B.location,threshold:ne=B.threshold,distance:le=B.distance}={}){this.query=null,this.options={isCaseSensitive:z,includeMatches:H,minMatchCharLength:U,findAllMatches:K,ignoreLocation:Z,location:ie,threshold:ne,distance:le},this.pattern=z?I:I.toLowerCase(),this.query=BY(this.pattern,this.options)}static condition(I,z){return z.useExtendedSearch}searchIn(I){const z=this.query;if(!z)return{isMatch:!1,score:1};const{includeMatches:H,isCaseSensitive:U}=this.options;I=U?I:I.toLowerCase();let Z=0,K=[],ie=0;for(let ne=0,le=z.length;ne<le;ne+=1){const de=z[ne];K.length=0,Z=0;for(let be=0,Se=de.length;be<Se;be+=1){const Ve=de[be],{isMatch:tt,indices:Ut,score:Xs}=Ve.search(I);if(tt){if(Z+=1,ie+=Xs,H){const Vi=Ve.constructor.type;QY.has(Vi)?K=[...K,...Ut]:K.push(Ut)}}else{ie=0,Z=0,K.length=0;break}}if(Z){let be={isMatch:!0,score:ie/Z};return H&&(be.indices=K),be}}return{isMatch:!1,score:1}}}const Gd=[];function FY(...F){Gd.push(...F)}function jd(F,I){for(let z=0,H=Gd.length;z<H;z+=1){let U=Gd[z];if(U.condition(F,I))return new U(F,I)}return new Mt(F,I)}const ml={AND:"$and",OR:"$or"},Ud={PATH:"$path",PATTERN:"$val"},Zd=F=>!!(F[ml.AND]||F[ml.OR]),WY=F=>!!F[Ud.PATH],zY=F=>!d(F)&&u(F)&&!Zd(F),z0=F=>({[ml.AND]:Object.keys(F).map(I=>({[I]:F[I]}))});function X0(F,I,{auto:z=!0}={}){const H=U=>{let Z=Object.keys(U);const K=WY(U);if(!K&&Z.length>1&&!Zd(U))return H(z0(U));if(zY(U)){const ne=K?U[Ud.PATH]:Z[0],le=K?U[Ud.PATTERN]:U[ne];if(!O(le))throw new Error(C(ne));const de={keyId:k(ne),pattern:le};return z&&(de.searcher=jd(le,I)),de}let ie={children:[],operator:Z[0]};return Z.forEach(ne=>{const le=U[ne];d(le)&&le.forEach(de=>{ie.children.push(H(de))})}),ie};return Zd(F)||(F=z0(F)),H(F)}function XY(F,{ignoreFieldNorm:I=B.ignoreFieldNorm}){F.forEach(z=>{let H=1;z.matches.forEach(({key:U,norm:Z,score:K})=>{const ie=U?U.weight:null;H*=Math.pow(K===0&&ie?Number.EPSILON:K,(ie||1)*(I?1:Z))}),z.score=H})}function YY(F,I){const z=F.matches;I.matches=[],y(z)&&z.forEach(H=>{if(!y(H.indices)||!H.indices.length)return;const{indices:U,value:Z}=H;let K={indices:U,value:Z};H.key&&(K.key=H.key.src),H.idx>-1&&(K.refIndex=H.idx),I.matches.push(K)})}function HY(F,I){I.score=F.score}function GY(F,I,{includeMatches:z=B.includeMatches,includeScore:H=B.includeScore}={}){const U=[];return z&&U.push(YY),H&&U.push(HY),F.map(Z=>{const{idx:K}=Z,ie={item:I[K],refIndex:K};return U.length&&U.forEach(ne=>{ne(Z,ie)}),ie})}class zn{constructor(I,z={},H){this.options={...B,...z},this.options.useExtendedSearch,this._keyStore=new P(this.options.keys),this.setCollection(I,H)}setCollection(I,z){if(this._docs=I,z&&!(z instanceof he))throw new Error(S);this._myIndex=z||j(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(I){y(I)&&(this._docs.push(I),this._myIndex.add(I))}remove(I=()=>!1){const z=[];for(let H=0,U=this._docs.length;H<U;H+=1){const Z=this._docs[H];I(Z,H)&&(this.removeAt(H),H-=1,U-=1,z.push(Z))}return z}removeAt(I){this._docs.splice(I,1),this._myIndex.removeAt(I)}getIndex(){return this._myIndex}search(I,{limit:z=-1}={}){const{includeMatches:H,includeScore:U,shouldSort:Z,sortFn:K,ignoreFieldNorm:ie}=this.options;let ne=O(I)?O(this._docs[0])?this._searchStringList(I):this._searchObjectList(I):this._searchLogical(I);return XY(ne,{ignoreFieldNorm:ie}),Z&&ne.sort(K),r(z)&&z>-1&&(ne=ne.slice(0,z)),GY(ne,this._docs,{includeMatches:H,includeScore:U})}_searchStringList(I){const z=jd(I,this.options),{records:H}=this._myIndex,U=[];return H.forEach(({v:Z,i:K,n:ie})=>{if(!y(Z))return;const{isMatch:ne,score:le,indices:de}=z.searchIn(Z);ne&&U.push({item:Z,idx:K,matches:[{score:le,value:Z,norm:ie,indices:de}]})}),U}_searchLogical(I){const z=X0(I,this.options),H=(ie,ne,le)=>{if(!ie.children){const{keyId:be,searcher:Se}=ie,Ve=this._findMatches({key:this._keyStore.get(be),value:this._myIndex.getValueForItemAtKeyId(ne,be),searcher:Se});return Ve&&Ve.length?[{idx:le,item:ne,matches:Ve}]:[]}const de=[];for(let be=0,Se=ie.children.length;be<Se;be+=1){const Ve=ie.children[be],tt=H(Ve,ne,le);if(tt.length)de.push(...tt);else if(ie.operator===ml.AND)return[]}return de},U=this._myIndex.records,Z={},K=[];return U.forEach(({$:ie,i:ne})=>{if(y(ie)){let le=H(z,ie,ne);le.length&&(Z[ne]||(Z[ne]={idx:ne,item:ie,matches:[]},K.push(Z[ne])),le.forEach(({matches:de})=>{Z[ne].matches.push(...de)}))}}),K}_searchObjectList(I){const z=jd(I,this.options),{keys:H,records:U}=this._myIndex,Z=[];return U.forEach(({$:K,i:ie})=>{if(!y(K))return;let ne=[];H.forEach((le,de)=>{ne.push(...this._findMatches({key:le,value:K[de],searcher:z}))}),ne.length&&Z.push({idx:ie,item:K,matches:ne})}),Z}_findMatches({key:I,value:z,searcher:H}){if(!y(z))return[];let U=[];if(d(z))z.forEach(({v:Z,i:K,n:ie})=>{if(!y(Z))return;const{isMatch:ne,score:le,indices:de}=H.searchIn(Z);ne&&U.push({score:le,key:I,value:Z,idx:K,norm:ie,indices:de})});else{const{v:Z,n:K}=z,{isMatch:ie,score:ne,indices:le}=H.searchIn(Z);ie&&U.push({score:ne,key:I,value:Z,norm:K,indices:le})}return U}}zn.version="6.6.2",zn.createIndex=j,zn.parseIndex=se,zn.config=B,zn.parseQuery=X0,FY(VY)},791:function(a,l,c){c.r(l),c.d(l,{__DO_NOT_USE__ActionTypes:function(){return y},applyMiddleware:function(){return P},bindActionCreators:function(){return $},combineReducers:function(){return T},compose:function(){return N},createStore:function(){return w},legacy_createStore:function(){return S}});function d(E){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},d(E)}function p(E,x){if(d(E)!=="object"||E===null)return E;var k=E[Symbol.toPrimitive];if(k!==void 0){var A=k.call(E,x||"default");if(d(A)!=="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(E)}function g(E){var x=p(E,"string");return d(x)==="symbol"?x:String(x)}function b(E,x,k){return x=g(x),x in E?Object.defineProperty(E,x,{value:k,enumerable:!0,configurable:!0,writable:!0}):E[x]=k,E}function O(E,x){var k=Object.keys(E);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(E);x&&(A=A.filter(function(L){return Object.getOwnPropertyDescriptor(E,L).enumerable})),k.push.apply(k,A)}return k}function r(E){for(var x=1;x<arguments.length;x++){var k=arguments[x]!=null?arguments[x]:{};x%2?O(Object(k),!0).forEach(function(A){b(E,A,k[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(k)):O(Object(k)).forEach(function(A){Object.defineProperty(E,A,Object.getOwnPropertyDescriptor(k,A))})}return E}function h(E){return"Minified Redux error #"+E+"; visit https://redux.js.org/Errors?code="+E+" for the full message or use the non-minified dev environment for full errors. "}var u=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),m=function(){return Math.random().toString(36).substring(7).split("").join(".")},y={INIT:"@@redux/INIT"+m(),REPLACE:"@@redux/REPLACE"+m(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+m()}};function v(E){if(typeof E!="object"||E===null)return!1;for(var x=E;Object.getPrototypeOf(x)!==null;)x=Object.getPrototypeOf(x);return Object.getPrototypeOf(E)===x}function w(E,x,k){var A;if(typeof x=="function"&&typeof k=="function"||typeof k=="function"&&typeof arguments[3]=="function")throw new Error(h(0));if(typeof x=="function"&&typeof k>"u"&&(k=x,x=void 0),typeof k<"u"){if(typeof k!="function")throw new Error(h(1));return k(w)(E,x)}if(typeof E!="function")throw new Error(h(2));var L=E,D=x,M=[],Q=M,B=!1;function X(){Q===M&&(Q=M.slice())}function te(){if(B)throw new Error(h(3));return D}function he(Oe){if(typeof Oe!="function")throw new Error(h(4));if(B)throw new Error(h(5));var ke=!0;return X(),Q.push(Oe),function(){if(ke){if(B)throw new Error(h(6));ke=!1,X();var De=Q.indexOf(Oe);Q.splice(De,1),M=null}}}function j(Oe){if(!v(Oe))throw new Error(h(7));if(typeof Oe.type>"u")throw new Error(h(8));if(B)throw new Error(h(9));try{B=!0,D=L(D,Oe)}finally{B=!1}for(var ke=M=Q,Ge=0;Ge<ke.length;Ge++){var De=ke[Ge];De()}return Oe}function se(Oe){if(typeof Oe!="function")throw new Error(h(10));L=Oe,j({type:y.REPLACE})}function me(){var Oe,ke=he;return Oe={subscribe:function(De){if(typeof De!="object"||De===null)throw new Error(h(11));function Mt(){De.next&&De.next(te())}Mt();var ki=ke(Mt);return{unsubscribe:ki}}},Oe[u]=function(){return this},Oe}return j({type:y.INIT}),A={dispatch:j,subscribe:he,getState:te,replaceReducer:se},A[u]=me,A}var S=w;function C(E){Object.keys(E).forEach(function(x){var k=E[x],A=k(void 0,{type:y.INIT});if(typeof A>"u")throw new Error(h(12));if(typeof k(void 0,{type:y.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(h(13))})}function T(E){for(var x=Object.keys(E),k={},A=0;A<x.length;A++){var L=x[A];typeof E[L]=="function"&&(k[L]=E[L])}var D=Object.keys(k),M;try{C(k)}catch(Q){M=Q}return function(B,X){if(B===void 0&&(B={}),M)throw M;for(var te=!1,he={},j=0;j<D.length;j++){var se=D[j],me=k[se],Oe=B[se],ke=me(Oe,X);if(typeof ke>"u")throw X&&X.type,new Error(h(14));he[se]=ke,te=te||ke!==Oe}return te=te||D.length!==Object.keys(B).length,te?he:B}}function _(E,x){return function(){return x(E.apply(this,arguments))}}function $(E,x){if(typeof E=="function")return _(E,x);if(typeof E!="object"||E===null)throw new Error(h(16));var k={};for(var A in E){var L=E[A];typeof L=="function"&&(k[A]=_(L,x))}return k}function N(){for(var E=arguments.length,x=new Array(E),k=0;k<E;k++)x[k]=arguments[k];return x.length===0?function(A){return A}:x.length===1?x[0]:x.reduce(function(A,L){return function(){return A(L.apply(void 0,arguments))}})}function P(){for(var E=arguments.length,x=new Array(E),k=0;k<E;k++)x[k]=arguments[k];return function(A){return function(){var L=A.apply(void 0,arguments),D=function(){throw new Error(h(15))},M={getState:L.getState,dispatch:function(){return D.apply(void 0,arguments)}},Q=x.map(function(B){return B(M)});return D=N.apply(void 0,Q)(L.dispatch),r(r({},L),{},{dispatch:D})}}}}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return t[a].call(c.exports,c,c.exports,s),c.exports}(function(){s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l}})(),function(){s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})}}(),function(){s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)}}(),function(){s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}}();var n={};return function(){var a=s(373),l=s.n(a);s(187),s(883),s(789),s(686),n.default=l()}(),n=n.default,n}()})})(Cf);var _f=Cf.exports;const jl=WT(_f),Tf=gs({__proto__:null,default:jl},[_f]),mH="",zT=["required"],XT={value:"",disabled:"",selected:""},Af=f.defineComponent({__name:"FormAutocomplete",props:{modelValue:{},placeholder:{default:"Selecione"},options:{default:()=>[]},label:{},size:{default:"md"},last:{type:Boolean},template:{},position:{default:"bottom"},config:{default:()=>({})},required:{type:Boolean}},emits:["update:modelValue","open","close","update"],setup(o,{expose:e,emit:t}){var u;const i=t,s=jl||Tf,n=o,a=`ui-form-select-${(u=f.getCurrentInstance())==null?void 0:u.uid}`,l=f.shallowRef(),c=f.ref(!1);let d;const p=m=>n.template.choice(m),g=f.computed(()=>{var v;const m=Ks(n.options);m.options=m.options??[];const y={searchEnabled:!0,searchChoices:!0,removeItems:!0,position:n.position,removeItemButton:!0,addItems:!0,placeholder:!0,noResultsText:"Nenhum resultado encontrado",noChoicesText:"Sem opções para escolher",items:[],choices:m,allowHTML:!1,searchResultLimit:20,options:[],...n.config};return(v=n.template)!=null&&v.choice&&(y.callbackOnCreateTemplates=function(w){return{choice:({classNames:S},C)=>w(`
						<div class="${S.item} ${S.itemChoice} ${C.disabled?S.itemDisabled:S.itemSelectable}"
						data-select-text="${this.config.itemSelectText}"
						data-choice ${C.disabled?'data-choice-disabled aria-disabled="true"':"data-choice-selectable"}
						data-id="${C.id}"
						data-value="${C.value}" ${C.groupId>0?'role="treeitem"':'role="option"'}
						>
							${p(C)}
						</div>
					`)}}),y}),b=()=>{f.nextTick(()=>{l.value&&l.value.destroy(),d&&(l.value=new s(d,g.value),r())})},O=(m,y)=>{i("update:modelValue",m),i("update",m,y)},r=()=>{f.nextTick(()=>{l.value&&(n.modelValue==null?l.value.setChoiceByValue(""):l.value.setChoiceByValue(n.modelValue))})};function h(){l.value&&l.value.showDropdown()}return f.onMounted(()=>{d=document.getElementById(`${a}`),d&&(d.addEventListener("showDropdown",()=>i("open"),!1),d.addEventListener("change",function(m){O(l.value.getValue(!0),l.value.getValue())},!1)),f.watch(()=>n.modelValue,()=>r()),f.watch(()=>[n.options],()=>b(),{immediate:!0,deep:!0})}),e({setChoices(m,y){l.value&&l.value.setChoices(m,void 0,void 0,y)}}),(m,y)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-form-autocomplete",[{"-focus":c.value,"mb-0":m.last},`-${m.size}`]])},[m.label?(f.openBlock(),f.createBlock(ho,{key:0,label:m.label,onClick:h},null,8,["label"])):f.createCommentVNode("",!0),f.createElementVNode("select",{class:"ui-form-select",id:a,required:m.required},[f.createElementVNode("option",XT,f.toDisplayString(m.placeholder),1)],8,zT)],2))}}),bH="",HT={key:0,class:"ui-form-spinbutton-loader"},GT=f.createElementVNode("svg",{viewBox:"0 0 16 16",width:"1em",height:"1em",focusable:"false",role:"img","aria-label":"dash","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"icon"},[f.createElementVNode("g",{transform:"translate(8 8) scale(1.25 1.25) translate(-8 -8)"},[f.createElementVNode("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"})])],-1),jT=["disabled"],UT=["value","readonly","placeholder"],ZT=f.createElementVNode("svg",{viewBox:"0 0 16 16",width:"1em",height:"1em",focusable:"false",role:"img","aria-label":"plus","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"icon"},[f.createElementVNode("g",{transform:"translate(8 8) scale(1.25 1.25) translate(-8 -8)"},[f.createElementVNode("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})])],-1),qT=f.defineComponent({__name:"FormSpinbutton",props:{modelValue:{default:1},min:{},max:{},placeholder:{},size:{},step:{default:1},loading:{type:Boolean},disabled:{type:Boolean},inputable:{type:Boolean}},emits:["update:modelValue","change"],setup(o,{emit:e}){const t=e,i=o,s=f.ref(!1),n=f.ref(!1),a=g=>{t("update:modelValue",g),t("change",g)},l=()=>{(i.max===void 0||i.modelValue<Number(i.max))&&a(Number(i.modelValue)+Number(i.step))},c=()=>{(i.min===void 0||i.modelValue>Number(i.min))&&a(Number(i.modelValue)-Number(i.step))},d=f.computed(()=>{const g=[];return i.size&&g.push(`-${i.size}`),i.disabled&&g.push("-disabled"),g}),p=g=>{let b=g.target.value;i.max&&b>i.max&&(b=i.max),i.min&&b<i.min&&(b=i.min),g.target.value=b,b!=i.modelValue&&a(Number(b))};return f.watchEffect(()=>{n.value=!1,s.value=!1,i.max&&i.modelValue>=Number(i.max)&&(n.value=!0),i.max&&i.modelValue<=Number(i.min)&&(s.value=!0)}),(g,b)=>(f.openBlock(),f.createElementBlock("div",{role:"group",tabindex:"-1",class:f.normalizeClass(["ui-form-spinbutton",d.value])},[g.loading?(f.openBlock(),f.createElementBlock("div",HT,[f.createVNode(Fi,{class:"ui-form-spinbutton-loader-spin",size:"18"})])):f.createCommentVNode("",!0),f.createVNode(ye,{disabled:g.disabled||s.value,tabindex:"-1",type:"button","aria-controls":"demo-sb","aria-label":"Decrement","aria-keyshortcuts":"ArrowDown",class:f.normalizeClass([d.value,"ui-form-spinbutton-action"]),onClick:c},{default:f.withCtx(()=>[GT]),_:1},8,["disabled","class"]),f.createElementVNode("div",{disabled:g.disabled,class:"output",dir:"ltr",role:"spinbutton",tabindex:"0","aria-live":"off","aria-valuemin":"1","aria-valuemax":"100","aria-valuenow":"50","aria-valuetext":"50"},[f.createElementVNode("input",{type:"tel",value:g.modelValue,readonly:!g.inputable,onBlur:p,onFocus:b[0]||(b[0]=O=>O.target.select()),placeholder:g.placeholder},null,40,UT)],8,jT),f.createVNode(ye,{tabindex:"-1",disabled:g.disabled||n.value,type:"button","aria-controls":"demo-sb","aria-label":"Increment","aria-keyshortcuts":"ArrowUp",class:f.normalizeClass([d.value,"ui-form-spinbutton-action"]),onClick:l},{default:f.withCtx(()=>[ZT]),_:1},8,["disabled","class"])],2))}}),yH="",KT={},JT={class:"ui-form-helper"};function eA(o,e){return f.openBlock(),f.createElementBlock("div",JT,[f.renderSlot(o.$slots,"default")])}const tA=je(KT,[["render",eA]]),OH="",iA={key:0,class:"ui-form-validation"},sA={key:0,class:"ui-form-validation-key"},nA=f.defineComponent({__name:"FormValidation",props:{modelValue:{},translate:{},scrollToTop:{type:Boolean},title:{default:"Erros encontrados"},hideKey:{type:Boolean},noDismissible:{type:Boolean}},emits:["update:modelValue"],setup(o,{emit:e}){const t=e,i=o,s=a=>{if(!i.translate)return a;const l=a.split(".");if(l.length>=3){const c=l[0],d=Number(l[1])+1,p=l[2],g=i.translate[c];return g[p]?`${g[c]}: ${g[p]} #${d}`:a}return i.translate[a]||a},n=()=>{t("update:modelValue",null)};return f.watchEffect(()=>{const a=i.modelValue,l=document.querySelectorAll("[class*='form-error-']");Qt(l,c=>{c.classList.remove("-invalid")}),a&&i.scrollToTop&&(window.scrollTo(0,0),Qt(a,(c,d)=>{const p=document.getElementsByClassName(`error.${d}`);p[0]&&p[0].classList.add("-invalid")}))}),(a,l)=>a.modelValue!=null?(f.openBlock(),f.createElementBlock("div",iA,[f.createVNode(co,{variant:"danger",show:!!a.modelValue,title:a.title,dismissible:!a.noDismissible,onDismissed:n},{default:f.withCtx(()=>[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(a.modelValue,(c,d)=>(f.openBlock(),f.createElementBlock("ul",{key:d},[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(c,p=>(f.openBlock(),f.createElementBlock("li",{key:p},[a.hideKey?f.createCommentVNode("",!0):(f.openBlock(),f.createElementBlock("b",sA,f.toDisplayString(s(String(d)))+":",1)),f.createTextVNode(" "+f.toDisplayString(p),1)]))),128))]))),128))]),_:1},8,["show","title","dismissible"])])):f.createCommentVNode("",!0)}}),Ul=je(nA,[["__scopeId","data-v-7a5dd414"]]),xH="",rA={class:"ui-avatar-content"},oA=["src"],aA=f.defineComponent({__name:"Avatar",props:{title:{},variant:{},size:{},label:{},src:{}},setup(o){const e=o,t=f.ref([]),i=f.ref({});return e.size&&(i.value.width=`${e.size}px`,i.value.height=`${e.size}px`,i.value.fontSize=`${Number(e.size)*.33}px`),e.variant&&t.value.push(`-${e.variant}`),(s,n)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-avatar",t.value]),style:f.normalizeStyle(i.value)},[f.createElementVNode("div",rA,[s.src?(f.openBlock(),f.createElementBlock("img",{key:0,src:s.src},null,8,oA)):f.renderSlot(s.$slots,"default",{key:1},()=>[f.createTextVNode(f.toDisplayString(s.label),1)])])],6))}}),vH="",lA=["value","max"],cA=f.defineComponent({__name:"ProgressBar",props:{height:{default:"3px"},max:{default:100},value:{}},setup(o){return f.useCssVars(e=>({"13bdfeaa":e.height})),(e,t)=>(f.openBlock(),f.createElementBlock("progress",{class:"ui-progress-bar",value:e.value,max:e.max},null,8,lA))}}),wH="",ws=f.defineComponent({__name:"Skeleton",props:{width:{},height:{}},setup(o){const e=o,t=f.computed(()=>{const i={};return e.width&&(i.width=e.width),e.height&&(i.height=e.height),i});return(i,s)=>(f.openBlock(),f.createElementBlock("div",{class:"ui-skeleton",style:f.normalizeStyle(t.value)},null,4))}}),kH="",hA={key:0},dA={key:0},uA={key:0,width:"1"},Ef=f.defineComponent({__name:"SkeletonTable",props:{cols:{default:5},hideHeader:{type:Boolean},lines:{},noBorder:{type:Boolean},padding:{default:"16px"},rows:{default:3},width:{},withAction:{type:[Boolean,String,Number]},withAvatar:{type:Boolean}},setup(o){f.useCssVars(i=>({"797e0b5c":i.padding}));const e=o,t=f.computed(()=>{const i={};return e.width&&(i.width=e.width),i});return(i,s)=>(f.openBlock(),f.createElementBlock("table",{class:f.normalizeClass(["ui-table ui-skeleton-table",{"-no-border":i.noBorder}]),style:f.normalizeStyle(t.value)},[i.hideHeader?f.createCommentVNode("",!0):(f.openBlock(),f.createElementBlock("thead",hA,[f.createElementVNode("tr",null,[i.withAvatar?(f.openBlock(),f.createElementBlock("th",dA)):f.createCommentVNode("",!0),(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(Number(i.cols),n=>(f.openBlock(),f.createElementBlock("th",{key:n},[f.createVNode(ws)]))),128)),(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(Number(i.withAction),n=>(f.openBlock(),f.createElementBlock("th",{width:"1",key:n}))),128))])])),f.createElementVNode("tbody",null,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(Number(i.rows),n=>(f.openBlock(),f.createElementBlock("tr",{key:n},[i.withAvatar?(f.openBlock(),f.createElementBlock("td",uA,[f.createVNode(ws,{width:"30px",height:"30px",style:{"border-radius":"100%"}})])):f.createCommentVNode("",!0),(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(Number(i.cols),a=>(f.openBlock(),f.createElementBlock("td",{key:a},[f.createVNode(ws,{width:"85%"}),Number(i.lines)>1?(f.openBlock(),f.createBlock(ws,{key:0,width:"40%",height:"14px"})):f.createCommentVNode("",!0)]))),128)),(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(Number(i.withAction),a=>(f.openBlock(),f.createElementBlock("td",{width:"1",key:a},[f.createVNode(ws,{width:"32px"})]))),128))]))),128))])],6))}}),SH="",fA={class:"ui-skeleton-list"},pA=f.defineComponent({__name:"SkeletonList",props:{cols:{default:5},rows:{default:3}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",fA,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(Number(e.rows),i=>(f.openBlock(),f.createElementBlock("div",{class:"ui-skeleton-list-item",key:i},[f.createVNode(ws,{width:"50%",height:"10px"})]))),128))]))}}),CH="",gA=["src"],mA=f.defineComponent({__name:"Image",props:{src:{},size:{default:50},rounded:{type:Boolean}},setup(o){f.useCssVars(n=>({"564d42a6":i.value.width,"25cde73c":s.value.fontSize,e04a70d8:s.value.width,"0a88a0e7":s.value.minHeight}));const e=o,t=f.computed(()=>{let n=[];return e.src||n.push("-no-image"),e.rounded&&n.push("-is-rounded"),n}),i=f.computed(()=>{const n={};return e.size&&(n.width=`${e.size}px`),n}),s=f.computed(()=>{const n={};return e.size&&(n.fontSize=`${Number(e.size)/2.5}px`,n.width=`${Number(e.size)/2.5}px`,n.minHeight=`${Number(e.size)/2.5}px`),n});return(n,a)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-image",t.value])},[n.src?(f.openBlock(),f.createElementBlock("img",{key:0,src:n.src,class:"ui-image-content"},null,8,gA)):(f.openBlock(),f.createBlock(ge,{key:1,name:"wallpaper",class:"ui-image-icon",size:"22"}))],2))}}),_H="",bA={class:"ui-form-tags-content"},yA=["placeholder","disabled"],OA={key:2,class:"ui-form-tags-actions"},xA=f.defineComponent({__name:"FormTags",props:{modelValue:{},placeholder:{default:"Criar tags"},label:{},closeOnSelect:{type:Boolean},last:{type:Boolean},actions:{},options:{default:[]},create:{type:Boolean,default:!0},variant:{},disabled:{type:Boolean}},emits:["update:modelValue","update","open","close","add","remove"],setup(o,{emit:e}){var O;const t=jl||Tf,i=e,s=o,n=`ui-form-select-${(O=f.getCurrentInstance())==null?void 0:O.uid}`,a=f.shallowRef();let l;const c=r=>{i("update:modelValue",r),i("update",r)},d=()=>{f.nextTick(()=>{if(a.value&&a.value.destroy(),l){const r={searchEnabled:!0,searchChoices:!0,removeItems:!0,removeItemButton:!0,addItems:!0,position:"bottom",create:!1,placeholder:!0,placeholderValue:s.placeholder||"Selecione",noResultsText:"Nenhum resultado encontrado",noChoicesText:"Sem opções para escolher",items:[],choices:Ks(s.options),allowHTML:!0};a.value=new t(l,r),g(),s.options.length&&b().length&&p()}})},p=()=>{b().map(r=>{a.value.setChoiceByValue(Number(r))})},g=()=>{f.nextTick(()=>{if(a.value){const r=b();r==null&&a.value.clearStore(),s.create&&rt(r)&&(a.value.clearStore(),a.value.setValue(r))}})},b=()=>s.modelValue&&!rt(s.modelValue)?s.modelValue.split(","):s.modelValue??[];return f.onMounted(()=>{l=document.querySelector(`#${n}`),l&&(l.addEventListener("change",function(r){const h=a.value.getValue(!0);c(h.join(",")),s.closeOnSelect&&a.value.hideDropdown()},!1),l.addEventListener("addItem",function(r){i("add",r.detail)},!1),l.addEventListener("removeItem",function(r){i("remove",r.detail)},!1)),f.watch(()=>s.modelValue,()=>g(),{immediate:!0}),f.watch(()=>[s.options],()=>d(),{immediate:!0,deep:!0})}),(r,h)=>{var u;return f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-form-tags",{"-has-value":(u=r.modelValue)==null?void 0:u.length,"mb-0":r.last,variant:`-${r.variant}`}])},[r.label?(f.openBlock(),f.createBlock(ho,{key:0,label:r.label,action:{label:"Remover"}},null,8,["label"])):f.createCommentVNode("",!0),f.createElementVNode("div",bA,[s.create?(f.openBlock(),f.createElementBlock("input",{key:0,ref:"selectRef",id:n,type:"text",autocomplete:"off",placeholder:r.placeholder,disabled:r.disabled},null,8,yA)):(f.openBlock(),f.createElementBlock("select",{key:1,multiple:"",ref:"selectRef",id:n,autocomplete:"off"},null,512)),r.actions?(f.openBlock(),f.createElementBlock("div",OA,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(r.actions,m=>(f.openBlock(),f.createBlock(ye,{label:m.label,onClick:m.onAction},null,8,["label","onClick"]))),256))])):f.createCommentVNode("",!0)])],2)}}}),TH="",$f=f.defineComponent({__name:"Tag",props:{label:{},variant:{default:"default"}},emits:["remove"],setup(o,{emit:e}){const t=o,i=e,s=()=>{i("remove")},n=f.computed(()=>{let a=[];return t.variant&&a.push(`-variant-${t.variant}`),a});return(a,l)=>(f.openBlock(),f.createElementBlock("span",{class:f.normalizeClass(["ui-tag",n.value])},[f.renderSlot(a.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(a.label),1)]),f.createVNode(ge,{name:"close",class:"ui-tag-close",onClick:s})],2))}}),AH="",vA={},wA={class:"ui-tag-list"};function kA(o,e){return f.openBlock(),f.createElementBlock("div",wA,[f.renderSlot(o.$slots,"default")])}const Pf=je(vA,[["render",kA]]),EH="",Js=f.defineComponent({__name:"TextStyle",props:{block:{type:Boolean},label:{},tag:{default:"span"},variant:{}},setup(o){const e=o,t=f.computed(()=>[e.variant?`-variant-${e.variant}`:"",e.block?"-block":""]);return(i,s)=>(f.openBlock(),f.createBlock(f.resolveDynamicComponent(i.tag),{class:f.normalizeClass(["ui-text-style",t.value])},{default:f.withCtx(()=>[f.renderSlot(i.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(i.label),1)])]),_:3},8,["class"]))}}),$H="",SA={class:"ui-page-actions"},CA={key:0,class:"ui-page-actions-secondary"},_A={key:1,class:"ui-page-actions-primary"},TA=f.defineComponent({__name:"PageActions",props:{primaryAction:{},secondaryActions:{}},setup(o){return(e,t)=>{var i;return f.openBlock(),f.createElementBlock("div",SA,[e.secondaryActions?(f.openBlock(),f.createElementBlock("div",CA,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(e.secondaryActions,s=>(f.openBlock(),f.createBlock(ye,{variant:s.variant,onClick:s.onAction,outline:""},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(s.label),1)]),_:2},1032,["variant","onClick"]))),256))])):f.createCommentVNode("",!0),e.primaryAction?(f.openBlock(),f.createElementBlock("div",_A,[e.primaryAction?(f.openBlock(),f.createBlock(ye,{key:0,variant:"success",type:"submit",onClick:(i=e.primaryAction)==null?void 0:i.onAction,to:e.primaryAction.to,leadingIcon:e.primaryAction.leadingIcon},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(e.primaryAction.label),1)]),_:1},8,["onClick","to","leadingIcon"])):f.createCommentVNode("",!0)])):f.createCommentVNode("",!0)])}}}),PH="";function Lf(o,e,t,i,s={}){e instanceof HTMLCollection||e instanceof NodeList?e=Array.from(e):Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);for(const n of e)for(const a of t)n[o](a,i,{capture:!1,...s});return Array.prototype.slice.call(arguments,1)}const Xe=Lf.bind(null,"addEventListener"),_i=Lf.bind(null,"removeEventListener");function Zl(o){const e=document.createElement("div");return e.innerHTML=o.trim(),e.firstElementChild}function Nf(o){const e=(i,s)=>{const n=i.getAttribute(s);return i.removeAttribute(s),n},t=(i,s={})=>{const n=e(i,":obj"),a=e(i,":ref"),l=n?s[n]={}:s;a&&(s[a]=i);for(const c of Array.from(i.children)){const d=e(c,":arr"),p=t(c,d?{}:l);d&&(l[d]||(l[d]=[])).push(Object.keys(p).length?p:c)}return s};return t(Zl(o))}function Df(o){let e=o.path||o.composedPath&&o.composedPath();if(e)return e;let t=o.target.parentElement;for(e=[o.target,t];t=t.parentElement;)e.push(t);return e.push(document,window),e}function Mf(o){return o instanceof Element?o:typeof o=="string"?o.split(/>>/g).reduce((e,t,i,s)=>(e=e.querySelector(t),i<s.length-1?e.shadowRoot:e),document):null}function Rf(o,e=t=>t){function t(i){const s=[.001,.01,.1][Number(i.shiftKey||i.ctrlKey*2)]*(i.deltaY<0?1:-1);let n=0,a=o.selectionStart;o.value=o.value.replace(/[\d.]+/g,(l,c)=>c<=a&&c+l.length>=a?(a=c,e(Number(l),s,n)):(n++,l)),o.focus(),o.setSelectionRange(a,a),i.preventDefault(),o.dispatchEvent(new Event("input"))}Xe(o,"focus",()=>Xe(window,"wheel",t,{passive:!1})),Xe(o,"blur",()=>_i(window,"wheel",t))}const AA=Object.freeze(Object.defineProperty({__proto__:null,adjustableInputNumbers:Rf,createElementFromString:Zl,createFromTemplate:Nf,eventPath:Df,off:_i,on:Xe,resolveElement:Mf},Symbol.toStringTag,{value:"Module"})),{min:ar,max:EA,floor:$A,round:PA}=Math;function LA(o){if(o.toLowerCase()==="black")return"#000";const e=document.createElement("canvas").getContext("2d");return e.fillStyle=o,e.fillStyle==="#000"?null:e.fillStyle}function ql(o,e,t){o=o/360*6,e/=100,t/=100;const i=$A(o),s=o-i,n=t*(1-e),a=t*(1-s*e),l=t*(1-(1-s)*e),c=i%6,d=[t,a,n,n,l,t][c],p=[l,t,t,a,n,n][c],g=[n,n,l,t,t,a][c];return[d*255,p*255,g*255]}function NA(o,e,t){return ql(o,e,t).map(i=>PA(i).toString(16).padStart(2,"0"))}function DA(o,e,t){const i=ql(o,e,t),s=i[0]/255,n=i[1]/255,a=i[2]/255,l=ar(1-s,1-n,1-a),c=l===1?0:(1-s-l)/(1-l),d=l===1?0:(1-n-l)/(1-l),p=l===1?0:(1-a-l)/(1-l);return[c*100,d*100,p*100,l*100]}function MA(o,e,t){e/=100,t/=100;const i=(2-e)*t/2;return i!==0&&(i===1?e=0:i<.5?e=e*t/(i*2):e=e*t/(2-i*2)),[o,e*100,i*100]}function Kl(o,e,t){o/=255,e/=255,t/=255;const i=ar(o,e,t),s=EA(o,e,t),n=s-i;let a,l;const c=s;if(n===0)a=l=0;else{l=n/s;const d=((s-o)/6+n/2)/n,p=((s-e)/6+n/2)/n,g=((s-t)/6+n/2)/n;o===s?a=g-p:e===s?a=1/3+d-g:t===s&&(a=2/3+p-d),a<0?a+=1:a>1&&(a-=1)}return[a*360,l*100,c*100]}function RA(o,e,t,i){o/=100,e/=100,t/=100,i/=100;const s=(1-ar(1,o*(1-i)+i))*255,n=(1-ar(1,e*(1-i)+i))*255,a=(1-ar(1,t*(1-i)+i))*255;return[...Kl(s,n,a)]}function IA(o,e,t){e/=100,t/=100,e*=t<.5?t:1-t;const i=2*e/(t+e)*100,s=(t+e)*100;return[o,isNaN(i)?0:i,s]}function BA(o){return Kl(...o.match(/.{2}/g).map(e=>parseInt(e,16)))}function QA(o){o=o.match(/^[a-zA-Z]+$/)?LA(o):o;const e={cmyk:/^cmyk[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)/i,rgba:/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsla:/^((hsla)|hsl)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hsva:/^((hsva)|hsv)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},t=s=>s.map(n=>/^(|\d+)\.\d+|\d+$/.test(n)?Number(n):void 0);let i;e:for(const s in e){if(!(i=e[s].exec(o)))continue;const n=a=>!!i[2]==(typeof a=="number");switch(s){case"cmyk":{const[,a,l,c,d]=t(i);if(a>100||l>100||c>100||d>100)break e;return{values:RA(a,l,c,d),type:s}}case"rgba":{const[,,,a,l,c,d]=t(i);if(a>255||l>255||c>255||d<0||d>1||!n(d))break e;return{values:[...Kl(a,l,c),d],a:d,type:s}}case"hexa":{let[,a]=i;(a.length===4||a.length===3)&&(a=a.split("").map(d=>d+d).join(""));const l=a.substring(0,6);let c=a.substring(6);return c=c?parseInt(c,16)/255:void 0,{values:[...BA(l),c],a:c,type:s}}case"hsla":{const[,,,a,l,c,d]=t(i);if(a>360||l>100||c>100||d<0||d>1||!n(d))break e;return{values:[...IA(a,l,c),d],a:d,type:s}}case"hsva":{const[,,,a,l,c,d]=t(i);if(a>360||l>100||c>100||d<0||d>1||!n(d))break e;return{values:[a,l,c,d],a:d,type:s}}}}return{values:null,type:null}}function lr(o=0,e=0,t=0,i=1){const s=(a,l)=>(c=-1)=>l(~c?a.map(d=>Number(d.toFixed(c))):a),n={h:o,s:e,v:t,a:i,toHSVA(){const a=[n.h,n.s,n.v,n.a];return a.toString=s(a,l=>`hsva(${l[0]}, ${l[1]}%, ${l[2]}%, ${n.a})`),a},toHSLA(){const a=[...MA(n.h,n.s,n.v),n.a];return a.toString=s(a,l=>`hsla(${l[0]}, ${l[1]}%, ${l[2]}%, ${n.a})`),a},toRGBA(){const a=[...ql(n.h,n.s,n.v),n.a];return a.toString=s(a,l=>`rgba(${l[0]}, ${l[1]}, ${l[2]}, ${n.a})`),a},toCMYK(){const a=DA(n.h,n.s,n.v);return a.toString=s(a,l=>`cmyk(${l[0]}%, ${l[1]}%, ${l[2]}%, ${l[3]}%)`),a},toHEXA(){const a=NA(n.h,n.s,n.v),l=n.a>=1?"":Number((n.a*255).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return l&&a.push(l),a.toString=()=>`#${a.join("").toUpperCase()}`,a},clone:()=>lr(n.h,n.s,n.v,n.a)};return n}const Co=o=>Math.max(Math.min(o,1),0);function Jl(o){const e={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},o),_keyboard(n){const{options:a}=e,{type:l,key:c}=n;if(document.activeElement===a.wrapper){const{lock:d}=e.options,p=c==="ArrowUp",g=c==="ArrowRight",b=c==="ArrowDown",O=c==="ArrowLeft";if(l==="keydown"&&(p||g||b||O)){let r=0,h=0;d==="v"?r=p||g?1:-1:d==="h"?r=p||g?-1:1:(h=p?-1:b?1:0,r=O?-1:g?1:0),e.update(Co(e.cache.x+.01*r),Co(e.cache.y+.01*h)),n.preventDefault()}else c.startsWith("Arrow")&&(e.options.onstop(),n.preventDefault())}},_tapstart(n){Xe(document,["mouseup","touchend","touchcancel"],e._tapstop),Xe(document,["mousemove","touchmove"],e._tapmove),n.cancelable&&n.preventDefault(),e._tapmove(n)},_tapmove(n){const{options:a,cache:l}=e,{lock:c,element:d,wrapper:p}=a,g=p.getBoundingClientRect();let b=0,O=0;if(n){const u=n&&n.touches&&n.touches[0];b=n?(u||n).clientX:0,O=n?(u||n).clientY:0,b<g.left?b=g.left:b>g.left+g.width&&(b=g.left+g.width),O<g.top?O=g.top:O>g.top+g.height&&(O=g.top+g.height),b-=g.left,O-=g.top}else l&&(b=l.x*g.width,O=l.y*g.height);c!=="h"&&(d.style.left=`calc(${b/g.width*100}% - ${d.offsetWidth/2}px)`),c!=="v"&&(d.style.top=`calc(${O/g.height*100}% - ${d.offsetHeight/2}px)`),e.cache={x:b/g.width,y:O/g.height};const r=Co(b/g.width),h=Co(O/g.height);switch(c){case"v":return a.onchange(r);case"h":return a.onchange(h);default:return a.onchange(r,h)}},_tapstop(){e.options.onstop(),_i(document,["mouseup","touchend","touchcancel"],e._tapstop),_i(document,["mousemove","touchmove"],e._tapmove)},trigger(){e._tapmove()},update(n=0,a=0){const{left:l,top:c,width:d,height:p}=e.options.wrapper.getBoundingClientRect();e.options.lock==="h"&&(a=n),e._tapmove({clientX:l+d*n,clientY:c+p*a})},destroy(){const{options:n,_tapstart:a,_keyboard:l}=e;_i(document,["keydown","keyup"],l),_i([n.wrapper,n.element],"mousedown",a),_i([n.wrapper,n.element],"touchstart",a,{passive:!1})}},{options:t,_tapstart:i,_keyboard:s}=e;return Xe([t.wrapper,t.element],"mousedown",i),Xe([t.wrapper,t.element],"touchstart",i,{passive:!1}),Xe(document,["keydown","keyup"],s),e}function VA(o={}){o=Object.assign({onchange:()=>0,className:"",elements:[]},o);const e=Xe(o.elements,"click",t=>{o.elements.forEach(i=>i.classList[t.target===i?"add":"remove"](o.className)),o.onchange(t),t.stopPropagation()});return{destroy:()=>_i(...e)}}const FA=o=>{const{components:e,useAsButton:t,inline:i,appClass:s,theme:n,lockOpacity:a}=o.options,l=g=>g?"":'style="display:none" hidden',c=g=>o._t(g),d=Nf(`
      <div :ref="root" class="pickr">

        ${t?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${s||""}" data-theme="${n}" ${i?'style="position: unset"':""} aria-label="${c("ui:dialog")}" role="window">
          <div class="pcr-selection" ${l(e.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${l(e.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${c("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${c("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${l(e.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${c("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${l(e.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${c("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${e.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${l(Object.keys(e.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${l(e.interaction.input)} aria-label="${c("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${a?"HEX":"HEXA"}" type="button" ${l(e.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${a?"RGB":"RGBA"}" type="button" ${l(e.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${a?"HSL":"HSLA"}" type="button" ${l(e.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${a?"HSV":"HSVA"}" type="button" ${l(e.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${l(e.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${c("btn:save")}" type="button" ${l(e.interaction.save)} aria-label="${c("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${c("btn:cancel")}" type="button" ${l(e.interaction.cancel)} aria-label="${c("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${c("btn:clear")}" type="button" ${l(e.interaction.clear)} aria-label="${c("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),p=d.interaction;return p.options.find(g=>!g.hidden&&!g.classList.add("active")),p.type=()=>p.options.find(g=>g.classList.contains("active")),d};/*! NanoPop 2.3.0 MIT | https://github.com/Simonwep/nanopop */const WA={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},zA=(o,e,t)=>{const{container:i,arrow:s,margin:n,padding:a,position:l,variantFlipOrder:c,positionFlipOrder:d}={container:document.documentElement.getBoundingClientRect(),...WA,...t},{left:p,top:g}=e.style;e.style.left="0",e.style.top="0";const b=o.getBoundingClientRect(),O=e.getBoundingClientRect(),r={t:b.top-O.height-n,b:b.bottom+n,r:b.right+n,l:b.left-O.width-n},h={vs:b.left,vm:b.left+b.width/2-O.width/2,ve:b.left+b.width-O.width,hs:b.top,hm:b.bottom-b.height/2-O.height/2,he:b.bottom-O.height},[u,m="middle"]=l.split("-"),y=d[u],v=c[m],{top:w,left:S,bottom:C,right:T}=i;for(const _ of y){const $=_==="t"||_==="b";let N=r[_];const[P,E]=$?["top","left"]:["left","top"],[x,k]=$?[O.height,O.width]:[O.width,O.height],[A,L]=$?[C,T]:[T,C],[D,M]=$?[w,S]:[S,w];if(!(N<D||N+x+a>A))for(const Q of v){let B=h[($?"v":"h")+Q];if(!(B<M||B+k+a>L)){if(B-=O[E],N-=O[P],e.style[E]=`${B}px`,e.style[P]=`${N}px`,s){const X=$?b.width/2:b.height/2,te=X*2<k?b[E]+X:B+k/2;N<b[P]&&(N+=x),s.style[E]=`${te}px`,s.style[P]=`${N}px`}return _+Q}}}return e.style.left=p,e.style.top=g,null},XA=(o,e,t)=>{const i=typeof o=="object"&&!(o instanceof HTMLElement)?o:{reference:o,popper:e,...t};return{update(s=i){const{reference:n,popper:a}=Object.assign(i,s);if(!a||!n)throw new Error("Popper- or reference-element missing.");return zA(n,a,i)}}},ks=class Jd{constructor(e){this._initializingActive=!0,this._recalc=!0,this._nanopop=null,this._root=null,this._color=lr(),this._lastColor=lr(),this._swatchColors=[],this._setupAnimationFrame=null,this._eventListener={init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]},this.options=e=Object.assign({...Jd.DEFAULT_OPTIONS},e);const{swatches:t,components:i,theme:s,sliders:n,lockOpacity:a,padding:l}=e;["nano","monolith"].includes(s)&&!n&&(e.sliders="h"),i.interaction||(i.interaction={});const{preview:c,opacity:d,hue:p,palette:g}=i;i.opacity=!a&&d,i.palette=g||c||d||p,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),t&&t.length&&t.forEach(h=>this.addSwatch(h));const{button:b,app:O}=this._root;this._nanopop=XA(b,O,{margin:l}),b.setAttribute("role","button"),b.setAttribute("aria-label",this._t("btn:toggle"));const r=this;this._setupAnimationFrame=requestAnimationFrame(function h(){if(!O.offsetWidth)return requestAnimationFrame(h);r.setColor(e.default),r._rePositioningPicker(),e.defaultRepresentation&&(r._representation=e.defaultRepresentation,r.setColorRepresentation(r._representation)),e.showAlways&&r.show(),r._initializingActive=!1,r._emit("init")})}_preBuild(){const{options:e}=this;for(const t of["el","container"])e[t]=Mf(e[t]);this._root=FA(this),e.useAsButton&&(this._root.button=e.el),e.container.appendChild(this._root.root)}_finalBuild(){const e=this.options,t=this._root;if(e.container.removeChild(t.root),e.inline){const i=e.el.parentElement;e.el.nextSibling?i.insertBefore(t.app,e.el.nextSibling):i.appendChild(t.app)}else e.container.appendChild(t.app);e.useAsButton?e.inline&&e.el.remove():e.el.parentNode.replaceChild(t.root,e.el),e.disabled&&this.disable(),e.comparison||(t.button.style.transition="none",e.useAsButton||(t.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const e=this,t=this.options.components,i=(e.options.sliders||"v").repeat(2),[s,n]=i.match(/^[vh]+$/g)?i:[],a=()=>this._color||(this._color=this._lastColor.clone()),l={palette:Jl({element:e._root.palette.picker,wrapper:e._root.palette.palette,onstop:()=>e._emit("changestop","slider",e),onchange(c,d){if(!t.palette)return;const p=a(),{_root:g,options:b}=e,{lastColor:O,currentColor:r}=g.preview;e._recalc&&(p.s=c*100,p.v=100-d*100,p.v<0&&(p.v=0),e._updateOutput("slider"));const h=p.toRGBA().toString(0);this.element.style.background=h,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${p.a}), transparent),
                        linear-gradient(to left, hsla(${p.h}, 100%, 50%, ${p.a}), rgba(255, 255, 255, ${p.a}))
                    `,b.comparison?!b.useAsButton&&!e._lastColor&&O.style.setProperty("--pcr-color",h):(g.button.style.setProperty("--pcr-color",h),g.button.classList.remove("clear"));const u=p.toHEXA().toString();for(const{el:m,color:y}of e._swatchColors)m.classList[u===y.toHEXA().toString()?"add":"remove"]("pcr-active");r.style.setProperty("--pcr-color",h)}}),hue:Jl({lock:n==="v"?"h":"v",element:e._root.hue.picker,wrapper:e._root.hue.slider,onstop:()=>e._emit("changestop","slider",e),onchange(c){if(!t.hue||!t.palette)return;const d=a();e._recalc&&(d.h=c*360),this.element.style.backgroundColor=`hsl(${d.h}, 100%, 50%)`,l.palette.trigger()}}),opacity:Jl({lock:s==="v"?"h":"v",element:e._root.opacity.picker,wrapper:e._root.opacity.slider,onstop:()=>e._emit("changestop","slider",e),onchange(c){if(!t.opacity||!t.palette)return;const d=a();e._recalc&&(d.a=Math.round(c*100)/100),this.element.style.background=`rgba(0, 0, 0, ${d.a})`,l.palette.trigger()}}),selectable:VA({elements:e._root.interaction.options,className:"active",onchange(c){e._representation=c.target.getAttribute("data-type").toUpperCase(),e._recalc&&e._updateOutput("swatch")}})};this._components=l}_bindEvents(){const{_root:e,options:t}=this,i=[Xe(e.interaction.clear,"click",()=>this._clearColor()),Xe([e.interaction.cancel,e.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),Xe(e.interaction.save,"click",()=>{!this.applyColor()&&!t.showAlways&&this.hide()}),Xe(e.interaction.result,["keyup","input"],s=>{this.setColor(s.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),s.stopImmediatePropagation()}),Xe(e.interaction.result,["focus","blur"],s=>{this._recalc=s.type==="blur",this._recalc&&this._updateOutput(null)}),Xe([e.palette.palette,e.palette.picker,e.hue.slider,e.hue.picker,e.opacity.slider,e.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!t.showAlways){const s=t.closeWithKey;i.push(Xe(e.button,"click",()=>this.isOpen()?this.hide():this.show()),Xe(document,"keyup",n=>this.isOpen()&&(n.key===s||n.code===s)&&this.hide()),Xe(document,["touchstart","mousedown"],n=>{this.isOpen()&&!Df(n).some(a=>a===e.app||a===e.button)&&this.hide()},{capture:!0}))}if(t.adjustableNumbers){const s={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};Rf(e.interaction.result,(n,a,l)=>{const c=s[this.getColorRepresentation().toLowerCase()];if(c){const d=c[l],p=n+(d>=100?a*1e3:a);return p<=0?0:Number((p<d?p:d).toPrecision(3))}return n})}if(t.autoReposition&&!t.inline){let s=null;const n=this;i.push(Xe(window,["scroll","resize"],()=>{n.isOpen()&&(t.closeOnScroll&&n.hide(),s===null?(s=setTimeout(()=>s=null,100),requestAnimationFrame(function a(){n._rePositioningPicker(),s!==null&&requestAnimationFrame(a)})):(clearTimeout(s),s=setTimeout(()=>s=null,100)))},{capture:!0}))}this._eventBindings=i}_rePositioningPicker(){const{options:e}=this;if(!e.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:e.position})){const i=this._root.app,s=i.getBoundingClientRect();i.style.top=`${(window.innerHeight-s.height)/2}px`,i.style.left=`${(window.innerWidth-s.width)/2}px`}}_updateOutput(e){const{_root:t,_color:i,options:s}=this;if(t.interaction.type()){const n=`to${t.interaction.type().getAttribute("data-type")}`;t.interaction.result.value=typeof i[n]=="function"?i[n]().toString(s.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",i,e,this)}_clearColor(e=!1){const{_root:t,options:i}=this;i.useAsButton||t.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),t.button.classList.add("clear"),i.showAlways||this.hide(),this._lastColor=null,!this._initializingActive&&!e&&(this._emit("save",null),this._emit("clear"))}_parseLocalColor(e){const{values:t,type:i,a:s}=QA(e),{lockOpacity:n}=this.options,a=s!==void 0&&s!==1;return t&&t.length===3&&(t[3]=void 0),{values:!t||n&&a?null:t,type:i}}_t(e){return this.options.i18n[e]||Jd.I18N_DEFAULTS[e]}_emit(e,...t){this._eventListener[e].forEach(i=>i(...t,this))}on(e,t){return this._eventListener[e].push(t),this}off(e,t){const i=this._eventListener[e]||[],s=i.indexOf(t);return~s&&i.splice(s,1),this}addSwatch(e){const{values:t}=this._parseLocalColor(e);if(t){const{_swatchColors:i,_root:s}=this,n=lr(...t),a=Zl(`<button type="button" style="--pcr-color: ${n.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return s.swatches.appendChild(a),i.push({el:a,color:n}),this._eventBindings.push(Xe(a,"click",()=>{this.setHSVA(...n.toHSVA(),!0),this._emit("swatchselect",n),this._emit("change",n,"swatch",this)})),!0}return!1}removeSwatch(e){const t=this._swatchColors[e];if(t){const{el:i}=t;return this._root.swatches.removeChild(i),this._swatchColors.splice(e,1),!0}return!1}applyColor(e=!1){const{preview:t,button:i}=this._root,s=this._color.toRGBA().toString(0);return t.lastColor.style.setProperty("--pcr-color",s),this.options.useAsButton||i.style.setProperty("--pcr-color",s),i.classList.remove("clear"),this._lastColor=this._color.clone(),!this._initializingActive&&!e&&this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(e=>_i(...e)),Object.keys(this._components).forEach(e=>this._components[e].destroy())}destroyAndRemove(){this.destroy();const{root:e,app:t}=this._root;e.parentElement&&e.parentElement.removeChild(e),t.parentElement.removeChild(t),Object.keys(this).forEach(i=>this[i]=null)}hide(){return this.isOpen()?(this._root.app.classList.remove("visible"),this._emit("hide"),!0):!1}show(){return!this.options.disabled&&!this.isOpen()?(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this):!1}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(e=360,t=0,i=0,s=1,n=!1){const a=this._recalc;if(this._recalc=!1,e<0||e>360||t<0||t>100||i<0||i>100||s<0||s>1)return!1;this._color=lr(e,t,i,s);const{hue:l,opacity:c,palette:d}=this._components;return l.update(e/360),c.update(s),d.update(t/100,1-i/100),n||this.applyColor(),a&&this._updateOutput(),this._recalc=a,!0}setColor(e,t=!1){if(e===null)return this._clearColor(t),!0;const{values:i,type:s}=this._parseLocalColor(e);if(i){const n=s.toUpperCase(),{options:a}=this._root.interaction,l=a.find(c=>c.getAttribute("data-type")===n);if(l&&!l.hidden)for(const c of a)c.classList[c===l?"add":"remove"]("active");return this.setHSVA(...i,t)?this.setColorRepresentation(n):!1}return!1}setColorRepresentation(e){return e=e.toUpperCase(),!!this._root.interaction.options.find(t=>t.getAttribute("data-type").startsWith(e)&&!t.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}};ks.utils=AA,ks.version="dooca",ks.I18N_DEFAULTS={"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"},ks.DEFAULT_OPTIONS={appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"},ks.create=o=>new ks(o);let YA=ks;const LH="",HA={class:"ui-colorpicker-content"},GA=["placeholder","value"],jA=f.defineComponent({__name:"FormColorpicker",props:{modelValue:{},label:{},placeholder:{},width:{},withInput:{type:Boolean}},emits:["update","update:modelValue"],setup(o,{expose:e,emit:t}){var g;const i=o,s=t,n=`colopicker-${(g=f.getCurrentInstance())==null?void 0:g.uid}`,a=f.shallowRef(),l=f.ref(!1),c=f.ref({});i.width&&(c.value.width=i.width);const d=b=>{s("update:modelValue",b),s("update",b)},p=b=>{const O=!b.default,r=YA.create({...b,...O&&{default:"#000000"}});if(r.init=!0,O){r.init=!1;const h=()=>{r.off("init",h),r.setColor(null),r.init=!0};r.on("init",h)}return r};return f.onMounted(()=>{a.value=p({el:`#${n}`,theme:"monolith",default:i.modelValue||void 0,defaultRepresentation:"HEXA",components:{preview:!0,opacity:!0,hue:!0,interaction:{input:!0,save:!0,clear:!0}},i18n:{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Aplicar","btn:cancel":"Cancelar","btn:clear":"Limpar","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}}),a.value.on("save",(b,O)=>{if(O.init){let r=null;b&&(r=b.toHEXA().toString()),O.hide(),l.value||d(r)}}),f.watchPostEffect(()=>{a.value&&i.modelValue!=null&&a.value.getColor().toHEXA().toString()!=i.modelValue&&a.value.setColor(i.modelValue)})}),f.watchPostEffect(()=>{a.value&&i.modelValue&&!l.value&&a.value.setColor(i.modelValue)}),e({show:()=>{a.value.show()},hide:()=>{a.value.hide()}}),(b,O)=>(f.openBlock(),f.createElementBlock("label",{class:"ui-colorpicker",style:f.normalizeStyle(c.value)},[f.createVNode(ho,{class:"ui-colorpicker",label:b.label,onClick:O[0]||(O[0]=r=>a.value.show())},null,8,["label"]),f.createElementVNode("div",HA,[f.createElementVNode("div",{class:"pickr",id:n}),b.withInput?(f.openBlock(),f.createElementBlock("input",f.mergeProps({key:0,class:"form-control",maxlength:"9"},b.$attrs,{placeholder:b.placeholder,value:b.modelValue,onFocus:O[1]||(O[1]=r=>l.value=!0),onBlur:O[2]||(O[2]=r=>l.value=!1),onInput:O[3]||(O[3]=r=>b.$emit("update:modelValue",r.target.value))}),null,16,GA)):f.createCommentVNode("",!0)])],4))}});if(typeof If>"u")var If=void 0;if(typeof ec>"u")var ec=void 0;(function(){var o={};o.settings={},o.post=function(r){return new e("post",r)},o.get=function(r){return new e("get",r)},o.request=function(r,h){return new e(r,h)};var e=function(r,h){var u={method:r,url:"",before:function(){},success:function(){},error:function(){},data:!1,async:!0,headers:{}};this.p=this.extend(u,h),this.p=this.extend(this.p,o.settings),this.p.method=this.p.method.toUpperCase(),this.prepareData(),this.xhr=new XMLHttpRequest,this.xhr.open(this.p.method,this.p.url,this.p.async),this.setHeaders();var m=typeof this.p.before=="function"?this.p.before(this.xhr):!0;m!==!1&&this.send()};e.prototype={extend:function(r,h){if(h)for(var u in h)r[u]=h[u];return r},prepareData:function(){["POST","PUT"].indexOf(this.p.method)!==-1&&!this.isFormData()&&(this.p.headers["Content-Type"]="application/x-www-form-urlencoded"),typeof this.p.data=="object"&&!this.isFormData()&&(this.p.data=this.toParams(this.p.data)),this.p.method==="GET"&&(this.p.url=this.p.data?this.p.url+"?"+this.p.data:this.p.url)},setHeaders:function(){this.xhr.setRequestHeader("X-Requested-With",this.p.headers["X-Requested-With"]||"XMLHttpRequest");for(var r in this.p.headers)this.xhr.setRequestHeader(r,this.p.headers[r])},isFormData:function(){return typeof window.FormData<"u"&&this.p.data instanceof window.FormData},isComplete:function(){return!(this.xhr.status<200||this.xhr.status>=300&&this.xhr.status!==304)},send:function(){this.p.async?(this.xhr.onload=this.loaded.bind(this),this.xhr.send(this.p.data)):(this.xhr.send(this.p.data),this.loaded.call(this))},loaded:function(){if(this.isComplete()){var r=this.parseResponse();typeof this.p.success=="function"&&this.p.success(r,this.xhr)}else{var r=this.parseResponse();typeof this.p.error=="function"&&this.p.error(r,this.xhr,this.xhr.status)}},parseResponse:function(){var r=this.xhr.response,h=this.parseJson(r);return h||r},parseJson:function(r){try{var h=JSON.parse(r);if(h&&typeof h=="object")return h}catch{}return!1},toParams:function(r){return Object.keys(r).map(function(h){return encodeURIComponent(h)+"="+encodeURIComponent(r[h])}).join("&")}};var t=[0],i="data"+new Date().getTime(),s="is-hidden",n="is-hidden-mobile",a=function(r,h){return this.parse(r,h)};a.ready=function(r){document.readyState!=="loading"?r():document.addEventListener("DOMContentLoaded",r)},a.prototype={get sdom(){return!0},get length(){return this.nodes.length},parse:function(r,h){var u,m=/^\s*<(\w+|!)[^>]*>/;if(!r)u=[];else{if(r.sdom)return this.nodes=r.nodes,r;typeof r!="string"?r.nodeType&&r.nodeType===11?u=r.childNodes:u=r.nodeType||r===window?[r]:r:m.test(r)?u=this.create(r):u=this._query(r,h)}this.nodes=this._slice(u)},create:function(r){if(/^<(\w+)\s*\/?>(?:<\/\1>|)$/.test(r))return[document.createElement(RegExp.$1)];var h=[],u=document.createElement("div"),m=u.childNodes;u.innerHTML=r;for(var y=0,v=m.length;y<v;y++)h.push(m[y]);return h},add:function(r){this.nodes=this.nodes.concat(this._toArray(r))},get:function(r){return this.nodes[r||0]||!1},getAll:function(){return this.nodes},eq:function(r){return new a(this.nodes[r])},first:function(){return new a(this.nodes[0])},last:function(){return new a(this.nodes[this.nodes.length-1])},contents:function(){return this.get().childNodes},each:function(r){for(var h=this.nodes.length,u=0;u<h;u++)r.call(this,this.nodes[u].sdom?this.nodes[u].get():this.nodes[u],u);return this},is:function(r){return this.filter(r).length>0},filter:function(r){var h;return r===void 0?this:(typeof r=="function"?h=r:h=function(u){return r instanceof Node?r===u:r&&r.sdom?r.nodes.indexOf(u)!==-1:(u.matches=u.matches||u.msMatchesSelector||u.webkitMatchesSelector,u.nodeType===1?u.matches(r||"*"):!1)},new a(this.nodes.filter(h)))},not:function(r){return this.filter(function(h){return!new a(h).is(r||!0)})},find:function(r){var h=[];return this.each(function(u){for(var m=this._query(r||"*",u),y=0;y<m.length;y++)h.push(m[y])}),new a(h)},children:function(r){var h=[];return this.each(function(u){if(u.children)for(var m=u.children,y=0;y<m.length;y++)h.push(m[y])}),new a(h).filter(r)},parent:function(r){var h=[];return this.each(function(u){u.parentNode&&h.push(u.parentNode)}),new a(h).filter(r)},parents:function(r,h){h=this._getContext(h);var u=[];return this.each(function(m){for(var y=m.parentNode;y&&y!==h;)r?new a(y).is(r)&&u.push(y):u.push(y),y=y.parentNode}),new a(u)},closest:function(r,h){h=this._getContext(h),r=r.sdom?r.get():r;var u=[],m=r&&r.nodeType;return this.each(function(y){do if(m&&y===r||new a(y).is(r))return u.push(y);while((y=y.parentNode)&&y!==h)}),new a(u)},next:function(r){return this._getSibling(r,"nextSibling")},nextElement:function(r){return this._getSibling(r,"nextElementSibling")},prev:function(r){return this._getSibling(r,"previousSibling")},prevElement:function(r){return this._getSibling(r,"previousElementSibling")},css:function(r,h){if(h===void 0&&typeof r!="object"){var u=this.get();return r==="width"||r==="height"?u.style?this._getHeightOrWidth(r,u,!1)+"px":void 0:u.style?getComputedStyle(u,null)[r]:void 0}return this.each(function(m){var y={};typeof r=="object"?y=r:y[r]=h;for(var v in y)m.style&&(m.style[v]=y[v])})},attr:function(r,h,u){if(u=u?"data-":"",h===void 0&&typeof r!="object"){var m=this.get();return m&&m.nodeType!==3?r==="checked"?m.checked:this._getBooleanFromStr(m.getAttribute(u+r)):void 0}return this.each(function(y){var v={};typeof r=="object"?v=r:v[r]=h;for(var w in v)y.nodeType!==3&&(w==="checked"?y.checked=v[w]:y.setAttribute(u+w,v[w]))})},data:function(r,h){if(r===void 0){var u=/^data-(.+)$/,m=this.get().attributes,y={},v=function(T){return T[1].toUpperCase()};for(var w in m)if(m[w]&&u.test(m[w].nodeName)){var S=m[w].nodeName.match(u)[1],C=m[w].value;S=S.replace(/-([a-z])/g,v),this._isObjectString(C)?C=this._toObject(C):C=this._isNumber(C)?parseFloat(C):this._getBooleanFromStr(C),y[S]=C}return y}return this.attr(r,h,!0)},val:function(r){if(r===void 0){var h=this.get();return h.type&&h.type==="checkbox"?h.checked:h.value}return this.each(function(u){u.value=r})},removeAttr:function(r){return this.each(function(h){var u=function(m){h.nodeType!==3&&h.removeAttribute(m)};r.split(" ").forEach(u)})},removeData:function(r){return this.each(function(h){var u=function(m){h.nodeType!==3&&h.removeAttribute("data-"+m)};r.split(" ").forEach(u)})},dataset:function(r,h){return this.each(function(u){t[this.dataindex(u)][r]=h})},dataget:function(r){return t[this.dataindex(this.get())][r]},dataindex:function(r){var h=r[i],u=t.length;return h||(h=r[i]=u,t[h]={}),h},addClass:function(r){return this._eachClass(r,"add")},removeClass:function(r){return this._eachClass(r,"remove")},toggleClass:function(r){return this._eachClass(r,"toggle")},hasClass:function(r){return this.nodes.some(function(h){return h.classList?h.classList.contains(r):!1})},empty:function(){return this.each(function(r){r.innerHTML=""})},html:function(r){return r===void 0?this.get().innerHTML||"":this.empty().append(r)},text:function(r){return r===void 0?this.get().textContent||"":this.each(function(h){h.textContent=r})},after:function(r){return this._inject(r,function(h,u){if(typeof h=="string")u.insertAdjacentHTML("afterend",h);else if(u.parentNode!==null)for(var m=h instanceof Node?[h]:this._toArray(h).reverse(),y=0;y<m.length;y++)u.parentNode.insertBefore(m[y],u.nextSibling);return u})},before:function(r){return this._inject(r,function(h,u){if(typeof h=="string")u.insertAdjacentHTML("beforebegin",h);else for(var m=h instanceof Node?[h]:this._toArray(h),y=0;y<m.length;y++)u.parentNode.insertBefore(m[y],u);return u})},append:function(r){return this._inject(r,function(h,u){if(typeof h=="string"||typeof h=="number")u.insertAdjacentHTML("beforeend",h);else for(var m=h instanceof Node?[h]:this._toArray(h),y=0;y<m.length;y++)u.appendChild(m[y]);return u})},prepend:function(r){return this._inject(r,function(h,u){if(typeof h=="string"||typeof h=="number")u.insertAdjacentHTML("afterbegin",h);else for(var m=h instanceof Node?[h]:this._toArray(h).reverse(),y=0;y<m.length;y++)u.insertBefore(m[y],u.firstChild);return u})},wrap:function(r){return this._inject(r,function(h,u){var m=typeof h=="string"||typeof h=="number"?this.create(h)[0]:h instanceof Node?h:this._toArray(h)[0];return u.parentNode&&u.parentNode.insertBefore(m,u),m.appendChild(u),new a(m)})},unwrap:function(){return this.each(function(r){var h=new a(r);return h.replaceWith(h.contents())})},replaceWith:function(r){return this._inject(r,function(h,u){for(var m=document.createDocumentFragment(),y=typeof h=="string"||typeof h=="number"?this.create(h):h instanceof Node?[h]:this._toArray(h),v=0;v<y.length;v++)m.appendChild(y[v]);var w=m.childNodes[0];return u.parentNode&&u.parentNode.replaceChild(m,u),w})},remove:function(){return this.each(function(r){r.parentNode&&r.parentNode.removeChild(r)})},clone:function(r){var h=[];return this.each(function(u){var m=this._clone(u);r&&(m=this._cloneEvents(u,m)),h.push(m)}),new a(h)},show:function(){return this.each((function(r){if(!(!r.style||!this._hasDisplayNone(r))){var h=r.getAttribute("domTargetShow"),u=r.classList?r.classList.contains(s):!1,m=r.classList?r.classList.contains(n):!1,y;u?(y=s,r.classList.remove(s)):m?(y=n,r.classList.remove(n)):r.style.display=h||"block",y&&r.setAttribute("domTargetHide",y),r.removeAttribute("domTargetShow")}}).bind(this))},hide:function(){return this.each(function(r){if(!(!r.style||this._hasDisplayNone(r))){var h=r.style.display,u=r.getAttribute("domTargetHide");u===s?r.classList.add(s):u===n?r.classList.add(n):(h!=="block"&&r.setAttribute("domTargetShow",h),r.style.display="none"),r.removeAttribute("domTargetHide")}})},scrollTop:function(r){var h=this.get(),u=h===window,m=h.nodeType===9,y=m?document.scrollingElement||document.body.parentNode||document.body||document.documentElement:h;if(r!==void 0){u?window.scrollTo(0,r):y.scrollTop=r;return}return m?typeof window.pageYOffset<"u"?window.pageYOffset:document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0:u?window.pageYOffset:y.scrollTop},offset:function(){return this._getDim("Offset")},position:function(){return this._getDim("Position")},width:function(r,h){return this._getSize("width","Width",r,h)},height:function(r,h){return this._getSize("height","Height",r,h)},outerWidth:function(){return this._getInnerOrOuter("width","outer")},outerHeight:function(){return this._getInnerOrOuter("height","outer")},innerWidth:function(){return this._getInnerOrOuter("width","inner")},innerHeight:function(){return this._getInnerOrOuter("height","inner")},click:function(){return this._triggerEvent("click")},focus:function(){return this._triggerEvent("focus")},trigger:function(r){return this.each(function(h){for(var u=r.split(" "),m=0;m<u.length;m++){var y,v={bubbles:!0,cancelable:!0};try{y=new window.CustomEvent(u[m],v)}catch{y=document.createEvent("CustomEvent"),y.initCustomEvent(u[m],!0,!0)}h.dispatchEvent(y)}})},on:function(r,h,u){return this.each(function(m){for(var y=r.split(" "),v=0;v<y.length;v++){var w=this._getEventName(y[v]),S=this._getEventNamespace(y[v]);h=u?this._getOneHandler(h,r):h,m.addEventListener(w,h),m._e=m._e||{},m._e[S]=m._e[S]||{},m._e[S][w]=m._e[S][w]||[],m._e[S][w].push(h)}})},one:function(r,h){return this.on(r,h,!0)},off:function(r,h){var u=function(w,S,C){return w===C},m=function(w,S,C,T){return S===T},y=function(w,S,C,T){return w===C&&S===T},v=function(){return!0};return r===void 0?this.each(function(w){this._offEvent(w,!1,!1,h,v)}):this.each(function(w){for(var S=r.split(" "),C=0;C<S.length;C++){var T=this._getEventName(S[C]),_=this._getEventNamespace(S[C]);_==="_events"?this._offEvent(w,T,_,h,u):!T&&_!=="_events"?this._offEvent(w,T,_,h,m):this._offEvent(w,T,_,h,y)}})},serialize:function(r){for(var h={},u=this.get().elements,m=0;m<u.length;m++){var y=u[m];if(!(/(checkbox|radio)/.test(y.type)&&!y.checked)&&!(!y.name||y.disabled||y.type==="file")){if(y.type==="select-multiple")for(var v=0;v<y.options.length;v++){var w=y.options[v];w.selected&&(h[y.name]=w.value)}h[y.name]=this._isNumber(y.value)?parseFloat(y.value):this._getBooleanFromStr(y.value)}}return r?h:this._toParams(h)},ajax:function(r,h){if(typeof e<"u"){var u=this.attr("method")||"post",m={url:this.attr("action"),data:this.serialize(),success:r,error:h};return new e(u,m)}},_queryContext:function(r,h){return h=this._getContext(h),h.nodeType!==3&&typeof h.querySelectorAll=="function"?h.querySelectorAll(r):[]},_query:function(r,h){if(h)return this._queryContext(r,h);if(/^[.#]?[\w-]*$/.test(r)){if(r[0]==="#"){var u=document.getElementById(r.slice(1));return u?[u]:[]}return r[0]==="."?document.getElementsByClassName(r.slice(1)):document.getElementsByTagName(r)}return document.querySelectorAll(r)},_getContext:function(r){return r=typeof r=="string"?document.querySelector(r):r,r&&r.sdom?r.get():r||document},_inject:function(r,h){for(var u=this.nodes.length,m=[];u--;){var y=typeof r=="function"?r.call(this,this.nodes[u]):r,v=u===0?y:this._clone(y),w=h.call(this,v,this.nodes[u]);w&&(w.sdom?m.push(w.get()):m.push(w))}return new a(m)},_cloneEvents:function(r,h){var u=r._e;if(u){h._e=u;for(var m in u._events)for(var y=0;y<u._events[m].length;y++)h.addEventListener(m,u._events[m][y])}return h},_clone:function(r){if(!(typeof r>"u")){if(typeof r=="string")return r;if(r instanceof Node||r.nodeType)return r.cloneNode(!0);if("length"in r)return[].map.call(this._toArray(r),function(h){return h.cloneNode(!0)})}},_slice:function(r){return!r||r.length===0?[]:r.length?[].slice.call(r.nodes||r):[r]},_eachClass:function(r,h){return this.each(function(u){if(r){var m=function(y){u.classList&&u.classList[h](y)};r.split(" ").forEach(m)}})},_triggerEvent:function(r){var h=this.get();return h&&h.nodeType!==3&&h[r](),this},_getOneHandler:function(r,h){var u=this;return function(){r.apply(this,arguments),u.off(h)}},_getEventNamespace:function(r){var h=r.split("."),u=h[1]?h[1]:"_events";return h[2]?u+h[2]:u},_getEventName:function(r){return r.split(".")[0]},_offEvent:function(r,h,u,m,y){for(var v in r._e)for(var w in r._e[v])if(y(w,v,h,u))for(var S=r._e[v][w],C=0;C<S.length;C++)typeof m<"u"&&S[C].toString()!==m.toString()||(r.removeEventListener(w,S[C]),r._e[v][w].splice(C,1),r._e[v][w].length===0&&delete r._e[v][w],Object.keys(r._e[v]).length===0&&delete r._e[v])},_getInnerOrOuter:function(r,h){return this[r](void 0,h)},_getDocSize:function(r,h){var u=r.body,m=r.documentElement;return Math.max(u["scroll"+h],u["offset"+h],m["client"+h],m["scroll"+h],m["offset"+h])},_getSize:function(r,h,u,m){if(u===void 0){var y=this.get();return y.nodeType===3?u=0:y.nodeType===9?u=this._getDocSize(y,h):y===window?u=window["inner"+h]:u=this._getHeightOrWidth(r,y,m||"normal"),Math.round(u)}return this.each((function(v){u=parseFloat(u),u=u+this._adjustResultHeightOrWidth(r,v,m||"normal"),new a(v).css(r,u+"px")}).bind(this))},_getHeightOrWidth:function(r,h,u){if(!h)return 0;var m=r.charAt(0).toUpperCase()+r.slice(1),y=0,v=getComputedStyle(h,null),w=new a(h),S=w.parents().filter(function(_){return _.nodeType===1&&getComputedStyle(_,null).display==="none"?_:!1});if(v.display==="none"&&S.add(h),S.length!==0){var C="visibility: hidden !important; display: block !important;",T=[];S.each(function(_){var $=new a(_),N=$.attr("style");N!==null&&T.push(N),$.attr("style",N!==null?N+";"+C:C)}),y=w.get()["offset"+m]-this._adjustResultHeightOrWidth(r,h,u),S.each(function(_,$){var N=new a(_);T[$]===void 0?N.removeAttr("style"):N.attr("style",T[$])})}else y=h["offset"+m]-this._adjustResultHeightOrWidth(r,h,u);return y},_adjustResultHeightOrWidth:function(r,h,u){if(!h||u===!1)return 0;var m=0,y=getComputedStyle(h,null),v=y.boxSizing==="border-box";return r==="height"?((u==="inner"||u==="normal"&&v)&&(m+=(parseFloat(y.borderTopWidth)||0)+(parseFloat(y.borderBottomWidth)||0)),u==="outer"&&(m-=(parseFloat(y.marginTop)||0)+(parseFloat(y.marginBottom)||0))):((u==="inner"||u==="normal"&&v)&&(m+=(parseFloat(y.borderLeftWidth)||0)+(parseFloat(y.borderRightWidth)||0)),u==="outer"&&(m-=(parseFloat(y.marginLeft)||0)+(parseFloat(y.marginRight)||0))),m},_getDim:function(r){var h=this.get();return h.nodeType===3?{top:0,left:0}:this["_get"+r](h)},_getPosition:function(r){return{top:r.offsetTop,left:r.offsetLeft}},_getOffset:function(r){var h=r.getBoundingClientRect(),u=r.ownerDocument,m=u.documentElement,y=u.defaultView;return{top:h.top+y.pageYOffset-m.clientTop,left:h.left+y.pageXOffset-m.clientLeft}},_getSibling:function(r,h){r=r&&r.sdom?r.get():r;var u=r&&r.nodeType,m;return this.each(function(y){for(;y=y[h];)if(u&&y===r||new a(y).is(r)){m=y;return}}),new a(m)},_toArray:function(r){if(r instanceof NodeList){for(var h=[],u=0;u<r.length;u++)h[u]=r[u];return h}else return r===void 0?[]:r.sdom?r.nodes:r},_toParams:function(r){var h="";for(var u in r)h+="&"+this._encodeUri(u)+"="+this._encodeUri(r[u]);return h.replace(/^&/,"")},_toObject:function(r){return new Function("return "+r)()},_encodeUri:function(r){return encodeURIComponent(r).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},_isNumber:function(r){return!isNaN(r)&&!isNaN(parseFloat(r))},_isObjectString:function(r){return r.search(/^{/)!==-1},_getBooleanFromStr:function(r){return r==="true"?!0:r==="false"?!1:r},_hasDisplayNone:function(r){return r.style.display==="none"||(r.currentStyle?r.currentStyle.display:getComputedStyle(r,null).display)==="none"}};var l=0,c=function(r,h){return d(r,h,[].slice.call(arguments,2))};c.app=[],c.version="3.5.2",c.options={},c.modules={},c.services={},c.classes={},c.plugins={},c.mixins={},c.modals={},c.lang={},c.dom=function(r,h){return new a(r,h)},c.ajax=o,c.Dom=a,c.keycodes={BACKSPACE:8,DELETE:46,UP:38,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37},c.env={plugin:"plugins",module:"modules",service:"services",class:"classes",mixin:"mixins"},typeof ec<"u"&&function(r){r.fn.redactor=function(h){return d(this.toArray(),h,[].slice.call(arguments,1))}}(ec);var d=function(r,h,u){for(var m="redactor",y=Array.isArray(r)?r:r&&r.nodeType?[r]:document.querySelectorAll(r),v=typeof h=="string"||typeof h=="function",w=[],S,C=0;C<y.length;C++){var T=y[C],_=c.dom(T);if(S=_.dataget(m),!S&&!v&&(S=new p(T,h,l),_.dataset(m,S),c.app[l]=S,l++),S&&v){var $=h==="destroy";h=$?"stop":h;var N;typeof h=="function"?N=h.apply(S,u):(u.unshift(h),N=S.api.apply(S,u)),N!==void 0&&w.push(N),$&&_.dataset(m,!1)}}return w.length===0||w.length===1?w.length===0?S:w[0]:w};c.add=function(r,h,u){if(!(typeof c.env[r]>"u"))if(u.translations&&(c.lang=c.extend(!0,{},c.lang,u.translations)),u.modals&&(c.modals=c.extend(!0,{},c.modals,u.modals)),r==="mixin")c[c.env[r]][h]=u;else{var m=function(){};if(m.prototype=u,u.mixins)for(var y=0;y<u.mixins.length;y++)c.inherit(m,c.mixins[u.mixins[y]]);c[c.env[r]][h]=m}},c.addLang=function(r,h){typeof c.lang[r]>"u"&&(c.lang[r]={}),c.lang[r]=c.extend(c.lang[r],h)},c.create=function(r){var h=r.split("."),u=[].slice.call(arguments,1),m="classes";typeof c.env[h[0]]<"u"&&(m=c.env[h[0]],r=h.slice(1).join("."));var y=new c[m][r];if(y.init){var v=y.init.apply(y,u);return v||y}return y},c.inherit=function(r,h){var u=function(){};u.prototype=h;var m=new u;for(var y in r.prototype)r.prototype.__lookupGetter__(y)?m.__defineGetter__(y,r.prototype.__lookupGetter__(y)):m[y]=r.prototype[y];return r.prototype=m,r.prototype.super=h,r},c.error=function(r){throw r},c.extend=function(){var r={},h=!1,u=0,m=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(h=arguments[0],u++);for(var y=function(w){for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(h&&Object.prototype.toString.call(w[S])==="[object Object]"?r[S]=c.extend(!0,r[S],w[S]):r[S]=w[S])};u<m;u++){var v=arguments[u];y(v)}return r},c.opts={animation:!0,lang:"en",direction:"ltr",spellcheck:!0,structure:!1,scrollTarget:!1,styles:!0,stylesClass:"redactor-styles",placeholder:!1,source:!0,showSource:!1,inline:!1,breakline:!1,markup:"p",enterKey:!0,clickToEdit:!1,clickToSave:!1,clickToCancel:!1,focus:!1,focusEnd:!1,minHeight:!1,maxHeight:!1,maxWidth:!1,plugins:[],callbacks:{},preClass:!1,preSpaces:4,tabindex:!1,tabAsSpaces:!1,tabKey:!0,autosave:!1,autosaveName:!1,autosaveData:!1,autosaveMethod:"post",toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,toolbarContext:!0,air:!1,formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,formattingHide:!1,buttons:["html","format","bold","italic","deleted","lists","image","file","link"],buttonsTextLabeled:!1,buttonsAdd:[],buttonsAddFirst:[],buttonsAddAfter:!1,buttonsAddBefore:!1,buttonsHide:[],buttonsHideOnMobile:[],imageUpload:!1,imageUploadParam:"file",imageData:!1,imageEditable:!0,imageCaption:!0,imageLink:!0,imagePosition:!1,imageResizable:!1,imageFloatMargin:"10px",imageFigure:!0,imageObserve:!0,imageSrcData:!1,fileUpload:!1,fileUploadParam:"file",fileData:!1,fileAttachment:!1,uploadData:!1,dragUpload:!0,multipleUpload:!0,clipboardUpload:!0,uploadBase64:!1,linkTarget:!1,linkTitle:!1,linkNewTab:!0,linkNofollow:!1,linkSize:30,linkValidation:!0,cleanOnEnter:!0,cleanInlineOnEnter:!1,paragraphize:!0,removeScript:!0,removeNewLines:!1,removeComments:!0,replaceTags:{b:"strong",i:"em",strike:"del"},pastePlainText:!1,pasteLinkTarget:!1,pasteImages:!0,pasteLinks:!0,pasteClean:!0,pasteKeepStyle:[],pasteKeepClass:[],pasteKeepAttrs:["td","th"],pasteBlockTags:["pre","h1","h2","h3","h4","h5","h6","table","tbody","thead","tfoot","th","tr","td","ul","ol","li","blockquote","p","figure","figcaption"],pasteInlineTags:["a","img","br","strong","ins","code","del","span","samp","kbd","sup","sub","mark","var","cite","small","b","u","em","i","abbr"],activeButtons:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",u:"underline"},activeButtonsAdd:{},activeButtonsObservers:{},autoparse:!0,autoparseStart:!0,autoparsePaste:!0,autoparseLinks:!0,autoparseImages:!0,autoparseVideo:!0,autoparseHttps:!1,shortcodes:{"p.":{format:"p"},"quote.":{format:"blockquote"},"pre.":{format:"pre"},"h1.":{format:"h1"},"h2.":{format:"h2"},"h3.":{format:"h3"},"h4.":{format:"h4"},"h5.":{format:"h5"},"h6.":{format:"h6"},"*.":{format:"ul"}},shortcodesAdd:!1,shortcuts:{"ctrl+shift+m, meta+shift+m":{api:"module.inline.clearformat"},"ctrl+b, meta+b":{api:"module.inline.format",args:"b"},"ctrl+i, meta+i":{api:"module.inline.format",args:"i"},"ctrl+u, meta+u":{api:"module.inline.format",args:"u"},"ctrl+h, meta+h":{api:"module.inline.format",args:"sup"},"ctrl+l, meta+l":{api:"module.inline.format",args:"sub"},"ctrl+k, meta+k":{api:"module.link.open"},"ctrl+alt+0, meta+alt+0":{api:"module.block.format",args:"p"},"ctrl+alt+1, meta+alt+1":{api:"module.block.format",args:"h1"},"ctrl+alt+2, meta+alt+2":{api:"module.block.format",args:"h2"},"ctrl+alt+3, meta+alt+3":{api:"module.block.format",args:"h3"},"ctrl+alt+4, meta+alt+4":{api:"module.block.format",args:"h4"},"ctrl+alt+5, meta+alt+5":{api:"module.block.format",args:"h5"},"ctrl+alt+6, meta+alt+6":{api:"module.block.format",args:"h6"},"ctrl+shift+7, meta+shift+7":{api:"module.list.toggle",args:"ol"},"ctrl+shift+8, meta+shift+8":{api:"module.list.toggle",args:"ul"}},shortcutsAdd:!1,grammarly:!0,notranslate:!1,bufferLimit:100,emptyHtml:"<p></p>",markerChar:"\uFEFF",imageTypes:["image/png","image/jpeg","image/gif"],imageAttrs:["alt","title","src","class","width","height","srcset"],inlineTags:["a","span","strong","strike","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small","abbr"],blockTags:["pre","ul","ol","li","p","h1","h2","h3","h4","h5","h6","dl","dt","dd","div","table","tbody","thead","tfoot","tr","th","td","blockquote","output","figcaption","figure","address","section","header","footer","aside","article","iframe"],regex:{youtube:/^https?\:\/\/(?:www\.youtube(?:\-nocookie)?\.com\/|m\.youtube\.com\/|youtube\.com\/)?(?:ytscreeningroom\?vi?=|youtu\.be\/|vi?\/|user\/.+\/u\/\w{1,2}\/|embed\/|watch\?(?:.*\&)?vi?=|\&vi?=|\?(?:.*\&)?vi?=)([^#\&\?\n\/<>"']*)/gi,vimeo:/(http|https)?:\/\/(?:www.|player.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:\/[a-zA-Z0-9_-]+)?/gi,imageurl:/((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/gi,url:/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z\u00F0-\u02AF0-9()!@:%_+.~#?&//=]*)/gi,aurl1:/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,aurl2:/(^|[^\/])(www\.[\S]+(\b|$))/gim},input:!0,zindex:!1,modes:{inline:{pastePlainText:!0,pasteImages:!1,enterKey:!1,toolbar:!1,autoparse:!1,source:!1,showSource:!1,styles:!1,air:!1},original:{styles:!1}}},c.lang.en={format:"Format",image:"Image",file:"File",link:"Link",bold:"Bold",italic:"Italic",deleted:"Strikethrough",underline:"Underline",superscript:"Superscript",subscript:"Subscript","bold-abbr":"B","italic-abbr":"I","deleted-abbr":"S","underline-abbr":"U","superscript-abbr":"Sup","subscript-abbr":"Sub",lists:"Lists","link-insert":"Insert Link","link-edit":"Edit Link","link-in-new-tab":"Open link in new tab",unlink:"Unlink",cancel:"Cancel",close:"Close",insert:"Insert",save:"Save",delete:"Delete",text:"Text",edit:"Edit",title:"Alt",paragraph:"Normal text",quote:"Quote",code:"Code",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",filename:"Name",optional:"optional",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",horizontalrule:"Line",upload:"Upload","upload-label":"Drop files here or click to upload","accessibility-help-label":"Rich text editor",caption:"Caption",bulletslist:"Bullets",numberslist:"Numbers","image-position":"Position",none:"None",left:"Left",right:"Right",center:"Center",undo:"Undo",redo:"Redo"},c.buttons={html:{title:"HTML",icon:!0,api:"module.source.toggle"},undo:{title:"## undo ##",icon:!0,api:"module.buffer.undo"},redo:{title:"## redo ##",icon:!0,api:"module.buffer.redo"},format:{title:"## format ##",icon:!0,dropdown:{p:{title:"## paragraph ##",api:"module.block.format",args:{tag:"p"}},blockquote:{title:"## quote ##",api:"module.block.format",args:{tag:"blockquote"}},pre:{title:"## code ##",api:"module.block.format",args:{tag:"pre"}},h1:{title:"## heading1 ##",api:"module.block.format",args:{tag:"h1"}},h2:{title:"## heading2 ##",api:"module.block.format",args:{tag:"h2"}},h3:{title:"## heading3 ##",api:"module.block.format",args:{tag:"h3"}},h4:{title:"## heading4 ##",api:"module.block.format",args:{tag:"h4"}},h5:{title:"## heading5 ##",api:"module.block.format",args:{tag:"h5"}},h6:{title:"## heading6 ##",api:"module.block.format",args:{tag:"h6"}}}},bold:{title:"## bold-abbr ##",icon:!0,tooltip:"## bold ##",api:"module.inline.format",args:{tag:"b"}},italic:{title:"## italic-abbr ##",icon:!0,tooltip:"## italic ##",api:"module.inline.format",args:{tag:"i"}},deleted:{title:"## deleted-abbr ##",icon:!0,tooltip:"## deleted ##",api:"module.inline.format",args:{tag:"del"}},underline:{title:"## underline-abbr ##",icon:!0,tooltip:"## underline ##",api:"module.inline.format",args:{tag:"u"}},sup:{title:"## superscript-abbr ##",icon:!0,tooltip:"## superscript ##",api:"module.inline.format",args:{tag:"sup"}},sub:{title:"## subscript-abbr ##",icon:!0,tooltip:"## subscript ##",api:"module.inline.format",args:{tag:"sub"}},lists:{title:"## lists ##",icon:!0,observe:"list",dropdown:{observe:"list",unorderedlist:{title:"&bull; ## unorderedlist ##",api:"module.list.toggle",args:"ul"},orderedlist:{title:"1. ## orderedlist ##",api:"module.list.toggle",args:"ol"},outdent:{title:"< ## outdent ##",api:"module.list.outdent"},indent:{title:"> ## indent ##",api:"module.list.indent"}}},ul:{title:"&bull; ## bulletslist ##",icon:!0,api:"module.list.toggle",observe:"list",args:"ul"},ol:{title:"1. ## numberslist ##",icon:!0,api:"module.list.toggle",observe:"list",args:"ol"},outdent:{title:"## outdent ##",icon:!0,api:"module.list.outdent",observe:"list"},indent:{title:"## indent ##",icon:!0,api:"module.list.indent",observe:"list"},image:{title:"## image ##",icon:!0,api:"module.image.open"},file:{title:"## file ##",icon:!0,api:"module.file.open"},link:{title:"## link ##",icon:!0,observe:"link",dropdown:{observe:"link",link:{title:"## link-insert ##",api:"module.link.open"},unlink:{title:"## unlink ##",api:"module.link.unlink"}}},line:{title:"## horizontalrule ##",icon:!0,api:"module.line.insert"}};var p=function(r,h,u){this.module={},this.plugin={},this.instances={},this.started=!1,this.stopped=!1,this.uuid=u,this.rootElement=r,this.rootOpts=h,this.dragInside=!1,this.dragComponentInside=!1,this.keycodes=c.keycodes,this.namespace="redactor",this.$win=c.dom(window),this.$doc=c.dom(document),this.$body=c.dom("body"),this.editorReadOnly=!1,this.opts=c.create("service.options",h,r),this.lang=c.create("service.lang",this),this.buildServices(),this.buildModules(),this.buildPlugins(),this.start()};p.prototype={start:function(){this.stopped=!1,this.broadcast("start"),this.broadcast("startcode"),this.opts.clickToEdit?this.broadcast("startclicktoedit"):(this.broadcast("enable"),this.opts.showSource&&this.broadcast("startcodeshow"),this.broadcast("enablefocus")),this.broadcast("started"),this.started=!0},stop:function(){this.started=!1,this.stopped=!0,this.broadcast("stop"),this.broadcast("disable"),this.broadcast("stopped")},isStarted:function(){return this.started},isStopped:function(){return this.stopped},buildServices:function(){var r=["options","lang"],h=["uuid","keycodes","opts","lang","$win","$doc","$body"],u=[];for(var m in c.services)r.indexOf(m)===-1&&(this[m]=c.create("service."+m,this),u.push(m),h.push(m));for(var y=0;y<u.length;y++)for(var v=u[y],w=0;w<h.length;w++){var S=h[w];v!==S&&(this[v][S]=this[S])}},buildModules:function(){for(var r in c.modules)this.module[r]=c.create("module."+r,this),this.instances[r]=this.module[r]},buildPlugins:function(){for(var r=this.opts.plugins,h=0;h<r.length;h++){var u=r[h];typeof c.plugins[u]<"u"&&(this.plugin[u]=c.create("plugin."+u,this),this.instances[u]=this.plugin[u])}},isDragInside:function(){return this.dragInside},setDragInside:function(r){this.dragInside=r},isDragComponentInside:function(){return this.dragComponentInside},setDragComponentInside:function(r){this.dragComponentInside=r},getDragComponentInside:function(){return this.dragComponentInside},isReadOnly:function(){return this.editorReadOnly},enableReadOnly:function(){this.editorReadOnly=!0,this.broadcast("enablereadonly"),this.component.clearActive(),this.toolbar.disableButtons()},disableReadOnly:function(){this.editorReadOnly=!1,this.broadcast("disablereadonly"),this.toolbar.enableButtons()},callMessageHandler:function(r,h,u){var m=h.split("."),y;if(m.length===1)typeof r["on"+h]=="function"&&(y=r["on"+h].apply(r,u));else{m[0]="on"+m[0];var v=this.utils.checkProperty(r,m);typeof v=="function"&&(y=v.apply(r,u))}return y},broadcast:function(r){var h=[].slice.call(arguments,1),u;for(var m in this.instances){var y=this.callMessageHandler(this.instances[m],r,h);typeof y<"u"&&(u=y)}var v=this.callback.trigger(r,h);return typeof u<"u"?u:v},on:function(r,h){this.callback.add(r,h)},off:function(r,h){this.callback.remove(r,h)},api:function(r){if(!(!this.isStarted()&&r!=="start")&&!(this.isReadOnly()&&r!=="disableReadOnly")){this.broadcast("state");var h=[].slice.call(arguments,1),u=r.split("."),m=u.length===1,y=u[0]==="on"||u[0]==="off",v=!y&&u.length===2,w=u[0]==="plugin",S=u[0]==="module";if(m){if(typeof this[u[0]]=="function")return this.callInstanceMethod(this,u[0],h)}else{if(y)return u[0]==="on"?this.on(u[1],h[0]):this.off(u[1],h[0]||void 0);if(v){if(this.isInstanceExists(this,u[0]))return this.callInstanceMethod(this[u[0]],u[1],h);c.error(new Error('Service "'+u[0]+'" not found'))}else if(w){if(this.isInstanceExists(this.plugin,u[1]))return this.callInstanceMethod(this.plugin[u[1]],u[2],h);c.error(new Error('Plugin "'+u[1]+'" not found'))}else if(S){if(this.isInstanceExists(this.module,u[1]))return this.callInstanceMethod(this.module[u[1]],u[2],h);c.error(new Error('Module "'+u[1]+'" not found'))}}}},isInstanceExists:function(r,h){return typeof r[h]<"u"},callInstanceMethod:function(r,h,u){if(typeof r[h]=="function")return r[h].apply(r,u)}},c.add("mixin","formatter",{buildArgs:function(r){this.args={class:r.class||!1,style:r.style||!1,attr:r.attr||!1},!this.args.class&&!this.args.style&&!this.args.attr&&(this.args=!1)},applyArgs:function(r,h){return this.args?r=this[this.type](this.args,!1,r,h):r=this._clearAll(r,h),r},clearClass:function(r,h){this.selection.save();var u=h?c.dom(h):this.getElements(r,!0);return u.removeAttr("class"),h=this._unwrapSpanWithoutAttr(u.getAll()),this.selection.restore(),h},clearStyle:function(r,h){this.selection.save();var u=h?c.dom(h):this.getElements(r,!0);return u.removeAttr("style"),h=this._unwrapSpanWithoutAttr(u.getAll()),this.selection.restore(),h},clearAttr:function(r,h){this.selection.save();var u=h?c.dom(h):this.getElements(r,!0);return this._removeAllAttr(u),h=this._unwrapSpanWithoutAttr(u.getAll()),this.selection.restore(),h},set:function(r,h,u,m){m!==!1&&this.selection.save();var y=u?c.dom(u):this.getElements(h);return r.class&&(y.removeAttr("class"),y.addClass(r.class)),r.style&&(y.removeAttr("style"),y.css(r.style),y.each(function(v){var w=c.dom(v);w.attr("data-redactor-style-cache",w.attr("style"))})),r.attr&&(this._removeAllAttr(y),y.attr(r.attr)),m!==!1&&this.selection.restore(),y.getAll()},toggle:function(r,h,u,m){m!==!1&&this.selection.save();var y=u?c.dom(u):this.getElements(h);r.class&&(y.toggleClass(r.class),y.each(function(w){w.className===""&&w.removeAttribute("class")}));var v;return r.style&&(v=r.style,y.each((function(w){var S=c.dom(w);for(var C in v){var T=v[C],_=S.css(C);_=this.utils.isRgb(_)?this.utils.rgb2hex(_):_.replace(/"/g,""),T=this.utils.isRgb(T)?this.utils.rgb2hex(T):T.replace(/"/g,""),_=this.utils.hex2long(_),T=this.utils.hex2long(T);var $=typeof T=="string"?T.toLowerCase():T,N=typeof _=="string"?_.toLowerCase():_;$===N?S.css(C,""):S.css(C,T)}this._convertStyleQuotes(S),this.utils.removeEmptyAttr(w,"style")?S.removeAttr("data-redactor-style-cache"):S.attr("data-redactor-style-cache",S.attr("style"))}).bind(this))),r.attr&&(v=r.attr,y.each(function(w){var S=c.dom(w);for(var C in v)S.attr(C)?S.removeAttr(C):S.attr(C,v[C])})),m!==!1&&this.selection.restore(),y.getAll()},add:function(r,h,u,m){m!==!1&&this.selection.save();var y=u?c.dom(u):this.getElements(h);if(r.class&&y.addClass(r.class),r.style){var v=r.style;y.each((function(w){var S=c.dom(w);S.css(v),S.attr("data-redactor-style-cache",S.attr("style")),this._convertStyleQuotes(S)}).bind(this))}return r.attr&&y.attr(r.attr),m!==!1&&this.selection.restore(),y.getAll()},remove:function(r,h,u,m){m!==!1&&this.selection.save();var y=u?c.dom(u):this.getElements(h);if(r.class&&(y.removeClass(r.class),y.each(function(w){w.className===""&&w.removeAttribute("class")})),r.style){var v=r.style;y.each((function(w){var S=c.dom(w);S.css(v,""),this.utils.removeEmptyAttr(w,"style")?S.removeAttr("data-redactor-style-cache"):S.attr("data-redactor-style-cache",S.attr("style"))}).bind(this))}return r.attr&&y.removeAttr(r.attr),u=this._unwrapSpanWithoutAttr(y.getAll()),m!==!1&&this.selection.restore(),u},_removeAllAttr:function(r){r.each(function(h){for(var u=h.attributes.length;u-- >0;){var m=h.attributes[u],y=m.name;y!=="style"&&y!=="class"&&h.removeAttributeNode(m)}})},_convertStyleQuotes:function(r){var h=r.attr("style");h&&r.attr("style",h.replace(/"/g,"'"))},_clearAll:function(r,h){h!==!1&&this.selection.save();for(var u=0;u<r.length;u++)for(var m=r[u];m.attributes.length>0;)m.removeAttribute(m.attributes[0].name);return r=this._unwrapSpanWithoutAttr(r),h!==!1&&this.selection.restore(),r},_unwrapSpanWithoutAttr:function(r){for(var h=[],u=0;u<r.length;u++){var m=r[u],y=m.attributes.length;y<=0&&m.nodeType!==3&&m.tagName==="SPAN"?c.dom(m).unwrap():h.push(m)}return h}}),c.add("mixin","dom",c.Dom.prototype),c.add("mixin","component",{get cmnt(){return!0}}),c.add("service","options",{init:function(r,h){var u=c.dom(h),m=c.extend({},c.opts,h?u.data():{},c.options);return m=c.extend(!0,m,r),m}}),c.add("service","lang",{init:function(r){this.app=r,this.opts=r.opts,this.vars=this._build(this.opts.lang)},rebuild:function(r){this.opts.lang=r,this.vars=this._build(r)},extend:function(r){this.vars=c.extend(this.vars,r)},parse:function(r){if(r===void 0)return"";var h=r.match(/## (.*?) ##/g);if(h)for(var u=0;u<h.length;u++){var m=h[u].replace(/^##\s/g,"").replace(/\s##$/g,"");r=r.replace(h[u],this.get(m))}return r},get:function(r){var h="";return typeof this.vars[r]<"u"?h=this.vars[r]:this.opts.lang!=="en"&&typeof c.lang.en[r]<"u"&&(h=c.lang.en[r]),h},_build:function(r){var h=c.lang.en;return r!=="en"&&(h=c.lang[r]!==void 0?c.lang[r]:h),h}}),c.add("service","callback",{init:function(r){this.app=r,this.opts=r.opts,this.callbacks={},this.opts.callbacks&&this._set(this.opts.callbacks,"")},stop:function(){this.callbacks={}},add:function(r,h){this.callbacks[r]||(this.callbacks[r]=[]),this.callbacks[r].push(h)},remove:function(r,h){if(h===void 0)delete this.callbacks[r];else{for(var u=0;u<this.callbacks[r].length;u++)this.callbacks[r].splice(u,1);Object.keys(this.callbacks[r]).length===0&&delete this.callbacks[r]}},trigger:function(r,h){var u=this._loop(r,h,this.callbacks);return typeof u>"u"&&h&&h[0]!==!1?h[0]:u},_set:function(r,h){for(var u in r){var m=h===""?u:h+"."+u;typeof r[u]=="object"?this._set(r[u],m):(this.callbacks[m]=[],this.callbacks[m].push(r[u]))}},_loop:function(r,h,u){var m;for(var y in u)if(r===y)for(var v=0;v<u[y].length;v++)m=u[y][v].apply(this.app,h);return m}}),c.add("service","animate",{init:function(r){this.animationOpt=r.opts.animation},start:function(r,h,u,m){var y={duration:!1,iterate:!1,delay:!1,timing:!1,prefix:"redactor-"};return y=typeof u=="function"?y:c.extend(y,u),m=typeof u=="function"?u:m,new c.AnimatePlay(r,h,y,m,this.animationOpt)},stop:function(r){this.$el=c.dom(r),this.$el.removeClass("redactor-animated");var h=this.$el.attr("redactor-animate-effect");this.$el.removeClass(h),this.$el.removeAttr("redactor-animate-effect");var u=this.$el.attr("redactor-animate-hide");u&&this.$el.addClass(u).removeAttr("redactor-animate-hide"),this.$el.off("animationend webkitAnimationEnd")}}),c.AnimatePlay=function(r,h,u,m,y){return this.hidableEffects=["fadeOut","flipOut","slideUp","zoomOut","slideOutUp","slideOutRight","slideOutLeft"],this.prefixes=["","-webkit-"],this.$el=c.dom(r),this.$body=c.dom("body"),this.callback=m,this.animation=y?h:this.buildAnimationOff(h),this.defaults=u,this.animation==="slideUp"&&this.$el.height(this.$el.height()),this.isInanimate()?this.inanimate():this.animate()},c.AnimatePlay.prototype={buildAnimationOff:function(r){return this.isHidable(r)?"hide":"show"},buildHideClass:function(){return"redactor-animate-hide"},isInanimate:function(){return this.animation==="show"||this.animation==="hide"},isAnimated:function(){return this.$el.hasClass("redactor-animated")},isHidable:function(r){return this.hidableEffects.indexOf(r)!==-1},inanimate:function(){this.defaults.timing="linear";var r;return this.animation==="show"?(r=this.buildHideClass(),this.$el.attr("redactor-animate-hide",r),this.$el.removeClass(r)):(r=this.$el.attr("redactor-animate-hide"),this.$el.addClass(r).removeAttr("redactor-animate-hide")),typeof this.callback=="function"&&this.callback(this),this},animate:function(){var r=this.defaults.delay?this.defaults.delay:0;return setTimeout((function(){if(this.$body.addClass("no-scroll-x"),this.$el.addClass("redactor-animated"),!this.$el.attr("redactor-animate-hide")){var h=this.buildHideClass();this.$el.attr("redactor-animate-hide",h),this.$el.removeClass(h)}this.$el.addClass(this.defaults.prefix+this.animation),this.$el.attr("redactor-animate-effect",this.defaults.prefix+this.animation),this.set(this.defaults.duration+"s",this.defaults.iterate,this.defaults.timing),this.complete()}).bind(this),r*1e3),this},set:function(r,h,u){for(var m=this.prefixes.length;m--;)(r!==!1||r==="")&&this.$el.css(this.prefixes[m]+"animation-duration",r),(h!==!1||h==="")&&this.$el.css(this.prefixes[m]+"animation-iteration-count",h),(u!==!1||u==="")&&this.$el.css(this.prefixes[m]+"animation-timing-function",u)},clean:function(){this.$body.removeClass("no-scroll-x"),this.$el.removeClass("redactor-animated"),this.$el.removeClass(this.defaults.prefix+this.animation),this.$el.removeAttr("redactor-animate-effect"),this.set("","","")},complete:function(){this.$el.one("animationend webkitAnimationEnd",(function(){if(this.$el.hasClass(this.defaults.prefix+this.animation)&&this.clean(),this.isHidable(this.animation)){var r=this.$el.attr("redactor-animate-hide");this.$el.addClass(r).removeAttr("redactor-animate-hide")}this.animation==="slideUp"&&this.$el.height(""),typeof this.callback=="function"&&this.callback(this.$el)}).bind(this))}},c.add("service","caret",{init:function(r){this.app=r},setStart:function(r){this._setCaret("Start",r)},setEnd:function(r){this._setCaret("End",r)},setBefore:function(r){this._setCaret("Before",r)},setAfter:function(r){this._setCaret("After",r)},isStart:function(r){return this._isStartOrEnd(r,"First")},isEnd:function(r){return this._isStartOrEnd(r,"Last")},setAtEnd:function(r){var h=this.inspector.parse(r),u=h.getTag(),m=document.createRange();if(this._isInPage(r)){if(u==="a"){var y=this.utils.createInvisibleChar();c.dom(r).after(y),m.selectNodeContents(y),m.collapse(!0)}else m.selectNodeContents(r),m.collapse(!1);this.selection.setRange(m)}},setAtStart:function(r){var h=document.createRange(),u=this.inspector.parse(r);if(this._isInPage(r)){if(h.setStart(r,0),h.collapse(!0),u.isInline()){var m=this.utils.createInvisibleChar();h.insertNode(m),h.selectNodeContents(m),h.collapse(!1)}this.selection.setRange(h)}},setAtBefore:function(r){var h=this.inspector.parse(r),u=document.createRange();if(this._isInPage(r)){if(u.setStartBefore(r),u.collapse(!0),h.isInline()){var m=this.utils.createInvisibleChar();r.parentNode.insertBefore(m,r),u.selectNodeContents(m),u.collapse(!1)}this.selection.setRange(u)}},setAtAfter:function(r){var h=document.createRange();if(this._isInPage(r)){h.setStartAfter(r),h.collapse(!0);var u=this.utils.createInvisibleChar();h.insertNode(u),h.selectNodeContents(u),h.collapse(!1),this.selection.setRange(h)}},setAtPrev:function(r){var h=r.previousSibling;h&&(h=h.nodeType===3&&this._isEmptyTextNode(h)?h.previousElementSibling:h,h&&this.setEnd(h))},setAtNext:function(r){var h=r.nextSibling;h&&(h=h.nodeType===3&&this._isEmptyTextNode(h)?h.nextElementSibling:h,h&&this.setStart(h))},_setCaret:function(r,h){var u=this.inspector.parse(h),m=u.getNode();m&&(this.component.clearActive(),this["_set"+r](m,u,u.getTag()))},_setStart:function(r,h,u){if(h.isText())return this.editor.focus(),this.setAtStart(r);if(u==="ul"||u==="ol"){r=h.findFirstNode("li");var m=this.utils.getFirstElement(r),y=this.inspector.parse(m);if(m&&y.isComponent())return this.setStart(y.getComponent())}else if(u==="dl")r=h.findFirstNode("dt");else{if(u==="br"||u==="hr")return this.setBefore(r);if(u==="td"||u==="th"){var v=h.getFirstElement(r);if(v)return this.setStart(v)}else{if(u==="table"||u==="tr")return this.setStart(h.findFirstNode("th, td"));if(h.isComponentType("code")&&!h.isFigcaption()){var w=h.findLastNode("pre, code");return this.editor.focus(),this.setAtStart(w)}else if(u==="figure"&&h.isComponentType("table")){var S=h.getTable(),C=this.inspector.parse(S);return this.setStart(C.findFirstNode("th, td"))}else if(!h.isComponentType("table")&&h.isComponent()&&!h.isFigcaption())return this.component.setActive(r)}}this.editor.focus(),this._setInline(r,"Start")||this.setAtStart(r)},_setEnd:function(r,h,u){if(h.isText())return this.editor.focus(),this.setAtEnd(r);if(u==="ul"||u==="ol"){r=h.findLastNode("li");var m=this.utils.getLastElement(r),y=this.inspector.parse(m);if(m&&y.isComponent())return this.setEnd(y.getComponent())}else if(u==="dl")r=h.findLastNode("dd");else{if(u==="br"||u==="hr")return this.setAfter(r);if(u==="td"||u==="th"){var v=h.getLastElement();if(v)return this.setEnd(v)}else{if(u==="table"||u==="tr")return this.setEnd(h.findLastNode("th, td"));if(h.isComponentType("code")&&!h.isFigcaption()){var w=h.findLastNode("pre, code");return this.editor.focus(),this.setAtEnd(w)}else if(u==="figure"&&h.isComponentType("table")){var S=h.getTable(),C=this.inspector.parse(S);return this.setEnd(C.findLastNode("th, td"))}else if(!h.isComponentType("table")&&h.isComponent()&&!h.isFigcaption())return this.component.setActive(r)}}if(this.editor.focus(),!this._setInline(r,"End")){if(this.utils.isEmpty(r))return this.setStart(r);this.setAtEnd(r)}},_setBefore:function(r,h,u){if(r.nodeType===3)return this.setAtBefore(r);if(h.isInline())return this.setAtBefore(r);if(h.isFirstTableCell())return this.setAtPrev(h.getComponent());if(u==="td"||u==="th")return this.setAtPrev(r);if(h.isFirstListItem())return this.setAtPrev(h.getList());if(h.isFigcaption())return this.setStart(h.getComponent());if(!h.isComponentType("table")&&h.isComponent())return this.setAtPrev(h.getComponent());if(h.isBlock())return this.setAtPrev(r);this.editor.focus(),this.setAtBefore(r)},_setAfter:function(r,h,u){if(r.nodeType===3)return this.setAtAfter(r);if(h.isInline())return this.setAtAfter(r);if(h.isLastTableCell())return this.setAtNext(h.getComponent());if(u==="td"||u==="th")return this.setAtNext(r);if(h.isFirstListItem())return this.setAtNext(h.getList());if(!h.isComponentType("table")&&h.isComponent())return this.setAtNext(h.getComponent());if(h.isBlock())return this.setAtNext(r);this.editor.focus(),this.setAtAfter(r)},_setInline:function(r,h){var u=this._hasInlineChild(r,h==="Start"?"first":"last");if(u)return h==="Start"?this.setStart(u):this.setEnd(u),!0},_isStartOrEnd:function(r,h){var u=this.utils.getNode(r);if(!u)return!1;var m=this.inspector.parse(u);if(u=this._getStartEndNode(u,m,h),u&&u.nodeType!==3&&u.tagName!=="LI"){var y=u.nodeType===3?u.textContent:u.innerHTML;if(y=this.utils.trimSpaces(y),y==="")return!0}if(!m.isFigcaption()&&m.isComponent()&&!m.isComponentEditable())return!0;var v=this.offset.get(u,!0);return v?h==="First"?v.start===0:v.end===this.offset.size(u,!0):!1},_isInPage:function(r){return r&&r.nodeType?r===document.body?!1:document.body.contains(r):!1},_hasInlineChild:function(r,h){var u=this.inspector.parse(r),m=h==="first"?u.getFirstNode():u.getLastNode(),y=c.dom(m);if(m&&m.nodeType!==3&&this.inspector.isInlineTag(m.tagName)&&!y.hasClass("redactor-component")&&!y.hasClass("non-editable"))return m},_isEmptyTextNode:function(r){var h=r.textContent.trim().replace(/\n/,"");return h=this.utils.removeInvisibleChars(h),h===""},_getStartEndNode:function(r,h,u){return h.isFigcaption()?r=h.getFigcaption():h.isTable()?r=h["find"+u+"Node"]("th, td"):h.isList()?r=h["find"+u+"Node"]("li"):h.isComponentType("code")&&(r=h.findLastNode("pre, code")),r}});var g=function(h){return document.getSelection().containsNode(h,!0)},b=function(h){var u=document.getSelection(),m=u.anchorNode.parentNode,y=u.focusNode.parentNode,v=u.getRangeAt(0).getBoundingClientRect(),w=h.getBoundingClientRect();return!!(c.dom(m).closest(h).length||c.dom(y).closest(h).length||v.top<w.top&&v.height>w.height)};"containsNode"in Selection.prototype||(g=b),c.add("service","selection",{init:function(r){this.app=r},is:function(){var r=this.get();if(r){var h=r.anchorNode;return c.dom(h).closest(".redactor-in-"+this.uuid).length!==0||h===this.editor.getElement().get()}return!1},isCollapsed:function(){var r=this.get(),h=this.getRange();return r&&r.isCollapsed?!0:!!(h&&h.toString().length===0)},isBackwards:function(){var r=!1,h=this.get();if(h&&!h.isCollapsed){var u=document.createRange();u.setStart(h.anchorNode,h.anchorOffset),u.setEnd(h.focusNode,h.focusOffset),r=u.collapsed,u.detach()}return r},isIn:function(r){var h=c.dom(r).get(),u=this.getCurrent();return u&&h?h.contains(u):!1},isText:function(){var r=this.get();if(r){var h=r.anchorNode,u=this.getBlock(h),m=this.getBlocks();if(u&&this.inspector.isTableCellTag(u.tagName)||u===!1&&m.length===0)return!0}return!1},isAll:function(r){var h=this.utils.getNode(r);if(!h)return!1;var u=this.editor.isEditor(h),m=this.inspector.parse(h);if(!m.isFigcaption()&&this.component.isNonEditable(h)&&this.component.isActive(h))return!0;if(u){var y=this.editor.getElement(),v=y.html().replace(/<p><\/p>$/i,""),w=this.getHtml(!1).length,S=v.length;if(w!==S)return!1}if(u&&this.editor.isEmpty()||this.isCollapsed())return!1;var C=this.offset.get(h,!0),T=this.offset.size(h,!0);return!u&&m.isComponentType("code")&&(T=this.getText().trim().length),!!(C&&C.start===0&&C.end===T)},hasNonEditable:function(){var r=this.getHtml(),h=c.dom("<div>").html(r);return!this.isCollapsed()&&h.find(".non-editable").length!==0},setRange:function(r){var h=window.getSelection();h.removeAllRanges(),h.addRange(r)},setAll:function(r){var h=this.utils.getNode(r);if(h){var u=this.inspector.parse(h);if(this.component.clearActive(),this.editor.focus(),this.editor.saveScroll(),this.editor.disableNonEditables(),h&&h.tagName==="TABLE"){var m=u.findFirstNode("td, th"),y=u.findLastNode("td, th");c.dom(m).prepend(this.marker.build("start")),c.dom(y).append(this.marker.build("end")),this.restoreMarkers()}else if(!u.isFigcaption()&&this.component.isNonEditable(h))this.component.setActive(h);else{u.isComponentType("code")&&(h=u.getComponentCodeElement(),h.focus());var v=document.createRange();v.selectNodeContents(h),this.setRange(v)}this.editor.enableNonEditables(),this.editor.restoreScroll()}},get:function(){var r=window.getSelection();return r.rangeCount>0?r:null},getRange:function(){var r=this.get();return r&&r.getRangeAt(0)?r.getRangeAt(0):null},getTextBeforeCaret:function(r){r=typeof r>"u"?1:r;var h=this.editor.getElement().get(),u=this.getRange(),m=!1;return u&&(u=u.cloneRange(),u.collapse(!0),u.setStart(h,0),m=u.toString().slice(-r)),m},getTextAfterCaret:function(r){r=typeof r>"u"?1:r;var h=this.editor.getElement().get(),u=this.getRange(),m=!1;if(u){var y=u.cloneRange();y.selectNodeContents(h),y.setStart(u.endContainer,u.endOffset),m=y.toString().slice(0,r)}return m},getPosition:function(){var r=this.getRange(),h={top:0,left:0,width:0,height:0};if(window.getSelection&&r.getBoundingClientRect){r=r.cloneRange();var u=r.startOffset-1;r.setStart(r.startContainer,u<0?0:u);var m=r.getBoundingClientRect();h={top:m.top,left:m.left,width:m.right-m.left,height:m.bottom-m.top}}return h},getCurrent:function(){var r=!1,h=this.get(),u=this.component.getActive();return u?r=u:h&&this.is()&&(r=h.anchorNode!==this.editor.getElement().get()?h.anchorNode:!1),r},getParent:function(){var r=!1,h=this.getCurrent();if(h){var u=h.parentNode;r=u!==this.editor.getElement().get()?u:!1}return r},getElement:function(r){for(var h=r||this.getCurrent();h;){var u=this.inspector.parse(h);if(u.isElement()&&u.isInEditor())return h;h=h.parentNode}return!1},getInline:function(r){for(var h=r||this.getCurrent(),u=!1;h;)this._isInlineNode(h)&&(u=h),h=h.parentNode;return u},getInlineFirst:function(r){for(var h=r||this.getCurrent();h;){if(this._isInlineNode(h))return h;h=h.parentNode}return!1},getInlineAll:function(r){for(var h=r||this.getCurrent(),u=[];h;)this._isInlineNode(h)&&u.push(h),h=h.parentNode;return u},getBlock:function(r){for(var h=r||this.getCurrent();h;){var u=this.inspector.parse(h),m=this.inspector.isBlockTag(h.tagName);if(m&&u.isInEditor(h))return h;h=h.parentNode}return!1},getInlinesAllSelected:function(r){if(this.isAll())return[];var h=this.getInlines({all:!0,inside:!0}),u=this.getText().replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&"),m=[];if(u==="")m=h;else if(h.length>1)for(var y=0;y<h.length;y++)this._isTextSelected(h[y],u)&&m.push(h[y]);else h.length===1&&this._isTextSelected(h[0],u)&&(m=h);return m=r&&r.tags?this._filterNodesByTags(m,r.tags):m,m},getInlines:function(r){for(var h=this.getNodes(),u=[],m=0;m<h.length;m++){var y;if(r&&r.all)for(y=h[m];y;)this._isInlineNode(y)&&!this._isInNodesArray(u,y)&&u.push(y),y=y.parentNode;else y=this.getInline(h[m]),y&&!this._isInNodesArray(u,y)&&u.push(y)}return u=r&&r.tags?this._filterNodesByTags(u,r.tags):u,u=r&&r.inside?this._filterInlinesInside(u,r):u,u},getBlocks:function(r){var h=this.getNodes(),u=this.getBlock();h=h.length===0&&u?[u]:h;for(var m=[],y=0;y<h.length;y++){var v=this.getBlock(h[y]),w=c.dom(v);w.hasClass("non-editable")||v&&!this._isInNodesArray(m,v)&&m.push(v)}return m=r&&r.tags?this._filterNodesByTags(m,r.tags):m,m=r&&r.first?this._filterBlocksFirst(m,r):m,m},getElements:function(r){var h=this.getNodes({textnodes:!1}),u=this.getBlock();h=h.length===0&&u?[u]:h;for(var m=[],y=0;y<h.length;y++)this._isInNodesArray(m,h[y])||m.push(h[y]);return m=r&&r.tags?this._filterNodesByTags(m,r.tags):m,m},getNodes:function(r){var h=[],u=this.component.getActive();if(u)h=this._getNodesComponent(u);else if(this.isCollapsed()){var m=this.getCurrent();h=m?[m]:[]}else this.is()&&!u&&(h=this._getRangeSelectedNodes());return h=this._filterServicesNodes(h),h=this._filterEditor(h),h=r&&r.tags?this._filterNodesByTags(h,r.tags):h,h=r&&r.textnodes?this._filterNodesTexts(h,r):h,h=r&&!r.textnodes?this._filterNodesElements(h):h,h},getText:function(){var r=this.get();return r?this.utils.removeInvisibleChars(r.toString()):""},getHtml:function(r){var h="",u=this.get();if(u){for(var m=document.createElement("div"),y=u.rangeCount,v=0;v<y;++v)m.appendChild(u.getRangeAt(v).cloneContents());h=m.innerHTML,h=r!==!1?this.cleaner.output(h):h,h=h.replace(/<p><\/p>$/i,"")}return h},clear:function(){this.component.clearActive(),this.get().removeAllRanges()},collapseToStart:function(){var r=this.get();r&&!r.isCollapsed&&r.collapseToStart()},collapseToEnd:function(){var r=this.get();r&&!r.isCollapsed&&r.collapseToEnd()},saveActiveComponent:function(){var r=this.component.getActive();return r?(this.savedComponent=r,!0):!1},restoreActiveComponent:function(){return this.savedComponent?(this.component.setActive(this.savedComponent),!0):!1},save:function(){this._clearSaved();var r=this.getElement(),h=["TD","TH","P","DIV","PRE","H1","H2","H3","H4","H5","H6","LI","BLOCKQUOTE"];r&&h.indexOf(r.tagName)!==-1&&(r.innerHTML===""||r.innerHTML==="<br>")?this.savedElement=r:this.saveActiveComponent()||(this.saved=this.offset.get())},restore:function(){!this.saved&&!this.savedComponent&&!this.savedElement||(this.editor.saveScroll(),this.savedElement?this.caret.setStart(this.savedElement):this.restoreActiveComponent()||this.offset.set(this.saved),this._clearSaved(),this.editor.restoreScroll())},saveMarkers:function(){this._clearSaved(),this.saveActiveComponent()||this.marker.insert()},restoreMarkers:function(){this.editor.saveScroll(),this.restoreActiveComponent()||this.marker.restore(),this._clearSaved(),this.editor.restoreScroll()},_getNextNode:function(r){if(r.hasChildNodes())return r.firstChild;for(;r&&!r.nextSibling;)r=r.parentNode;return r?r.nextSibling:null},_getNodesComponent:function(r){var h=this.getCurrent(),u=this.inspector.parse(h);return u.isFigcaption()?[u.getFigcaption()]:[r]},_getRangeSelectedNodes:function(){var r=[],h=this.getRange(),u=h.startContainer,m=h.startContainer,y=h.endContainer,v=this.editor.getElement();if(m===v.get()&&this.isAll())r=this.utils.getChildNodes(v);else if(u===y)r=[u];else{for(;u&&u!==y;)r.push(u=this._getNextNode(u));for(u=h.startContainer;u&&u!==h.commonAncestorContainer;)r.unshift(u),u=u.parentNode}return r},_isInNodesArray:function(r,h){return r.indexOf(h)!==-1},_filterEditor:function(r){for(var h=[],u=0;u<r.length;u++){var m=this.inspector.parse(r[u]);m.isInEditor()&&h.push(r[u])}return h},_filterServicesNodes:function(r){for(var h=[],u=0;u<r.length;u++){var m=c.dom(r[u]),y=!1;r[u]&&r[u].nodeType===3&&this.utils.isEmpty(r[u])&&(y=!0),(m.hasClass("redactor-script-tag")||m.hasClass("redactor-component-caret")||m.hasClass("redactor-selection-marker")||m.hasClass("non-editable"))&&(y=!0),y||h.push(r[u])}return h},_filterNodesTexts:function(r,h){for(var u=[],m=0;m<r.length;m++)if(r[m].nodeType===3||h.keepbr&&r[m].tagName==="BR"){var y=this.getInline(r[m]),v=y&&h&&h.inline===!1;v||u.push(r[m])}return u},_filterNodesElements:function(r){for(var h=[],u=0;u<r.length;u++)r[u].nodeType!==3&&h.push(r[u]);return h},_filterNodesByTags:function(r,h,u){for(var m=[],y=0;y<r.length;y++)if(u&&r[y].nodeType===3)m.push(r[y]);else if(r[y].nodeType!==3){var v=r[y].tagName.toLowerCase();h.indexOf(v.toLowerCase())!==-1&&m.push(r[y])}return m},_filterBlocksFirst:function(r){for(var h=[],u=0;u<r.length;u++){var m=c.dom(r[u]),y=m.parent().get(),v=m.parent().hasClass("redactor-in"),w=y&&(y.tagName==="TD"||y.tagName==="TH");(v||w)&&h.push(r[u])}return h},_filterInlinesInside:function(r){for(var h=[],u=0;u<r.length;u++)g(r[u],!0)&&h.push(r[u]);return h},_isTextSelected:function(r,h){var u=r.nodeType!==9?this.utils.removeInvisibleChars(r.textContent):"";return h===u||u.search(h)!==-1||h.search(new RegExp("^"+this.utils.escapeRegExp(u)+"$"))!==-1},_isInlineNode:function(r){var h=this.inspector.parse(r);return this.inspector.isInlineTag(r.tagName)&&h.isInEditor()},_clearSaved:function(){this.saved=!1,this.savedComponent=!1,this.savedElement=!1}}),c.add("service","element",{init:function(r){this.app=r,this.rootElement=r.rootElement,this.$element={},this.type="inline"},start:function(){this._build(),this._buildType()},isType:function(r){return r===this.type},getType:function(){return this.type},getElement:function(){return this.$element},_build:function(){this.$element=c.dom(this.rootElement)},_buildType:function(){var r=this.$element.get().tagName;this.type=r==="TEXTAREA"?"textarea":this.type,this.type=r==="DIV"?"div":this.type,this.type=this.opts.inline?"inline":this.type}}),c.add("service","editor",{init:function(r){this.app=r,this.scrolltop=!1,this.pasting=!1},start:function(){this._build()},focus:function(){!this.isFocus()&&!this._isContenteditableFocus()&&(this.saveScroll(),this.$editor.focus(),this.restoreScroll())},startFocus:function(){this.caret.setStart(this.getFirstNode())},endFocus:function(){this.caret.setEnd(this.getLastNode())},isPasting:function(){return this.pasting},enablePasting:function(){this.pasting=!0},disablePasting:function(){this.pasting=!1},saveScroll:function(){this.scrolltop=this._getScrollTarget().scrollTop(),this.opts.maxHeight&&(this.scrolltopin=this.$editor.scrollTop())},restoreScroll:function(){this.scrolltop!==!1&&(this._getScrollTarget().scrollTop(this.scrolltop),this.scrolltop=!1),this.scrolltopin&&(this.$editor.scrollTop(this.scrolltopin),this.scrolltopin=!1)},disableNonEditables:function(){this.$noneditables=this.$editor.find("[contenteditable=false]"),this.$noneditables.attr("contenteditable",!0)},enableNonEditables:function(){this.$noneditables&&setTimeout((function(){this.$noneditables.attr("contenteditable",!1)}).bind(this),1)},getFirstNode:function(){return this.$editor.contents()[0]},getLastNode:function(){var r=this.$editor.contents();return r[r.length-1]},isSourceMode:function(){var r=this.source.getElement();return r.hasClass("redactor-source-open")},isEditor:function(r){var h=c.dom(r).get();return h===this.$editor.get()},isEmpty:function(r){return this.utils.isEmptyHtml(this.$editor.html(),!1,r)},isFocus:function(){var r=c.dom(document.activeElement),h=this.$editor.find(".redactor-component-active").length!==0;return h||r.closest(".redactor-in-"+this.uuid).length!==0},setEmpty:function(){this.$editor.html(this.opts.emptyHtml)},getElement:function(){return this.$editor},_build:function(){var r=this.element.getElement(),h=this.element.isType("textarea")?"<div>":r.get();this.$editor=c.dom(h)},_getScrollTarget:function(){var r=this.$doc;return this.opts.toolbarFixedTarget!==document?r=c.dom(this.opts.toolbarFixedTarget):r=this.opts.scrollTarget?c.dom(this.opts.scrollTarget):r,r},_isContenteditableFocus:function(){var r=this.selection.getBlock(),h=r?c.dom(r).closest("[contenteditable=true]").not(".redactor-in"):[];return h.length!==0}}),c.add("service","container",{init:function(r){this.app=r},start:function(){this._build()},getElement:function(){return this.$container},_build:function(){var r=this.element.isType("inline")?"<span>":"<div>";this.$container=c.dom(r)}}),c.add("service","source",{init:function(r){this.app=r,this.$source={},this.content=""},start:function(){this._build(),this._buildName(),this._buildStartedContent()},getElement:function(){return this.$source},getCode:function(){return this.$source.val()},getName:function(){return this.$source.attr("name")},getStartedContent:function(){return this.content},setCode:function(r){return this.insertion.set(r,!0,!1)},isNameGenerated:function(){return this.name},rebuildStartedContent:function(){this._buildStartedContent()},_build:function(){var r=this.element.getElement(),h=this.element.isType("textarea"),u=h?r.get():"<textarea>";this.$source=c.dom(u)},_buildName:function(){var r=this.element.getElement();this.name=r.attr("name"),this.$source.attr("name",this.name?this.name:"content-"+this.uuid)},_buildStartedContent:function(){var r=this.element.getElement(),h=this.element.isType("textarea")?r.val():r.html();this.content=h.trim()}}),c.add("service","statusbar",{init:function(r){this.app=r,this.$statusbar={},this.items=[]},start:function(){this.$statusbar=c.dom("<ul>"),this.$statusbar.attr("dir",this.opts.direction)},add:function(r,h){return this.update(r,h)},update:function(r,h){var u;return typeof this.items[r]<"u"?u=this.items[r]:(u=c.dom("<li>"),this.$statusbar.append(u),this.items[r]=u),u.html(h)},get:function(r){return this.items[r]?this.items[r]:!1},remove:function(r){this.items[r]&&(this.items[r].remove(),delete this.items[r])},getItems:function(){return this.items},removeItems:function(){this.items={},this.$statusbar.html("")},getElement:function(){return this.$statusbar}}),c.add("service","toolbar",{init:function(r){this.app=r,this.buttons=[],this.dropdownOpened=!1,this.buttonsObservers={}},start:function(){this.is()&&(this.opts.activeButtons=this.opts.activeButtonsAdd?this._extendActiveButtons():this.opts.activeButtons,this.create())},stopObservers:function(){this.buttonsObservers={}},create:function(){this.$wrapper=c.dom("<div>"),this.$toolbar=c.dom("<div>")},observe:function(){if(this.is()){this.setButtonsInactive();var r,h;for(var u in this.buttonsObservers)h=this.buttonsObservers[u],r=this.getButton(u),this.app.broadcast("button."+h+".observe",r);var m=this.opts.activeButtons,y=this.selection.getInlinesAllSelected(),v=this.selection.getInline(),w=this.selection.getInlineAll();this.selection.isCollapsed()&&(v&&y.push(v),w.length!==0&&(y=y.concat(w)));var S=this._inlinesToTags(y);for(var C in m)S.indexOf(C)!==-1&&(r=this.getButton(m[C]),r&&r.setActive())}},is:function(){return!(!this.opts.toolbar||this.detector.isMobile()&&this.opts.air)},isAir:function(){return this.is()?this.$toolbar.hasClass("redactor-air"):!1},isFixed:function(){return this.is()?this.$toolbar.hasClass("redactor-toolbar-fixed"):!1},isContextBar:function(){var r=this.$body.find("#redactor-context-toolbar-"+this.uuid);return r.hasClass("open")},isTarget:function(){return this.opts.toolbarFixedTarget!==document},getElement:function(){return this.$toolbar},getWrapper:function(){return this.$wrapper},getDropdown:function(){return this.dropdownOpened},getTargetElement:function(){return c.dom(this.opts.toolbarFixedTarget)},getButton:function(r){var h=this._findButton(".re-"+r);return h.length!==0?h.dataget("data-button-instance"):!1},getButtons:function(){var r=[];return this._findButtons().each(function(h){var u=c.dom(h);r.push(u.dataget("data-button-instance"))}),r},getButtonsKeys:function(){var r=[];return this._findButtons().each(function(h){var u=c.dom(h);r.push(u.attr("data-re-name"))}),r},addButton:function(r,h,u,m,y){u=u||"end";var v=c.create("toolbar.button",this.app,r,h);if(h.observe&&(this.opts.activeButtonsObservers[r]={observe:h.observe,button:v}),this.is())if(u==="first")this.$toolbar.prepend(v);else if(u==="after")m.after(v);else if(u==="before")m.before(v);else{var w=this.opts.buttons.indexOf(r);if(y!==!0&&w!==-1)if(w===0)this.$toolbar.prepend(v);else{var S=this._findButtons(),C=S.eq(w-1);C.length>0?C.after(v):this.$toolbar.append(v)}else this.$toolbar.append(v)}return v},addButtonFirst:function(r,h){return this.addButton(r,h,"first")},addButtonAfter:function(r,h,u){var m=this.getButton(r);return m?this.addButton(h,u,"after",m):this.addButton(h,u)},addButtonBefore:function(r,h,u){var m=this.getButton(r);return m?this.addButton(h,u,"before",m):this.addButton(h,u)},addButtonObserver:function(r,h){this.buttonsObservers[r]=h},setButtons:function(r){this.buttons=r},setDropdown:function(r){this.dropdownOpened=r},setButtonsInactive:function(){for(var r=this.getButtons(),h=0;h<r.length;h++)r[h].setInactive()},setButtonsActive:function(){for(var r=this.getButtons(),h=0;h<r.length;h++)r[h].setActive()},disableButtons:function(){for(var r=this.getButtons(),h=0;h<r.length;h++)r[h].disable()},enableButtons:function(){for(var r=this.getButtons(),h=0;h<r.length;h++)r[h].enable()},_findButton:function(r){return this.is()?this.$toolbar.find(r):c.dom()},_findButtons:function(){return this.is()?this.$toolbar.find(".re-button"):c.dom()},_extendActiveButtons:function(){return c.extend({},this.opts.activeButtons,this.opts.activeButtonsAdd)},_inlinesToTags:function(r){for(var h=[],u=0;u<r.length;u++)h.push(r[u].tagName.toLowerCase());return h}}),c.add("class","toolbar.button",{mixins:["dom"],init:function(r,h,u){this.app=r,this.opts=r.opts,this.lang=r.lang,this.$body=r.$body,this.toolbar=r.toolbar,this.detector=r.detector,this.obj=u,this.name=h,this.dropdown=!1,this.tooltip=!1,this._init()},isActive:function(){return this.hasClass("redactor-button-active")},isDisabled:function(){return this.hasClass("redactor-button-disabled")},hasIcon:function(){return this.obj.icon&&!this.opts.buttonsTextLabeled},setDropdown:function(r){this.obj.dropdown=r,this.obj.message=!1,this.dropdown=c.create("toolbar.dropdown",this.app,this.name,this.obj.dropdown),this.attr("data-dropdown",!0)},setMessage:function(r,h){this.obj.message=r,this.obj.args=h,this.obj.dropdown=!1},setApi:function(r,h){this.obj.api=r,this.obj.args=h,this.obj.dropdown=!1},setTitle:function(r){this.obj.title=this.lang.parse(r),this.obj.tooltip=this.obj.title,this.attr({alt:this.obj.tooltip,"aria-label":this.obj.tooltip}),this.attr("data-re-icon")||this.html(this.obj.title)},setTooltip:function(r){this.obj.tooltip=this.lang.parse(r),this.attr({alt:this.obj.tooltip,"aria-label":this.obj.tooltip})},setIcon:function(r){this.opts.buttonsTextLabeled||(this.obj.icon=!0,this.$icon=c.dom(r),this.html(""),this.append(this.$icon),this.attr("data-re-icon",!0),this.addClass("re-button-icon"),this.setTooltip(this.obj.title),this._buildTooltip())},setActive:function(){this.addClass("redactor-button-active")},setInactive:function(){this.removeClass("redactor-button-active")},hideTooltip:function(){this.$body.find(".re-button-tooltip").remove()},getDropdown:function(){return this.dropdown},disable:function(){this.addClass("redactor-button-disabled")},enable:function(){this.removeClass("redactor-button-disabled")},toggle:function(r){r&&r.preventDefault(),!this.isDisabled()&&(this.obj.dropdown?this.dropdown.toggle(r):this.obj.api?this.app.api(this.obj.api,this.obj.args,this.name):this.obj.message&&this.app.broadcast(this.obj.message,this.obj.args,this.name),this.hideTooltip())},_init:function(){this._parseTitle(),this._parseTooltip(),this._build(),this._buildCallback(),this._buildAttributes(),this._buildObserver(),this.hasIcon()?(this._buildIcon(),this._buildTooltip()):this.html(this.obj.title)},_parseTooltip:function(){this.obj.tooltip=this.obj.tooltip?this.lang.parse(this.obj.tooltip):this.obj.title},_parseTitle:function(){this.obj.title=this.lang.parse(this.obj.title)},_build:function(){this.parse("<a>"),this.addClass("re-button re-"+this.name),this.attr("data-re-name",this.name),this.dataset("data-button-instance",this),this.obj.dropdown&&this.setDropdown(this.obj.dropdown)},_buildCallback:function(){this.on("click",this.toggle.bind(this))},_buildAttributes:function(){var r={href:"#",alt:this.obj.tooltip,rel:this.name,role:"button","aria-label":this.obj.tooltip,tabindex:"-1"};this.attr(r)},_buildObserver:function(){typeof this.obj.observe<"u"&&this.toolbar.addButtonObserver(this.name,this.obj.observe)},_buildIcon:function(){var r=this.obj.icon,h=/(<([^>]+)>)/gi.test(r);this.$icon=h?c.dom(r):c.dom("<i>"),h||this.$icon.addClass("re-icon-"+this.name),this.append(this.$icon),this.attr("data-re-icon",!0),this.addClass("re-button-icon")},_buildTooltip:function(){this.detector.isDesktop()&&(this.tooltip=c.create("toolbar.button.tooltip",this.app,this))}}),c.add("class","toolbar.button.tooltip",{mixins:["dom"],init:function(r,h){this.app=r,this.uuid=r.uuid,this.opts=r.opts,this.$body=r.$body,this.toolbar=r.toolbar,this.$button=h,this.created=!1,this._init()},open:function(){if(!(this.$button.hasClass("redactor-button-disabled")||this.$button.hasClass("redactor-button-active"))){this.created=!0,this.parse("<span>"),this.addClass("re-button-tooltip re-button-tooltip-"+this.uuid),this.$body.append(this),this.html(this.$button.attr("alt"));var r=this.$button.offset(),h="absolute",u=this.$button.height(),m=this.$button.width(),y=4;this.css({top:r.top+u+y+"px",left:r.left+m/2-this.width()/2+"px",position:h}),this.show()}},close:function(){!this.created||this.$button.hasClass("redactor-button-disabled")||(this.remove(),this.created=!1)},_init:function(){this.$button.on("mouseover",this.open.bind(this)),this.$button.on("mouseout",this.close.bind(this))}}),c.add("class","toolbar.dropdown",{mixins:["dom"],init:function(r,h,u){this.app=r,this.uuid=r.uuid,this.opts=r.opts,this.$win=r.$win,this.$doc=r.$doc,this.$body=r.$body,this.animate=r.animate,this.toolbar=r.toolbar,this.name=h,this.started=!1,this.items=h==="format"?c.extend({},!0,u):u,this.$items=[]},toggle:function(r){this.started||this._build(),this.isOpened()&&this.isActive()?this.close(!1):this.open(r)},isOpened:function(){var r=this.$body.find(".redactor-dropdown-"+this.uuid+".open");return r.length!==0&&r.attr("data-re-name")===this.name},isActive:function(){var r=this.$body.find("#redactor-dropdown-"+this.uuid+"-"+this.name+".open");return r.length!==0},getName:function(){return this.attr("data-re-name")},getItem:function(r){return this.$items[r]},getItemsByClass:function(r){var h=[];for(var u in this.$items){var m=this.$items[u];typeof m=="object"&&m.attr("data-re-name")&&m.hasClass(r)&&h.push(m)}return h},open:function(r){this._closeAll(),this.$btn=this.toolbar.getButton(this.name),this.app.broadcast("dropdown.open",r,this,this.$btn),this.toolbar.setDropdown(this),this.show(),this.removeClass("redactor-animate-hide"),this.addClass("open"),this._observe(),this.$btn.hideTooltip(),this.$btn.setActive(),this.$doc.on("keyup.redactor.dropdown-"+this.uuid,this._handleKeyboard.bind(this)),this.$doc.on("click.redactor.dropdown-"+this.uuid,this.close.bind(this)),this.updatePosition(),this.app.broadcast("dropdown.opened",r,this,this.$btn)},close:function(r,h){if(r){var u=c.dom(r.target);if(this._isButton(r)||u.hasClass("redactor-dropdown-not-close")||u.hasClass("redactor-dropdown-item-disabled")){r.preventDefault();return}}this.app.broadcast("dropdown.close",this,this.$btn),this.toolbar.setDropdown(!1),this.$btn.setInactive(),h===!1?this._close():this.animate.start(this,"fadeOut",this._close.bind(this))},updatePosition:function(){this.toolbar.isFixed(),this.toolbar.isTarget();var r=this.$btn.height(),h=this.$btn.width(),u=this.$btn.offset(),m="absolute",y=2,v=0,w=u.left+v,S=parseFloat(this.css("width")),C=this.$win.width(),T=C<w+S?S-h:0,_=w-T,$=u.top+r+y;_=_<0?4:_,this.css({maxHeight:"",position:m,top:$+"px",left:_+"px"});var N=10,P=this.$win.height(),E=this.$doc.scrollTop(),x=P-($-E)-N;this.css("max-height",x+"px")},_build:function(){this.parse("<div>"),this.attr("dir",this.opts.direction),this.attr("id","redactor-dropdown-"+this.uuid+"-"+this.name),this.attr("data-re-name",this.name),this.addClass("redactor-dropdown redactor-dropdown-"+this.uuid+" redactor-dropdown-"+this.name),this.dataset("data-dropdown-instance",this);var r=this.items.sdom||typeof this.items=="string";r?this._buildDom():this._buildItems(),this.$body.append(this),this.started=!0},_buildDom:function(){this.html("").append(c.dom(this.items))},_buildItems:function(){this.items=this.name==="format"?this._buildFormattingItems():this.items;for(var r in this.items){var h=this.items[r];if(r==="observe")this.attr("data-observe",this.items[r]);else{var u=c.create("toolbar.dropdown.item",this.app,r,h,this);this.$items[r]=u,this.append(u)}}},_buildFormattingItems:function(){for(var r in this.items)this.opts.formatting.indexOf(r)===-1&&delete this.items[r];if(this.opts.formattingHide)for(var r in this.items)this.opts.formattingHide.indexOf(r)!==-1&&delete this.items[r];if(this.opts.formattingAdd)for(var r in this.opts.formattingAdd)this.items[r]=this.opts.formattingAdd[r];return this.items},_handleKeyboard:function(r){r.which===27&&this.close()},_isButton:function(r){var h=c.dom(r.target),u=h.closest(".re-button");return u.get()===this.$btn.get()},_close:function(){this.$btn.setInactive(),this.$doc.off(".redactor.dropdown-"+this.uuid),this.removeClass("open"),this.addClass("redactor-animate-hide"),this.app.broadcast("dropdown.closed",this,this.$btn)},_closeAll:function(){this.$body.find(".redactor-dropdown-"+this.uuid+".open").each(function(r){var h=c.dom(r),u=h.dataget("data-dropdown-instance");u._close()})},_observe:function(){var r=this.attr("data-observe");r&&this.app.broadcast("dropdown."+r+".observe",this)}}),c.add("class","toolbar.dropdown.item",{mixins:["dom"],init:function(r,h,u,m){this.app=r,this.lang=r.lang,this.dropdown=m,this.name=h,this.obj=u,this._init()},setTitle:function(r){this.$span.html(r)},getTitle:function(){return this.$span.html()},enable:function(){this.removeClass("redactor-dropdown-item-disabled")},disable:function(){this.addClass("redactor-dropdown-item-disabled")},toggle:function(r){r&&r.preventDefault(),!this.hasClass("redactor-dropdown-item-disabled")&&(this.obj.message?this.app.broadcast(this.obj.message,this.obj.args,this.name):this.obj.api&&this.app.api(this.obj.api,this.obj.args,this.name))},_init:function(){this.parse("<a>"),this.attr("href","#"),this.addClass("redactor-dropdown-item-"+this.name),this.obj.classname&&this.addClass(this.obj.classname),this.attr("data-re-name",this.name),this.on("click",this.toggle.bind(this)),this.$span=c.dom("<span>"),this.append(this.$span),this.setTitle(this.lang.parse(this.obj.title))}}),c.add("service","cleaner",{init:function(r){this.app=r,this.opts=r.opts,this.storedComponents=[],this.storedComments=[],this.storedImages=[],this.storedLinks=[],this.deniedTags=["font","html","head","link","title","body","meta","applet"],this.convertRules={},this.unconvertRules={},this.reComments=/<!--[\s\S]*?-->\n?/g,this.reSpacedEmpty=/^(||\s||<br\s?\/?>||&nbsp;)$/i,this.reScriptTag=/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi},addConvertRules:function(r,h){this.convertRules[r]=h},addUnconvertRules:function(r,h){this.unconvertRules[r]=h},input:function(r,h,u){r=r.replace(/¤t/gi,"&current");var m=[];r=this.storeComments(r,m),r=this.encodeCode(r);var y=this.utils.buildWrapper(r);y.find("a, b, i, strong, em, img, svg, details, audio").removeAttr("onload onerror ontoggle onwheel onmouseover oncopy"),y.find("a, iframe, embed").each(function(S){var C=c.dom(S),T=C.attr("href"),_=C.attr("src");T&&T.trim().search(/^data|javascript:/i)!==-1&&C.attr("href",""),_&&_.trim().search(/^data|javascript:/i)!==-1&&C.attr("src","")});var v=["alt","title","src","class","width","height","srcset","style","usemap"];y.find("img").each((function(S){if(S.attributes.length>0)for(var C=S.attributes,T=C.length-1;T>=0;T--){var _=C[T].name.search(/^data-/)===-1&&v.indexOf(C[T].name)===-1,$=C[T].name==="src"&&C[T].value.search(/^data|javascript:/i)!==-1;this.opts.imageSrcData&&($=!1),(_||$)&&S.removeAttribute(C[T].name)}}).bind(this)),r=this.utils.getWrapperHtml(y),r=r.replace(/\$/g,"&#36;"),r=r.replace(/&amp;/g,"&");var w=c.create("cleaner.figure",this.app);return r=w.convert(r,this.convertRules),r=this.storeComponents(r),r=this.replaceTags(r,this.opts.replaceTags),r=this._setSpanAttr(r),r=this._setStyleCache(r),r=this.removeTags(r,this.deniedTags),r=this.opts.removeScript?this._removeScriptTag(r):this._replaceScriptTag(r),r=this.opts.removeComments?this.removeComments(r):r,r=this._isSpacedEmpty(r)?this.opts.emptyHtml:r,r=this.restoreComponents(r),r=this._cleanWrapped(r),r=this.restoreComments(r,m),r=h?this.paragraphize(r):r,r},output:function(r,h){if(r=this.removeInvisibleSpaces(r),this.opts.breakline&&(r=r.replace(/<\/(span|strong|b|i|em)><br\s?\/?><\/div>/gi,"</$1></div>"),r=r.replace(/<br\s?\/?><\/(span|strong|b|i|em)><\/div>/gi,"</$1></div>")),r=r.replace(/&#36;/g,"$"),this._isSpacedEmpty(r)||this._isParagraphEmpty(r))return"";r=this.removeServiceTagsAndAttrs(r,h),r=this.storeComponents(r),r=this.removeSpanWithoutAttributes(r),r=this.removeFirstBlockBreaklineInHtml(r),r=this.opts.removeScript?r:this._unreplaceScriptTag(r),r=this.opts.preClass?this._setPreClass(r):r,r=this.opts.linkNofollow?this._setLinkNofollow(r):r,r=this.opts.removeNewLines?this.cleanNewLines(r):r,r=this.restoreComponents(r);var u=c.create("cleaner.figure",this.app);return r=u.unconvert(r,this.unconvertRules),r=this.removeEmptyAttributes(r,["style","class","rel","alt","title"]),r=this.cleanSpacesInPre(r),r=this.tidy(r),r=r.replace(/&amp;/g,"&"),this.opts.breakline&&(r=r.replace(/<br\s?\/?>/gi,`<br>
`),r=r.replace(/<br\s?\/?>\n+/gi,`<br>
`)),r=r.replace(/\n/g,"")===""?"":r,r},paste:function(r){r=this.storeComponents(r),r=r.replace(/<!--[\s\S]*?-->/g,"");var h=this.deniedTags.concat(["iframe"]);r=this.removeTags(r,h),r=r.replace(new RegExp("<!doctype([\\s\\S]+?)>","gi"),""),r=r.replace(new RegExp("<style([\\s\\S]+?)</style>","gi"),""),r=r.replace(new RegExp("</p><br /><p","gi"),"</p><p");var u=this._isHtmlMsWord(r);if(r=u?r:this._cleanGDocs(r),r=u?this._cleanMsWord(r):r,!this.opts.pasteClean)return r=this.restoreComponents(r),r;if(this.opts.pastePlainText)return r=this.restoreComponents(r),this.pastePlainText(r);var y=this.utils.buildWrapper(r);y.find("*").removeAttr("style"),y.find("[data-redactor-tag]").each((function(_){var $=c.dom(_);$.removeAttr("data-redactor-tag"),this.utils.isEmptyHtml($.html())?$.html("<br>").unwrap():_.lastChild&&_.lastChild.tagName==="BR"?$.unwrap():$.append("<br>").unwrap()}).bind(this)),r=this.utils.getWrapperHtml(y),r=r.replace(/<br\s?\/?>$/,""),r=r.replace(/<br\s?\/?><\/(td|th)>/,"</$1>");var m=this.opts.pasteBlockTags.concat(this.opts.pasteInlineTags);r=this.removeTagsExcept(r,m),r=this.opts.pasteLinks?r:this.removeTags(r,["a"]),r=this.opts.pasteImages?r:this.removeTags(r,["img"]);var y=this.utils.buildWrapper(r),v=y.find("*"),w=this.opts.pasteKeepStyle.length!==0?","+this.opts.pasteKeepStyle.join(","):"";v.not("[data-redactor-style-cache]"+w).removeAttr("style");var S=this.opts.pasteKeepClass.length!==0?","+this.opts.pasteKeepClass.join(","):"";v.not("[data-redactor-style-cache], span.redactor-component"+S).removeAttr("class");var C=this.opts.pasteKeepAttrs.length!==0?","+this.opts.pasteKeepAttrs.join(","):"";v.not("img, a, span.redactor-component, [data-redactor-style-cache]"+C).each(function(_){for(var $=_.attributes,N=$.length-1;N>=0;N--)_.attributes[N].name!=="class"&&_.attributes[N].name!=="dir"&&_.removeAttribute($[N].name)}),this.opts.pasteLinks&&this.opts.pasteLinkTarget!==!1&&y.find("a").attr("target",this.opts.pasteLinkTarget),y.find("[data-redactor-style-cache]").each(function(_){var $=_.getAttribute("data-redactor-style-cache");_.setAttribute("style",$)});var T=this.opts.imageAttrs;return y.find("img").each(function(_){if(_.attributes.length>0)for(var $=_.attributes,N=$.length-1;N>=0;N--)T.indexOf($[N].name)===-1&&_.removeAttribute($[N].name)}),y.find("span").each(function(_){_.attributes.length===0&&c.dom(_).unwrap()}),y.find(this.opts.inlineTags.join(",")).each((function(_){_.attributes.length===0&&this.utils.isEmptyHtml(_.innerHTML)&&c.dom(_).unwrap()}).bind(this)),y.find("ul, ol").each(function(_){var $=_.previousSibling;if($&&$.tagName==="LI"){var N=c.dom($);N.find("p").unwrap(),N.append(_)}}),r=this.utils.getWrapperHtml(y),r=r.replace(/<li><p>/gi,"<li>"),r=r.replace(/<\/p><\/li>/gi,"</li>"),r=r.replace(/^<li/gi,"<ul><li"),r=r.replace(/<\/li>$/gi,"</li></ul>"),this.opts.breakline&&(r=r.replace(/\n/g,"<br>")),r=r.replace(/<p>&nbsp;<\/p>/gi,"<p></p>"),r=r.replace(/<p><br\s?\/?><\/p>/gi,"<p></p>"),u&&(r=r.replace(/<p><\/p>/gi,""),r=r.replace(/<p>\s<\/p>/gi,""),r=r.replace(/<td\n/gi,"<td ")),r=this.restoreComponents(r),r},pastePlainText:function(r){return r=this.opts.pasteLinks?this.storeLinks(r):r,r=this.opts.pasteImages?this.storeImages(r):r,r=this.getPlainText(r),r=this._replaceNlToBr(r),r=this.opts.pasteLinks?this.restoreLinks(r):r,r=this.opts.pasteImages?this.restoreImages(r):r,r},tidy:function(r){return r},paragraphize:function(r){var h=c.create("cleaner.paragraphize",this.app);return r=h.convert(r),r},storeComments:function(r,h){var u=r.match(new RegExp("<!--([\\w\\W]*?)-->","gi"));if(u!==null)for(var m=0;m<u.length;m++)r=r.replace(u[m],"#####xstarthtmlcommentzz"+m+"xendhtmlcommentzz#####"),h.push(u[m]);return r},restoreComments:function(r,h){for(var u=0;u<h.length;u++)r=r.replace("#####xstarthtmlcommentzz"+u+"xendhtmlcommentzz#####",h[u]);return r},getFlatText:function(r){var h=c.dom("<div>");return!r.nodeType&&!r.dom?(r=r.toString(),r=r.trim(),h.html(r)):h.append(r),r=h.get().textContent||h.get().innerText||"",r===void 0?"":r},getPlainText:function(r){r=r.replace(/<!--[\s\S]*?-->/gi,""),r=r.replace(/<style[\s\S]*?style>/gi,""),r=r.replace(/<p><\/p>/g,""),r=r.replace(/<\/div>|<\/li>|<\/td>/gi,`
`),r=r.replace(/<\/p>/gi,`

`),r=r.replace(/<\/H[1-6]>/gi,`

`);var h=document.createElement("div");return h.innerHTML=r,r=h.textContent||h.innerText,r.trim()},replaceTags:function(r,h){if(h){var u=this,m=Object.keys(h),y=this.utils.buildWrapper(r);y.find(m.join(",")).each(function(v){u.utils.replaceToTag(v,h[v.tagName.toLowerCase()])}),r=this.utils.getWrapperHtml(y)}return r},replaceNbspToSpaces:function(r){return r.replace("&nbsp;"," ")},replaceBlocksToBr:function(r){return r=r.replace(/<div[^>]*><\/div>/gi,""),r=r.replace(/<td[^>]*><\/td>/gi,""),r=r.replace(/<\/div>|<\/li>|<\/td>|<\/p>|<\/H[1-6]>/gi,"<br>"),r},cleanNewLines:function(r){return r.replace(/\r?\n/g,"")},cleanSpacesInPre:function(r){return r.replace("&nbsp;&nbsp;&nbsp;&nbsp;","    ")},removeInvisibleSpaces:function(r){return r=this.utils.removeInvisibleChars(r),r=r.replace(/&#65279;/gi,""),r},removeNl:function(r){return r=r.replace(/\n/g," "),r=r.replace(/\s+/g,"s"),r},removeBrAtEnd:function(r){return r=r.replace(/<br\s?\/?>$/gi," "),r=r.replace(/<br\s?\/?><li/gi,"<li"),r},removeTags:function(r,h){var u=h?/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi:/(<([^>]+)>)/gi,m=h?function(y,v){return h.indexOf(v.toLowerCase())===-1?y:""}:"";return r.replace(u,m)},removeTagsExcept:function(r,h){if(h===void 0)return r.replace(/(<([^>]+)>)/gi,"");var u=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return r.replace(u,function(m,y){return h.indexOf(y.toLowerCase())===-1?"":m})},removeComments:function(r){return r.replace(this.reComments,"")},removeServiceTagsAndAttrs:function(r,h){var u=this.utils.buildWrapper(r),m=this;return h!==!1&&u.find(".redactor-selection-marker").each(function(y){var v=c.dom(y),w=m.utils.removeInvisibleChars(v.text());return w===""?v.remove():v.unwrap()}),u.find("[data-redactor-style-cache]").removeAttr("data-redactor-style-cache"),this.utils.getWrapperHtml(u)},removeSpanWithoutAttributes:function(r){var h=this.utils.buildWrapper(r);return h.find("span").removeAttr("data-redactor-span data-redactor-style-cache").each(function(u){u.attributes.length===0&&c.dom(u).unwrap()}),this.utils.getWrapperHtml(h)},removeFirstBlockBreaklineInHtml:function(r){return r.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>")},removeEmptyAttributes:function(r,h){for(var u=this.utils.buildWrapper(r),m=0;m<h.length;m++)u.find("["+h[m]+'=""]').removeAttr(h[m]);return this.utils.getWrapperHtml(u)},encodeHtml:function(r){return r=r.replace(/<br\s?\/?>/g,`
`),r=r.replace(/&nbsp;/g," "),r=r.replace(/”/g,'"'),r=r.replace(/“/g,'"'),r=r.replace(/‘/g,"'"),r=r.replace(/’/g,"'"),r=this.encodeEntities(r),r=r.replace(/\$/g,"&#36;"),this.opts.preSpaces&&(r=r.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))),r},encodeCode:function(r){return r=this.encodeAttrSings(r),r=r.replace(/<\s/gi,"&lt; "),r=r.replace(/<([^>]+)</gi,"&lt;$1<"),r=r.replace(/<(.*?)>/gi,"xtagstartz$1xtagendz"),r=r.replace(/xtagstartzpre(.*?)xtagendz/g,"<pre$1>"),r=r.replace(/xtagstartzcode(.*?)xtagendz/g,"<code$1>"),r=r.replace(/xtagstartz\/codextagendz/g,"</code>"),r=r.replace(/xtagstartz\/prextagendz/g,"</pre>"),r=this._encodeCode(r),r=r.replace(/xtagstartz([\w\W]*?)xtagendz/g,"<$1>"),r=r.replace(/xtagstartz\/(.*?)xtagendz/g,"</$1>"),r=this.decodeAttrSings(r),r},_encodeCode:function(r){var h=this.utils.buildWrapper(r);return h.find("pre code, pre, code").each(this._encodeNode.bind(this)),this.utils.getWrapperHtml(h)},_encodeNode:function(r){var h=r.firstChild,u=r.innerHTML;if(!(r.tagName==="PRE"&&h&&h.tagName==="CODE")){u=u.replace(/xtagstartz/g,"<"),u=u.replace(/xtagendz/g,">");var m=this.decodeEntities(u);r.textContent=this._encodeNodeHtml(m)}},_encodeNodeHtml:function(r){return r=r.replace(/&nbsp;/g," ").replace(/<br\s?\/?>/g,`
`),r=this.opts.preSpaces?r.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" ")):r,r},encodeAttrSings:function(r){var h=r.match(/="(.*?)"/g);if(h!==null){for(var u=0;u<h.length;u++)if(!(h[u].search(/^"</)!==-1||h[u].search(/>"$/)!==-1)){var m=h[u].replace(">","xmoresignz");m=m.replace("<","xlesssignz"),r=r.replace(h[u],m)}}return r},encodeEntities:function(r){return r=this.decodeEntities(r),r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),r},encodePhpCode:function(r){return r=r.replace("<?php","&lt;?php"),r=r.replace("<?","&lt;?"),r=r.replace("?>","?&gt;"),r},decodeAttrSings:function(r){return r=r.replace(/xmoresignz/gi,">"),r=r.replace(/xlesssignz/gi,"<"),r},decodeEntities:function(r){return String(r).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},storeComponents:function(r){var h=this.utils.getElementsFromHtml(r,"figure","table");return this._storeMatched(r,h,"Components","figure")},restoreComponents:function(r){return this._restoreMatched(r,"Components","figure")},storeLinks:function(r){var h=this.utils.getElementsFromHtml(r,"a");return this._storeMatched(r,h,"Links","a")},storeImages:function(r){var h=this.utils.getElementsFromHtml(r,"img");return this._storeMatched(r,h,"Images","img")},restoreLinks:function(r){return this._restoreMatched(r,"Links","a")},restoreImages:function(r){return this._restoreMatched(r,"Images","img")},_cleanWrapped:function(r){return r=r.replace(new RegExp("<p><figure([\\w\\W]*?)</figure></p>","gi"),"<figure$1</figure>"),r},_cleanGDocs:function(r){return r=r.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),r=r.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),r=r.replace(/<span[^>]*(font-style:\s?italic;\s?font-weight:\s?bold|font-weight:\s?bold;\s?font-style:\s?italic)[^>]*>([\w\W]*?)<\/span>/gi,"<b><i>$2</i></b>"),r=r.replace(/<span[^>]*(font-style:\s?italic;\s?font-weight:\s?600|font-weight:\s?600;\s?font-style:\s?italic)[^>]*>([\w\W]*?)<\/span>/gi,"<b><i>$2</i></b>"),r=r.replace(/<span[^>]*(font-style:\s?italic;\s?font-weight:\s?700|font-weight:\s?700;\s?font-style:\s?italic)[^>]*>([\w\W]*?)<\/span>/gi,"<b><i>$2</i></b>"),r=r.replace(/<span[^>]*font-style:\s?italic[^>]*>([\w\W]*?)<\/span>/gi,"<i>$1</i>"),r=r.replace(/<span[^>]*font-weight:\s?bold[^>]*>([\w\W]*?)<\/span>/gi,"<b>$1</b>"),r=r.replace(/<span[^>]*font-weight:\s?700[^>]*>([\w\W]*?)<\/span>/gi,"<b>$1</b>"),r=r.replace(/<span[^>]*font-weight:\s?600[^>]*>([\w\W]*?)<\/span>/gi,"<b>$1</b>"),r},_cleanMsWord:function(r){r=r.replace(/<!--[\s\S]+?-->/gi,""),r=r.replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,""),r=r.replace(/<(\/?)s>/gi,"<$1strike>"),r=r.replace(/&nbsp;/gi," "),r=r.replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(w,S){return S.length>0?S.replace(/./," ").slice(Math.floor(S.length/2)).split("").join(" "):""});var h=this.utils.buildWrapper(r);h.find(".MsoFootnoteText").each(function(w){var S=c.dom(w),C=S.parent();C.length!==0&&C.attr("style").search(/mso-element:footnote/)!==-1&&S.find("a").attr("id","_"+C.attr("id"))}),h.find(".MsoFootnoteReference").each(function(w){var S=c.dom(w),C=S.parent();C.length!==0&&C.get().tagName==="A"&&C.attr("id",C.attr("name"))}),h.find("p").each(function(w){var S=c.dom(w),C=S.attr("style"),T=/mso-list:\w+ \w+([0-9]+)/.exec(C);T&&S.attr("data-listLevel",parseInt(T[1],10))}),this._parseWordLists(h),h.find("[align]").removeAttr("align"),h.find("[name]").removeAttr("name"),h.find("span").each(function(w){var S=c.dom(w),C=S.attr("style"),T=/mso-list:Ignore/.exec(C);T?S.remove():S.unwrap()}),h.find("[style]").removeAttr("style"),h.find("[class^='Mso']").removeAttr("class"),h.find("a").filter(function(w){return!w.hasAttribute("href")}).unwrap(),r=this.utils.getWrapperHtml(h),r=r.replace(/<p[^>]*><\/p>/gi,""),r=r.replace(/<li>·/gi,"<li>"),r=r.trim(),r=r.replace(/\/(p|ul|ol|h1|h2|h3|h4|h5|h6|blockquote)>\s+<(p|ul|ol|h1|h2|h3|h4|h5|h6|blockquote)/gi,`/$1>
<$2`);for(var u="",m=r.split(/\n/),y=0;y<m.length;y++){var v=m[y]!==""&&m[y].search(/>$/)===-1?" ":`
`;u+=m[y]+v}return u},_parseWordLists:function(r){var h=0,u=null,m=null,y=null;r.find("p").each(function(v){var w=c.dom(v),S=w.attr("data-listLevel");if(S===null&&w.hasClass("MsoListParagraphCxSpMiddle")&&(S=1),S!==null){var C=w.text(),T=/^\s*\w+\./.test(C)?"<ol></ol>":"<ul></ul>";if(w.hasClass("MsoListParagraphCxSpFirst")||w.hasClass("MsoNormal")?(m=c.dom(T),w.before(m)):S>h&&h!==0&&(y=c.dom(T),u.append(y),m=y),S<h)for(var _=h-S+1,$=0;$<_;$++)m=m.parent();w.find("span").first().unwrap(),u=c.dom("<li>"+w.html().trim()+"</li>"),m===null&&(w.before(T),m=w.prev()),m.append(u),w.remove(),h=S}else m=null,h=0})},_isSpacedEmpty:function(r){return r.search(this.reSpacedEmpty)!==-1},_isParagraphEmpty:function(r){return r.search(/^<p><\/p>$/i)!==-1},_isHtmlMsWord:function(r){return r.match(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i)},_setSpanAttr:function(r){var h=this.utils.buildWrapper(r);return h.find("span").attr("data-redactor-span",!0),this.utils.getWrapperHtml(h)},_setStyleCache:function(r){var h=this.utils.buildWrapper(r);return h.find("[style]").each(function(u){var m=c.dom(u);m.attr("data-redactor-style-cache",m.attr("style"))}),this.utils.getWrapperHtml(h)},_setPreClass:function(r){var h=this.utils.buildWrapper(r);return h.find("pre").addClass(this.opts.preClass),this.utils.getWrapperHtml(h)},_setLinkNofollow:function(r){var h=this.utils.buildWrapper(r);return h.find("a").attr("rel","nofollow"),this.utils.getWrapperHtml(h)},_replaceScriptTag:function(r){return r.replace(this.reScriptTag,'<script class="redactor-script-tag" $1>$2<\/script>')},_unreplaceScriptTag:function(r){return r.replace(/<script class="redactor-script-tag"(.*?[^>]?)>([\w\W]*?)<\/script>/gi,"<script$1>$2<\/script>")},_replaceNlToBr:function(r){return r.replace(/\n/g,"<br />")},_removeScriptTag:function(r){return r.replace(this.reScriptTag,"")},_storeMatched:function(r,h,u,m){if(this["stored"+u]=[],h)for(var y=0;y<h.length;y++)this["stored"+u][y]=h[y],r=r.replace(h[y],"####"+m+y+"####");return r},_restoreMatched:function(r,h,u){if(this["stored"+h])for(var m=0;m<this["stored"+h].length;m++)r=r.replace("####"+u+m+"####",this["stored"+h][m]);return r}}),c.add("class","cleaner.figure",{init:function(r){this.app=r,this.opts=r.opts,this.utils=r.utils,this.detector=r.detector},convert:function(r,h){var u=this.utils.buildWrapper(r);return u.find("img").each(this._convertImage.bind(this)),u.find("hr").each(this._convertLine.bind(this)),u.find("iframe").each(this._convertIframe.bind(this)),u.find("table").each(this._convertTable.bind(this)),u.find("form").each(this._convertForm.bind(this)),u.find("figure pre").each(this._convertCode.bind(this)),u.find("[data-redactor-type=variable]").addClass("redactor-component"),u.find("figure").not(".redactor-component, .redactor-figure-code").each(this._convertWidget.bind(this)),u.find("figure pre").each(this._setContenteditableCode.bind(this)),u.find(".redactor-component, .non-editable").attr("contenteditable",!1),this.detector.isIe()&&u.find("[data-redactor-type=table]").removeAttr("contenteditable"),u.find("figcaption, td, th").attr("contenteditable",!0),u.find(".redactor-component, figcaption").attr("tabindex","-1"),this._acceptExtraRules(u,h),this.utils.getWrapperHtml(u)},unconvert:function(r,h){r=r.replace(/<\/([^>]+)><div data-redactor-tag/g,`</$1>
<div data-redactor-tag`),r=r.replace(/<\/([^>]+)><p/g,`</$1>
<p`);var u=this.utils.buildWrapper(r);return u.find("th, td, figcaption, figure, pre, code, .redactor-component").removeAttr("contenteditable tabindex"),u.find("figure").removeClass("redactor-component redactor-component-active redactor-uploaded-figure"),u.find("[data-redactor-type=variable]").removeClass("redactor-component redactor-component-active"),u.find("figure[data-redactor-type=line]").unwrap(),u.find("figure[data-redactor-type=widget]").each(this._unconvertWidget.bind(this)),u.find("figure[data-redactor-type=form]").each(this._unconvertForm.bind(this)),u.find("figure[data-redactor-type=table]").each(this._unconvertTable.bind(this)),u.find("figure[data-redactor-type=image]").removeAttr("rel").each(this._unconvertImages.bind(this)),u.find("img").removeAttr("data-redactor-type").removeClass("redactor-component"),u.find(".non-editable").removeAttr("contenteditable"),u.find("figure").each(this._removeTypes.bind(this)),u.find("span.redactor-component-caret").remove(),u=this._unconvertBreakTag(u),this._acceptExtraRules(u,h),r=this.utils.getWrapperHtml(u),r=r.replace(/<br\s?\/?>$/,""),r=r.replace(/<br\s?\/?><\/(td|th)>/,"</$1>"),r},_convertImage:function(r){var h=c.dom(r);if(!this._isNonEditable(h)){this.opts.imageObserve&&!h.attr("data-image")&&h.attr("data-image",this.utils.getRandomId());var u=h.closest("a"),m=h.closest("figure"),y=m.children().not("a, img, br, figcaption").length===0;if(y){if(m.length===0){var v=u.length!==0?u.closest("p"):h.closest("p");if(this.opts.imageFigure===!1&&v.length!==0){var w=this.utils.replaceToTag(v,"figure");m=w,m.addClass("redactor-replace-figure")}else v.length!==0&&v.unwrap(),m=u.length!==0?u.wrap("<figure>"):h.wrap("<figure>")}else m.hasClass("redactor-uploaded-figure")?m.removeClass("redactor-uploaded-figure"):m.addClass("redactor-keep-figure");this._setFigure(m,"image")}}},_convertTable:function(r){if(!this._isNonEditable(r)){var h=this._wrapFigure(r);this._setFigure(h,"table")}},_convertLine:function(r){if(!this._isNonEditable(r)){var h=this._wrapFigure(r);this._setFigure(h,"line")}},_convertForm:function(r){if(!this._isNonEditable(r)){var h=this.utils.replaceToTag(r,"figure");this._setFigure(h,"form")}},_convertIframe:function(r){if(!this._isNonEditable(r)){var h=c.dom(r);if(h.closest(".redactor-component").length===0){var u=r.getAttribute("src"),m=u&&(u.match(this.opts.regex.youtube)||u.match(this.opts.regex.vimeo)),y=this._wrapFigure(r);m&&this._setFigure(y,"video")}}},_convertCode:function(r){if(!this._isNonEditable(r)){var h=this._wrapFigure(r);this._setFigure(h,"code")}},_convertWidget:function(r){if(!this._isNonEditable(r)){var h=c.dom(r);h.addClass("redactor-component"),h.attr("data-redactor-type","widget"),h.attr("data-widget-code",encodeURI(r.innerHTML.trim()))}},_unconvertBreakTag:function(r){return r.find("[data-redactor-tag]").each((function(h){var u=c.dom(h);if(u.removeAttr("data-redactor-tag"),h.attributes.length!==0){h.lastChild&&h.lastChild.tagName==="BR"&&c.dom(h.lastChild).remove();return}if(h.lastChild&&h.lastChild.tagName==="BR")u.unwrap();else{var m=u.nextElement();m.length!==0&&m.attr("data-redactor-tag")&&h.appendChild(document.createElement("br")),u.unwrap()}}).bind(this)),r},_unconvertForm:function(r){this.utils.replaceToTag(r,"form")},_unconvertTable:function(r){var h=c.dom(r);h.unwrap()},_unconvertWidget:function(r){var h=c.dom(r);h.html(decodeURI(h.attr("data-widget-code"))),h.removeAttr("data-widget-code")},_unconvertImages:function(r){var h=c.dom(r);h.removeClass("redactor-component");var u=h.closest("li").length!==0,m=h.closest("table").length!==0,y=h.find("figcaption").length!==0,v=h.attr("style"),w=!(v===null||v===""),S=h.attr("class")!=="";(u||m&&!y&&!w&&!S)&&h.unwrap()},_removeTypes:function(r){var h=c.dom(r),u=h.attr("data-redactor-type"),m=["image","widget","line","video","code","form","table"];if(u&&m.indexOf(u)!==-1&&h.removeAttr("data-redactor-type"),h.hasClass("redactor-keep-figure"))h.removeClass("redactor-keep-figure");else if(u==="image"&&this.opts.imageFigure===!1){var y=h.find("figcaption").length!==0;y||(h.hasClass("redactor-replace-figure")?(h.removeClass("redactor-replace-figure"),this.utils.replaceToTag(h,"p")):this.utils.replaceToTag(h,"p"))}h.removeClass("redactor-replace-figure")},_wrapFigure:function(r){var h=c.dom(r),u=h.closest("figure");return u.length===0?h.wrap("<figure>"):u},_setFigure:function(r,h){r.addClass("redactor-component"),r.attr("data-redactor-type",h)},_setContenteditableCode:function(r){if(!this._isNonEditable(r)){var h=c.dom(r),u=h.children("code").first(),m=u.length!==0?u:h;m.attr("contenteditable",!0).attr("tabindex","-1")}},_acceptExtraRules:function(r,h){for(var u in h)typeof h[u]=="function"&&h[u](r)},_isNonEditable:function(r){return c.dom(r).closest(".non-editable").length!==0}}),c.add("class","cleaner.paragraphize",{init:function(r){this.app=r,this.opts=r.opts,this.utils=r.utils,this.cleaner=r.cleaner,this.element=r.element,this.stored=[],this.remStart="#####replace",this.remEnd="#####",this.paragraphizeTags=["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"]},convert:function(r){var h=this._isConverted(r);return h=h===!0?this._convert(r):h,h=this._convertTable(h),h},_convert:function(r,h){var u=this.opts.breakline||h?"sdivtag":this.opts.markup,m=h?"tbr":"br";r=this._storeTags(r);var y=[];r=this.cleaner.storeComments(r,y),r=r.trim(),r=this._trimLinks(r);var v=this.opts.inlineTags.join("|");r=r.replace(new RegExp("<("+v+`)(.*?[^>]?)>
</(`+v+")>","gi"),"<$1$2></$3>"),r=r.replace(/xparagraphmarkerz(?:\r\n|\r|\n)$/g,""),r=r.replace(/xparagraphmarkerz$/g,""),r=r.replace(/xparagraphmarkerz(?:\r\n|\r|\n)/g,`
`),r=r.replace(/xparagraphmarkerz/g,`
`),this.opts.breakline?(r=r.replace(/<br\s?\/?>(?:\r\n|\r|\n)/gi,`xbreakmarkerz
`),r=r.replace(/<br\s?\/?>/gi,`xbreakmarkerz
`),r=r.replace(/xbreakmarkerz\n<\//gi,"xbreakmarkerz</")):r=r.replace(/[\n]+/g,`
`);for(var w="",S=r.split(`
`),C=0;C<S.length;C++)w+="<"+u+">"+S[C]+"</"+u+`>
`;return r=w.replace(/\n$/,""),r=r.replace(new RegExp("<"+u+">\\s+#####","gi"),"#####"),r=r.replace(new RegExp("<"+u+">#####","gi"),"#####"),r=r.replace(new RegExp("#####</"+u+">","gi"),"#####"),r=this.opts.breakline?r.replace(/xbreakmarkerz/gi,"<br>"):r,r=this._restoreTags(r),r=this.cleaner.restoreComments(r,y),this.opts.breakline&&(r=r.replace(new RegExp("<"+u+"></"+u+">","gi"),"<"+u+"><br></"+u+">")),r=r.replace(new RegExp("<sdivtag>","gi"),'<div data-redactor-tag="'+m+'">'),r=r.replace(new RegExp("sdivtag","gi"),"div"),r=r.replace(/<\/([^>]+)><div data-redactor-tag/g,`</$1>
<div data-redactor-tag`),r},_convertTable:function(r){var h=this.utils.buildWrapper(r);return h.find("td, th").each(this._convertCell.bind(this)),r=this.utils.getWrapperHtml(h),r},_convertCell:function(r){var h=c.dom(r);this.stored=[];var u=this._convert(h.html(),!0);h.html(u)},_storeTags:function(r){var h=this,u=this.utils.buildWrapper(r);return u.find(this.paragraphizeTags.join(", ")).each(function(m,y){var v=document.createTextNode(h.remStart+y+h.remEnd+"xparagraphmarkerz");h.stored.push(m.outerHTML),m.parentNode.replaceChild(v,m)}),this.utils.getWrapperHtml(u)},_restoreTags:function(r){for(var h=0;h<this.stored.length;h++)this.stored[h]=this.stored[h].replace(/\$/g,"&#36;"),r=r.replace(this.remStart+h+this.remEnd,this.stored[h]);return r},_trimLinks:function(r){var h=this.utils.buildWrapper(r);return h.find("a").each(this._trimLink.bind(this)),r=this.utils.getWrapperHtml(h),r},_trimLink:function(r){var h=c.dom(r);h.html(h.html().trim())},_isConverted:function(r){return this._isDisabled(r)?r:this._isEmptyHtml(r)?this.opts.emptyHtml:!0},_isDisabled:function(){return this.opts.paragraphize===!1||this.element.isType("inline")},_isEmptyHtml:function(r){return r===""||r==="<p></p>"||r==="<div></div>"}}),c.add("service","detector",{init:function(r){this.app=r,this.userAgent=navigator.userAgent.toLowerCase()},isWebkit:function(){return/webkit/.test(this.userAgent)},isFirefox:function(){return this.userAgent.indexOf("firefox")>-1},isIe:function(r){if(document.documentMode||/Edge/.test(navigator.userAgent))return"edge";var h;return h=RegExp("msie"+(isNaN(r)?"":"\\s"+r),"i").test(navigator.userAgent),h||(h=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),h},isMobile:function(){return/(iPhone|iPod|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|Android)/.test(navigator.userAgent)},isIpad:function(){return/iPad/.test(navigator.userAgent)}}),c.add("service","offset",{init:function(r){this.app=r},get:function(r,h){var u={start:0,end:0},m=this.utils.getNode(r);if(!m)return!1;var y=this.editor.isEditor(m),v=y?!0:this.selection.isIn(m),w=this.selection.getRange();if(!y&&!v)u=!1;else if(this.selection.is()&&v){var S=c.dom(w.startContainer),C=S.hasClass("redactor-component")?w.startOffset:0,T=w.cloneRange();T.selectNodeContents(m),T.setEnd(w.startContainer,w.startOffset);var _=this._getString(w,h);u.start=this._getString(T,h).length-C,u.end=u.start+_.length+C}return u},set:function(r,h){if(!this._setComponentOffset(h)){this.component.clearActive();var u=this.utils.getNode(h);if(u){var m=this.size(u),y=0,v=document.createRange();r.end=r.end>m?m:r.end,v.setStart(u,0),v.collapse(!0);for(var w=[u],S=!1,C=!1;!C&&(u=w.pop());)if(u.nodeType===3){var T=y+u.length;!S&&!this._isFigcaptionNext(u)&&r.start>=y&&r.start<=T&&(v.setStart(u,r.start-y),S=!0),S&&r.end>=y&&r.end<=T&&(v.setEnd(u,r.end-y),C=!0),y=T}else for(var _=u.childNodes.length;_--;)w.push(u.childNodes[_]);this.selection.setRange(v)}}},size:function(r,h){var u=this.utils.getNode(r);if(u){var m=document.createRange(),y=m.cloneRange();return y.selectNodeContents(u),this._getString(y,h).length}return 0},_getString:function(r,h){var u=r.toString();return u=this.editor.isEmpty()?u.replace(/\uFEFF/g,""):u,u=h?u.trim():u,u},_setComponentOffset:function(r){return this.component.isNonEditable(r)?this.component.setActive(r):!1},_isFigcaptionNext:function(r){var h=r.nextSibling;return r.nodeValue.trim()===""&&h&&h.tagName==="FIGCAPTION"}}),c.add("service","inspector",{init:function(r){this.app=r},parse:function(r){return c.create("inspector.parser",this.app,this,r)},isText:function(r){if(typeof r=="string"&&!/^\s*<(\w+|!)[^>]*>/.test(r))return!0;var h=c.dom(r).get();return h&&h.nodeType===3},isInlineTag:function(r,h){var u=this._extendTags(this.opts.inlineTags,h);return this._isTag(r)&&u.indexOf(r.toLowerCase())!==-1},isBlockTag:function(r,h){var u=this._extendTags(this.opts.blockTags,h);return this._isTag(r)&&u.indexOf(r.toLowerCase())!==-1},isTableCellTag:function(r){return["td","th"].indexOf(r.toLowerCase())!==-1},isHeadingTag:function(r){return["h1","h2","h3","h4","h5","h6"].indexOf(r.toLowerCase())!==-1},_isTag:function(r){return r!==void 0&&r},_extendTags:function(r,h){if(r=r.concat(r),h)for(var u=0;u<h.length;u++)r.push(h[u]);return r}}),c.add("class","inspector.parser",{init:function(r,h,u){this.app=r,this.uuid=r.uuid,this.opts=r.opts,this.utils=r.utils,this.editor=r.editor,this.selection=r.selection,this.inspector=h;var m=this.editor.getElement();this.el=u,this.$el=c.dom(this.el,m),this.node=this.$el.get(),this.node&&this.node.nodeType===8&&(this.node=!1),this.$component=this.$el.closest(".redactor-component",m)},isEditor:function(){return this.node===this.editor.getElement().get()},isInEditor:function(){return this.$el.parents(".redactor-in-"+this.uuid).length!==0},isComponent:function(){return this.$component.length!==0},isComponentType:function(r){return this.getComponentType()===r},isComponentActive:function(){return this.isComponent()&&this.$component.hasClass("redactor-component-active")},isComponentEditable:function(){var r=["code","table"],h=this.getComponentType();return this.isComponent()&&r.indexOf(h)!==-1},isFigcaption:function(){return this.getFigcaption()},isPre:function(){return this.getPre()},isCode:function(){var r=this.$el.closest("code"),h=r.parent("pre");return r.length!==0&&h.length===0},isList:function(){return this.getList()},isFirstListItem:function(){return this._getLastOrFirstListItem("first")},isLastListItem:function(){return this._getLastOrFirstListItem("last")},isFirstTableCell:function(){return this._getLastOrFirstTableCell("first")},isLastTableCell:function(){return this._getLastOrFirstTableCell("last")},isTable:function(){return this.isComponentType("table")||this.getTable()},isHeading:function(){return this.getHeading()},isBlockquote:function(){return this.getBlockquote()},isDl:function(){return this.getDl()},isParagraph:function(){return this.getParagraph()},isLink:function(){return this.getLink()},isFile:function(){return this.getFile()},isText:function(){return this.inspector.isText(this.el)},isInline:function(){var r=this.opts.inlineTags;return this.isElement()?r.indexOf(this.node.tagName.toLowerCase())!==-1:!1},isBlock:function(){var r=this.opts.blockTags;return this.isElement()?r.indexOf(this.node.tagName.toLowerCase())!==-1:!1},isElement:function(){return this.node&&this.node.nodeType&&this.node.nodeType!==3},hasParent:function(r){return this.$el.closest(r.join(",")).length!==0},getNode:function(){return this.node},getTag:function(){return this.isElement()?this.node.tagName.toLowerCase():!1},getComponent:function(){return this.isComponent()?this.$component.get():!1},getComponentType:function(){return this.isComponent()?this.$component.attr("data-redactor-type"):!1},getFirstNode:function(){return this.utils.getFirstNode(this.node)},getLastNode:function(){return this.utils.getLastNode(this.node)},getFirstElement:function(){return this.utils.getFirstElement(this.node)},getLastElement:function(){return this.utils.getLastElement(this.node)},getFigcaption:function(){return this._getClosestNode("figcaption")},getPre:function(){return this._getClosestNode("pre")},getCode:function(){return this._getClosestNode("code")},getList:function(){return this._getClosestNode("ul, ol")},getParentList:function(){return this._getClosestUpNode("ul, ol")},getListItem:function(){return this._getClosestNode("li")},getTable:function(){return this.getComponentType("table")?this.$component.find("table").get():this._getClosestNode("table")},getTableCell:function(){var r=this.$el.closest("td, th");return r.length!==0?r.get():!1},getComponentCodeElement:function(){return this.isComponentType("code")?this.$component.find("pre code, pre").last().get():!1},getImageElement:function(){return this.isComponentType("image")?this.$component.find("img").get():!1},getParagraph:function(){return this._getClosestNode("p")},getHeading:function(){return this._getClosestNode("h1, h2, h3, h4, h5, h6")},getDl:function(){return this._getClosestNode("dl")},getBlockquote:function(){return this._getClosestNode("blockquote")},getLink:function(){var r=this.isComponent()&&!this.isFigcaption(),h=this.isComponentType("table");if(h||!r){var u=this._getClosestElement("a");return u&&!u.attr("data-file")?u.get():!1}return!1},getFile:function(){var r=this.isComponent(),h=this.isComponentType("table");if(h||!r){var u=this._getClosestElement("a");return u&&u.attr("data-file")?u.get():!1}return!1},findFirstNode:function(r){return this.$el.find(r).first().get()},findLastNode:function(r){return this.$el.find(r).last().get()},_getLastOrFirstListItem:function(r){var h=this.getList(),u=this.getTag();if(h&&u==="li"){var m=c.dom(h).find("li")[r]().get();if(m&&this.node===m)return!0}return!1},_getLastOrFirstTableCell:function(r){var h=this.getTable(),u=this.getTag();if(h&&(u==="td"||u==="th")){var m=c.dom(h).find("td, th")[r]().get();if(m&&this.node===m)return!0}return!1},_getClosestUpNode:function(r){var h=this.editor.getElement(),u=this.$el.parents(r,h).last();return u.length!==0?u.get():!1},_getClosestNode:function(r){var h=this.editor.getElement(),u=this.$el.closest(r,h);return u.length!==0?u.get():!1},_getClosestElement:function(r){var h=this.editor.getElement(),u=this.$el.closest(r,h);return u.length!==0?u:!1}}),c.add("service","marker",{init:function(r){this.app=r},build:function(r,h){var u=document.createElement("span");return u.id="selection-marker-"+this._getPos(r),u.className="redactor-selection-marker",u.innerHTML=this.opts.markerChar,h?u.outerHTML:u},buildHtml:function(r){return this.build(r,!0)},insert:function(r){this.remove();var h=r!=="both"&&(r==="start"||this.selection.isCollapsed());this.selection.is()||this.editor.focus();var u=this.selection.getRange();if(u){var m=this.build("start"),y=this.build("end"),v=u.cloneRange();return h||(v.collapse(!1),v.insertNode(y)),v.setStart(u.startContainer,u.startOffset),v.collapse(!0),v.insertNode(m),u.setStartAfter(m),h||u.setEndBefore(y),this.selection.setRange(u),m}},find:function(r,h){var u=this.editor.getElement(),m=(h||u).find("span#selection-marker-"+this._getPos(r));return m.length!==0?m.get():!1},restore:function(){var r=this.find("start"),h=this.find("end"),u=this.selection.getRange();if((!u||!this.selection.is())&&(this.editor.focus(),u=document.createRange()),r){var m=h?h.previousSibling:!1,y=r.nextSibling;y=y&&y.nodeType===3&&y.textContent.replace(/[\n\t]/g,"")===""?!1:y,h?y&&y.id==="selection-marker-end"?this._restoreInject(u,r):m&&y?(u.selectNodeContents(m),u.collapse(!1),u.setStart(y,0)):m&&!y?(u.selectNodeContents(m),u.collapse(!1),u.setStartAfter(r)):(u.setStartAfter(r),u.setEndBefore(h)):y?(u.selectNodeContents(y),u.collapse(!0)):this._restoreInject(u,r),this.selection.setRange(u),r&&r.parentNode.removeChild(r),h&&h.parentNode.removeChild(h)}},remove:function(){var r=this.find("start"),h=this.find("end");r&&r.parentNode.removeChild(r),h&&h.parentNode.removeChild(h)},_getPos:function(r){return r===void 0?"start":r},_restoreInject:function(r,h){var u=this.utils.createInvisibleChar();c.dom(h).after(u),r.selectNodeContents(u),r.collapse(!1)}}),c.add("service","component",{init:function(r){this.app=r,this.activeClass="redactor-component-active"},create:function(r,h){return c.create(r+".component",this.app,h)},build:function(r){var h=c.dom(r),u,m=h.attr("data-redactor-type");return m&&(u=this.create(m,r)),u||r},remove:function(r,h){var u=c.dom(r).closest(".redactor-component"),m=u.attr("data-redactor-type"),y=u.parent(),v=this.inspector.parse(y),w=this.utils.findSiblings(u,"prev"),S=this.utils.findSiblings(u,"next"),C=this.app.broadcast(m+".delete",u);if(C!==!1){if(u.remove(),this.app.broadcast(m+".deleted",u),this.app.broadcast("contextbar.close"),this.app.broadcast("imageresizer.stop"),h!==!1){var T=v.getTableCell();T&&this.utils.isEmptyHtml(T.innerHTML)?this.caret.setStart(T):S?this.caret.setStart(S):w?this.caret.setEnd(w):this.editor.startFocus()}this.editor.isEmpty()&&(this.editor.setEmpty(),this.editor.startFocus(),this.app.broadcast("empty"))}},isNonEditable:function(r){var h=this.inspector.parse(r);return h.isComponent()&&!h.isComponentEditable()},isActive:function(r){var h;if(r){var u=this.inspector.parse(r);return h=c.dom(u.getComponent()),h.hasClass(this.activeClass)}else return h=this._find(),h.length!==0},getActive:function(r){var h=this._find();return h.length!==0?r?h:h.get():!1},setActive:function(r){this.clearActive(),this.editor.focus();var h=this.inspector.parse(r),u=h.getComponent(),m=c.dom(u);if(!h.isFigcaption()){var y=m.find(".redactor-component-caret");y.length===0&&(y=this._buildCaret(),m.prepend(y)),this.caret.setAtStart(y.get())}m.addClass(this.activeClass)},clearActive:function(){var r=this._find();r.removeClass(this.activeClass),r.find(".redactor-component-caret").remove(),this.app.broadcast("imageresizer.stop")},setOnEvent:function(r,h){this.clearActive();var u=this.inspector.parse(r.target);u.isFigcaption()||u.isComponentEditable()||u.isComponent()&&(this.setActive(r.target),h!==!0&&r.preventDefault())},executeScripts:function(r){if(r===void 0){var h=this.editor.getElement(),r=h.find("[data-redactor-type]").find("script").getAll();this.executeScripts.call(this,r)}else for(var u=0;u<r.length;u++)if(r[u].src!==""){var m=r[u].src;this.$doc.find('head script[src="'+m+'"]').remove();var y=c.dom("<script>");y.attr("src",m),y.attr("async defer"),y.get().onload=(function(){m.search("instagram")!==-1&&window.instgrm.Embeds.process(),this.executeScripts(r.slice(u+1))}).bind(this);var v=document.getElementsByTagName("head")[0];v&&v.appendChild(y.get());break}},_find:function(){return this.editor.getElement().find("."+this.activeClass)},_buildCaret:function(){var r=c.dom("<span>");return r.addClass("redactor-component-caret"),r.attr("contenteditable",!0),r}}),c.add("service","insertion",{init:function(r){this.app=r},set:function(r,h,u){r===null&&(r=""),r=h!==!1?this.cleaner.input(r):r,r=h!==!1?this.cleaner.paragraphize(r):r;var m=this.editor.getElement();return m.html(r),u!==!1&&this.editor.endFocus(),r},insertNode:function(r,h){this.editor.focus();var u=this.utils.isFragment(r)?r:this.utils.createFragment(r);return this._collapseSelection(),this._insertFragment(u),this._setCaret(h,u),this._sendNodes(u.nodes)},insertBreakLine:function(){return this.insertNode(document.createElement("br"),"after")},insertNewline:function(){return this.insertNode(document.createTextNode(`
`),"after")},insertText:function(r){return this.insertHtml(this.cleaner.getFlatText(r))},insertChar:function(r){return this.insertNode(r,"after")},insertRaw:function(r){return this.insertHtml(r,!1)},insertToEnd:function(r,h){if(r){r.nodeType===3&&r.nodeValue.search(/^\n/)!==-1&&(r=r.previousElementSibling);var u=c.dom(r);if(u.attr("data-redactor-type")===h){var m=this.opts.breakline?"<br>":"<p>",y=c.dom(m);u.after(y),this.caret.setStart(y)}}},insertPoint:function(r){var h,u,m=this.marker.build("start"),y=!1,v=r.clientX,w=r.clientY;if(document.caretPositionFromPoint){var S=document.caretPositionFromPoint(v,w),C=document.getSelection();u=this.inspector.parse(S.offsetNode),u.isInEditor()&&(h=C.getRangeAt(0),h.setStart(S.offsetNode,S.offset),h.collapse(!0),h.insertNode(m),y=!0)}else document.caretRangeFromPoint&&(h=document.caretRangeFromPoint(v,w),u=this.inspector.parse(h.startContainer),u.isInEditor()&&(h.insertNode(m),y=!0));return y},insertToPoint:function(r,h,u,m){var y=u===!0?!0:this.insertPoint(r);if(!y){var v=this.editor.getLastNode();c.dom(v).after(this.marker.build("start"))}return this.component.clearActive(),this.selection.restoreMarkers(),this.insertHtml(h,m)},insertToOffset:function(r,h){return this.offset.set({start:r,end:r}),this.insertHtml(h)},insertHtml:function(r,h){if(this.opts.input){var u=this.utils.parseHtml(r);if(this.selection.isAll())return this._insertToAllSelected(u);if(!this.selection.is()){var m=c.dom("<p>"),y=this.editor.getElement();y.append(m),this.caret.setStart(m)}var v=this.selection.isCollapsed(),w=this.selection.isText(),S=this.selection.getCurrent(),C=this.selection.getBlock(),T=this.inspector.parse(S);this._collapseSelection(),u=this._getCleanedInput(u,T,h);var _=this._isFigure(u.html),$=this._isComponentSpan(u.html),N=this.inspector.isText(u.html),P,E;if(this.editor.isEmpty())return this._insertToEmptyEditor(u.html);if(T.isComponent()&&!T.isComponentEditable())return this._insertToWidget(S,T,u.html);if($)return this.insertNode(u.nodes,"end");if(_&&!w&&!T.isList())return T.isInline()?this._insertToInline(S,u):(P=this.utils.createFragment(u.html),this.utils.splitNode(S,P),this.caret.setEnd(P.last),this._sendNodes(P.nodes));if(T.isCode())return this._insertToCode(u,S,h);if(T.isPre())return this._insertToPre(u,h);if(T.isHeading()||T.isFigcaption())return u.html=h!==!1?this.cleaner.removeTagsExcept(u.html,["a"]):u.html,u.html=h!==!1?this.cleaner.replaceNbspToSpaces(u.html):u.html,P=this.utils.createFragment(u.html),this.insertNode(P,"end");if(this.opts.breakline&&C&&C.tagName==="DIV"){if(this._isPlainHtml(u.html))return this.insertNode(u.nodes,"end");u.html=h!==!1?this.cleaner.paragraphize(u.html):u.html,P=this.utils.createFragment(u.html);var x=this.selection.getRange();return x&&!this.selection.isCollapsed()&&x.deleteContents(),this.utils.splitNode(S,P),this.caret.setEnd(P.last),this._sendNodes(P.nodes)}else{if(N)return!w&&this.opts.markup!=="br"&&this._hasBlocksAndImages(u.nodes)?(u.html=h!==!1?this.cleaner.paragraphize(u.html):u.html,P=this.utils.createFragment(u.html),this.utils.splitNode(S,P),this.caret.setEnd(P.last),this._sendNodes(P.nodes)):(u.html=h!==!1?u.html.replace(/\n/g,"<br>"):u.html,P=this.utils.createFragment(u.html),this.insertNode(P.nodes,"end"));if(!v&&!_)return this._isPlainHtml(u.html)?this.insertNode(u.nodes,"end"):(u.html=h!==!1?this.cleaner.paragraphize(u.html):u.html,P=this.utils.createFragment(u.html),this.insertNode(P,"end"));if(T.isInline()&&!this._isPlainHtml(u.html))return this._insertToInline(S,u);if(T.isBlockquote()||T.isDl())return E=this.opts.inlineTags,E.concat(["br"]),u.html=h!==!1?this.cleaner.replaceBlocksToBr(u.html):u.html,u.html=h!==!1?this.cleaner.removeTagsExcept(u.html,E):u.html,P=this.utils.createFragment(u.html),this.insertNode(P,"end");if(T.isParagraph())return this._isPlainHtml(u.html)?this.insertNode(u.nodes,"end"):(u.html=h!==!1?this.cleaner.paragraphize(u.html):u.html,P=this.utils.createFragment(u.html),this.utils.splitNode(S,P),this.caret.setEnd(P.last),this._sendNodes(P.nodes));if(T.isList()&&(E=this.opts.inlineTags,E=E.concat(["br","li","ul","ol","img"]),u.html=h!==!1?this.cleaner.replaceBlocksToBr(u.html):u.html,u.html=h!==!1?this.cleaner.removeTagsExcept(u.html,E):u.html,u.html=h!==!1?this.cleaner.removeBrAtEnd(u.html):u.html,P=this.utils.createFragment(u.html),u.nodes=P.nodes,this._containsTags(u.html,["ul","ol","li"]))){var k=this.selection.getElement(S);if(k&&k.tagName==="LI"&&this.caret.isStart(k)){u.nodes=c.dom(P.nodes).unwrap("ul, ol").getAll(),c.dom(k).before(u.nodes);var A=u.nodes[u.nodes.length-1];return this.caret.setEnd(A),this._sendNodes(u.nodes)}else return this._isPlainHtml(u.html)?this.insertNode(P,"end"):(P=this._buildList(u,k,P),this.utils.splitNode(S,P,!0),this.caret.setEnd(P.last),this._sendNodes(P.nodes))}}return this.insertNode(u.nodes,"end")}},_insertToAllSelected:function(r){var h=this.set(r.html),u=this.utils.parseHtml(h);return this._sendNodes(u.nodes)},_insertToEmptyEditor:function(r){r=this.cleaner.paragraphize(r);var h=this.utils.createFragment(r),u=this.editor.getElement();return u.html(""),u.append(h.frag),this.caret.setEnd(h.last),this._sendNodes(h.nodes)},_insertToInline:function(r,h){var u=this.utils.createFragment(h.html);return this.utils.splitNode(r,u,!1,!0),this.caret.setEnd(u.last),this._sendNodes(u.nodes)},_insertToCode:function(r,h,u){r.html=u!==!1?this.cleaner.encodeHtml(r.html):r.html,r.html=u!==!1?this.cleaner.removeNl(r.html):r.html;var m=this.utils.createFragment(r.html),y=this.insertNode(m,"end");return this.utils.normalizeTextNodes(h),y},_insertToPre:function(r,h){r.html=h!==!1?this.cleaner.encodeHtml(r.html):r.html;var u=this.utils.createFragment(r.html);return this.insertNode(u,"end")},_insertToWidget:function(r,h,u){u=this._isComponentSpan(u)?u:this.cleaner.paragraphize(u);var m=this.utils.createFragment(u),y=h.getComponent(),v=c.dom(y);return v.after(m.frag),v.remove(),this.caret.setEnd(m.last),this._sendNodes(m.nodes)},_insertFragment:function(r){var h=this.selection.getRange();if(h){if(this.selection.isCollapsed()){var u=h.startContainer;u.nodeType!==3&&u.tagName==="BR"&&(this.caret.setAfter(u),u.parentNode.removeChild(u))}else h.deleteContents();h.insertNode(r.frag)}},_sendNodes:function(r){for(var h=0;h<r.length;h++){var u=r[h],m=u.nodeType!==3&&typeof u.getAttribute=="function"?u.getAttribute("data-redactor-type"):!1;m&&this.app.broadcast(m+".inserted",this.component.build(u))}return this.detector.isIe()&&this.editor.getElement().find("[data-redactor-type=table]").attr("contenteditable",!0),this.app.broadcast("inserted",r),this.component.executeScripts(),r},_setCaret:function(r,h){var u=this._isLastInline(h);r?(r=u&&r==="end"?"after":r,this.caret["set"+this.utils.ucfirst(r)](h.last)):r!==!1&&u&&this.caret.setAfter(h.last)},_isLastInline:function(r){if(r.last){var h=this.inspector.parse(r.last);return h.isInline()}return!1},_getCleanedInput:function(r,h,u){var m=h.isCode()||h.isPre();return r.html=r.html.replace(/&nbsp;/g," "),r.html=!m&&u!==!1?this.cleaner.input(r.html):r.html,r=!m&&u!==!1?this.utils.parseHtml(r.html):r,r},_getContainer:function(r){return c.dom(this.utils.createTmpContainer(r))},_buildList:function(r,h,u){var m=r.nodes,y=m[0];if(y&&y.nodeType!==3&&y.tagName==="li"){var v=c.dom(h),w=v.get().tagName.toLowerCase(),S=c.dom("<"+w+" />");return S.append(u.nodes),this.utils.createFragment(S.get().outerHTML)}return u},_containsTags:function(r,h){return this._getContainer(r).find(h.join(",")).length!==0},_collapseSelection:function(){},_hasFigureOrTable:function(r){return this._getContainer(r).find("figure, table").length!==0},_hasBlocks:function(r){return this._getContainer(r).find(this.opts.blockTags.join(",")).length!==0},_hasBlocksAndImages:function(r){return this._getContainer(r).find(this.opts.blockTags.join(",")+",img").length!==0},_isPlainHtml:function(r){return this._getContainer(r).find(this.opts.blockTags.join(",")+", img").length===0},_isFigure:function(r){if(this._isHtmlString(r))return c.dom(r).closest("figure").length!==0},_isComponentSpan:function(r){if(this._isHtmlString(r))return c.dom(r).closest("span.redactor-component").length!==0},_isHtmlString:function(r){return!(typeof r=="string"&&!/^\s*<(\w+|!)[^>]*>/.test(r))}}),c.add("service","block",{init:function(r){this.app=r,this.tags=["p","div","blockquote","pre","h1","h2","h3","h4","h5","h6"]},format:function(r){return this.params={args:!1},this.params.type=r.type?r.type:"set",this.params.tag=typeof r=="string"?r:r.tag||this.opts.markup,this.params.tag=this.params.tag.toLowerCase(),this.params.args={class:r.class||!1,style:r.style||!1,attr:r.attr||!1},!r.class&&!r.style&&!r.attr&&(this.params.args=!1),this._format()},add:function(r,h,u){return this._apply("add",r,h,!0,u)},set:function(r,h){return this._apply("set",r,h)},toggle:function(r,h){return this._apply("toggle",r,h)},remove:function(r,h){return this._apply("remove",r,h)},clearFormat:function(r){return this._clear(r,"all")},clearStyle:function(r){return this._clear(r,"style")},clearClass:function(r){return this._clear(r,"class")},clearAttr:function(r){return this._clear(r,"attr")},_format:function(){var r=[];this.collapsed=this.selection.isCollapsed(),this.selection.save(),this.selection.getBlock();var h=this._getBlocks(),u=this._isToggleFormatType(h)?"toggle":"set",m=this._getReplacedTag(u);return r=this._replaceBlocks(h,m),r=this._buildNodes(r),this._restoreSelection(r),r},_clear:function(r,h,u,m){u!==!1&&this.selection.save();var y=this._getElements(r,m);return h==="all"?this._removeAllAttr(y,!1):h==="style"?(y.removeAttr("style"),y.removeAttr("data-redactor-style-cache")):h==="class"?y.removeAttr("class"):h==="attr"&&this._removeAllAttr(y),m=y.getAll(),u!==!1&&this._restoreSelection(m),m},_getElements:function(r,h){return h?c.dom(h):c.dom(this._getBlocks(r))},_getBlocks:function(r){for(var h=this.selection.getBlocks({tags:r||this.tags}),u=[],m=0;m<h.length;m++)h[m].tagName==="DIV"&&!h[m].getAttribute("data-redactor-tag")||u.push(h[m]);return u},_getReplacedTag:function(r){return this.opts.breakline?r==="toggle"||this.params.tag==="p"?"div":this.params.tag:r==="toggle"?this.opts.markup:this.params.tag},_isStandardParagraph:function(){return!this.opts.breakline&&this.opts.markup==="p"},_isStandardDiv:function(){return!this.opts.breakline&&this.opts.markup==="div"},_isBreaklineBlock:function(r){return r&&r.tagName==="DIV"&&r.getAttribute("data-redactor-tag")==="br"},_isToggleFormatType:function(r){for(var h=0,u=r.length,m=0;m<u;m++)r[m]&&this.params.tag===r[m].tagName.toLowerCase()&&h++;return h===u},_isCurrentBlockOneAndEmpty:function(r){return this.collapsed&&r.length===1&&this.utils.isEmpty(r[0])},_buildNodes:function(r){return r.length>0&&(r=this._applyArgs(r,!1),r=this._combinePre(r),r=this._cleanBlocks(r)),r},_replaceBlocks:function(r,h){for(var u=[],m=0;m<r.length;m++){var y=this.utils.replaceToTag(r[m],h);u.push(y.get())}return u},_combinePre:function(r){for(var h=[],u=0;u<r.length;u++){var m=r[u].nextElementSibling;if(m&&r[u].tagName==="PRE"&&m.tagName==="PRE"){var y=c.dom(r[u]),v=c.dom(m),w=document.createTextNode(`
`);y.append(w),y.append(v),v.unwrap("pre")}h.push(r[u])}return h},_cleanBlocks:function(r){for(var h=["h1","h2","h3","h4","h5","h6"],u=this.opts.inlineTags,m=0;m<r.length;m++){var y=r[m].tagName.toLowerCase(),v=c.dom(r[m]);h.indexOf(y)!==-1?v.find("span").not(".redactor-component, .non-editable, .redactor-selection-marker").unwrap():y==="pre"&&v.find(u.join(",")).not(".redactor-selection-marker").unwrap(),this.params.args===!1&&this.params.tag==="p"&&v.removeAttr("class"),this.opts.breakline&&y==="div"?v.attr("data-redactor-tag","br"):v.removeAttr("data-redactor-tag"),this.utils.normalizeTextNodes(r[m])}return r},_cleanEmptyClass:function(r){r.each(function(h){h.className===""&&h.removeAttribute("class")})},_cleanEmptyStyle:function(r){this.utils.removeEmptyAttr(r.get(),"style")?r.removeAttr("data-redactor-style-cache"):r.attr("data-redactor-style-cache",r.attr("style"))},_apply:function(r,h,u,m,y){m!==!1&&this.selection.save();var v=this._getElements(u,y);if(h.class&&(r==="set"?(v.removeAttr("class"),v.addClass(h.class)):r==="add"?v.addClass(h.class):r==="toggle"?v.toggleClass(h.class):r==="remove"&&v.removeClass(h.class),this._cleanEmptyClass(v)),h.attr&&(r==="set"?(this._removeAllAttr(v),v.attr(h.attr)):r==="add"?v.attr(h.attr):r==="toggle"?(w=h.attr,v.each(function(C){var T=c.dom(C);for(var _ in w)T.attr(_)?T.removeAttr(_):T.attr(_,w[_])})):r==="remove"&&v.removeAttr(h.attr)),h.style){if(r==="set")v.removeAttr("style"),v.css(h.style),v.each(function(C){var T=c.dom(C);T.attr("data-redactor-style-cache",T.attr("style"))});else if(r==="add"){var w=h.style;v.each((function(C){var T=c.dom(C);T.css(w),T.attr("data-redactor-style-cache",T.attr("style")),this._convertStyleQuotes(T)}).bind(this))}else if(r==="toggle"){var w=h.style;v.each((function(T){var _=c.dom(T);for(var $ in w){var N=w[$],P=_.css($);P=this.utils.isRgb(P)?this.utils.rgb2hex(P):P.replace(/"/g,""),N=this.utils.isRgb(N)?this.utils.rgb2hex(N):N.replace(/"/g,""),P=this.utils.hex2long(P),N=this.utils.hex2long(N);var E=typeof N=="string"?N.toLowerCase():N,x=typeof P=="string"?P.toLowerCase():P;E===x?_.css($,""):_.css($,N)}this._convertStyleQuotes(_),this._cleanEmptyStyle(_)}).bind(this))}else if(r==="remove"){var S=h.style;v.each((function(C){var T=c.dom(C);T.css(S,""),this._cleanEmptyStyle(T)}).bind(this))}}return y=v.getAll(),m!==!1&&this._restoreSelection(y),y},_applyArgs:function(r){return this.params.args?r=this._apply(this.params.type,this.params.args,!1,!1,r):r=this._clear(!1,"all",!1,r),r},_removeAllAttr:function(r,h){r.each(function(u){var m=["data-redactor-tag","data-redactor-style-cache"];h===!1&&(m.push("style"),m.push("class"));for(var y=u.attributes.length;y-- >0;){var v=u.attributes[y],w=v.name;m.indexOf(w)===-1&&u.removeAttributeNode(v)}})},_restoreSelection:function(r){this._isCurrentBlockOneAndEmpty(r)?this.caret.setStart(r[0]):setTimeout((function(){this.selection.restore()}).bind(this),1)},_convertStyleQuotes:function(r){var h=r.attr("style");h&&r.attr("style",h.replace(/"/g,"'"))}}),c.add("service","inline",{mixins:["formatter"],init:function(r){this.app=r,this.count=0},format:function(r){if(!this._isFormat())return[];this.type=r.type?r.type:"set",this.tag=typeof r=="string"?r:r.tag,this.tag=this.tag.toLowerCase(),this.tag=this.arrangeTag(this.tag),typeof r=="string"?this.args=!1:this.buildArgs(r),this.detector.isIe()||this.editor.disableNonEditables();var h=this.selection.isCollapsed()?this.formatCollapsed():this.formatUncollapsed();return this.detector.isIe()||this.editor.enableNonEditables(),h},_isFormat:function(){var r=this.selection.getCurrent(),h=this.inspector.parse(r),u=h.isComponent()&&!h.isComponentType("table")&&!h.isFigcaption();return r===!1&&this.selection.isAll()?!0:!(!r||h.isPre()||h.isCode()||u)},arrangeTag:function(r){var h=this.opts.replaceTags;for(var u in h)r===u&&(r=h[u]);return r},formatCollapsed:function(){var r=[],h=this.selection.getInlineFirst(),u=this.selection.getInlines({all:!0}),m=c.dom(h),y,v,w,S;if(!h)r=this.insertInline(r);else{var C=this.inspector.parse(h),T=this.utils.isEmptyHtml(h.innerHTML);if(T)if(h.tagName.toLowerCase()===this.tag)if(this.hasSameArgs(h)){this.caret.setAfter(h),m.remove();var _=this.selection.getElement();this.utils.normalizeTextNodes(_)}else this.tag==="span"?(r=this.applyArgs([h],!1),this.caret.setStart(h)):r=this.insertInline(r);else C.hasParent([this.tag])?(y=m.closest(this.tag),v=y.get(),this.hasSameArgs(v)?(y.unwrap(),this.caret.setStart(h)):r=this.insertInline(r)):r=this.insertInline(r);else if(h.tagName.toLowerCase()===this.tag)this.hasSameArgs(h)?(S=this.utils.extractHtmlFromCaret(h),w=c.dom("<"+this.tag+" />"),w=this.utils.cloneAttributes(h,w),m.after(w.append(S)),w.html().trim()===""&&w.remove(),this.caret.setAfter(h)):r=this.insertInline(r);else if(C.hasParent([this.tag]))if(y=m.closest(this.tag),v=y.get(),this.hasSameArgs(v)){S=this.utils.extractHtmlFromCaret(v,v),w=c.dom("<"+this.tag+" />"),w=this.utils.cloneAttributes(v,w);var $,N,P=0;u=u.reverse();for(var E=0;E<u.length;E++)u[E]!==v&&(N=c.dom("<"+u[E].tagName.toLowerCase()+">"),P===0?$=N:$.append(N),P++);y.after(w.append(S)),y.after($),this.caret.setStart(N)}else r=this.insertInline(r);else r=this.insertInline(r)}return r},insertInline:function(r){var h=document.createElement(this.tag);return r=this.insertion.insertNode(h,"start"),this.applyArgs(r,!1)},hasSameArgs:function(r){if(r.attributes.length===0&&this.args===!1)return!0;var h=!0;if(this.args){var u=0;for(var m in this.args){var y=c.dom(r),v=this.args[m],w=this.utils.toParams(v),S=y.attr(m);if(v)if(m==="style"){w=w.trim().replace(/;$/,"");for(var C=this.utils.styleToObj(y.attr("style")),T=w.split(";"),_=0,$=0;$<T.length;$++){var N=T[$].split(":"),P=N[0].trim(),E=N[1].trim();if(P.search(/color/)!==-1){var x=y.css(P);x&&(x===E||this.utils.rgb2hex(x)===E)&&_++}else y.css(P)===E&&_++}_===T.length&&Object.keys(C).length===T.length&&u++}else S===w&&u++;else(!S||S==="")&&u++}h=u===Object.keys(this.args).length}return h},formatUncollapsed:function(){var r=this.selection.getInlines({all:!0,inside:!0});this.detector.isIe()?this.selection.saveMarkers():this.selection.save(),this._convertTags("u"),this._convertTags("del"),this._convertToStrike(r),this.detector.isIe()?this.selection.restoreMarkers():this.selection.restore(),document.execCommand("strikethrough"),this._clearDecoration(),this.selection.save();var h=this._revertToInlines();h=this.applyArgs(h,!1);for(var u=0;u<h.length;u++){var m=h[u],y=m.tagName.toLowerCase(),v=m.attributes.length;y===this.tag&&v===0&&this.args&&(c.dom(m).unwrap(),h.splice(u,1))}return this.selection.restore(),this._clearEmptyStyle(),h=this._normalizeBlocks(h),h},_convertTags:function(r){if(this.tag!==r){var h=this.editor.getElement();h.find(r).each((function(u){var m=this.utils.replaceToTag(u,"span");m.addClass("redactor-convertable-"+r)}).bind(this))}},_revertTags:function(r){var h=this.editor.getElement();h.find("span.redactor-convertable-"+r).each((function(u){var m=this.utils.replaceToTag(u,r);m.removeClass("redactor-convertable-"+r),this.utils.removeEmptyAttr(m,"class")&&m.removeAttr("class")}).bind(this))},_convertToStrike:function(r){for(var h=this.selection.getText().replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&"),u=0;u<r.length;u++){var m=this.arrangeTag(r[u].tagName.toLowerCase()),y=r[u],v=c.dom(y),w=this.hasSameArgs(y);if(m===this.tag)if(this.tag==="span"&&this._isTextSelected(y,h))v.addClass("redactor-convertable-apply");else if(w&&this.tag!=="a")this._replaceToStrike(v);else if(this.tag==="span"){if(this.args&&this.args.style)for(var S in this.args.style)v.css(S,"");this.utils.removeEmptyAttr(v.get(),"style")?v.addClass("redactor-convertable-apply"):v.addClass("redactor-unconvertable-apply")}else w||v.addClass("redactor-convertable-apply")}},_replaceToStrike:function(r){r.replaceWith(function(){return c.dom("<strike>").append(r.contents())})},_revertToInlines:function(){var r=[],h=this.editor.getElement();return this.tag!=="u"&&h.find("u").unwrap(),h.find(".redactor-convertable-u").each(function(u){r.push(u)}),h.find(".redactor-convertable-apply").each((function(u){var m=c.dom(u);m.find("strike").unwrap(),this._forceRemoveClass(m,"redactor-convertable-apply"),r.push(u)}).bind(this)),h.find("span.redactor-unconvertable-apply").each((function(u){var m=c.dom(u);this._forceRemoveClass(m,"redactor-unconvertable-apply")}).bind(this)),h.find("strike").each((function(u){var m=this.utils.replaceToTag(u,this.tag);r.push(m.get())}).bind(this)),this._revertTags("u"),this._revertTags("del"),r},_normalizeBlocks:function(r){var h=this.opts.inlineTags,u=this.selection.getBlocks();if(u){for(var m=0;m<u.length;m++)if(u[m].tagName==="PRE"){var y=c.dom(u[m]);y.find(h.join(",")).not(".redactor-selection-marker").each((function(v){r.indexOf(v)!==-1&&(r=this.utils.removeFromArrayByValue(r,v)),c.dom(v).unwrap()}).bind(this))}}return r},_clearDecoration:function(){var r=this.editor.getElement();r.find(this.opts.inlineTags.join(",")).each(function(h){if(h.style.textDecoration==="line-through"||h.style.textDecorationLine==="line-through"){var u=c.dom(h);u.css("textDecorationLine",""),u.css("textDecoration",""),u.wrap("<strike>")}})},_clearEmptyStyle:function(){for(var r=this.getInlines(),h=0;h<r.length;h++){this._clearEmptyStyleAttr(r[h]);var u=r[h].childNodes;if(u)for(var m=0;m<u.length;m++)this._clearEmptyStyleAttr(u[m])}},_clearEmptyStyleAttr:function(r){r.nodeType!==3&&this.utils.removeEmptyAttr(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-redactor-style-cache"))},_forceRemoveClass:function(r,h){r.removeClass(h),this.utils.removeEmptyAttr(r,"class")&&r.removeAttr("class")},_isTextSelected:function(r,h){var u=this.utils.removeInvisibleChars(r.textContent);return h===u||h.search(new RegExp("^"+this.utils.escapeRegExp(u)+"$"))!==-1},getInlines:function(r){return r?this.selection.getInlines({tags:r,all:!0}):this.selection.getInlines({all:!0})},getElements:function(r){return c.dom(this.getInlines(r))},clearFormat:function(){this.selection.save();for(var r=this.selection.getInlines({all:!0}),h=0;h<r.length;h++){var u=c.dom(r[h]),m=this.selection.getInline(r[h]);m&&u.unwrap()}this.selection.restore()}}),c.add("service","autoparser",{init:function(r){this.app=r,this.cleaner=this.app.cleaner},observe:function(){var r=this.editor.getElement(),h=r.find(".redactor-autoparser-object").each(function(u){var m=c.dom(u);m.removeClass("redactor-autoparser-object"),m.attr("class")===""&&m.removeAttr("class")});h.length>0&&h.each((function(u){var m,y=!1,v=u.tagName;v==="A"?m="link":v==="IMG"?m="image":v==="IFRAME"&&(m="video"),m&&(y=c.create(m+".component",this.app,u),this.app.broadcast(m+".inserted",y),this.app.broadcast("autoparse",m,y))}).bind(this))},format:function(r,h){this._isKey(h)&&this._format(h===this.keycodes.ENTER)},parse:function(r){var h=["figure","html","form","pre","object","video","iframe","code","a","img"],u=[],m=0,y=[];r=this.cleaner.storeComments(r,y),r=this.cleaner.encodeCode(r),r=r.replace(/\$/g,"&#36;"),r=r.replace(/&amp;/g,"&");for(var v=0;v<h.length;v++){var w=h[v]==="img"?"<"+h[v]+"[^>]*>":"<"+h[v]+"([\\w\\W]*?)</"+h[v]+">",S=r.match(new RegExp(w,"gi"));if(S!==null)for(var C=0;C<S.length;C++)r=r.replace(S[C],"#####replaceparse"+m+"#####"),u.push(S[C]),m++}if(this.opts.autoparseImages&&r.match(this.opts.regex.imageurl))for(var T=r.match(this.opts.regex.imageurl),v=0;v<T.length;v++)r=r.replace(T[v],'<img class="redactor-autoparser-object" src="'+T[v]+'">');if(this.opts.autoparseVideo&&(r.match(this.opts.regex.youtube)||r.match(this.opts.regex.vimeo))){var _='<iframe width="500" height="281" src="',$='" frameborder="0" allowfullscreen></iframe>',N,P,E=this.opts.autoparseHttps?"https:":"";r.match(this.opts.regex.youtube)?(N=E+"//www.youtube.com/embed/$1",P=this.opts.regex.youtube):r.match(this.opts.regex.vimeo)&&(N=E+"//player.vimeo.com/video/$2",P=this.opts.regex.vimeo);var x=this.component.create("video",_+N+$);r=r.replace(P,x.get().outerHTML)}for(var v=0;v<h.length;v++){var w=h[v]==="img"?"<"+h[v]+"[^>]*>":"<"+h[v]+"([\\w\\W]*?)</"+h[v]+">",S=r.match(new RegExp(w,"gi"));if(S!==null)for(var C=0;C<S.length;C++)r=r.replace(S[C],"#####replaceparse"+m+"#####"),u.push(S[C]),m++}return this.opts.autoparseLinks&&r.match(this.opts.regex.url)&&(r=this._formatLinks(r)),r=this._restoreReplaced(u,r),r=this._restoreReplaced(u,r),r=this.cleaner.restoreComments(r,y),r},_isKey:function(r){return r===this.keycodes.ENTER||r===this.keycodes.SPACE},_format:function(r){var h=this.selection.getParent(),u=c.dom(h),m=h&&u.closest("figure, pre, code, img, a, iframe").length!==0;if(!(m||!this.selection.isCollapsed())){var y=this.utils.createInvisibleChar(),v=this.selection.getRange();v.insertNode(y);var w=this.selection.getCurrent(),S=this.inspector.parse(w),C=c.dom(w);if(y.parentNode.removeChild(y),w&&w.nodeType===3){var T=w.textContent,_;if(this.opts.autoparseImages&&T.match(this._convertToRegExp(this.opts.regex.imageurl))){var $=S.isList(),N=T.match(this.opts.regex.imageurl),P=$?void 0:"<figure><img></figure>",E=this.component.create("image",P);E.setSrc(N[0]),E.addClass("redactor-autoparser-object"),T=T.replace(N[0],E.get().outerHTML),_="image"}else if(this.opts.autoparseVideo&&(T.match(this._convertToRegExp(this.opts.regex.youtube))||T.match(this._convertToRegExp(this.opts.regex.vimeo)))){var x='<iframe width="500" height="281" src="',k='" frameborder="0" allowfullscreen></iframe>',A,L;T.match(this.opts.regex.youtube)?(A="//www.youtube.com/embed/$1",L=this.opts.regex.youtube):T.match(this.opts.regex.vimeo)&&(A="//player.vimeo.com/video/$2",L=this.opts.regex.vimeo);var D=this.component.create("video",x+A+k);D.addClass("redactor-autoparser-object"),T=T.replace(L,D.get().outerHTML),_="video"}else this.opts.autoparseLinks&&T.match(this._convertToRegExp(this.opts.regex.url))&&(T=this._formatLinks(T,r),_="link");if(_){r?(this.selection.save(),C.replaceWith(T),this.selection.restore()):C.replaceWith(T);var M=this.editor.getElement(),Q=M.find(".redactor-autoparser-object").removeClass("redactor-autoparser-object");if(Q=_==="link"?c.create("link.component",this.app,Q):Q,_==="link")r||this.caret.setAfter(Q),this.app.broadcast("link.inserted",Q);else{this.caret.setAfter(Q);var B=Q.clone();Q.remove(),Q=this.insertion.insertHtml(B),Q=this.component.build(Q)}this.app.broadcast("autoparse",_,Q)}}}},_formatLinks:function(r){var h=this.opts.pasteLinkTarget!==!1?' target="'+this.opts.pasteLinkTarget+'"':"",u="http",m=' class="redactor-autoparser-object"',y=this;return r=r.replace(this.opts.regex.aurl1,function(v){return'<a href="'+v+'"'+h+m+">"+y._subLinkText(v)+"</a>"}),r=r.replace(this.opts.regex.aurl2,function(v,w,S){return w+'<a href="'+u+"://"+S+'"'+h+m+">"+y._subLinkText(S)+"</a>"}),r},_subLinkText:function(r){return r=r.length>this.opts.linkSize?r.substring(0,this.opts.linkSize)+"...":r,r=r.search("%")===-1?decodeURIComponent(r):r,r},_restoreReplaced:function(r,h){for(var u=0;u<r.length;u++)h=h.replace("#####replaceparse"+u+"#####",r[u]);return h},_convertToRegExp:function(r){return new RegExp(String(r).replace(/^\//,"").replace(/\/ig$/,"").replace(/\/gi$/,"")+"$","gi")}}),c.add("service","storage",{init:function(r){this.app=r,this.data=[]},observeImages:function(){if(this.opts.imageObserve){var r=this.editor.getElement(),h=r.find("[data-image]");h.each(this._addImage.bind(this))}},observeFiles:function(){var r=this.editor.getElement(),h=r.find("[data-file]");h.each(this._addFile.bind(this))},setStatus:function(r,h){this.data[r].status=h},getChanges:function(){var r=this.editor.getElement();for(var h in this.data){var u=this.data[h],m=r.find("[data-"+u.type+'="'+u.id+'"]');this.setStatus(u.id,m.length!==0)}return this.data},add:function(r,h){var u=c.dom(h),m=u.attr("data-"+r);this.data[m]={type:r,status:!0,node:u.get(),id:u.attr("data-"+r)}},_addImage:function(r){this.add("image",r)},_addFile:function(r){this.add("file",r)}}),c.add("service","utils",{init:function(r){this.app=r},isEmpty:function(r){var h=!1;return r=c.dom(r).get(),r&&(h=r.nodeType===3?r.textContent.trim().replace(/\n/,"")==="":r.innerHTML===""),h},isEmptyHtml:function(r,h,u){return r=this.removeInvisibleChars(r),r=r.replace(/&nbsp;/gi,""),r=r.replace(/<\/?br\s?\/?>/g,h?"br":""),r=r.replace(/\s/g,""),r=r.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),r=r.replace(/^<div>[^\W\w\D\d]*?<\/div>$/i,""),u&&(r=r.replace(/<ul(.*?[^>])>$/i,"ul"),r=r.replace(/<ol(.*?[^>])>$/i,"ol")),r=r.replace(/<hr(.*?[^>])>$/i,"hr"),r=r.replace(/<iframe(.*?[^>])>$/i,"iframe"),r=r.replace(/<source(.*?[^>])>$/i,"source"),r=r.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),r=r.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),r=r.trim(),r===""},trimSpaces:function(r){return r=this.removeInvisibleChars(r.trim())},createInvisibleChar:function(){return document.createTextNode(this.opts.markerChar)},searchInvisibleChars:function(r){return r.search(/^\uFEFF$/g)},removeInvisibleChars:function(r){return r.replace(/\uFEFF/g,"")},trimInvisibleChars:function(r){if(this.selection.isCollapsed()){var h=this.selection.getCurrent(),u=r==="left"?this.selection.getTextBeforeCaret():this.selection.getTextAfterCaret(),m=h&&h.nodeType===3&&this.searchInvisibleChars(u)===0;if(m)if(r==="left")c.dom(h).replaceWith(h.textContent.trim());else{var y=this.offset.get();this.offset.set({start:y.start+1,end:y.end+1})}}},buildWrapper:function(r){return c.dom("<div>").html(r)},getWrapperHtml:function(r){var h=r.html();return r.remove(),h},createTmpContainer:function(r){var h=c.dom("<div>");return typeof r=="string"?h.html(r):h.append(c.dom(r).clone(!0)),h.get()},createFragment:function(r){for(var h=this.createTmpContainer(r),u=document.createDocumentFragment(),m,y,v,w=[],S=0;m=h.firstChild;){S++;var C=u.appendChild(m);S===1&&(y=C),w.push(C),v=C}return{frag:u,first:y,last:v,nodes:w}},isFragment:function(r){return typeof r=="object"&&r.frag},parseHtml:function(r){var h=this.createTmpContainer(r);return{html:h.innerHTML,nodes:h.childNodes}},splitNode:function(r,h,u,m){h=this.isFragment(h)?h.frag:h;var y;m?y=this.inspector.isInlineTag(r.tagName)?r:this.selection.getInline(r):y=this.inspector.isBlockTag(r.tagName)?r:this.selection.getBlock(r);var v=c.dom(y);if(!m&&this.isEmptyHtml(y.innerHTML,!0))return v.after(h),v.remove(),h;var w=v.get().tagName.toLowerCase(),S=this.caret.isEnd(y),C=this.caret.isStart(y);if(!S&&!C){var T=this.extractHtmlFromCaret(m),_=c.dom("<"+w+" />");_=this.cloneAttributes(y,_),v.after(_.append(T))}if(C)return v.before(h);if(u)return v.append(h);h=v.after(h);var $=v.html();return $=this.removeInvisibleChars($),$=$.replace(/&nbsp;/gi,""),$===""&&v.remove(),h},extractHtmlFromCaret:function(r,h){var u=this.selection.getRange();if(u&&(h=h||(r?this.selection.getInline():this.selection.getBlock()),h)){var m=u.cloneRange();return m.selectNodeContents(h),m.setStart(u.endContainer,u.endOffset),m.extractContents()}},createMarkup:function(r){var h=document.createElement(this.opts.markup);this.opts.breakline&&h.setAttribute("data-redactor-tag","br");var u=c.dom(r);u.after(h),this.caret.setStart(h)},createMarkupBefore:function(r){var h=document.createElement(this.opts.markup);this.opts.breakline&&h.setAttribute("data-redactor-tag","br");var u=c.dom(r);u.before(h),this.caret.setEnd(h)},getNode:function(r){var h=c.dom(r).get(),u=this.editor.getElement().get();return typeof r>"u"?u:h||!1},findSiblings:function(r,h){for(r=c.dom(r).get(),h=h==="next"?"nextSibling":"previousSibling";r=r[h];)if(!(r.nodeType===3&&r.textContent.trim()===""||r.tagName==="BR"))return r;return!1},getElementsFromHtml:function(r,h,u){var m=document.createElement("div");m.innerHTML=r;var y=m.querySelectorAll(h),v=function(w,S){if(typeof this.length=="number"&&typeof w=="function"){var C=[];if(typeof this=="object")for(var T=0;T<this.length;T++)if(T in this)C[T]=w.call(S||this,this[T],T,this);else return;return C}};return v.call(y,function(w){var S=w.getAttribute("data-redactor-type");if(!(u&&S&&S===u))return w.outerHTML})},getChildNodes:function(r,h,u){r=r&&r.nodeType&&r.nodeType===11?r:c.dom(r).get();var m=r.childNodes,y=[];if(m){for(var v=0;v<m.length;v++)if(!(u===!0&&m[v].nodeType===3)&&!(m[v].nodeType===3&&this.isEmpty(m[v]))&&(y.push(m[v]),h!==!1)){var w=this.getChildNodes(m[v],u);w.length>0&&(y=y.concat(w))}}return y},getChildElements:function(r){return this.getChildNodes(r,!0,!0)},getFirstNode:function(r){return this._getFirst(this.getChildNodes(r,!1))},getLastNode:function(r){return this._getLast(this.getChildNodes(r,!1))},getFirstElement:function(r){return this._getFirst(this.getChildNodes(r,!1,!0))},getLastElement:function(r){return this._getLast(this.getChildNodes(r,!1,!0))},replaceToTag:function(r,h){var u=c.dom(r);return u.replaceWith(function(m){var y=c.dom("<"+h+">").append(c.dom(m).contents());if(m.attributes)for(var v=m.attributes,w=0;w<v.length;w++)y.attr(v[w].nodeName,v[w].value);return y})},ucfirst:function(r){return r.charAt(0).toUpperCase()+r.slice(1)},removeFromArrayByValue:function(r,h){for(var u=arguments,m=u.length,y;m>1&&r.length;)for(h=u[--m];(y=r.indexOf(h))!==-1;)r.splice(y,1);return r},removeEmptyAttr:function(r,h){var u=c.dom(r);return typeof u.attr(h)>"u"||u.attr(h)===null?!0:u.attr(h)===""?(u.removeAttr(h),!0):!1},cloneAttributes:function(r,h){r=c.dom(r).get(),h=c.dom(h);for(var u=r.attributes,m=u.length;m--;){var y=u[m];h.attr(y.name,y.value)}return h},toParams:function(r){if(typeof r!="object")return r;var h=Object.keys(r);if(!h.length)return"";for(var u="",m=0;m<h.length;m++){var y=h[m];u+=y+":"+r[y]+";"}return u},styleToObj:function(r){var h={};if(r)for(var u=r.replace(/;$/,"").split(";"),m=0;m<u.length;m++){var y=u[m].split(":");h[y[0].trim()]=y[1].trim()}return h},checkProperty:function(r){for(var h=arguments[1]&&Array.isArray(arguments[1])?arguments[1]:[].slice.call(arguments,1),u=0;u<h.length;u++){if(!r||typeof r[h[u]]>"u")return!1;r=r[h[u]]}return r},extendData:function(r,h){for(var u in h)if(u==="elements"){var m=c.dom(h[u]);m.each((function(y){var v=c.dom(y);if(y.tagName==="FORM"){var w=v.serialize(!0);for(var S in w)r=this._setData(r,S,w[S])}else{var C=v.attr("name")?v.attr("name"):v.attr("id");r=this._setData(r,C,v.val())}}).bind(this))}else r=this._setData(r,u,h[u]);return r},_setData:function(r,h,u){return r instanceof FormData?r.append(h,u):r[h]=u,r},normalizeTextNodes:function(r){r=c.dom(r).get(),r&&r.normalize()},isRgb:function(r){return r.search(/^rgb/i)===0},rgb2hex:function(r){return r=r.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),r&&r.length===4?"#"+("0"+parseInt(r[1],10).toString(16)).slice(-2)+("0"+parseInt(r[2],10).toString(16)).slice(-2)+("0"+parseInt(r[3],10).toString(16)).slice(-2):""},hex2long:function(r){return r.search(/^#/)!==-1&&r.length===4&&(r="#"+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]),r},escapeRegExp:function(r){return r.replace(/[-\/\\^$*~+?.()|[\]{}]/g,"\\$&")},getRandomId:function(){for(var r="",h="abcdefghijklmnopqrstuvwxyz0123456789",u=0;u<12;u++)r+=h.charAt(Math.floor(Math.random()*h.length));return r},_getFirst:function(r){return r.length!==0?r[0]:!1},_getLast:function(r){return r.length!==0?r[r.length-1]:!1}}),c.add("service","progress",{init:function(r){this.app=r,this.$box=null,this.$bar=null},show:function(){this._is()||this._build(),this.$box.show()},hide:function(){this._is()&&this.animate.start(this.$box,"fadeOut",this._destroy.bind(this))},update:function(r){this.show(),this.$bar.css("width",r+"%")},_is:function(){return this.$box!==null},_build:function(){this.$bar=c.dom("<span />"),this.$box=c.dom('<div id="redactor-progress" />'),this.$box.append(this.$bar),this.$body.append(this.$box)},_destroy:function(){this._is()&&this.$box.remove(),this.$box=null,this.$bar=null}}),c.add("module","starter",{init:function(r){this.app=r,this.opts=r.opts,this.plugin=r.plugin,this.module=r.module},onstart:function(){var r=["element","container","source","editor","statusbar","toolbar"],h=["element","container","source","editor","statusbar","contextbar","input"];this._startStop("start",this.app,r),this._startStop("start",this.module,h)},onstop:function(){var r=["observer","element","container","source","editor","contextbar"];this._startStop("stop",this.module,r)},onenable:function(){var r=["observer","toolbar"],h=this.opts.plugins;this._startStop("start",this.module,r),this._startStop("start",this.plugin,h)},ondisable:function(){var r=["observer","toolbar"],h=this.opts.plugins;this._startStop("stop",this.module,r),this._startStop("stop",this.plugin,h)},_startStop:function(r,h,u){for(var m=0;m<u.length;m++)typeof h[u[m]]<"u"&&this.app.callInstanceMethod(h[u[m]],r)}}),c.add("module","element",{init:function(r){this.app=r,this.uuid=r.uuid,this.opts=r.opts,this.namespace=r.namespace,this.element=r.element,this.rootOpts=c.extend({},!0,c.options,r.rootOpts)},start:function(){this._build(),this._buildModes(),this._buildMarkup()},stop:function(){var r=this.element.getElement();r.removeData(this.namespace+"-uuid")},_build:function(){var r=this.element.getElement();r.data(this.namespace+"-uuid",this.uuid)},_buildModes:function(){var r=this.element.getType();r==="inline"&&this._redefineOptions(this.opts.modes.inline),r==="div"&&this._redefineOptions(this.opts.modes.original),r!=="inline"&&(this._isRootOption("styles")&&this.rootOpts.styles&&(this.opts.styles=!0),this._isRootOption("source")&&!this.rootOpts.source&&(this.opts.showSource=!1))},_buildMarkup:function(){var r=this.element.getType();r==="inline"?this.opts.emptyHtml="":this.opts.breakline?(this.opts.markup="div",this.opts.emptyHtml='<div data-redactor-tag="br">'+this.opts.markerChar+"</div>"):this.opts.emptyHtml="<"+this.opts.markup+"></"+this.opts.markup+">"},_redefineOptions:function(r){for(var h in r)this.opts[h]=r[h]},_isRootOption:function(){return typeof this.rootOpts.styles<"u"}}),c.add("module","editor",{init:function(r){this.app=r,this.uuid=r.uuid,this.opts=r.opts,this.editor=r.editor,this.source=r.source,this.element=r.element,this.component=r.component,this.container=r.container,this.inspector=r.inspector,this.autoparser=r.autoparser,this.placeholder=!1,this.events=!1},onenable:function(){this.enable()},ondisable:function(){this.disable()},onenablefocus:function(){this._enableFocus()},oncontextmenu:function(r){this.component.setOnEvent(r,!0)},onclick:function(r){this.component.setOnEvent(r)},onkeyup:function(r){var h=this.inspector.parse(r.target);h.isComponent()||this.component.clearActive()},onenablereadonly:function(){this._enableReadOnly()},ondisablereadonly:function(){this._disableReadOnly()},onautoparseobserve:function(){this.autoparser.observe()},onplaceholder:{build:function(){this._buildPlaceholder()},toggle:function(){this._togglePlacehodler()}},start:function(){this._build(),this._buildEvents(),this._buildOptions(),this._buildAccesibility()},stop:function(){var r=this.editor.getElement(),h=this.container.getElement(),u=["redactor-in","redactor-in-"+this.uuid,"redactor-structure","redactor-placeholder","notranslate"];this.opts.stylesClass!==""&&u.push(this.opts.stylesClass);var m=["redactor-focus","redactor-blur","redactor-over","redactor-styles-on","redactor-styles-off","redactor-toolbar-on","redactor-text-labeled-on","redactor-source-view"];r.removeAttr("spellcheck"),r.removeAttr("dir"),r.removeAttr("contenteditable"),r.removeAttr("placeholder"),r.removeAttr("data-gramm_editor"),r.removeClass(u.join(" ")),h.removeClass(m.join(" ")),this._destroyEvents(),r.get().classList.length===0&&r.removeAttr("class")},enable:function(){var r=this.editor.getElement(),h=this.container.getElement();r.addClass("redactor-in redactor-in-"+this.uuid),r.attr({contenteditable:!0}),this.opts.structure&&r.addClass("redactor-structure"),this.opts.toolbar&&!this.opts.air&&!this.opts.toolbarExternal&&h.addClass("redactor-toolbar-on"),this._disableBrowsersEditing()},disable:function(){var r=this.editor.getElement(),h=this.container.getElement();r.removeClass("redactor-in redactor-in-"+this.uuid),r.removeClass("redactor-structure"),r.removeAttr("contenteditable"),h.addClass("redactor-toolbar-on")},_build:function(){var r=this.editor.getElement(),h=this.element.getElement(),u=this.container.getElement();u.addClass("redactor-blur"),this.opts.grammarly||r.attr("data-gramm_editor",!1),this.opts.notranslate&&r.addClass("notranslate"),this.opts.styles?(r.addClass(this.opts.stylesClass),u.addClass("redactor-styles-on")):u.addClass("redactor-styles-off"),this.opts.buttonsTextLabeled&&u.addClass("redactor-text-labeled-on"),this.element.isType("textarea")&&h.before(r)},_buildEvents:function(){this.events=c.create("editor.events",this.app)},_buildOptions:function(){var r=this.editor.getElement();r.attr("dir",this.opts.direction),this.opts.spellcheck||r.attr("spellcheck",!1),this.opts.tabindex&&r.attr("tabindex",this.opts.tabindex),this.opts.minHeight&&r.css("min-height",this.opts.minHeight),this.opts.maxHeight&&r.css("max-height",this.opts.maxHeight),this.opts.maxWidth&&r.css({"max-width":this.opts.maxWidth,margin:"auto"})},_buildAccesibility:function(){var r=this.editor.getElement();r.attr({"aria-labelledby":"redactor-voice-"+this.uuid,role:"presentation"})},_buildPlaceholder:function(){this.placeholder=c.create("editor.placeholder",this.app)},_enableFocus:function(){this.opts.showSource?this._enableFocusSource():this._enableFocusEditor()},_enableFocusSource:function(){var r=this.source.getElement();this.opts.focus?(r.focus(),r.get().setSelectionRange(0,0)):this.opts.focusEnd&&r.focus()},_enableFocusEditor:function(){this.opts.focus?setTimeout(this.editor.startFocus.bind(this.editor),100):this.opts.focusEnd&&setTimeout(this.editor.endFocus.bind(this.editor),100)},_togglePlacehodler:function(){this.placeholder&&this.placeholder.toggle()},_disableBrowsersEditing:function(){try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1),document.execCommand("AutoUrlDetect",!1,!1);var r=this.editor.getElement(),h=r.get();h.addEventListener?h.addEventListener("mscontrolselect",function(u){u.preventDefault()}):h.attachEvent("oncontrolselect",function(u){u.returnValue=!1})}catch{}},_destroyEvents:function(){this.events&&this.events.destroy()},_enableReadOnly:function(){var r=this.editor.getElement();this._getEditables(r).removeAttr("contenteditable"),r.removeAttr("contenteditable"),r.addClass("redactor-read-only"),this.events&&this.events.destroy()},_disableReadOnly:function(){var r=this.editor.getElement();this._getEditables(r).attr({contenteditable:!0}),r.removeClass("redactor-read-only"),r.attr({contenteditable:!0}),this._buildEvents()},_getEditables:function(r){return r.find("figcaption, td, th")}}),c.add("class","editor.placeholder",{init:function(r){this.app=r,this.opts=r.opts,this.editor=r.editor,this.element=r.element,this.build()},build:function(){var r=this.element.getElement(),h=this.editor.getElement();if(this.opts.placeholder!==!1||r.attr("placeholder")){var u=this.opts.placeholder!==!1?this.opts.placeholder:r.attr("placeholder");h.attr("placeholder",u),this.toggle()}},toggle:function(){return this.editor.isEmpty(!0)?this.show():this.hide()},show:function(){var r=this.editor.getElement();r.addClass("redactor-placeholder")},hide:function(){var r=this.editor.getElement();r.removeClass("redactor-placeholder")}}),c.add("class","editor.events",{init:function(r){this.app=r,this.opts=r.opts,this.$doc=r.$doc,this.uuid=r.uuid,this.source=r.source,this.editor=r.editor,this.cleaner=r.cleaner,this.container=r.container,this.insertion=r.insertion,this.inspector=r.inspector,this.selection=r.selection,this.component=r.component,this.blurNamespace=".redactor-blur."+this.uuid,this.eventsList=["paste","click","contextmenu","keydown","keyup","mouseup","touchstart","cut","copy","dragenter","dragstart","drop","dragover","dragleave"],this._init()},destroy:function(){var r=this.editor.getElement();r.off(".redactor-focus"),this.$doc.off("keyup"+this.blurNamespace+" mousedown"+this.blurNamespace),this._loop("off")},focus:function(r){var h=this.container.getElement();this.editor.isPasting()||h.hasClass("redactor-focus")||(h.addClass("redactor-focus"),h.removeClass("redactor-blur"),this.app.broadcast("observe",r),this.app.broadcast("focus",r),this.isFocused=!0,this.isBlured=!1)},blur:function(r){var h=this.container.getElement(),u=c.dom(r.target),m=[".redactor-in-"+this.uuid,".redactor-toolbar",".redactor-dropdown",".redactor-context-toolbar",".redactor-modal-box","#redactor-image-resizer"];this.app.broadcast("originalblur",r),!this.app.stopBlur&&(!this.app.isStarted()||this.editor.isPasting()||u.closest(m.join(",")).length===0&&!this.isBlured&&!h.hasClass("redactor-blur")&&(h.removeClass("redactor-focus"),h.addClass("redactor-blur"),this.app.broadcast("blur",r),this.isFocused=!1,this.isBlured=!0))},cut:function(r){var h=this.selection.getCurrent(),u=this.inspector.parse(h);this.app.broadcast("state",r),this.component.isNonEditable(h)&&(this._passSelectionToClipboard(r,u,!0),r.preventDefault())},copy:function(r){var h=this.selection.getCurrent(),u=this.inspector.parse(h);this.app.broadcast("state",r),this.component.isNonEditable(h)&&(this._passSelectionToClipboard(r,u,!1),r.preventDefault())},drop:function(r){if(r=r.originalEvent||r,r.stopPropagation(),this._removeOverClass(),this.opts.dragUpload===!1){r.preventDefault();return}if(this.app.isDragComponentInside()){var h=c.dom(this.app.getDragComponentInside()),u=h.clone(!0);this.insertion.insertToPoint(r,u),h.remove(),this.app.setDragComponentInside(!1),this.app.broadcast("state",r),this.app.broadcast("drop",r),this.app.broadcast("image.observe",r),r.preventDefault();return}else if(this.app.isDragInside()&&this.opts.input){this.insertion.insertPoint(r);var m=r.dataTransfer,y=m.getData("text/html"),v=this.selection.getRange();if(v){var w=this.selection.getBlocks();v.deleteContents();for(var S=0;S<w.length;S++)w[S].innerHTML===""&&c.dom(w[S]).remove()}c.create("input.paste",this.app,r,!0,y,!0),this.app.broadcast("state",r),this.app.broadcast("drop",r),this.app.setDragInside(!1),r.preventDefault();return}this.app.broadcast("state",r),this.app.broadcast("paste",r,r.dataTransfer),this.app.broadcast("drop",r)},dragenter:function(r){r.preventDefault()},dragstart:function(r){this.app.setDragComponentInside(!1),this.app.setDragInside(!1);var h=this.inspector.parse(r.target);h.isComponent()&&!h.isComponentEditable()&&!h.isFigcaption()?this.app.setDragComponentInside(h.getComponent()):this.selection.is()&&!this.selection.isCollapsed()&&(this.app.setDragInside(!0),this._setDragData(r)),this.app.broadcast("dragstart",r)},dragover:function(r){this.app.broadcast("dragover",r)},dragleave:function(r){this.app.broadcast("dragleave",r)},paste:function(r){this.app.broadcast("paste",r)},contextmenu:function(r){},click:function(r){if(r.detail===3){r.preventDefault();var h=this.selection.getBlock();if(h){var u=document.createRange();u.selectNodeContents(h),this.selection.setRange(u)}}var m=c.dom(r.target);if(m.hasClass("redactor-in")){var y=m.offset().top,v=parseFloat(m.css("padding-bottom")),w=m.height(),S=y+w-v*2;S<r.pageY?this.app.broadcast("bottomclick",r):m.hasClass("redactor-placeholder")&&this.editor.startFocus(this.editor)}this.app.broadcast("state",r),this.app.broadcast("click",r)},keydown:function(r){this.app.broadcast("state",r);var h=this.app.broadcast("keydown",r);if(h===!1)return r.preventDefault()},keyup:function(r){this.app.broadcast("keyup",r)},mouseup:function(r){this.app.broadcast("observe",r),this.app.broadcast("state",r)},touchstart:function(r){this.app.broadcast("observe",r),this.app.broadcast("state",r)},_init:function(){var r=this.editor.getElement();r.on("focus.redactor-focus click.redactor-focus",this.focus.bind(this)),this.$doc.on("keyup"+this.blurNamespace+" mousedown"+this.blurNamespace,this.blur.bind(this)),this._loop("on")},_removeOverClass:function(){var r=this.editor.getElement();r.removeClass("over")},_loop:function(r){for(var h=this.editor.getElement(),u=0;u<this.eventsList.length;u++){var m=this.eventsList[u]+".redactor-events",y=this.eventsList[u];h[r](m,this[y].bind(this))}},_passAllToClipboard:function(r){var h=r.clipboardData,u=this.source.getCode();h.setData("text/html",u),h.setData("text/plain",u.toString().replace(/\n$/,""))},_passSelectionToClipboard:function(r,h,u){var m=r.clipboardData,y=h.getComponent(),v=c.dom(y),w=v.clone();w.find(".redactor-component-caret").remove(),w.removeClass("redactor-component-active"),w.removeAttr("contenteditable"),w.removeAttr("tabindex");var S=w.get().outerHTML;u&&this.component.remove(y),m.setData("text/html",S),m.setData("text/plain",S.toString().replace(/\n$/,""))},_setDragData:function(r){r=r.originalEvent||r;var h=r.dataTransfer;h.effectAllowed="move",h.setData("text/Html",this.selection.getHtml())}}),c.add("module","container",{init:function(r){this.app=r,this.uuid=r.uuid,this.opts=r.opts,this.lang=r.lang,this.element=r.element,this.container=r.container},start:function(){this._build(),this._buildAccesibility()},stop:function(){var r=this.element.getElement(),h=this.container.getElement();h.after(r),h.remove(),r.show()},_build:function(){var r=this.element.getElement(),h=this.container.getElement();h.addClass("redactor-box"),h.attr("dir",this.opts.direction),this.element.isType("inline")&&h.addClass("redactor-inline"),r.after(h),h.append(r)},_buildAccesibility:function(){var r=this.container.getElement(),h=c.dom("<span />");h.addClass("redactor-voice-label"),h.attr({id:"redactor-voice-"+this.uuid,"aria-hidden":!1}),h.html(this.lang.get("accessibility-help-label")),r.prepend(h)}}),c.add("module","source",{init:function(r){this.app=r,this.uuid=r.uuid,this.opts=r.opts,this.utils=r.utils,this.element=r.element,this.source=r.source,this.editor=r.editor,this.toolbar=r.toolbar,this.cleaner=r.cleaner,this.component=r.component,this.container=r.container,this.autoparser=r.autoparser,this.selection=r.selection,this.syncedHtml=""},onstartcode:function(){var r=this.source.getStartedContent(),h=this.editor.getElement(),u=this.source.getElement();this.opts.autoparse&&this.opts.autoparseStart&&(r=this.autoparser.parse(r));var m=this.cleaner.input(r,!0,!0),y=this.cleaner.output(m);h.html(m),u.val(y),this.syncedHtml=y,this.app.broadcast("placeholder.build"),this.app.broadcast("autoparseobserve"),this.component.executeScripts()},onstartcodeshow:function(){this.show()},ontrytosync:function(){this.sync()},onhardsync:function(){var r=this.editor.getElement(),h=r.html();h=this.app.broadcast("syncBefore",h),h=this.cleaner.output(h),this._syncing(h)},start:function(){this._build(),this._buildClasses()},stop:function(){var r=this.element.getElement(),h=this.source.getElement();r.removeClass("redactor-source redactor-source-open"),h.off("input.redactor-source"),h.removeAttr("data-gramm_editor"),h.get().classList.length===0&&h.removeAttr("class"),this.source.isNameGenerated()||r.removeAttr("name"),this.element.isType("textarea")||h.remove()},getCode:function(){return this.source.getCode()},toggle:function(){if(this.opts.source){var r=this.source.getElement();return r.hasClass("redactor-source-open")?this.hide():this.show()}},show:function(){if(this.opts.source){var r=this.editor.getElement(),h=this.source.getElement(),u=this.container.getElement(),m=h.val();this.app.isStarted()&&(m=this.app.broadcast("source.open",m));var y=r.height();if(r.hide(),h.height(y),h.val(m.trim()),h.show(),h.addClass("redactor-source-open"),h.on("input.redactor-source-events",this._onChangedSource.bind(this)),h.on("keydown.redactor-source-events",this._onTabKey.bind(this)),h.on("focus.redactor-source-events",this._onFocus.bind(this)),this.opts.source.hasOwnProperty("codemirror")){var v=typeof this.opts.source.codemirror=="object"?this.opts.source.codemirror:{},w=typeof this.opts.source.codemirrorSrc<"u"?this.opts.source.codemirrorSrc:If;this.codemirror=w.fromTextArea(h.get(),v),this.codemirror.setSize(null,y),this.codemirror.on("change",function(S,C){S.save()}),this.codemirror.on("change",this._onChangedSource.bind(this))}else u.addClass("redactor-source-view");setTimeout((function(){this._disableButtons(),this._setActiveSourceButton()}).bind(this),100),this.app.isStarted()&&this.app.broadcast("source.opened")}},hide:function(){if(this.opts.source){var r=this.editor.getElement(),h=this.source.getElement(),u=this.container.getElement(),m=h.val();this.opts.source.hasOwnProperty("codemirror")&&(m=this.codemirror.getValue(),this.codemirror.toTextArea()),m=this.cleaner.input(m,!0),m=this.utils.isEmptyHtml(m)?this.opts.emptyHtml:m,m=this.app.broadcast("source.close",m),this._enableButtons(),this._setInactiveSourceButton(),h.hide(),h.removeClass("redactor-source-open"),h.off(".redactor-source-events"),r.show(),r.html(m),u.removeClass("redactor-source-view"),setTimeout((function(){this.editor.startFocus(),this.component.executeScripts()}).bind(this),0),this.app.broadcast("source.closed")}},sync:function(){var r=this,h=this.editor.getElement(),u=h.html();u=this.app.broadcast("syncBefore",u),u=this.cleaner.output(u),this._isSync(u)&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){r._syncing(u)},200))},_build:function(){var r=this.source.getElement(),h=this.element.getElement();r.hide(),this.opts.grammarly||r.attr("data-gramm_editor",!1),this.element.isType("textarea")||h.after(r)},_buildClasses:function(){var r=this.source.getElement();r.addClass("redactor-source")},_syncing:function(r){r=this.app.broadcast("syncing",r);var h=this.source.getElement();h.val(r),this.app.broadcast("synced",r),this.app.broadcast("changed",r)},_isSync:function(r){return this.syncedHtml!==r?(this.syncedHtml=r,!0):!1},_onChangedSource:function(){var r=this.source.getElement(),h=r.val();this.app.broadcast("changed",h),this.app.broadcast("source.changed",h)},_onTabKey:function(r){if(r.keyCode!==9)return!0;r.preventDefault();var h=this.source.getElement(),u=h.get(),m=u.selectionStart;h.val(h.val().substring(0,m)+"    "+h.val().substring(u.selectionEnd)),u.selectionStart=u.selectionEnd=m+4},_onFocus:function(){this.app.broadcast("sourcefocus")},_disableButtons:function(){this.toolbar.disableButtons()},_enableButtons:function(){this.toolbar.enableButtons()},_setActiveSourceButton:function(){var r=this.toolbar.getButton("html");r.enable(),r.setActive()},_setInactiveSourceButton:function(){var r=this.toolbar.getButton("html");r.setInactive()}}),c.add("module","observer",{init:function(r){this.app=r,this.editor=r.editor,this.observerUnit=!1},start:function(){if(window.MutationObserver){var r=this.editor.getElement(),h=r.get();this.observerUnit=this._build(h),this.observerUnit.observe(h,{attributes:!0,subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0})}},stop:function(){this.observerUnit&&this.observerUnit.disconnect()},_build:function(r){var h=this;return new MutationObserver(function(u){h._observe(u[u.length-1],r)})},_observe:function(r,h){this.app.isReadOnly()||r.type==="attributes"&&r.target===h||(this.app.broadcast("observe"),this.app.broadcast("trytosync"),this.app.broadcast("placeholder.toggle"))}}),c.add("module","clicktoedit",{init:function(r){this.app=r,this.opts=r.opts,this.source=r.source,this.editor=r.editor,this.container=r.container,this.selection=r.selection},onstartclicktoedit:function(){this.start()},onenablereadonly:function(){this.opts.clickToEdit&&(this._isEnabled()||this.stop())},ondisablereadonly:function(){this.opts.clickToEdit&&(this._isEnabled()||this.start())},onstop:function(){this.stop()},start:function(){this._build()},stop:function(){this.buttonSave&&this.buttonSave.stop(),this.buttonCancel&&this.buttonCancel.stop(),this._destroy(),this.app.broadcast("disable")},enable:function(){this.app.broadcast("clickStart");var r=this.editor.isEmpty();r||this.selection.saveMarkers(),this._setFocus(),this._destroy(),this.app.broadcast("enable"),this.buttonSave.enable(),this.buttonCancel.enable(),r||this.selection.restoreMarkers(),r&&this.editor.focus();var h=this.container.getElement();h.addClass("redactor-clicktoedit-enabled"),this.source.rebuildStartedContent(),this.app.broadcast("startcode"),this.app.broadcast("image.observe")},save:function(r){r&&r.preventDefault();var h=this.source.getCode();this.app.broadcast("disable"),this.app.broadcast("clickSave",h),this.app.broadcast("clickStop"),this.app.broadcast("toolbar.removeexternal"),this._build()},cancel:function(r){r&&r.preventDefault();var h=this.saved,u=this.editor.getElement();u.html(h),this.saved="",this.app.broadcast("disable"),this.app.broadcast("clickCancel",h),this.app.broadcast("clickStop"),this.app.broadcast("toolbar.removeexternal"),this._build()},_build:function(){this.buttonSave=c.create("clicktoedit.button","save",this.app,this),this.buttonCancel=c.create("clicktoedit.button","cancel",this.app,this),this.buttonSave.stop(),this.buttonCancel.stop();var r=this.editor.getElement(),h=this.container.getElement();r.on("click.redactor-click-to-edit mouseup.redactor-click-to-edit",this.enable.bind(this)),h.addClass("redactor-over"),h.removeClass("redactor-clicktoedit-enabled")},_isEnabled:function(){return this.container.getElement().hasClass("redactor-clicktoedit-enabled")},_destroy:function(){var r=this.editor.getElement(),h=this.container.getElement();r.off(".redactor-click-to-edit"),h.removeClass("redactor-over redactor-clicktoedit-enabled")},_setFocus:function(){this.saved=this.source.getCode(),this.buttonSave.start(),this.buttonCancel.start()}}),c.add("class","clicktoedit.button",{init:function(r,h,u){this.app=h,this.opts=h.opts,this.toolbar=h.toolbar,this.context=u,this.type=r,this.name=r==="save"?"clickToSave":"clickToCancel",this.objected=!1,this.enabled=!1,this.namespace=".redactor-click-to-edit",this._build()},enable:function(){if(this.objected){var r=this.opts[this.name];r.api="module.clicktoedit."+this.type,this.toolbar.addButton(this.type,r),this.enabled=!0}},start:function(){this.objected||(this.$button.off(this.namespace),this.$button.show(),this.$button.on("click"+this.namespace,this.context[this.type].bind(this.context)))},stop:function(){this.objected||!this.enabled||this.$button.hide()},_build:function(){this.objected=typeof this.opts[this.name]=="object",this.objected||(this.$button=c.dom(this.opts[this.name]),this.enabled=!0)}}),c.add("module","statusbar",{init:function(r){this.app=r,this.opts=r.opts,this.element=r.element,this.statusbar=r.statusbar,this.container=r.container},start:function(){if(!this.element.isType("inline")){var r=this.statusbar.getElement(),h=this.container.getElement();r.addClass("redactor-statusbar"),h.append(r)}}}),c.add("module","contextbar",{init:function(r){this.app=r,this.opts=r.opts,this.uuid=r.uuid,this.$win=r.$win,this.$doc=r.$doc,this.$body=r.$body,this.editor=r.editor,this.toolbar=r.toolbar,this.detector=r.detector,this.$target=this.toolbar.isTarget()?this.toolbar.getTargetElement():this.$body},onstop:function(){this.stop()},onenablereadonly:function(){this.stop()},ondisablereadonly:function(){this.start()},oncontextbar:{close:function(){this.close()}},start:function(){if(this.opts.toolbarContext){var r=this.editor.getElement();this._build(),r.on("click.redactor-context mouseup.redactor-context",this.open.bind(this)),this.opts.scrollTarget?c.dom(this.opts.scrollTarget).on("scroll.redactor-context",this.close.bind(this)):this.opts.maxHeight!==!1&&r.on("scroll.redactor-context",this.close.bind(this))}},stop:function(){var r=this.editor.getElement();r.off(".redactor-context"),this.$doc.off(".redactor-context"),this.$win.off(".redactor-context"),this.$contextbar&&this.$contextbar.remove(),this.opts.scrollTarget&&c.dom(this.opts.scrollTarget).off(".redactor-context")},is:function(){return this.$contextbar&&this.$contextbar.hasClass("open")},set:function(r,h,u,m){this.$contextbar.html(""),this.$el=c.dom(h);for(var y in u){var v=c.create("contextbar.button",this.app,u[y]);v.html()!==""&&this.$contextbar.append(v)}var w=this._buildPosition(r,this.$el,m);this.$contextbar.css(w),this.$contextbar.show(),this.$contextbar.addClass("open"),this.$doc.on("click.redactor-context mouseup.redactor-context",this.close.bind(this)),this.$win.on("resize.redactor-context",this.close.bind(this))},open:function(r){setTimeout((function(){this.app.broadcast("contextbar",r,this)}).bind(this),0)},close:function(r){if(this.$contextbar){if(r){var h=c.dom(r.target);if(this.$el&&h.closest(this.$el).length!==0)return}this.$contextbar.hide(),this.$contextbar.removeClass("open"),this.$doc.off(".redactor.context")}},_build:function(){this.$contextbar=c.dom("<div>"),this.$contextbar.attr("id","redactor-context-toolbar-"+this.uuid),this.$contextbar.attr("dir",this.opts.direction),this.$contextbar.addClass("redactor-context-toolbar"),this.$contextbar.hide(),this.$target.append(this.$contextbar)},_buildPosition:function(r,h,u){var m,y,v=this.toolbar.isTarget(),w=v?h.position():h.offset(),S=h.width(),C=h.height(),T=this.$contextbar.width(),_=this.$contextbar.height(),$=v?this.$target.scrollTop()+this.$doc.scrollTop():this.$doc.scrollTop(),N=this.$target.offset(),P=v?N.left:0,E=v?N.top:0;return u?u==="top"?(m=w.top-_,y=w.left+S/2-T/2):u==="bottom"&&(m=w.top+C,y=w.left+S/2-T/2):(m=r.clientY+$-_,y=r.clientX-T/2),y<0&&(y=0),{top:m-E+"px",left:y-P+"px"}}}),c.add("class","contextbar.button",{mixins:["dom"],init:function(r,h){this.app=r,this.obj=h,this._init()},_init:function(){if(this.parse("<a>"),typeof this.obj.title!="string"){var r=this.obj.title.attr("href");this.attr("href",r),r.search(/^#/)===-1&&this.attr("target","_blank"),this.text(this.obj.html||r)}else this.attr("href","#"),this._buildTitle(),this._buildMessage()},_buildTitle:function(){this.html(this.obj.title)},_buildMessage:function(){(typeof this.obj.message<"u"||typeof this.obj.api<"u")&&this.on("click",this._toggle.bind(this))},_toggle:function(r){r.preventDefault(),this.obj.message?this.app.broadcast(this.obj.message,this.obj.args):this.obj.api&&this.app.api(this.obj.api,this.obj.args)}}),c.add("module","toolbar",{init:function(r){this.app=r,this.uuid=r.uuid,this.opts=r.opts,this.utils=r.utils,this.toolbar=r.toolbar,this.detector=r.detector,this.buttons=[],this.toolbarModule=!1},onsource:{open:function(){!this.toolbar.isAir()&&this.toolbar.isFixed()&&this.toolbarModule.resetPosition()},opened:function(){this.toolbar.isAir()&&this.toolbarModule&&this.toolbarModule.createSourceHelper(),setTimeout((function(){c.dom(".re-button-tooltip-"+this.uuid).remove()}).bind(this),100)},close:function(){this.toolbar.isAir()&&this.toolbarModule&&this.toolbarModule.destroySourceHelper()},closed:function(){this.toolbar.is()&&this.opts.air&&this.toolbarModule.openSelected()}},ontoolbar:{removeexternal:function(){!this.opts.air&&this.opts.toolbarExternal&&this.opts.clickToEdit&&c.dom(this.opts.toolbarExternal).html("")}},onobserve:function(){this.toolbar.is()&&this.toolbar.observe()},onfocus:function(){this._setExternalOnFocus()},onsourcefocus:function(){this._setExternalOnFocus()},onempty:function(){this.toolbar.isFixed()&&this.toolbarModule.resetPosition()},onenablereadonly:function(){this.toolbar.isAir()&&this.toolbarModule.close()},start:function(){this.toolbar.is()&&(this._buildButtons(),this._initToolbar(),this._initButtons())},stop:function(){this.toolbarModule&&this.toolbarModule.stop(),c.dom(".re-button-tooltip-"+this.uuid).remove(),c.dom(".redactor-dropdown-"+this.uuid).remove()},_buildButtons:function(){this.buttons=this.opts.buttons.concat(),this._buildImageButton(),this._buildFileButton(),this._buildSourceButton(),this._buildAdditionalButtons(),this._buildHiddenButtons()},_buildImageButton:function(){!this.opts.imageUpload&&!this.opts.imageManagerJson&&this.utils.removeFromArrayByValue(this.buttons,"image")},_buildFileButton:function(){this.opts.fileUpload||this.utils.removeFromArrayByValue(this.buttons,"file")},_buildSourceButton:function(){this.opts.source||this.utils.removeFromArrayByValue(this.buttons,"html")},_buildAdditionalButtons:function(){this.opts.buttonsAdd.length!==0&&(this.opts.buttonsAdd=this._removeExistButtons(this.opts.buttonsAdd),this.buttons=this.buttons.concat(this.opts.buttonsAdd)),this.opts.buttonsAddFirst.length!==0&&(this.opts.buttonsAddFirst=this._removeExistButtons(this.opts.buttonsAddFirst),this.buttons.unshift(this.opts.buttonsAddFirst));var r,h;if(this.opts.buttonsAddAfter!==!1){r=this.buttons.indexOf(this.opts.buttonsAddAfter.after)+1,h=this.opts.buttonsAddAfter.buttons;for(var u=0;u<h.length;u++)this.buttons.splice(r+u,0,h[u])}if(this.opts.buttonsAddBefore!==!1){r=this.buttons.indexOf(this.opts.buttonsAddBefore.before)+1,h=this.opts.buttonsAddBefore.buttons;for(var u=0;u<h.length;u++)this.buttons.splice(r-(1-u),0,h[u])}},_buildHiddenButtons:function(){if(this.opts.buttonsHide.length!==0)for(var r=this.opts.buttonsHide,h=0;h<r.length;h++)this.utils.removeFromArrayByValue(this.buttons,r[h]);if(this.detector.isMobile()&&this.opts.buttonsHideOnMobile.length!==0)for(var r=this.opts.buttonsHideOnMobile,h=0;h<r.length;h++)this.utils.removeFromArrayByValue(this.buttons,r[h])},_removeExistButtons:function(r){for(var h=0;h<r.length;h++)this.opts.buttons.indexOf(r[h])!==-1&&this.utils.removeFromArrayByValue(r,r[h]);return r},_setExternalOnFocus:function(){!this.opts.air&&this.opts.toolbarExternal&&this.toolbarModule.setExternal()},_initToolbar:function(){this.toolbarModule=this.opts.air?c.create("toolbar.air",this.app):c.create("toolbar.standard",this.app)},_initButtons:function(){this.toolbar.setButtons(this.buttons);for(var r=0;r<this.buttons.length;r++){var h=this.buttons[r];c.buttons[h]&&this.toolbar.addButton(h,c.extend(!0,{},c.buttons[h]),!1,!1,!0)}}}),c.add("class","toolbar.air",{init:function(r){this.app=r,this.uuid=r.uuid,this.$doc=r.$doc,this.$win=r.$win,this.utils=r.utils,this.editor=r.editor,this.animate=r.animate,this.toolbar=r.toolbar,this.container=r.container,this.inspector=r.inspector,this.selection=r.selection,this.clicks=0,this._init()},stop:function(){var r=this.toolbar.getWrapper();r.remove();var h=this.editor.getElement();h.off(".redactor-air-trigger-"+this.uuid),this.$doc.off(".redactor-air-"+this.uuid),this.$doc.off(".redactor-air-trigger-"+this.uuid),this.toolbar.stopObservers()},createSourceHelper:function(){this.$airHelper=c.dom("<span>"),this.$airHelper.addClass("redactor-air-helper"),this.$airHelper.html('<i class="re-icon-html"></i>'),this.$airHelper.on("click",(function(h){h.preventDefault(),this.app.api("module.source.hide")}).bind(this));var r=this.container.getElement();r.append(this.$airHelper)},destroySourceHelper:function(){this.$airHelper&&this.$airHelper.remove()},openSelected:function(){setTimeout((function(){this._isSelection()&&this._open(!1)}).bind(this),0)},close:function(){this.$doc.off(".redactor-air-"+this.uuid);var r=this.toolbar.getElement();r.removeClass("open"),r.hide()},_init:function(){this.toolbar.create();var r=this.toolbar.getWrapper(),h=this.toolbar.getElement(),u=this.editor.getElement(),m=this.container.getElement();r.addClass("redactor-toolbar-wrapper-air"),h.addClass("redactor-air"),h.hide(),r.append(h),m.prepend(r),this.openSelected(),this.$doc.on("mouseup.redactor-air-trigger-"+this.uuid,this._open.bind(this)),u.on("keyup.redactor-air-trigger-"+this.uuid,this._openCmd.bind(this))},_isSelection:function(){return this.selection.is()&&!this.selection.isCollapsed()},_isOpened:function(){var r=this.toolbar.getElement();return r.hasClass("open")},_open:function(r){var h=r?r.target:!1,u=r?c.dom(r.target):!1,m=this.inspector.parse(h),y=m.isComponent()&&!m.isComponentType("table"),v=m.isFigcaption(),w=u&&u.closest(".redactor-modal").length!==0,S=r&&u.closest(".re-button").length!==0,C=r&&u.closest(".redactor-dropdown").length!==0;if(!(C||S||w||v||y||this.toolbar.isContextBar()||!this._isSelection())){var T=this.selection.getPosition();setTimeout((function(){this.app.isReadOnly()||this._isSelection()&&this._doOpen(T)}).bind(this),1)}},_openCmd:function(){if(this.selection.isAll()){var r=this.toolbar.getElement(),h=this.selection.getPosition();h.top=h.top<20?0:h.top-r.height(),h.height=0,this._doOpen(h)}},_doOpen:function(r){var h=this.toolbar.getWrapper(),u=this.toolbar.getElement(),m=this.container.getElement(),y=m.offset(),v=0,w=this.$win.width(),S=u.width();if(w<r.left+S){var C=this.selection.getPosition();v=S-C.width}h.css({left:r.left-y.left-v+"px",top:r.top-y.top+r.height+this.$doc.scrollTop()+"px"}),this.app.broadcast("airOpen"),u.addClass("open"),u.show(),this.$doc.on("click.redactor-air-"+this.uuid,this._close.bind(this)),this.$doc.on("keydown.redactor-air-"+this.uuid,this._close.bind(this)),this.app.broadcast("airOpened")},_close:function(r){var h=r?c.dom(r.target):!1,u=r&&h.closest("[data-dropdown], .redactor-dropdown-not-close").length!==0,m=!u&&r&&h.closest(".re-button").length!==0;!m&&(u||!this._isOpened())||(this.app.broadcast("airClose"),this.close(),this.app.broadcast("airClosed"))}}),c.add("class","toolbar.fixed",{init:function(r){this.app=r,this.uuid=r.uuid,this.opts=r.opts,this.$doc=r.$doc,this.$win=r.$win,this.editor=r.editor,this.toolbar=r.toolbar,this.detector=r.detector,this.container=r.container,this._init()},stop:function(){this.$fixedTarget.off(".redactor-toolbar-"+this.uuid),this.$win.off(".redactor-toolbar-"+this.uuid)},reset:function(){var r=this.toolbar.getElement(),h=this.toolbar.getWrapper();h.css("height",""),r.removeClass("redactor-toolbar-fixed"),r.css({position:"",top:"",left:"",width:""});var u=this.toolbar.getDropdown();u&&u.updatePosition()},_init:function(){this.$fixedTarget=this.toolbar.isTarget()?this.toolbar.getTargetElement():this.$win,this._doFixed(),this.toolbar.isTarget()&&(this.$win.on("scroll.redactor-toolbar-"+this.uuid,this._doFixed.bind(this)),this.$win.on("resize.redactor-toolbar-"+this.uuid,this._doFixed.bind(this))),this.$fixedTarget.on("scroll.redactor-toolbar-"+this.uuid,this._doFixed.bind(this)),this.$fixedTarget.on("resize.redactor-toolbar-"+this.uuid,this._doFixed.bind(this))},_doFixed:function(){var r=this.editor.getElement(),h=this.container.getElement(),u=this.toolbar.getElement(),m=this.toolbar.getWrapper();if(!this.editor.isSourceMode()){var y=h.parents().filter(function(L){return getComputedStyle(L,null).display==="none"?L:!1});if(y.length===0){var v=r.height()<100,w=this.editor.isEmpty();if(v||w){this.reset();return}if(!this.editor.isSourceMode()){var S=u.height(),C=60,T=this.toolbar.isTarget()?h.position():h.offset(),_=T.top,$=_+h.height()-C,N=this.$fixedTarget.scrollTop()+this.opts.toolbarFixedTopOffset,P=this.toolbar.isTarget()?this.$fixedTarget.offset().top-this.$win.scrollTop():0;if(this.toolbar.isTarget()&&this.$fixedTarget.css("position")==="fixed"){var E=this.$fixedTarget.hasClass("modal")&&this.$fixedTarget.hasClass("fade"),x=E?h.closest(".modal-dialog").position().top:0;P=this.$fixedTarget.scrollTop()-x}if(N>_&&N<$){var k=this.detector.isDesktop()?"fixed":"absolute";P=this.detector.isDesktop()?P:N-_,this.detector.isMobile()&&(this.fixedScrollTimeout&&clearTimeout(this.fixedScrollTimeout),u.hide(),this.fixedScrollTimeout=setTimeout(function(){u.show()},250)),m.height(S),u.addClass("redactor-toolbar-fixed"),h.hasClass("redactor-box-fullscreen")?u.css({position:k,top:"0px",width:h.width()+"px"}):u.css({position:k,top:P+this.opts.toolbarFixedTopOffset+"px",width:h.width()+"px"});var A=this.toolbar.getDropdown();A&&A.updatePosition(),this.app.broadcast("toolbar.fixed")}else this.reset(),this.app.broadcast("toolbar.unfixed")}}}}}),c.add("class","toolbar.standard",{init:function(r){this.app=r,this.opts=r.opts,this.uuid=r.uuid,this.$body=r.$body,this.toolbar=r.toolbar,this.container=r.container,this.isExternalMultiple=!1,this.toolbarFixed=!1,this._init()},stop:function(){var r=this.toolbar.getWrapper();r.remove(),this.toolbarFixed&&this.toolbarFixed.stop(),this.opts.toolbarExternal&&this._findToolbars(),this.toolbar.stopObservers(),this.$body.find(".re-button-tooltip-"+this.uuid).remove()},setExternal:function(){if(this._findToolbars(),this.isExternalMultiple){this.$toolbars.hide();var r=this.$external.find(".redactor-toolbar-external-"+this.uuid);r.show()}},resetPosition:function(){this.toolbarFixed&&this.toolbarFixed.reset()},_init:function(){if(this._build(),this.opts.toolbarExternal)this._buildExternal();else{this._buildFixed();var r=this.toolbar.getElement();r.show()}},_build:function(){this.toolbar.create();var r=this.toolbar.getWrapper(),h=this.toolbar.getElement();if(r.addClass("redactor-toolbar-wrapper"),h.addClass("redactor-toolbar"),h.hide(),r.append(h),!this.opts.toolbarExternal){var u=this.container.getElement();u.prepend(r)}},_buildExternal:function(){if(this._initExternal(),this._findToolbars(),this.isExternalMultiple)this._hideToolbarsExceptFirst();else{var r=this.toolbar.getElement();r.show()}},_buildFixed:function(){this.opts.toolbarFixed&&(this.toolbarFixed=c.create("toolbar.fixed",this.app))},_initExternal:function(){var r=this.toolbar.getElement(),h=this.toolbar.getElement();r.addClass("redactor-toolbar-external redactor-toolbar-external-"+this.uuid),this.$external=c.dom(this.opts.toolbarExternal),this.$external.append(h)},_findToolbars:function(){this.$toolbars=this.$external.find(".redactor-toolbar-external"),this.isExternalMultiple=this.$toolbars.length>1},_hideToolbarsExceptFirst:function(){this.$toolbars.hide();var r=this.$toolbars.first();r.show()}}),c.add("module","line",{init:function(r){this.app=r,this.lang=r.lang,this.component=r.component,this.inspector=r.inspector,this.insertion=r.insertion},oncontextbar:function(r,h){var u=this.inspector.parse(r.target);if(u.isComponentType("line")){var m=u.getComponent(),y={remove:{title:this.lang.get("delete"),api:"module.line.remove",args:m}};h.set(r,m,y,"bottom")}},insert:function(){var r=this.component.create("line");this.insertion.insertRaw(r)},remove:function(r){this.component.remove(r)}}),c.add("class","line.component",{mixins:["dom","component"],init:function(r,h){return this.app=r,h&&h.cmnt!==void 0?h:this._init(h)},_init:function(r){var h,u;if(typeof r<"u"){var m=c.dom(r),y=m.get();y.tagName==="HR"?u=y:y.tagName==="FIGURE"&&(h=y,u=m.find("hr").get())}this._buildWrapper(h),this._buildElement(u),this._initWrapper()},_buildElement:function(r){r?this.$element=c.dom(r):(this.$element=c.dom("<hr>"),this.append(this.$element))},_buildWrapper:function(r){r=r||"<figure>",this.parse(r)},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"line",tabindex:"-1",contenteditable:!1})}}),c.add("module","link",{modals:{link:'<form action="">                 <div class="form-item">                     <label for="modal-link-url">URL <span class="req">*</span></label>                     <input type="text" id="modal-link-url" name="url">                 </div>                 <div class="form-item">                     <label for="modal-link-text">## text ##</label>                     <input type="text" id="modal-link-text" name="text">                 </div>                 <div class="form-item form-item-title">                     <label for="modal-link-title">## title ##</label>                     <input type="text" id="modal-link-title" name="title">                 </div>                 <div class="form-item form-item-target">                     <label class="checkbox">                         <input type="checkbox" name="target"> ## link-in-new-tab ##                     </label>                 </div>             </form>'},init:function(r){this.app=r,this.opts=r.opts,this.lang=r.lang,this.caret=r.caret,this.utils=r.utils,this.inline=r.inline,this.editor=r.editor,this.inspector=r.inspector,this.insertion=r.insertion,this.selection=r.selection,this.isCurrentLink=!1,this.currentText=!1},onmodal:{link:{open:function(r,h){this._setFormData(h,r)},opened:function(r,h){this._setFormFocus(h)},update:function(r,h){var u=h.getData();this._validateData(h,u)&&this._update(u)},insert:function(r,h){var u=h.getData();this._validateData(h,u)&&this._insert(u)},unlink:function(){this._unlink()}}},onbutton:{link:{observe:function(r){this._observeButton(r)}}},ondropdown:{link:{observe:function(r){this._observeUnlink(r),this._observeEdit(r)}}},oncontextbar:function(r,h){var u=this._getCurrent(),m=this.inspector.parse(u);if(m.isLink()||m.isFile()){var y=m.isFile()?m.getFile():m.getLink(),v=c.dom(y),w=c.dom("<a>"),S=v.attr("href");w.text(this._truncateText(S)),w.attr("href",S),w.attr("target","_blank");var C={link:{title:w,html:this._truncateText(S)},edit:{title:this.lang.get("edit"),api:"module.link.open"},unlink:{title:this.lang.get("unlink"),api:"module.link.unlink"}};h.set(r,y,C,"bottom")}},open:function(){this.$link=this._buildCurrent(),this.app.api("module.modal.build",this._getModalData())},insert:function(r){this._insert(r)},update:function(r){this._update(r)},unlink:function(){this._unlink()},_observeButton:function(r){var h=this.selection.getCurrent(),u=this.inspector.parse(h);u.isPre()||u.isCode()?r.disable():r.enable()},_observeUnlink:function(r){var h=r.getItem("unlink"),u=this._getLinks();u.length===0?h.disable():h.enable()},_observeEdit:function(r){var h=this._getCurrent(),u=r.getItem("link"),m=this.inspector.parse(h),y=m.isLink()||m.isFile()?this.lang.get("link-edit"):this.lang.get("link-insert");u.setTitle(y)},_unlink:function(){this.app.api("module.modal.close");var r=[],h=this._getLinks();this.selection.save();for(var u=0;u<h.length;u++){var m=c.create("link.component",this.app,h[u]);r.push(this.selection.getElement(h[u])),m.unwrap(),this.app.broadcast("link.deleted",m)}this.selection.restore();for(var u=0;u<r.length;u++){var y=r[u]?r[u]:this.editor.getElement();this.utils.normalizeTextNodes(y)}this._resetCurrent()},_update:function(r){this.app.api("module.modal.close");var h=this._getLinks();this._setLinkData(h,r,"updated"),this._resetCurrent(),this.app.broadcast("link.changed",h)},_insert:function(r){this.app.api("module.modal.close");var h=this._getLinks();this._insertSingle(h,r)||(this._removeInSelection(h),this._insertMultiple(r)),this._resetCurrent()},_removeInSelection:function(r){this.selection.save();for(var h=0;h<r.length;h++){var u=c.create("link.component",this.app,r[h]),m=u.clone();u.unwrap(),this.app.broadcast("link.deleted",m)}this.selection.restore()},_insertMultiple:function(r){var h=this.selection.getRange();h&&this._isCurrentTextChanged(r)&&this._deleteContents(h);var u=this.inline.format({tag:"a"});this._setLinkData(u,r,"inserted")},_insertSingle:function(r,h){var u=this.selection.getInline();if(r.length===1&&(r[0].textContext===this.selection.getText()||u&&u.tagName==="A")){var m=c.create("link.component",this.app,r[0]);return m.setData(h),this.caret.setAfter(m),this.app.broadcast("link.inserted",m),!0}return!1},_setLinkData:function(r,h,u){h.text=h.text.trim()===""?this._truncateText(h.url):h.text;var m=!this.currentText||this.currentText!==h.text;this.selection.save();for(var y=0;y<r.length;y++){var v=c.create("link.component",this.app,r[y]),w={};h.text&&m&&(w.text=h.text),h.url&&(w.url=h.url),h.title!==void 0&&(w.title=h.title),h.target!==void 0&&(w.target=h.target),v.setData(w),this.app.broadcast("link."+u,v)}setTimeout(this.selection.restore.bind(this.selection),0)},_deleteContents:function(r){var h=this.selection.getHtml(),u=this.utils.parseHtml(h),m=u.nodes[0];if(m&&m.nodeType!==3){var y=m.tagName.toLowerCase(),v=document.createElement(y);this.insertion.insertNode(v,"start")}else r.deleteContents()},_getModalData:function(){var r;this._isLink()?r={update:{title:this.lang.get("save")},unlink:{title:this.lang.get("unlink"),type:"danger"},cancel:{title:this.lang.get("cancel")}}:r={insert:{title:this.lang.get("insert")},cancel:{title:this.lang.get("cancel")}};var h={name:"link",title:this._isLink()?this.lang.get("link-edit"):this.lang.get("link-insert"),handle:this._isLink()?"update":"insert",commands:r};return h},_isLink:function(){return this.currentLink},_isCurrentTextChanged:function(r){return this.currentText&&this.currentText!==r.text},_buildCurrent:function(){var r=this._getCurrent(),h=this.inspector.parse(r),u;if(h.isLink()||h.isFile())this.currentLink=!0,u=h.isFile()?h.getFile():h.getLink(),u=c.create("link.component",this.app,u);else{this.currentLink=!1,u=c.create("link.component",this.app);var m={text:this.selection.getText()};u.setData(m)}return u},_getCurrent:function(){return this.selection.getInlinesAllSelected({tags:["a"]})[0]},_getLinks:function(){for(var r=this.selection.getInlines({all:!0,tags:["a"]}),h=[],u=0;u<r.length;u++){var m=this.inspector.parse(r[u]);(m.isLink()||m.isFile())&&h.push(r[u])}return h},_resetCurrent:function(){this.isCurrentLink=!1,this.currentText=!1},_truncateText:function(r){return r&&r.length>this.opts.linkSize?r.substring(0,this.opts.linkSize)+"...":r},_validateData:function(r,h){return h.url.trim()===""?r.setError("url"):!0},_setFormFocus:function(r){r.getField("url").focus()},_setFormData:function(r,h){var u=this.$link.getData(),m={url:u.url,text:u.text,title:u.title,target:this.opts.linkTarget||u.target};this.opts.linkNewTab||h.find(".form-item-target").hide(),this.opts.linkTitle||h.find(".form-item-title").hide(),r.setData(m),this.currentText=r.getField("text").val()}}),c.add("class","link.component",{mixins:["dom","component"],init:function(r,h){return this.app=r,this.opts=r.opts,this.reUrl=/^(?:(?:(?:https?|ftp):)?\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i,h&&h.cmnt!==void 0?h:this._init(h)},setData:function(r){for(var h in r)this._set(h,r[h])},getData:function(){for(var r=["url","text","target","title"],h={},u=0;u<r.length;u++)h[r[u]]=this._get(r[u]);return h},_init:function(r){var h=c.dom(r);r===void 0?this.parse("<a>"):this.parse(h)},_set:function(r,h){this["_set_"+r](h)},_get:function(r){return this["_get_"+r]()},_get_target:function(){return this.attr("target")?this.attr("target"):!1},_get_url:function(){return this.attr("href")},_get_title:function(){return this.attr("title")},_get_text:function(){return this._getContext().text()},_getContext:function(){return this._findDeepestChild(this).element},_set_target:function(r){r===!1?this.removeAttr("target"):r&&this.attr("target",r===!0?"_blank":r)},_set_text:function(r){r=this._escapeHtml(r),this._getContext().html(r)},_set_title:function(r){!r||r===""?this.removeAttr("title"):this.attr("title",r)},_set_url:function(r){this.opts.linkValidation&&(r=this._cleanUrl(r),this._isMailto(r)?r="mailto:"+r.replace("mailto:",""):this._isUrl(r)&&r.search(/^(ftp|https?)/i)===-1&&(r="http://"+r.replace(/(ftp|https?):\/\//i,""))),this.attr("href",r)},_isMailto:function(r){return r.search("@")!==-1&&/(ftp|https?):\/\//i.test(r)===!1},_isUrl:function(r){return this.reUrl.test(r)},_cleanUrl:function(r){return r=this._escapeHtml(r),r.trim().replace(/[^\W\w\D\d+&\'@#/%?=~_|!:,.;\(\)]/gi,"")},_escapeHtml:function(r){return r.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},_findDeepestChild:function(r){var h={depth:0,element:r};return r.children().each((function(u){var m=c.dom(u);if(u.outerHTML===r.html()){var y=this._findDeepestChild(m);y.depth+1>h.depth&&(h={depth:1+y.depth,element:y.element})}}).bind(this)),h}}),c.add("module","modal",{init:function(r){this.app=r,this.uuid=r.uuid,this.lang=r.lang,this.$doc=r.$doc,this.$win=r.$win,this.$body=r.$body,this.utils=r.utils,this.editor=r.editor,this.animate=r.animate,this.detector=r.detector,this.selection=r.selection,this.$box=!1,this.$modal=!1,this.selectionMarkers=!1,this.defaults={name:!1,url:!1,title:!1,width:"600px",height:!1,handle:!1,commands:!1}},build:function(r){this._open(r)},close:function(){this._close()},onstop:function(){this.$body.find("#redactor-modal-"+this.uuid).remove(),this.$body.find("#redactor-overlay-"+this.uuid).remove()},stop:function(){this.$box&&(this.$box.remove(),this.$box=!1,this.$modal=!1),this.$overlay&&this.$overlay.remove(),this.$doc.off(".redactor.modal"),this.$win.off(".redactor.modal")},resize:function(){this.$modal.setWidth(this.p.width),this.$modal.updatePosition()},_isOpened:function(){return this.$modal&&this.$modal.hasClass("open")},_open:function(r){this._buildDefaults(r),this.p.url?this._openUrl():this._openTemplate()},_openUrl:function(){c.ajax.post({url:this.p.url,success:this._doOpen.bind(this)})},_openTemplate:function(){if(typeof c.modals[this.p.name]<"u"){var r=this.lang.parse(c.modals[this.p.name]);this._doOpen(r)}},_doOpen:function(r){this.stop(),this.selection.isCollapsed()?(this.selection.save(),this.selectionMarkers=!1):(this.selection.saveMarkers(),this.selectionMarkers=!0),this.detector.isDesktop()||document.activeElement.blur(),this._createModal(r),this._buildModalBox(),this._buildOverlay(),this._buildModal(),this._buildModalForm(),this._buildModalCommands(),this._broadcast("open"),this.$modal.updatePosition(),this._buildModalTabs(),this.animate.start(this.$box,"fadeIn",this._opened.bind(this)),this.animate.start(this.$overlay,"fadeIn")},_opened:function(){this.$modal.addClass("open"),this.$box.on("mousedown.redactor.modal",this._close.bind(this)),this.$doc.on("keyup.redactor.modal",this._handleEscape.bind(this)),this.$win.on("resize.redactor.modal",this.resize.bind(this)),this.$modal.getBody().find("input[type=text],input[type=url],input[type=email]").on("keydown.redactor.modal",this._handleEnter.bind(this)),window.jQuery&&window.jQuery(document).off("focusin.modal"),this._broadcast("opened")},_close:function(r){if(!(!this.$box||!this._isOpened())){if(r){if(!this._needToClose(r.target))return;r.stopPropagation(),r.preventDefault()}this.selectionMarkers?this.selection.restoreMarkers():this.selection.restore(),this.selectionMarkers=!1,this._broadcast("close"),this.animate.start(this.$box,"fadeOut",this._closed.bind(this)),this.animate.start(this.$overlay,"fadeOut")}},_closed:function(){this.$modal.removeClass("open"),this.$box.off(".redactor.modal"),this.$doc.off(".redactor.modal"),this.$win.off(".redactor.modal"),this._broadcast("closed")},_createModal:function(r){this.$modal=c.create("modal.element",this.app,r)},_broadcast:function(r){this.app.broadcast("modal."+r,this.$modal,this.$modalForm),this.app.broadcast("modal."+this.p.name+"."+r,this.$modal,this.$modalForm)},_buildDefaults:function(r){this.p=c.extend({},this.defaults,r)},_buildModalBox:function(){this.$box=c.dom("<div>"),this.$box.attr("id","redactor-modal-"+this.uuid),this.$box.addClass("redactor-modal-box redactor-animate-hide"),this.$box.html(""),this.$body.append(this.$box)},_buildOverlay:function(){this.$overlay=c.dom("#redactor-overlay-"+this.uuid),this.$overlay.length===0&&(this.$overlay=c.dom("<div>"),this.$overlay.attr("id","redactor-overlay-"+this.uuid),this.$overlay.addClass("redactor-overlay redactor-animate-hide"),this.$body.prepend(this.$overlay))},_buildModal:function(){this.$box.append(this.$modal),this.$modal.setTitle(this.p.title),this.$modal.setHeight(this.p.height),this.$modal.setWidth(this.p.width)},_buildModalCommands:function(){if(this.p.commands){var r=this.p.commands,h=this.$modal.getFooter();for(var u in r){var m=c.dom("<button>");m.html(r[u].title),m.attr("data-command",u),u==="cancel"&&(m.attr("data-action","close"),m.addClass("redactor-button-unstyled")),typeof r[u].type<"u"&&r[u].type==="danger"&&m.addClass("redactor-button-danger"),m.on("click",this._handleCommand.bind(this)),h.append(m)}}},_buildModalTabs:function(){var r=this.$modal.getBody(),h=r.find(".redactor-modal-tab"),u=r.find(".redactor-modal-tabs");h.length>1&&(u=u.length===0?c.dom("<div>"):u.html(""),u.addClass("redactor-modal-tabs"),h.each((function(m,y){var v=c.dom(m),w=c.dom("<a>");w.attr("href","#"),w.attr("rel",y),w.text(v.attr("data-title")),w.on("click",this._showTab.bind(this)),y===0&&w.addClass("active"),u.append(w)}).bind(this)),r.prepend(u)),h.length===1&&h.show()},_buildModalForm:function(){this.$modalForm=c.create("modal.form",this.app,this.$modal.getForm())},_showTab:function(r){r.preventDefault();var h=c.dom(r.target),u=h.attr("rel"),m=this.$modal.getBody(),y=m.find(".redactor-modal-tab");y.hide(),y.eq(u).show(),m.find(".redactor-modal-tabs a").removeClass("active"),h.addClass("active")},_needToClose:function(r){var h=c.dom(r);return!!(h.attr("data-action")==="close"||this.$modal.isCloseNode(r)||h.closest(".redactor-modal").length===0)},_handleCommand:function(r){var h=c.dom(r.target).closest("button"),u=h.attr("data-command");u!=="cancel"&&r.preventDefault(),this._broadcast(u)},_handleEnter:function(r){r.which===13&&this.p.handle&&(r.preventDefault(),this._broadcast(this.p.handle))},_handleEscape:function(r){r.which===27&&this._close()}}),c.add("class","modal.element",{mixins:["dom"],init:function(r,h){this.app=r,this.opts=r.opts,this.$win=r.$win,this._init(h)},getForm:function(){return this.find("form")},getHeader:function(){return this.$modalHeader},getBody:function(){return this.$modalBody},getFooter:function(){return this.$modalFooter},setTitle:function(r){r&&this.$modalHeader.html(r)},setWidth:function(r){r=parseInt(r)>=this.$win.width()?"96%":r,this.css("max-width",r)},setHeight:function(r){r!==!1&&this.$modalBody.css("height",r)},updatePosition:function(){var r=this.width();this.css({left:"50%","margin-left":"-"+r/2+"px"});var h=this.$win.height(),u=this.height(),m=h/2-u/2;u<h&&m!==0&&this.css("margin-top",m+"px")},isCloseNode:function(r){return r===this.$modalClose.get()},_init:function(r){this._build(),this._buildClose(),this._buildHeader(),this._buildBody(),this._buildFooter(),this._buildTemplate(r)},_build:function(){this.parse("<div>"),this.addClass("redactor-modal"),this.attr("dir",this.opts.direction)},_buildClose:function(){this.$modalClose=c.dom("<span>"),this.$modalClose.addClass("redactor-close"),this.append(this.$modalClose)},_buildHeader:function(){this.$modalHeader=c.dom("<div>"),this.$modalHeader.addClass("redactor-modal-header"),this.append(this.$modalHeader)},_buildBody:function(){this.$modalBody=c.dom("<div>"),this.$modalBody.addClass("redactor-modal-body"),this.append(this.$modalBody)},_buildFooter:function(){this.$modalFooter=c.dom("<div>"),this.$modalFooter.addClass("redactor-modal-footer"),this.append(this.$modalFooter)},_buildTemplate:function(r){this.$modalBody.html(r)}}),c.add("class","modal.form",{mixins:["dom"],init:function(r,h){this.app=r,this.build(h)},build:function(r){this.parse(r)},getData:function(){var r={};return this.find("[name]").each(function(h){var u=c.dom(h);r[u.attr("name")]=u.val()}),r},setData:function(r){this.find("[name]").each(function(h){var u=c.dom(h),m=u.attr("name");r.hasOwnProperty(m)&&(h.type&&h.type==="checkbox"?h.checked=r[m]:u.val(r[m]))})},getField:function(r){return this.find("[name="+r+"]")},setError:function(r){var h=this.getField(r);return h.addClass("error"),h.one(this._getFieldEventName(h.get()),this._clearError),!1},_clearError:function(){return c.dom(this).removeClass("error")},_getFieldEventName:function(r){return r.tagName==="SELECT"||r.type==="checkbox"||r.type==="radio"?"change":"keyup"}}),c.add("module","block",{init:function(r){this.app=r,this.block=r.block},format:function(r){var h=this.block.format(r);this.app.broadcast("format","block",h)},clearformat:function(){this.block.clearFormat()},clearstyle:function(){this.block.clearStyle()},clearclass:function(){this.block.clearClass()},clearattr:function(){this.block.clearAttr()},add:function(r,h){this.block.add(r,h)},toggle:function(r,h){this.block.toggle(r,h)},set:function(r,h){this.block.set(r,h)},remove:function(r,h){this.block.remove(r,h)}}),c.add("module","inline",{init:function(r){this.app=r,this.inline=r.inline},format:function(r){var h=this.inline.format(r);this.app.broadcast("format","inline",h)},clearformat:function(){this.inline.clearFormat()},clearstyle:function(){this.inline.clearStyle()},clearclass:function(){this.inline.clearClass()},clearattr:function(){this.inline.clearAttr()},add:function(r,h){this.inline.add(r,h)},toggle:function(r,h){this.inline.toggle(r,h)},set:function(r,h){this.inline.set(r,h)},remove:function(r,h){this.inline.remove(r,h)}}),c.add("module","autosave",{init:function(r){this.app=r,this.opts=r.opts,this.utils=r.utils,this.source=r.source},onsynced:function(){this.opts.autosave&&this._send()},_send:function(){var r=this.opts.autosaveName?this.opts.autosaveName:this.source.getName(),h={};h[r]=this.source.getCode(),h=this.utils.extendData(h,this.opts.autosaveData),c.ajax.request(this.opts.autosaveMethod,{url:this.opts.autosave,data:h,success:(function(u){this._complete(u,r,h)}).bind(this)})},_complete:function(r,h,u){var m=r&&r.error?"autosaveError":"autosave";this.app.broadcast(m,h,u,r)}}),c.add("module","input",{init:function(r){this.app=r,this.opts=r.opts,this.utils=r.utils,this.editor=r.editor,this.keycodes=r.keycodes,this.element=r.element,this.selection=r.selection,this.insertion=r.insertion,this.inspector=r.inspector,this.autoparser=r.autoparser,this.lastShiftKey=!1},onpaste:function(r,h){if(this.opts.input)return c.create("input.paste",this.app,r,h)},onkeydown:function(r){if(this.opts.input){var h=r.which,u=c.create("input.shortcut",this.app,r);if(!u.is()){if((r.ctrlKey||r.metaKey)&&!r.altKey&&h===65)return r.preventDefault(),this._selectAll();var m=[this.keycodes.ENTER,this.keycodes.SPACE,this.keycodes.BACKSPACE,this.keycodes.DELETE],y=[this.keycodes.UP,this.keycodes.DOWN,this.keycodes.LEFT,this.keycodes.RIGHT],v=m.indexOf(h)!==-1,w=y.indexOf(h)!==-1,S=(r.ctrlKey||r.metaKey)&&h===88,C=!r.ctrlKey&&!r.metaKey&&(h>=48&&h<=57||h>=65&&h<=90);if(this.selection.isAll()&&w&&(S||!r.ctrlKey&&!r.metaKey&&!r.altKey&&!r.shiftKey)){if(S){this.editor.disableNonEditables(),this.app.broadcast("empty");return}if(this._isArrowKey(h))return!0;if(v&&r.preventDefault(),this.element.isType("inline")){var T=this.editor.getElement();T.html(""),this.editor.startFocus()}else this.insertion.set(this.opts.emptyHtml);if(v)return;this.app.broadcast("empty")}if(this.opts.autoparse&&this.autoparser.format(r,h),C&&this.selection.hasNonEditable()){r.preventDefault();return}if(h===this.keycodes.ENTER)return c.create("input.enter",this.app,r,h);if(r.metaKey&&h===219){r.preventDefault(),this.app.api("module.list.outdent");return}else{if(h===this.keycodes.TAB||r.metaKey&&h===221)return c.create("input.tab",this.app,r,h);if(h===this.keycodes.SPACE)return c.create("input.space",this.app,r,h,this.lastShiftKey);if(this._isDeleteKey(h))return c.create("input.delete",this.app,r,h);if(this._isArrowKey(h))return c.create("input.arrow",this.app,r,h)}}}},onkeyup:function(r){if(this.opts.input){var h=r.which;this.lastShiftKey=r.shiftKey,this.app.broadcast("contextbar.close");var u=c.create("input.shortcode",this.app,r,h);if(!u.is()){if(h===this.keycodes.BACKSPACE){var m=this.editor.getElement(),y=this.utils.trimSpaces(m.html());if(y=y.replace(/<br\s?\/?>/g,""),y=y.replace(/<div><\/div>/,""),y===""){r.preventDefault(),this.editor.setEmpty(),this.editor.startFocus();return}}this.editor.isEmpty()&&this.app.broadcast("empty")}}},start:function(){this.opts.shortcutsAdd&&(this.opts.shortcuts=c.extend({},!0,this.opts.shortcuts,this.opts.shortcutsAdd))},_selectAll:function(){var r=this.selection.getCurrent(),h=this.inspector.parse(r),u;if(h.isComponentType("table")){u=h.getTable(),this.selection.setAll(u);return}else if(h.isComponentType("code")){u=h.getComponentCodeElement(),this.selection.setAll(u);return}this.selection.setAll()},_isArrowKey:function(r){return[this.keycodes.UP,this.keycodes.DOWN,this.keycodes.RIGHT,this.keycodes.LEFT].indexOf(r)!==-1},_isDeleteKey:function(r){return r===this.keycodes.BACKSPACE||r===this.keycodes.DELETE}}),c.add("class","input.arrow",{init:function(r,h,u){this.app=r,this.opts=r.opts,this.utils=r.utils,this.caret=r.caret,this.offset=r.offset,this.marker=r.marker,this.editor=r.editor,this.keycodes=r.keycodes,this.component=r.component,this.inspector=r.inspector,this.selection=r.selection,this.key=u,this._init(h)},_init:function(r){this._isRightLeftKey()&&this._isExitVariable(r)||this._isRightDownKey()&&(this._isExitOnDownRight(r)||this._selectComponent(r,"End","next"))||this._isLeftUpKey()&&(this._isExitOnUpLeft(r)||this._selectComponent(r,"Start","prev"))||(this.key===this.keycodes.LEFT?this.utils.trimInvisibleChars("left"):this.key===this.keycodes.RIGHT&&this.utils.trimInvisibleChars("right"))},_isRightDownKey:function(){return[this.keycodes.DOWN,this.keycodes.RIGHT].indexOf(this.key)!==-1},_isLeftUpKey:function(){return[this.keycodes.UP,this.keycodes.LEFT].indexOf(this.key)!==-1},_isRightLeftKey:function(){return[this.keycodes.RIGHT,this.keycodes.LEFT].indexOf(this.key)!==-1},_isExitVariable:function(r){var h=this.selection.getCurrent(),u=this.inspector.parse(h),m=u.getComponent();if(u.isComponentType("variable")&&u.isComponentActive()){r.preventDefault();var y=this.key===this.keycodes.LEFT?"setBefore":"setAfter";this.caret[y](m);return}},_isExitOnUpLeft:function(r){var h=this.selection.getCurrent(),u=this.selection.getBlock(h),m=this.inspector.parse(h),y=u.previousElementSibling,v=this.caret.isStart(u);if(v&&y&&y.tagName==="TABLE")return r.preventDefault(),this.caret.setEnd(y),!0;if(m.isFigcaption()){u=m.getFigcaption(),v=this.caret.isStart(u);var w=c.dom(u).closest(".redactor-component");if(v&&w.length!==0)return r.preventDefault(),this.caret.setEnd(w),!0}else{if(m.isTable()&&v)return r.preventDefault(),this.caret.setEnd(u.previousElementSibling),!0;if(!m.isComponentEditable()&&m.isComponent()&&!m.isComponentType("variable")){var S=m.getComponent();if(S.previousElementSibling){if(S.previousElementSibling)return r.preventDefault(),this.component.clearActive(),this.caret.setEnd(S.previousElementSibling),!0}else return r.preventDefault(),this.component.clearActive(),this._exitPrevElement(r,m.getComponent())}}},_isExitOnDownRight:function(r){var h=this.editor.getElement(),u=this.selection.getCurrent(),m=this.inspector.parse(u),y=this.caret.isEnd(),v,w;if(m.isTable()){if(v=m.getTable(),w=this.caret.isEnd(v),w||y)return this._exitNextElement(r,m.getComponent())}else if(m.isFigcaption()){if(v=m.getFigcaption(),w=this.caret.isEnd(v),w||y)return this._exitNextElement(r,m.getComponent())}else if(m.isComponentType("code")){var S=m.getComponent(),C=c.dom(m.getComponentCodeElement()).closest("pre");w=this.caret.isEnd(v);var T=C&&C.get().nextElementSibling;if(w&&!T)return this._exitNextElement(r,S)}else if(m.isPre()||m.isBlockquote()||m.isDl()){if(y){if(m.isPre())return this._exitNextElement(r,m.getPre());if(m.isBlockquote())return this._exitNextElement(r,m.getBlockquote());if(m.isDl())return this._exitNextElement(r,m.getDl())}}else if(m.isList()){var _=c.dom(u).parents("ul, ol",h).last();if(w=this.caret.isEnd(_),w||y)return this._exitNextElement(r,_.get())}else if(m.isComponent()&&!m.isComponentType("variable")&&m.getTag()!=="span")return this.component.clearActive(),this._exitNextElement(r,m.getComponent())},_exitPrevElement:function(r,h){return r.preventDefault(),h.previousElementSibling?this.caret.setEnd(h.previousElementSibling):this.utils.createMarkupBefore(h),!0},_exitNextElement:function(r,h){return r.preventDefault(),h.nextElementSibling?this.caret.setStart(h.nextElementSibling):this.utils.createMarkup(h),!0},_selectComponent:function(r,h,u){var m=this.selection.getCurrent(),y=this.selection.getBlock(m),v=this.utils.findSiblings(m,u),w=this.utils.findSiblings(y,u);v&&this.caret["is"+h](m)?this._selectComponentItem(r,v,h):w&&this.caret["is"+h](y)&&this._selectComponentItem(r,w,h)},_selectComponentItem:function(r,h,u){if(this.component.isNonEditable(h))return r.preventDefault(),this.caret["set"+u](h),!0}}),c.add("class","input.delete",{init:function(r,h,u){this.app=r,this.opts=r.opts,this.caret=r.caret,this.utils=r.utils,this.editor=r.editor,this.marker=r.marker,this.keycodes=r.keycodes,this.component=r.component,this.inspector=r.inspector,this.selection=r.selection,this.insertion=r.insertion,this.key=u,this._init(h)},_init:function(r){if(!this._removeActiveComponent(r)&&!this._removeAllSelectedTable(r)){if(this.key===this.keycodes.BACKSPACE){var h=this.editor.getElement(),u=this.utils.trimSpaces(h.html());if(u===this.opts.emptyHtml){r.preventDefault();return}}if(this._detectVariableOrNonEditable()||this.selection.hasNonEditable()){r.preventDefault();return}if(this.selection.isAll()){r.preventDefault(),this.insertion.set(this.opts.emptyHtml);return}this.selection.isCollapsed()&&(this.key===this.keycodes.BACKSPACE?this._traverseBackspace(r):this.key===this.keycodes.DELETE&&this._traverseDelete(r)),this.key===this.keycodes.BACKSPACE&&this.utils.trimInvisibleChars("left"),this._removeUnwantedStyles(),this._removeEmptySpans(),this._removeSpanTagsInHeadings(),this._removeInlineTagsInPre()}},_detectVariableOrNonEditable:function(){var r=this.selection.getBlock(),h=this.caret.isStart(r),u=this.caret.isEnd(r),m;if(this.key===this.keycodes.BACKSPACE&&h){if(m=r.previousSibling,this._isNonEditable(m))return!0}else if(this.key===this.keycodes.DELETE&&u&&(m=r.nextSibling,this._isNonEditable(m)))return!0;var y=this.selection.getCurrent(),v=this.caret.isStart(y),w=this.caret.isEnd(y),S=this.selection.getTextBeforeCaret().trim()==="",C=this.selection.getTextAfterCaret().trim()==="";if(this.key===this.keycodes.BACKSPACE&&v&&!S){if(m=y.previousSibling,this._isVariable(m))return this.caret.setEnd(m),!0;if(this._isNonEditable(m))return!0}else if(this.key===this.keycodes.DELETE&&w&&!C){if(m=y.nextSibling,this._isVariable(m))return this.caret.setStart(m),!0;if(this._isNonEditable(m))return!0}},_isVariable:function(r){return c.dom(r).closest('[data-redactor-type="variable"]').length!==0},_isNonEditable:function(r){return c.dom(r).closest(".non-editable").length!==0},_getBlock:function(){var r=this.editor.getElement(),h=this.selection.getBlock(),u=this.inspector.parse(h);return h=u.isList()?c.dom(h).parents("ul, ol",r).last().get():h,h=u.isDl()?u.getDl():h,h=u.isTable()?u.getTable():h,h},_traverseDelete:function(r){var h=this.selection.getCurrent(),u=this.inspector.parse(h),m,y,v;if(u.isFigcaption()){if(m=u.getFigcaption(),y=this.caret.isEnd(m),y){r.preventDefault();return}}else if(u.isComponentType("code")&&(m=u.getComponent(),y=this.caret.isEnd(m),y)){r.preventDefault();return}m=this._getBlock();var w=this.utils.findSiblings(m,"next");if(w){y=this.caret.isEnd(m);var S=this.inspector.parse(w),C=w.tagName==="P"||w.tagName==="DIV";if(y&&S.isComponentType("table")){r.preventDefault(),this.caret.setStart(w);return}else if(y&&S.isComponentEditable()){r.preventDefault(),this.component.remove(w,!1);return}else if(y&&S.isComponent()){r.preventDefault(),this.caret.setStart(w),this.utils.isEmptyHtml(m.innerHTML)&&c.dom(m).remove();return}else if(y&&S.isList()){var T=c.dom(m);if(v=c.dom(w),u.isList()){r.preventDefault(),T.append(v),v.unwrap();return}else{var _=v.children("li").first(),$=_.find("ul, ol");if($.length!==0){r.preventDefault(),v.prepend($),$.unwrap(),T.append(_),_.unwrap();return}}}else if(y&&!u.isList()&&!u.isTable()&&C&&!this.utils.isEmptyHtml(m.innerHTML)){r.preventDefault();var N=c.dom(m);v=c.dom(w),N.append(v),v.unwrap();return}}},_traverseBackspace:function(r){var h=this.selection.getCurrent(),u=this.inspector.parse(h),m,y,v,w;if(u.isFigcaption()){if(m=u.getFigcaption(),y=this.caret.isStart(m),y){r.preventDefault();return}}else if(u.isComponentType("code")&&(m=u.getComponent(),y=this.caret.isStart(m),y&&m.previousElementSibling))return r.preventDefault(),this.caret.setEnd(m.previousElementSibling),!0;m=this._getBlock();var S=this.utils.findSiblings(m,"prev");if(!S){setTimeout(this._replaceBlock.bind(this),1);return}y=this.caret.isStart(m);var C=this.inspector.parse(S),T=S.tagName==="P"||S.tagName==="DIV";if(y&&C.isComponentType("code")){r.preventDefault(),this.component.remove(S,!1);return}else if(y&&C.isComponentType("table")){r.preventDefault(),this.caret.setEnd(S);return}else if(y&&C.isComponent()){r.preventDefault(),this.caret.setStart(S),this.utils.isEmptyHtml(m.innerHTML)&&c.dom(m).remove();return}else if(y&&u.isList()){if(r.preventDefault(),w=c.dom(m),v=c.dom(S),C.isList())w.children("li").first().prepend(this.marker.build("start")),v.append(w),w.unwrap(),this.selection.restoreMarkers();else{var _=w.children("li").first(),$=_.get(),N=_.find("ul, ol"),P=this.utils.replaceToTag($,this.opts.markup);this.opts.breakline&&P.attr("data-redactor-tag","br"),w.before(P),this.caret.setStart(P),N.length!==0&&(w.prepend(N),N.unwrap())}return}else if(y&&T){if(r.preventDefault(),this.utils.isEmpty(S)){v=c.dom(S),v.remove();return}var E=this.utils.createInvisibleChar(),x=c.dom(m);v=c.dom(S),this.caret.setEnd(v),x.prepend(E),v.append(x.contents()),x.remove();return}},_replaceBlock:function(){var r=this.selection.getBlock(),h=c.dom(r);if(this.opts.markup==="p"&&r&&this._isNeedToReplaceBlock(r)){var u=document.createElement(this.opts.markup);h.replaceWith(u),this.caret.setStart(u)}this.opts.breakline&&r&&r.tagName==="DIV"&&h.attr("data-redactor-tag","br")},_isNeedToReplaceBlock:function(r){return r.tagName==="DIV"&&this.utils.isEmptyHtml(r.innerHTML)},_removeActiveComponent:function(r){var h=this.selection.getCurrent(),u=this.inspector.parse(h),m=u.getComponent();if(u.isComponent()&&this.component.isActive(m))return r.preventDefault(),this.component.remove(m),!0},_removeAllSelectedTable:function(r){var h=this.selection.getCurrent(),u=this.inspector.parse(h),m=u.getTable();if(m&&this.selection.isAll(m))return r.preventDefault(),this.component.remove(m),!0},_removeUnwantedStyles:function(){var r=this.editor.getElement();setTimeout(function(){var h=r.find("*[style]");h.not("img, figure, figcaption, iframe, [data-redactor-style-cache], [data-redactor-span]").removeAttr("style")},0)},_removeEmptySpans:function(){var r=this.editor.getElement();setTimeout(function(){r.find("span").each(function(h){h.attributes.length===0&&c.dom(h).replaceWith(h.childNodes)})},0)},_removeSpanTagsInHeadings:function(){var r=this.editor.getElement();setTimeout(function(){r.find("h1, h2, h3, h4, h5, h6").each(function(h){var u=c.dom(h);u.closest("figure").length===0&&u.find("span").not(".redactor-component, .non-editable, .redactor-selection-marker, [data-redactor-style-cache], [data-redactor-span]").unwrap()})},1)},_removeInlineTagsInPre:function(){var r=this.editor.getElement(),h=this.opts.inlineTags;setTimeout(function(){r.find("pre").each(function(u){var m=c.dom(u);m.closest("figure").length===0&&m.find(h.join(",")).not("code, .redactor-selection-marker").unwrap()})},1)}}),c.add("class","input.enter",{init:function(r,h){this.app=r,this.opts=r.opts,this.utils=r.utils,this.caret=r.caret,this.editor=r.editor,this.keycodes=r.keycodes,this.detector=r.detector,this.insertion=r.insertion,this.selection=r.selection,this.inspector=r.inspector,this._init(h)},_init:function(r){if(!this.opts.enterKey)return this._disable(r);var h=this.app.broadcast("enter",r);if(h===!1)return r.preventDefault();if(this.selection.hasNonEditable()){r.preventDefault();return}if(r.ctrlKey||r.shiftKey)return this._insertBreak(r);this._isExit(r)||this._traverse(r)},_disable:function(r){r.preventDefault();var h=this.selection.getRange();h&&!h.collapsed&&h.deleteContents()},_insertBreak:function(r){r.preventDefault();var h=this.selection.getCurrent(),u=this.selection.getBlock(),m=this.inspector.parse(h);if(m.isHeading()&&this.caret.isStart(u)){var y=c.dom(u),v=y.clone().html("");y.before(v),this.caret.setStart(y)}else{if(m.isComponent()&&!m.isComponentEditable()||m.isCode())return;m.isPre()?this.insertion.insertNewline():this.insertion.insertBreakLine()}},_isExit:function(r){var h=this.editor.getElement(),u=this.selection.getBlock(),m=this.inspector.parse(u),y=this.caret.isEnd(u),v=this.selection.getCurrent(),w=v.previousSibling;if(m.isBlockquote()){var S=y&&this._isExitableBlock(u,"P"),C=y&&this._isExitableDblBreak(w);if(S||C)return this._exitFromElement(r,C?w:u,m.getBlockquote())}else if(!m.isComponentType("code")&&m.isPre()){if(y){var T=u.innerHTML;if(T=this.utils.removeInvisibleChars(T),T.match(/(\n\n\n)$/)!==null)return c.dom(w.previousSibling.previousSibling).remove(),this._exitFromElement(r,w,u)}}else if(m.isDl()){if(y&&this._isExitableBlock(u,"DT"))return this._exitFromElement(r,u,m.getDl())}else if(m.isList()){var _=c.dom(v).parents("ul, ol",h).last();if(y=this.caret.isEnd(_),y&&this._isExitableBlock(u,"LI"))return this._exitFromElement(r,u,_)}else if(m.isComponent()&&m.isComponentActive()&&!m.isFigcaption()&&!m.isComponentEditable())return this._exitFromElement(r,!1,m.getComponent())},_isExitableDblBreak:function(r){var h=r?r.nextSibling:!1;if(h){var u=this.utils.removeInvisibleChars(h.textContent);return h.nodeType===3&&u.trim()===""}},_isExitableBlock:function(r,h){return r&&r.tagName===h&&this.utils.isEmptyHtml(r.innerHTML)},_exitFromElement:function(r,h,u){return r.preventDefault(),h&&c.dom(h).remove(),this.utils.createMarkup(u),!0},_exitNextElement:function(r,h){return r.preventDefault(),h.nextSibling?this.caret.setStart(h.nextSibling):this.utils.createMarkup(h),!0},_traverse:function(r){var h=this.selection.getCurrent(),u=this.selection.isText(),m=this.selection.getBlock(),y=this.inspector.parse(h),v=m?m.tagName.toLowerCase():!1,w=c.dom(h).closest("[data-redactor-type=variable]");if(w.length!==0&&this.caret.setAfter(w),y.isPre())return r.preventDefault(),this.insertion.insertNewline();if(y.isBlockquote()){if(m=this.selection.getBlock(h),m&&m.tagName==="BLOCKQUOTE")return r.preventDefault(),this.insertion.insertBreakLine()}else if(y.isFigcaption()){m=y.getFigcaption();var S=this.caret.isEnd(m),C=this.caret.isEnd();if(S||C)return this._exitNextElement(r,y.getComponent());r.preventDefault();return}else{if(y.isDl())return r.preventDefault(),this._traverseDl(h);if(this.opts.breakline&&v==="div"){setTimeout(this._replaceBlock.bind(this),1);return}else{if(u)return r.preventDefault(),this.insertion.insertBreakLine();if(y.isList())return;var T=this.detector.isDesktop()?50:1;setTimeout(this._replaceBlock.bind(this),T);return}}},_traverseDl:function(r){var h=this.selection.getBlock(r),u=this.inspector.parse(h),m=u.getTag(),y=c.dom(h),v=y.get().nextSibling||!1,w=c.dom(v),S=v&&w.is("dd"),C=v&&w.is("dt"),T=this.caret.isEnd(h);if(m==="dt"&&!S&&T){var _=document.createElement("dd");y.after(_),this.caret.setStart(_);return}else if(m==="dd"&&!C&&T){var $=document.createElement("dt");y.after($),this.caret.setStart($);return}return this.insertion.insertBreakLine()},_replaceBlock:function(){var r=this.selection.getBlock(),h=c.dom(r);if(this.opts.markup==="p"&&r&&this._isNeedToReplaceBlock(r)){var u=document.createElement(this.opts.markup);h.replaceWith(u),this.caret.setStart(u)}else if(r)if(this.utils.isEmptyHtml(r.innerHTML))this._clearBlock(h,r);else{var m=this.utils.getFirstNode(r);m&&m.tagName==="BR"&&(c.dom(m).remove(),this.caret.setStart(r))}h.removeAttr("id"),r&&this._isNeedToCleanBlockStyle(r)&&this.opts.cleanOnEnter&&h.removeAttr("class style"),this.opts.breakline&&r&&r.tagName},_clearBlock:function(r,h){h.tagName==="DIV"&&r.find("br").remove(),(this.opts.cleanInlineOnEnter||h.innerHTML==="<br>")&&r.html(""),this.caret.setStart(h)},_isNeedToReplaceBlock:function(r){return r.tagName==="DIV"&&this.utils.isEmptyHtml(r.innerHTML)},_isNeedToCleanBlockStyle:function(r){return r.tagName==="P"&&this.utils.isEmptyHtml(r.innerHTML)}}),c.add("class","input.paste",{init:function(r,h,u,m,y){this.app=r,this.opts=r.opts,this.editor=r.editor,this.cleaner=r.cleaner,this.container=r.container,this.inspector=r.inspector,this.insertion=r.insertion,this.selection=r.selection,this.autoparser=r.autoparser,this.pasteHtml=m,this.pointInserted=y,this.dataTransfer=u,this._init(h)},_init:function(r){var h=this.dataTransfer||r.clipboardData,u=this.selection.getCurrent(),m=this.inspector.parse(u);if(this.dropPasted=this.dataTransfer,this.isRawCode=m.isPre()||m.isCode(),this.editor.enablePasting(),this.editor.saveScroll(),this.dropPasted||this.selection.saveMarkers(),this.isRawCode||!h){var y;!this.isRawCode&&!h&&window.clipboardData?y=window.clipboardData.getData("text"):y=h.getData("text/plain"),r.preventDefault(),this._insert(r,y);return}else if(this.pasteHtml)r.preventDefault(),this._insert(r,this.pasteHtml);else{var v=h.getData("URL"),w=this._isPlainText(h)?this.cleaner.encodeEntities(h.getData("text/plain")):h.getData("text/html");if(w=!v||v===""?w:v,h.files!==null&&h.files.length>0&&w===""){for(var S=[],C=0;C<h.files.length;C++){var T=h.files[C]||h.items[C].getAsFile();T&&S.push(T)}if(S.length>0){r.preventDefault(),this._insertFiles(r,S);return}}r.preventDefault(),this._insert(r,w)}},_isPlainText:function(r){var h=r.getData("text/plain"),u=r.getData("text/html");if(h&&u){var m=document.createElement("div");if(m.innerHTML=u,m.textContent===h)return!m.querySelector(":not(meta)")}else return h!==null},_restoreSelection:function(){this.editor.restoreScroll(),this.editor.disablePasting(),this.dropPasted||this.selection.restoreMarkers()},_insert:function(r,h){var u=this.app.broadcast("pasteBefore",h);if(h=u===void 0?h:u,h=h.trim(),h=this.isRawCode?h:this.cleaner.paste(h),h=h.trim(),h=this.isRawCode?this.cleaner.encodePhpCode(h):h,u=this.app.broadcast("pasting",h),h=u===void 0?h:u,this._restoreSelection(),!!this.opts.input){this.app.broadcast("state",!1);var m=[];if(this.isRawCode){h=h.replace("&lt;?php","<?php");var y=document.createTextNode(h);m=this.insertion.insertNode(y,"after"),this.app.broadcast("pasted",m)}else this.opts.autoparse&&this.opts.autoparsePaste&&(h=this.autoparser.parse(h)),m=this.dropPasted?this.insertion.insertToPoint(r,h,this.pointInserted):this.insertion.insertHtml(h),this.app.broadcast("pasted",m),this.app.broadcast("autoparseobserve")}},_insertFiles:function(r,h){this._restoreSelection();var u=this.opts.imageTypes.indexOf(h[0].type)!==-1,m=typeof this.dropPasted>"u";u?this.app.broadcast("dropimage",r,h,m):this.app.broadcast("dropfile",r,h,m)}}),c.add("class","input.shortcode",{init:function(r,h,u){this.app=r,this.opts=r.opts,this.utils=r.utils,this.marker=r.marker,this.keycodes=r.keycodes,this.selection=r.selection,this.worked=!1,u===this.keycodes.SPACE&&this._init()},is:function(){return this.worked},_init:function(){var r=this.selection.getCurrent();if(r&&r.nodeType===3){var h=this.utils.removeInvisibleChars(r.textContent),u=this.opts.shortcodes;for(var m in u){var y=new RegExp("^"+this.utils.escapeRegExp(m)),v=h.match(y);if(v!==null&&typeof u[m].format<"u")return this._format(u[m].format,r,y)}}},_format:function(r,h,u){var m=this.marker.insert("start");h=m.previousSibling;var y=h.textContent;y=this.utils.trimSpaces(y),y=y.replace(u,""),h.textContent=y;var v=r==="ul"||r==="ol"?"module.list.toggle":"module.block.format";this.app.api(v,r),this.selection.restoreMarkers(),this.worked=!0}}),c.add("class","input.shortcut",{init:function(r,h){this.app=r,this.opts=r.opts,this.worked=!1,this.hotkeys={8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},this.hotkeysShiftNums={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},this._init(h)},is:function(){return this.worked},_init:function(r){if(this.opts.shortcuts===!1){(r.ctrlKey||r.metaKey)&&(r.which===66||r.which===73)&&r.preventDefault();return}for(var h in this.opts.shortcuts)this._build(r,h,this.opts.shortcuts[h])},_build:function(r,h,u){for(var m=h.split(","),y=m.length,v=0;v<y;v++)typeof m[v]=="string"&&this._handler(r,m[v].trim(),u)},_handler:function(r,h,u){h=h.toLowerCase().split(" ");for(var m=this.hotkeys[r.keyCode],y=String.fromCharCode(r.which).toLowerCase(),v="",w={},S=["meta","ctrl","alt","shift"],C=0;C<S.length;C++){var T=S[C];r[T+"Key"]&&m!==T&&(v+=T+"+")}m&&(w[v+m]=!0),y&&(w[v+y]=!0,w[v+this.hotkeysShiftNums[y]]=!0,v==="shift+"&&(w[this.hotkeysShiftNums[y]]=!0));for(var _=h.length,C=0;C<_;C++)if(w[h[C]]){r.preventDefault(),this.worked=!0,u.message?(this.app.broadcast(u.message,u.args),this.app.broadcast("buffer.trigger")):u.api&&(this.app.api(u.api,u.args),this.app.broadcast("buffer.trigger"));return}}}),c.add("class","input.space",{init:function(r,h,u,m){this.app=r,this.keycodes=r.keycodes,this.insertion=r.insertion,this.selection=r.selection,this.key=u,this.lastShiftKey=m,this._init(h)},_init:function(r){if(this.selection.hasNonEditable()){r.preventDefault();return}if(!this.lastShiftKey&&this.key===this.keycodes.SPACE&&(r.ctrlKey||r.shiftKey)&&!r.metaKey){r.preventDefault(),this.insertion.insertChar("&nbsp;");return}}}),c.add("class","input.tab",{init:function(r,h){this.app=r,this.opts=r.opts,this.inspector=r.inspector,this.insertion=r.insertion,this.selection=r.selection,this._init(h)},_init:function(r){if(this.opts.tabKey){var h=this.app.broadcast("tab",r);if(h===!1)return r.preventDefault();this._traverse(r)}},_traverse:function(r){var h=this.selection.getCurrent(),u=this.inspector.parse(h);if(!u.isComponent()&&r.shiftKey)return this._insertHardTab(r,4);if(u.isList())return r.preventDefault(),this.app.api("module.list.indent");if(u.isPre()||u.isComponentType("code")&&!u.isFigcaption())return this._tabCode(r);if(this.opts.tabAsSpaces!==!1)return this._insertHardTab(r,this.opts.tabAsSpaces)},_insertHardTab:function(r,h){r.preventDefault();var u=document.createTextNode(Array(h+1).join(" "));return this.insertion.insertNode(u,"end")},_tabCode:function(r){r.preventDefault();var h=this.opts.preSpaces?document.createTextNode(Array(this.opts.preSpaces+1).join(" ")):document.createTextNode("	");return this.insertion.insertNode(h,"end")}}),c.add("module","upload",{init:function(r){this.app=r,this.opts=r.opts,this.lang=r.lang,this.utils=r.utils,this.editor=r.editor,this.progress=r.progress,this.defaults={event:!1,element:!1,name:!1,files:!1,url:!1,data:!1,paramName:!1}},build:function(r){this.p=c.extend(this.defaults,r),this.$el=c.dom(this.p.element),this.$el.get().tagName==="INPUT"?this._buildInput():this._buildBox()},send:function(r){this.p=c.extend(this.defaults,r),this.$uploadbox=this.editor.getElement(),this._send(this.p.event,this.p.files)},complete:function(r,h){this._complete(r,h)},_buildInput:function(){this.box=!1,this.prefix="",this.$uploadbox=c.dom('<div class="upload-redactor-box" />'),this.$el.hide(),this.$el.after(this.$uploadbox),this.opts.multipleUpload?this.$el.attr("multiple","multiple"):this.$el.removeAttr("multiple"),this.p.name!=="file"&&this.$el.attr("accept","image/*"),this._buildPlaceholder(),this._buildEvents()},_buildBox:function(){this.box=!0,this.prefix="box-",this.$uploadbox=this.$el,this.$uploadbox.attr("ondragstart","return false;"),this.$uploadbox.on("drop.redactor.upload",this._onDropBox.bind(this)),this.$uploadbox.on("dragover.redactor.upload",this._onDragOver.bind(this)),this.$uploadbox.on("dragleave.redactor.upload",this._onDragLeave.bind(this))},_buildPlaceholder:function(){this.$placeholder=c.dom('<div class="upload-redactor-placeholder" />'),this.$placeholder.html(this.lang.get("upload-label")),this.$uploadbox.append(this.$placeholder)},_buildEvents:function(){this.$el.on("change.redactor.upload",this._onChange.bind(this)),this.$uploadbox.on("click.redactor.upload",this._onClick.bind(this)),this.$uploadbox.on("drop.redactor.upload",this._onDrop.bind(this)),this.$uploadbox.on("dragover.redactor.upload",this._onDragOver.bind(this)),this.$uploadbox.on("dragleave.redactor.upload",this._onDragLeave.bind(this))},_onClick:function(r){r.preventDefault(),this.$el.click()},_onChange:function(r){this._send(r,this.$el.get().files)},_onDrop:function(r){r.preventDefault(),this._clear(),this._setStatusDrop(),this._send(r)},_onDragOver:function(r){return r.preventDefault(),this._setStatusHover(),!1},_onDragLeave:function(r){return r.preventDefault(),this._removeStatusHover(),!1},_onDropBox:function(r){r.preventDefault(),this._clear(),this._setStatusDrop(),this._send(r)},_removeStatusHover:function(){this.$uploadbox.removeClass("upload-redactor-"+this.prefix+"hover")},_setStatusDrop:function(){this.$uploadbox.addClass("upload-redactor-"+this.prefix+"drop")},_setStatusHover:function(){this.$uploadbox.addClass("upload-redactor-"+this.prefix+"hover")},_setStatusError:function(){this.$uploadbox.addClass("upload-redactor-"+this.prefix+"error")},_setStatusSuccess:function(){this.$uploadbox.addClass("upload-redactor-"+this.prefix+"success")},_clear:function(){for(var r=["drop","hover","error","success"],h=0;h<r.length;h++)this.$uploadbox.removeClass("upload-redactor-"+this.prefix+r[h]);this.$uploadbox.removeAttr("ondragstart")},_send:function(r,h){r=r.originalEvent||r,h=h||r.dataTransfer.files;var u=new FormData,m=this._getUploadParam();u=this._buildData(m,h,u),u=this.utils.extendData(u,this.p.data);var y=this.app.broadcast("upload.start",r,u,h);y!==!1&&this._sendData(u,h,r)},_sendData:function(r,h,u){if(this.progress.show(),typeof this.p.url=="function"){var m=this.p.url(r,h,u,this);m instanceof Promise||this._complete(m,u)}else c.ajax.post({url:this.p.url,data:r,before:(function(y){return this.app.broadcast("upload.beforeSend",y)}).bind(this),success:(function(y){this._complete(y,u)}).bind(this),error:(function(y,v,w){this._complete(y,u,w)}).bind(this)})},_getUploadParam:function(){return this.p.paramName?this.p.paramName:"file"},_buildData:function(r,h,u){if(h.length===1)u.append(r+"[]",h[0]);else if(h.length>1&&this.opts.multipleUpload!==!1)for(var m=0;m<h.length;m++)u.append(r+"[]",h[m]);return u},_complete:function(r,h,u){this._clear(),this.progress.hide(),r&&r.error?(this._setStatusError(),this.app.broadcast("upload."+this.p.name+".error",r,h,u),this.app.broadcast("upload.error",r,u)):(this._setStatusSuccess(),this.app.broadcast("upload."+this.p.name+".complete",r,h),this.app.broadcast("upload.complete",r),setTimeout(this._clear.bind(this),500))}}),c.add("class","code.component",{mixins:["dom","component"],init:function(r,h){return this.app=r,h&&h.cmnt!==void 0?h:this._init(h)},_init:function(r){var h;if(typeof r<"u"){var u=c.dom(r),m=u.closest("figure");m.length!==0?this.parse(m):(this.parse("<figure>"),this.append(r)),h=this.find("pre code, pre").last()}else h=c.dom("<pre>"),this.parse("<figure>"),this.append(h);this._initElement(h),this._initWrapper()},_initElement:function(r){r.attr({tabindex:"-1",contenteditable:!0})},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"code",tabindex:"-1",contenteditable:!1})}}),c.add("module","form",{init:function(r){this.app=r,this.lang=r.lang,this.component=r.component,this.inspector=r.inspector},onform:{remove:function(r){this._remove(r)}},oncontextbar:function(r,h){var u=this.inspector.parse(r.target);if(u.isComponentType("form")){var m=u.getComponent(),y={remove:{title:this.lang.get("delete"),api:"module.form.remove",args:m}};h.set(r,m,y,"top")}},_remove:function(r){this.component.remove(r)}}),c.add("class","form.component",{mixins:["dom","component"],init:function(r,h){return this.app=r,this.utils=r.utils,h&&h.cmnt!==void 0?h:this._init(h)},_init:function(r){if(typeof r<"u"){var h=c.dom(r),u=h.closest("form");if(u.length!==0){var m=this.utils.replaceToTag(r,"figure");this.parse(m)}else this.parse("<figure>"),this.append(r)}else this.parse("<figure>");this._initWrapper()},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"form",tabindex:"-1",contenteditable:!1})}}),c.add("module","image",{modals:{image:'<div class="redactor-modal-tab redactor-modal-tab-upload" data-title="## upload ##"><form action="">                 <input type="file" name="file">             </form></div>',imageedit:'<div class="redactor-modal-group">                 <div id="redactor-modal-image-preview" class="redactor-modal-side"></div>                 <form action="" class="redactor-modal-area">                     <div class="form-item">                         <label for="modal-image-title"> ## title ##</label>                         <input type="text" id="modal-image-title" name="title" />                     </div>                     <div class="form-item form-item-caption">                         <label for="modal-image-caption">## caption ##</label>                         <input type="text" id="modal-image-caption" name="caption" aria-label="## caption ##" />                     </div>                     <div class="form-item form-item-align">                         <label>## image-position ##</label>                         <select name="align" aria-label="## image-position ##">                             <option value="none">## none ##</option>                             <option value="left">## left ##</option>                             <option value="center">## center ##</option>                             <option value="right">## right ##</option>                         </select>                     </div>                     <div class="form-item form-item-link">                         <label for="modal-image-url">## link ##</label>                         <input type="text" id="modal-image-url" name="url" aria-label="## link ##" />                     </div>                     <div class="form-item form-item-link">                         <label class="checkbox"><input type="checkbox" name="target" aria-label="## link-in-new-tab ##"> ## link-in-new-tab ##</label>                     </div>                 </form>             </div>'},init:function(r){this.app=r,this.opts=r.opts,this.lang=r.lang,this.caret=r.caret,this.utils=r.utils,this.editor=r.editor,this.storage=r.storage,this.component=r.component,this.inspector=r.inspector,this.insertion=r.insertion,this.selection=r.selection,this.justResized=!1},oninsert:function(){this._observeImages()},onstarted:function(){this.storage.observeImages(),this.opts.imageResizable&&(this.resizer=c.create("image.resize",this.app)),this._observeImages()},ondropimage:function(r,h,u){if(this.opts.imageUpload){var m={url:this.opts.imageUpload,event:u?!1:r,files:h,name:"imagedrop",data:this.opts.imageData,paramName:this.opts.imageUploadParam};this.app.api("module.upload.send",m)}},onstop:function(){this.resizer&&this.resizer.stop()},onbottomclick:function(){this.insertion.insertToEnd(this.editor.getLastNode(),"image")},onimageresizer:{stop:function(){this.resizer&&this.resizer.hide()}},onsource:{open:function(){this.resizer&&this.resizer.hide()},closed:function(){this._observeImages(),this.resizer&&this.resizer.rebuild()}},onupload:{complete:function(){this._observeImages()},image:{complete:function(r){this._insert(r),this.app.broadcast("state",!1)},error:function(r){this._uploadError(r)}},imageedit:{complete:function(r){this._change(r)},error:function(r){this._uploadError(r)}},imagedrop:{complete:function(r,h){this._insert(r,h)},error:function(r){this._uploadError(r)}},imagereplace:{complete:function(r){this._change(r,!1)},error:function(r){this._uploadError(r)}}},onmodal:{image:{open:function(r,h){this._setUpload(r,h)}},imageedit:{open:function(r,h){this._setFormData(r,h)},opened:function(r,h){this._setFormFocus(h)},remove:function(){this._remove(this.$image)},save:function(r,h){this._save(r,h)}}},onimage:{observe:function(){this._observeImages()},resized:function(){this.justResized=!0}},oncontextbar:function(r,h){if(this.justResized){this.justResized=!1;return}var u=this.selection.getCurrent(),m=this.inspector.parse(u),y=c.dom(u).closest("img");if(!m.isFigcaption()&&m.isComponentType("image")||y.length!==0){var v=y.length!==0?y.get():m.getComponent(),w={edit:{title:this.lang.get("edit"),api:"module.image.open"},remove:{title:this.lang.get("delete"),api:"module.image.remove",args:v}};h.set(r,v,w)}},open:function(){this.$image=this._getCurrent(),this.app.api("module.modal.build",this._getModalData())},insert:function(r){this._insert(r)},remove:function(r){this._remove(r)},_getModalData:function(){var r;return this._isImage()&&this.opts.imageEditable?r={name:"imageedit",width:"800px",title:this.lang.get("edit"),handle:"save",commands:{save:{title:this.lang.get("save")},remove:{title:this.lang.get("delete"),type:"danger"},cancel:{title:this.lang.get("cancel")}}}:r={name:"image",title:this.lang.get("image")},r},_isImage:function(){return this.$image},_getCurrent:function(){var r=this.selection.getCurrent(),h=this.inspector.parse(r),u=c.dom(r).closest("img");return u.length!==0?this.component.create("image",u):h.isComponentType("image")&&h.isComponentActive()?this.component.create("image",h.getComponent()):!1},_insert:function(r,h){if(this.app.api("module.modal.close"),Array.isArray(r)){for(var u={},m=0;m<r.length;m++)u=c.extend(u,r[m]);r=u}else typeof r=="string"&&(r={file:{url:r}});if(typeof r=="object"){var y=0;for(var v in r)typeof r[v]=="object"&&y++;y>1?this._insertMultiple(r,h):this._insertSingle(r,h)}},_insertSingle:function(r,h){for(var u in r)if(typeof r[u]=="object"){var m=this._createImageAndStore(r[u]),y=h?this.insertion.insertToPoint(h,m,!1,!1):this.insertion.insertHtml(m,!1);this._removeSpaceBeforeFigure(y[0]),this.component.setActive(y[0]),this.app.broadcast("image.uploaded",y[0],r)}},_insertMultiple:function(r,h){var u=0,m=[],y;for(var v in r)if(typeof r[v]=="object"){u++;var w=this._createImageAndStore(r[v]);if(u===1)m=h?this.insertion.insertToPoint(h,w,!1,!1):this.insertion.insertHtml(w,!1);else{var S=c.dom(m[0]);S.after(w),m=[w.get()],this.app.broadcast("image.inserted",w)}y=m[0],this._removeSpaceBeforeFigure(m[0]),this.app.broadcast("image.uploaded",m[0],r)}this.component.setActive(y)},_createImageAndStore:function(r){var h=this.component.create("image");return h.addClass("redactor-uploaded-figure"),h.setData({src:r.url,id:r.id?r.id:this.utils.getRandomId()}),this.storage.add("image",h.getElement()),h},_removeSpaceBeforeFigure:function(r){if(r){var h=r.previousSibling,u=r.nextSibling,m=c.dom(h),y=c.dom(u);this.opts.breakline&&(u&&y.attr("data-redactor-tag")==="br"&&y.find("br").first().remove(),h&&m.attr("data-redactor-tag")==="br"&&m.find("br").last().remove()),h&&(this._removeInvisibleSpace(h),this._removeInvisibleSpace(h.previousSibling))}},_removeInvisibleSpace:function(r){r&&r.nodeType===3&&this.utils.searchInvisibleChars(r.textContent)!==-1&&r.parentNode.removeChild(r)},_save:function(r,h){var u=h.getData(),m={title:u.title};this.opts.imageLink&&(m.link={url:u.url,target:u.target}),this.opts.imageCaption&&(m.caption=u.caption),this.opts.imagePosition&&(m.align=u.align),this.$image.setData(m),this.resizer&&this.resizer.rebuild(),this.app.broadcast("image.changed",this.$image),this.app.api("module.modal.close")},_change:function(r,h){if(typeof r=="string"&&(r={file:{url:r}}),typeof r=="object"){var u;for(var m in r)if(typeof r[m]=="object"){u=c.dom("<img>"),u.attr("src",r[m].url),this.$image.changeImage(r[m]),this.app.broadcast("image.changed",this.$image,r),this.app.broadcast("image.uploaded",this.$image,r),this.app.broadcast("hardsync");break}h!==!1&&u.on("load",(function(){this.$previewBox.html(u)}).bind(this))}},_uploadError:function(r){this.app.broadcast("image.uploadError",r)},_remove:function(r){this.app.api("module.modal.close"),this.component.remove(r)},_observeImages:function(){var r=this.editor.getElement(),h=this;r.find("img").each(function(u){var m=c.dom(u);m.off(".drop-to-replace"),m.on("dragover.drop-to-replace dragenter.drop-to-replace",function(y){y.preventDefault()}),m.on("drop.drop-to-replace",function(y){if(!h.app.isDragComponentInside())return h._setReplaceUpload(y,m)})})},_setFormData:function(r,h){this._buildPreview(r),this._buildPreviewUpload();var u=this.$image.getData(),m={title:u.title};this.opts.imageCaption?m.caption=u.caption:r.find(".form-item-caption").hide(),this.opts.imagePosition?m.align=u.align:r.find(".form-item-align").hide(),this.opts.imageLink?u.link&&(m.url=u.link.url,u.link.target&&(m.target=!0)):r.find(".form-item-link").hide(),h.setData(m)},_setFormFocus:function(r){r.getField("title").focus()},_setReplaceUpload:function(r,h){if(r=r.originalEvent||r,r.stopPropagation(),r.preventDefault(),!!this.opts.imageUpload){this.$image=this.component.create("image",h);var u={url:this.opts.imageUpload,files:r.dataTransfer.files,name:"imagereplace",data:this.opts.imageData,paramName:this.opts.imageUploadParam};this.app.api("module.upload.send",u)}},_setUpload:function(r,h){if(!this.opts.imageUpload){var u=r.getBody(),m=u.find(".redactor-modal-tab-upload");m.remove()}var y={url:this.opts.imageUpload,element:h.getField("file"),name:"image",data:this.opts.imageData,paramName:this.opts.imageUploadParam};this.app.api("module.upload.build",y)},_buildPreview:function(r){this.$preview=r.find("#redactor-modal-image-preview");var h=this.$image.getData(),u=c.dom("<img>");u.attr("src",h.src),this.$previewBox=c.dom("<div>"),this.$previewBox.append(u),this.$preview.html(""),this.$preview.append(this.$previewBox)},_buildPreviewUpload:function(){if(this.opts.imageUpload){var r=c.dom('<div class="desc">');r.html(this.lang.get("upload-change-label")),this.$preview.append(r);var h={url:this.opts.imageUpload,element:this.$previewBox,name:"imageedit",data:this.opts.imageData,paramName:this.opts.imageUploadParam};this.app.api("module.upload.build",h)}}}),c.add("class","image.component",{mixins:["dom","component"],init:function(r,h){return this.app=r,this.opts=r.opts,this.selection=r.selection,h&&h.cmnt!==void 0?h:this._init(h)},setData:function(r){for(var h in r)this._set(h,r[h])},getData:function(){for(var r=["src","title","caption","align","link","id"],h={},u=0;u<r.length;u++)h[r[u]]=this._get(r[u]);return h},getElement:function(){return this.$element},changeImage:function(r){this.$element.attr("src",r.url)},_init:function(r){var h=c.dom(r),u=h.closest("figure");r===void 0?(this.$element=c.dom("<img>"),this.parse("<figure>"),this.append(this.$element)):u.length===0?(this.parse("<figure>"),this.$element=h,this.$element.wrap(this)):(this.parse(u),this.$element=this.find("img")),this._initWrapper()},_set:function(r,h){this["_set_"+r](h)},_get:function(r){return this["_get_"+r]()},_set_src:function(r){this.$element.attr("src",r)},_set_id:function(r){this.opts.imageObserve&&this.$element.attr("data-image",r)},_set_title:function(r){r=r.trim().replace(/(<([^>]+)>)/gi,""),r===""?this.$element.removeAttr("alt"):this.$element.attr("alt",r)},_set_caption:function(r){var h=this.find("figcaption");return h.length===0&&(h=c.dom("<figcaption>"),h.attr("contenteditable","true"),this.append(h)),r===""?h.remove():h.html(r),h},_set_align:function(r){var h="",u="",m="",y=this,v=this.find("img"),w=this.find("figcaption");if(typeof this.opts.imagePosition=="object"){var S=this.opts.imagePosition;for(var C in S)y.removeClass(S[C]);var T=typeof S[r]<"u"?S[r]:!1;T&&y.addClass(T)}else{var _=v.width();switch(r){case"left":h="left",u=this.opts.imageFloatMargin;break;case"right":h="right",u=this.opts.imageFloatMargin;break;case"center":m="center",u="auto";break}y.css({float:h,width:_+"px",maxWidth:_+"px","margin-left":u,"margin-right":u,"text-align":m}),y.attr("rel",y.attr("style")),r==="none"&&(y.css("max-width",""),y.css("width","")),r==="center"?(y.css("max-width",""),y.css("width",""),w.css("text-align","center")):w.css("text-align","")}},_set_link:function(r){var h=this._findLink();if(r.url===""){h&&h.unwrap();return}return h||(h=c.dom("<a>"),this.$element.wrap(h)),h.attr("href",r.url),r.target?h.attr("target",r.target===!0?"_blank":r.target):h.removeAttr("target"),h},_get_src:function(){return this.$element.attr("src")},_get_id:function(){return this.$element.attr("data-image")},_get_title:function(){var r=this.$element.attr("alt");return r||""},_get_caption:function(){var r=this.find("figcaption");return r.length===0?"":r.html()},_get_align:function(){var r="";if(typeof this.opts.imagePosition=="object"){r="none";var h=this.opts.imagePosition;for(var u in h)if(this.hasClass(h[u])){r=u;break}}else r=this.css("text-align")==="center"?"center":this.css("float");return r},_get_link:function(){var r=this._findLink();if(r){var h=!!r.attr("target");return{url:r.attr("href"),target:h}}},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"image",tabindex:"-1",contenteditable:!1})},_findLink:function(){var r=this.find("a").filter(function(h){return c.dom(h).closest("figcaption").length===0});return r.length!==0?r:!1}}),c.add("class","image.resize",{init:function(r){this.app=r,this.$doc=r.$doc,this.$win=r.$win,this.$body=r.$body,this.editor=r.editor,this.toolbar=r.toolbar,this.inspector=r.inspector,this.$target=this.toolbar.isTarget()?this.toolbar.getTargetElement():this.$body,this._init()},rebuild:function(){this._setResizerPosition()},hide:function(){this.$target.find("#redactor-image-resizer").remove()},stop:function(){var r=this.editor.getElement();r.off(".redactor.image-resize"),this.$doc.off(".redactor.image-resize"),this.$win.off("resize.redactor.image-resize"),this.hide()},_init:function(){var r=this.editor.getElement();r.on("click.redactor.image-resize",this._build.bind(this)),this.$win.on("resize.redactor.image-resize",this._setResizerPosition.bind(this))},_build:function(r){if(this.$target.find("#redactor-image-resizer").remove(),!this.app.isReadOnly()){var h=this.inspector.parse(r.target),u=this.editor.getElement();h.isComponentType("image")&&(this.$resizableBox=u,this.$resizableImage=c.dom(h.getImageElement()),this.$resizer=c.dom("<span>"),this.$resizer.attr("id","redactor-image-resizer"),this.$target.append(this.$resizer),this._setResizerPosition(),this.$resizer.on("mousedown touchstart",this._set.bind(this)))}},_setResizerPosition:function(){if(this.$resizer){var r=this.toolbar.isTarget(),h=this.$target.offset(),u=7,m=r?u-h.top+this.$target.scrollTop():u,y=r?u-h.left:u,v=this.$resizableImage.offset(),w=this.$resizableImage.width(),S=this.$resizableImage.height(),C=this.$resizer.width(),T=this.$resizer.height();this.$resizer.css({top:Math.round(v.top+S-T+m)+"px",left:Math.round(v.left+w-C+y)+"px"})}},_set:function(r){r.preventDefault(),this.resizeHandle={x:r.pageX,y:r.pageY,el:this.$resizableImage,$figure:this.$resizableImage.closest("figure"),ratio:this.$resizableImage.width()/this.$resizableImage.height(),h:this.$resizableImage.height()},r=r.originalEvent||r,r.targetTouches&&(this.resizeHandle.x=r.targetTouches[0].pageX,this.resizeHandle.y=r.targetTouches[0].pageY),this.app.broadcast("contextbar.close"),this.app.broadcast("image.resize",this.$resizableImage),this._start()},_start:function(){this.$doc.on("mousemove.redactor.image-resize touchmove.redactor.image-resize",this._move.bind(this)),this.$doc.on("mouseup.redactor.image-resize touchend.redactor.image-resize",this._stop.bind(this))},_stop:function(){this.$doc.off(".redactor.image-resize"),this.app.broadcast("image.resized",this.$resizableImage)},_move:function(r){r.preventDefault(),r=r.originalEvent||r;var h=this.resizeHandle.h;r.targetTouches?h+=r.targetTouches[0].pageY-this.resizeHandle.y:h+=r.pageY-this.resizeHandle.y;var u=h*this.resizeHandle.ratio;u=Math.round(u),h=Math.round(h),!(h<20||u<100)&&(this._getResizableBoxWidth()<=u||(this.resizeHandle.$figure.length!==0&&this.resizeHandle.$figure.css("max-width")!==""&&this.resizeHandle.$figure.css({width:u+"px","max-width":u+"px"}),this.resizeHandle.el.attr({width:u,height:h}),this.resizeHandle.el.width(u),this.resizeHandle.el.css("max-width",u+"px"),this.resizeHandle.el.height(h),this._setResizerPosition()))},_getResizableBoxWidth:function(){var r=this.$resizableBox.width();return r-parseInt(this.$resizableBox.css("padding-left"))-parseInt(this.$resizableBox.css("padding-right"))}}),c.add("module","file",{modals:{file:'<div class="redactor-modal-tab" data-title="## upload ##"><form action="">                 <div class="form-item form-item-title">                     <label for="modal-file-title"> ## filename ## <span class="desc">(## optional ##)</span></label>                     <input type="text" id="modal-file-title" name="title" />                 </div>                 <input type="file" name="file">             </form></div>'},init:function(r){this.app=r,this.opts=r.opts,this.lang=r.lang,this.caret=r.caret,this.utils=r.utils,this.storage=r.storage,this.component=r.component,this.inspector=r.inspector,this.insertion=r.insertion,this.selection=r.selection},onstarted:function(){this.storage.observeFiles()},ondropfile:function(r,h,u){if(this.opts.fileUpload){var m={url:this.opts.fileUpload,event:u?!1:r,files:h,name:"filedrop",data:this.opts.fileData};this.app.api("module.upload.send",m)}},onmodal:{file:{open:function(r,h){this._setFormData(r,h),this._setUpload(h)},opened:function(r,h){this._setFormFocus(h),this.$form=h}}},onupload:{file:{complete:function(r){this._insert(r)},error:function(r){this._uploadError(r)}},filedrop:{complete:function(r,h){this._insert(r,h)},error:function(r){this._uploadError(r)}}},open:function(){this._open()},insert:function(r){this._insert(r)},remove:function(r){this._remove(r)},_open:function(){this.app.api("module.modal.build",this._getModalData())},_getModalData:function(){var r={name:"file",title:this.lang.get("file")};return r},_insert:function(r,h){if(this.app.api("module.modal.close"),typeof r=="object"){if(Array.isArray(r)){for(var u={},m=0;m<r.length;m++)u=c.extend(u,r[m]);r=u}var y=Object.keys(r).length>1;y?this._insertMultiple(r,h):this._insertSingle(r,h),this.$form=!1}},_insertSingle:function(r,h){var u=[];for(var m in r){var y=this._createFileAndStore(r[m]);this.opts.fileAttachment?u=this._insertAsAttachment(y):u=h?this.insertion.insertToPoint(h,y):this.insertion.insertRaw(y),this.app.broadcast("file.uploaded",u[0],r)}},_insertMultiple:function(r,h){var u=0,m=[],y;for(var v in r){u++;var w=this._createFileAndStore(r[v]);if(this.opts.fileAttachment)m=this._insertAsAttachment(w,r);else if(u===1)m=h?this.insertion.insertToPoint(h,w):this.insertion.insertRaw(w);else{var S=c.dom(m[0]);S.after(w).after(" "),m=[w.get()],this.app.broadcast("file.inserted",w)}y=w,this.app.broadcast("file.uploaded",m[0],r)}this.opts.fileAttachment||this.caret.setAfter(y)},_insertAsAttachment:function(r,h){var u=c.dom(this.opts.fileAttachment),m=r.wrapAttachment();u.append(m);var y=[m.get()];return this.app.broadcast("file.appended",y[0],h),y},_createFileAndStore:function(r){var h=this.$form?this.$form.getData():!1,u=r.name?r.name:r.url,m=!this.opts.fileAttachment&&h&&h.title!==""?h.title:this._truncateUrl(u),y=this.component.create("file");return y.attr("href",r.url),y.attr("data-file",r.id?r.id:this.utils.getRandomId()),y.attr("data-name",r.name),y.html(m),this.storage.add("file",y),y},_remove:function(r){this.selection.save();var h=this.component.create("file",r),u=this.app.broadcast("file.delete",h);u!==!1?(h.unwrap(),this.selection.restore(),this.app.broadcast("file.deleted",h)):this.selection.restore()},_truncateUrl:function(r){return r.search(/^http/)!==-1&&r.length>20?r.substring(0,20)+"...":r},_setUpload:function(r){var h={url:this.opts.fileUpload,element:r.getField("file"),name:"file",data:this.opts.fileData,paramName:this.opts.fileUploadParam};this.app.api("module.upload.build",h)},_setFormData:function(r,h){this.opts.fileAttachment?r.find(".form-item-title").hide():h.setData({title:this.selection.getText()})},_setFormFocus:function(r){r.getField("title").focus()},_uploadError:function(r){this.app.broadcast("file.uploadError",r)}}),c.add("class","file.component",{mixins:["dom","component"],init:function(r,h){return this.app=r,this.opts=r.opts,h&&h.cmnt!==void 0?h:this._init(h)},wrapAttachment:function(){return this.$wrapper=c.dom('<span class="redactor-file-item">'),this.$remover=c.dom('<span class="redactor-file-remover">'),this.$remover.html("&times;"),this.$remover.on("click",this.removeAttachment.bind(this)),this.$wrapper.append(this),this.$wrapper.append(this.$remover),this.$wrapper},removeAttachment:function(r){r.preventDefault();var h=this.app.broadcast("file.delete",this,this.$wrapper);h!==!1&&(this.$wrapper.remove(),this.app.broadcast("file.deleted",this),this.app.broadcast("file.removeAttachment",this))},_init:function(r){if(r===void 0)this.parse("<a>");else{var h=c.dom(r).closest("a");this.parse(h)}}}),c.add("module","buffer",{init:function(r){this.app=r,this.opts=r.opts,this.editor=r.editor,this.offset=r.offset,this.keycodes=r.keycodes,this.selection=r.selection,this.state=!1,this.passed=!1,this.keyPressed=!1,this.undoStorage=[],this.redoStorage=[]},onkeydown:function(r){this._listen(r)},onsyncing:function(){this.keyPressed||this.trigger(),this.keyPressed=!1},onbuffer:{trigger:function(){this.trigger()}},onstate:function(r,h,u){r&&(r.ctrlKey||r.metaKey)||r&&(this._isUndo(r)||this._isRedo(r))||(this.passed=!1,this._saveState(h,u),r===!1&&this._setUndo())},onenable:function(){this.clear()},clear:function(){this.state=!1,this.undoStorage=[],this.redoStorage=[]},undo:function(){this._getUndo()},redo:function(){this._getRedo()},trigger:function(){this.state&&this.passed===!1&&this._setUndo()},_saveState:function(r,h){var u=this.editor.getElement();this.state={html:r||u.html(),offset:h||this.offset.get()}},_listen:function(r){var h=r.which,u=r.ctrlKey||r.metaKey,m=u||r.shiftKey||r.altKey,y=[this.keycodes.SPACE,this.keycodes.ENTER,this.keycodes.BACKSPACE,this.keycodes.DELETE,this.keycodes.TAB,this.keycodes.LEFT,this.keycodes.RIGHT,this.keycodes.UP,this.keycodes.DOWN];if(this._isUndo(r)){r.preventDefault(),this.undo();return}else if(this._isRedo(r)){r.preventDefault(),this.redo();return}else!u&&y.indexOf(h)!==-1?(m=!0,this.trigger()):u&&(h===88||h===67)&&(m=!0,this.trigger());!m&&!this._hasUndo()&&this.trigger(),this.keyPressed=!0},_isUndo:function(r){var h=r.which,u=r.ctrlKey||r.metaKey;return u&&h===90&&!r.shiftKey&&!r.altKey},_isRedo:function(r){var h=r.which,u=r.ctrlKey||r.metaKey;return u&&(h===90&&r.shiftKey||h===89&&!r.shiftKey)&&!r.altKey},_setUndo:function(){var r=this.undoStorage[this.undoStorage.length-1];(typeof r>"u"||r[0]!==this.state.html)&&(this.undoStorage.push([this.state.html,this.state.offset]),this._removeOverStorage())},_setRedo:function(){var r=this.editor.getElement(),h=this.offset.get(),u=r.html();this.redoStorage.push([u,h]),this.redoStorage=this.redoStorage.slice(0,this.opts.bufferLimit)},_getUndo:function(){if(this._hasUndo()){this.passed=!0;var r=this.editor.getElement(),h=this.undoStorage.pop();this._setRedo(),r.html(h[0]),this.offset.set(h[1]),this._saveState(h[0],h[1]),this.app.broadcast("undo",h[0],h[1])}},_getRedo:function(){if(this._hasRedo()){this.passed=!0;var r=this.editor.getElement(),h=this.redoStorage.pop();this._setUndo(),r.html(h[0]),this.offset.set(h[1]),this._saveState(h[0],h[1]),this.app.broadcast("redo",h[0],h[1])}},_removeOverStorage:function(){this.undoStorage.length>this.opts.bufferLimit&&(this.undoStorage=this.undoStorage.slice(0,this.undoStorage.length-this.opts.bufferLimit))},_hasUndo:function(){return this.undoStorage.length!==0},_hasRedo:function(){return this.redoStorage.length!==0}}),c.add("module","list",{init:function(r){this.app=r,this.uuid=r.uuid,this.opts=r.opts,this.utils=r.utils,this.block=r.block,this.editor=r.editor,this.toolbar=r.toolbar,this.inspector=r.inspector,this.selection=r.selection},onbutton:{list:{observe:function(r){this._observeButton(r)}}},ondropdown:{list:{observe:function(r){this._observeDropdown(r)}}},toggle:function(r){var h=this._getBlocks(),u=this.selection.getBlock(),m=c.dom(u).parents("ul, ol",this.editor.getElement()).last();return h.length===0&&m.length!==0&&(h=[m.get()]),u&&(u.tagName==="TD"||u.tagName==="TH")&&(h=this.block.format("div")),this.selection.saveMarkers(),h=h.length!==0&&this._isUnformat(r,h)?this._unformat(r,h):this._format(r,h),this.selection.restoreMarkers(),h},indent:function(){var r=this.selection.isCollapsed(),h=this.selection.getCurrent(),u=this.inspector.parse(h),m=u.isList()?u.getListItem():!1,y=c.dom(m),v=y.prevElement(),w=v.get(),S=r&&m&&w&&w.tagName==="LI";if(S){this.selection.saveMarkers(),v=c.dom(w);var C=v.children("ul, ol"),T=y.closest("ul, ol");if(C.length!==0)C.append(y);else{var _=T.get().tagName.toLowerCase(),$=c.dom("<"+_+">");$.append(y),v.append($)}this.selection.restoreMarkers(),this.utils.isEmptyHtml(y.html())&&this.app.caret.setStart(y)}},outdent:function(){var r=this.selection.isCollapsed(),h=this.selection.getCurrent(),u=this.inspector.parse(h),m=u.isList()?u.getListItem():!1,y=c.dom(m);if(r&&m){var v=y.parent(),w=v.closest("li",".redactor-in-"+this.uuid),S=y.prevElement(),C=y.nextElement(),T=S.get(),_=C.get(),$,N,P,E,x=T===!1,k=T!==!1&&_!==!1,A=!x&&_===!1;if(this.selection.saveMarkers(),w.length!==0)if(k){$=this._getAllNext(y.get()),P=c.dom("<"+v.get().tagName.toLowerCase()+">");for(var L=0;L<$.length;L++)P.append($[L]);w.after(y),y.append(P)}else w.after(y),v.children().length===0?v.remove():x&&y.append(v);else{var D=this._createUnformatContainer(y),M=D.find("ul, ol").first();if(x)v.before(D);else if(A)v.after(D);else if(k){P=c.dom("<"+v.get().tagName.toLowerCase()+">"),$=this._getAllNext(y.get());for(var L=0;L<$.length;L++)P.append($[L]);v.after(D),D.after(P)}M.length!==0&&(E=D.nextElement(),N=E.get(),N&&N.tagName===v.get().tagName?(c.dom(N).prepend(M),M.unwrap()):D.after(M)),y.remove()}this.selection.restoreMarkers()}},_getAllNext:function(r){for(var h=[];r;){var u=c.dom(r).nextElement();if(r=u.get(),r)h.push(r);else return h}return h},_isUnformat:function(r,h){for(var u=0,m=0;m<h.length;m++)if(h[m].nodeType!==3){var y=h[m].tagName.toLowerCase();(y===r||y==="figure")&&u++}return u===h.length},_format:function(r,h){var u=["p","div","blockquote","pre","h1","h2","h3","h4","h5","h6","ul","ol"],m=this._uniteBlocks(h,u),y=[];for(var v in m){for(var w=m[v],S=this._createList(r,m[v]),C=0;C<w.length;C++){var T;if(w[C].nodeType!==3&&(w[C].tagName==="UL"||w[C].tagName==="OL")){var _=c.dom(w[C]);T=_.contents(),S.append(T),this.utils.isEmpty(_)&&_.remove()}else{T=this._createListItem(w[C]);var $=T.get().lastChild;$&&$.tagName==="BR"&&c.dom($).remove(),this.utils.normalizeTextNodes(T),S.append(T)}}y.push(S.get())}return y},_uniteBlocks:function(r,h){for(var u=0,m={0:[]},y=!1,v=0;v<r.length;v++){var w=c.dom(r[v]),S=w.closest("th, td");S.length!==0?(S.get()!==y&&(u++,m[u]=[]),this._isUniteBlock(r[v],h)&&m[u].push(r[v])):this._isUniteBlock(r[v],h)?m[u].push(r[v]):(u++,m[u]=[]),y=S.get()}return m},_isUniteBlock:function(r,h){return r.nodeType===3||h.indexOf(r.tagName.toLowerCase())!==-1},_createList:function(r,h){var u=h[h.length-1],m=c.dom(u),y=c.dom("<"+r+">");return m.after(y),y},_createListItem:function(r){var h=c.dom("<li>");if(r.nodeType===3)h.append(r);else{var u=c.dom(r);h.append(u.contents()),u.remove()}return h},_unformat:function(r,h){if(h.length===1){var u=c.dom(h[0]),m=u.find("li"),y=this.selection.getNodes({tags:["li"]}),v=this.selection.getBlock(),w=c.dom(v).closest("li");if(y.length===0&&w.length!==0&&(y=[w.get()]),y.length===m.length)return this._unformatEntire(h[0]);var S=this._getItemsPosition(m,y);if(S==="Top")return this._unformatAtSide("before",y,u);if(S==="Bottom")return y.reverse(),this._unformatAtSide("after",y,u);if(S==="Middle"){var C=c.dom(y[y.length-1]),T=!1,_=!1,$=c.dom("<"+u.get().tagName.toLowerCase()+">");m.each(function(x){if(T){var k=c.dom(x);k.closest(".redactor-split-item").length===0&&(_===!1||k.closest(_).length===0)&&k.addClass("redactor-split-item"),_=k}x===C.get()&&(T=!0)}),m.filter(".redactor-split-item").each(function(x){var k=c.dom(x);k.removeClass("redactor-split-item"),$.append(x)}),u.after($),y.reverse();for(var N=0;N<y.length;N++){var P=c.dom(y[N]),E=this._createUnformatContainer(P);u.after(E),E.find("ul, ol").remove(),P.remove()}return}}else for(var N=0;N<h.length;N++)h[N].nodeType!==3&&h[N].tagName.toLowerCase()===r&&this._unformatEntire(h[N])},_unformatEntire:function(r){var h=c.dom(r),u=h.find("li");u.each((function(m){var y=c.dom(m),v=this._createUnformatContainer(y);y.remove(),h.before(v)}).bind(this)),h.remove()},_unformatAtSide:function(r,h,u){for(var m=0;m<h.length;m++){var y=c.dom(h[m]),v=this._createUnformatContainer(y);u[r](v);var w=v.find("ul, ol").first();y.append(w),w.each(function(S){var C=c.dom(S),T=C.closest("li");T.get()===h[m]&&(C.unwrap(),T.addClass("r-unwrapped"))}),this.utils.isEmptyHtml(y.html())&&y.remove()}u.find(".r-unwrapped").each(function(S){var C=c.dom(S);C.html().trim()===""?C.remove():C.removeClass("r-unwrapped")})},_getItemsPosition:function(r,h){var u="Middle",m=h[0],y=h[h.length-1],v=r.first().get(),w=r.last().get();return v===m&&w!==y?u="Top":v!==m&&w===y&&(u="Bottom"),u},_createUnformatContainer:function(r){var h=c.dom("<"+this.opts.markup+">");return this.opts.breakline&&h.attr("data-redactor-tag","br"),h.append(r.contents()),h},_getBlocks:function(){return this.selection.getBlocks({first:!0})},_observeButton:function(){var r=this.selection.getCurrent(),h=this.inspector.parse(r),u=h.isPre()||h.isCode()||h.isFigcaption();this._observeButtonsList(u,["lists","ul","ol","outdent","indent"]);var m=this.toolbar.getButton("outdent"),y=this.toolbar.getButton("indent");this._observeIndent(y,m)},_observeDropdown:function(r){var h=r.getItem("outdent"),u=r.getItem("indent");this._observeIndent(u,h)},_observeIndent:function(r,h){var u=this.selection.isCollapsed(),m=this.selection.getCurrent(),y=this.inspector.parse(m),v=y.isList()?y.getListItem():!1,w=c.dom(v),S=w.prevElement(),C=S.get(),T=u&&v&&C&&C.tagName==="LI";h&&(v&&u?h.enable():h.disable()),r&&(v&&T?r.enable():r.disable())},_observeButtonsList:function(r,h){for(var u=0;u<h.length;u++){var m=this.toolbar.getButton(h[u]);m&&(r?m.disable():m.enable())}}}),c.add("class","video.component",{mixins:["dom","component"],init:function(r,h){return this.app=r,h&&h.cmnt!==void 0?h:this._init(h)},_init:function(r){if(typeof r<"u"){var h=c.dom(r),u=h.closest("figure");u.length!==0?this.parse(u):(this.parse("<figure>"),this.append(r))}else this.parse("<figure>");this._initWrapper()},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"video",tabindex:"-1",contenteditable:!1})}}),c.add("class","widget.component",{mixins:["dom","component"],init:function(r,h){return this.app=r,h&&h.cmnt!==void 0?h:this._init(h)},getData:function(){return{html:this._getHtml()}},_init:function(r){if(typeof r<"u"){var h=c.dom(r),u=h.closest("figure");u.length!==0?this.parse(u):(this.parse("<figure>"),this.html(r))}else this.parse("<figure>");this._initWrapper()},_getHtml:function(){var r=c.dom("<div>");return r.html(this.html()),r.find(".redactor-component-caret").remove(),r.html()},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"widget",tabindex:"-1",contenteditable:!1})}});var O=c;window.Redactor=window.$R=c,window.addEventListener("load",function(){c("[data-redactor]")}),typeof module=="object"&&module.exports&&(module.exports=O,module.exports.Redactor=O)})(),function(o){o.add("plugin","alignment",{translations:{en:{align:"Align","align-left":"Align Left","align-center":"Align Center","align-right":"Align Right","align-justify":"Align Justify"}},init:function(e){this.app=e,this.opts=e.opts,this.lang=e.lang,this.block=e.block,this.toolbar=e.toolbar},start:function(){var e={};e.left={title:this.lang.get("align-left"),api:"plugin.alignment.set",args:"left"},e.center={title:this.lang.get("align-center"),api:"plugin.alignment.set",args:"center"},e.right={title:this.lang.get("align-right"),api:"plugin.alignment.set",args:"right"},e.justify={title:this.lang.get("align-justify"),api:"plugin.alignment.set",args:"justify"};var t=this.toolbar.addButton("alignment",{title:this.lang.get("align")});t.setIcon('<i class="re-icon-alignment"></i>'),t.setDropdown(e)},set:function(e){if(e==="left"&&this.opts.direction==="ltr")return this._remove();var t={style:{"text-align":e}};this.block.toggle(t)},_remove:function(){this.block.remove({style:"text-align"})}})}(Redactor);const NH="",UA={class:"ui-form-richtext"},ZA=["for"],qA=["name","placeholder","value"],KA=f.defineComponent({__name:"FormRichtext",props:{modelValue:{},name:{},placeholder:{},label:{},height:{default:120},config:{},configCallbacks:{}},emits:["update:modelValue","update"],setup(o,{emit:e}){var d;const t=o,i=e;let s,n=!1;const a=`ui-form-richtext-${(d=f.getCurrentInstance())==null?void 0:d.uid}`,l=Object.assign({lang:"pt_br",toolbarFixed:!1,imagePosition:!0,imageResizable:!0,tabAsSpaces:4,plugins:["source","video","table","alignment","fullscreen","imagemanager"],buttons:["html","formatting","bold","italic","lists","link","horizontalrule","image"],maxHeight:"600px",minHeight:`${t.height}px`,multipleUpload:!1,callbacks:Object.assign({focus:function(){n=!0},blur:function(){n=!1},changed:p=>(i("update:modelValue",p),p)},t.configCallbacks)},t.config),c=()=>{s&&s.editor.focus()};return f.onMounted(()=>{s=$R(`#${a}`,l)}),f.watchEffect(()=>{const p=t.modelValue;s&&!n&&s.editor.source.setCode(p)}),f.onUnmounted(()=>{setTimeout(()=>{$R(`#${a}`,"destroy"),s=null},300)}),(p,g)=>(f.openBlock(),f.createElementBlock("div",UA,[p.label?(f.openBlock(),f.createElementBlock("label",{key:0,for:p.name,class:"form-control-label",onClick:c},f.toDisplayString(p.label),9,ZA)):f.createCommentVNode("",!0),f.createElementVNode("textarea",{name:p.name,placeholder:p.placeholder,value:p.modelValue,id:a},null,8,qA)]))}});class Ss extends Error{}class JA extends Ss{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class eE extends Ss{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class tE extends Ss{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class en extends Ss{}class Bf extends Ss{constructor(e){super(`Invalid unit ${e}`)}}class vt extends Ss{}class Yi extends Ss{constructor(){super("Zone is an abstract class")}}const J="numeric",Kt="short",Et="long",_o={year:J,month:J,day:J},Qf={year:J,month:Kt,day:J},iE={year:J,month:Kt,day:J,weekday:Kt},Vf={year:J,month:Et,day:J},Ff={year:J,month:Et,day:J,weekday:Et},Wf={hour:J,minute:J},zf={hour:J,minute:J,second:J},Xf={hour:J,minute:J,second:J,timeZoneName:Kt},Yf={hour:J,minute:J,second:J,timeZoneName:Et},Hf={hour:J,minute:J,hourCycle:"h23"},Gf={hour:J,minute:J,second:J,hourCycle:"h23"},jf={hour:J,minute:J,second:J,hourCycle:"h23",timeZoneName:Kt},Uf={hour:J,minute:J,second:J,hourCycle:"h23",timeZoneName:Et},Zf={year:J,month:J,day:J,hour:J,minute:J},qf={year:J,month:J,day:J,hour:J,minute:J,second:J},Kf={year:J,month:Kt,day:J,hour:J,minute:J},Jf={year:J,month:Kt,day:J,hour:J,minute:J,second:J},sE={year:J,month:Kt,day:J,weekday:Kt,hour:J,minute:J},ep={year:J,month:Et,day:J,hour:J,minute:J,timeZoneName:Kt},tp={year:J,month:Et,day:J,hour:J,minute:J,second:J,timeZoneName:Kt},ip={year:J,month:Et,day:J,weekday:Et,hour:J,minute:J,timeZoneName:Et},sp={year:J,month:Et,day:J,weekday:Et,hour:J,minute:J,second:J,timeZoneName:Et};class cr{get type(){throw new Yi}get name(){throw new Yi}get ianaName(){return this.name}get isUniversal(){throw new Yi}offsetName(e,t){throw new Yi}formatOffset(e,t){throw new Yi}offset(e){throw new Yi}equals(e){throw new Yi}get isValid(){throw new Yi}}let tc=null;class To extends cr{static get instance(){return tc===null&&(tc=new To),tc}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return Tp(e,t,i)}formatOffset(e,t){return fr(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let Ao={};function nE(o){return Ao[o]||(Ao[o]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:o,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Ao[o]}const rE={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function oE(o,e){const t=o.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,s,n,a,l,c,d,p]=i;return[a,s,n,l,c,d,p]}function aE(o,e){const t=o.formatToParts(e),i=[];for(let s=0;s<t.length;s++){const{type:n,value:a}=t[s],l=rE[n];n==="era"?i[l]=a:pe(l)||(i[l]=parseInt(a,10))}return i}let Eo={};class Ti extends cr{static create(e){return Eo[e]||(Eo[e]=new Ti(e)),Eo[e]}static resetCache(){Eo={},Ao={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ti.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return Tp(e,t,i,this.name)}formatOffset(e,t){return fr(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const i=nE(this.name);let[s,n,a,l,c,d,p]=i.formatToParts?aE(i,t):oE(i,t);l==="BC"&&(s=-Math.abs(s)+1);const b=Do({year:s,month:n,day:a,hour:c===24?0:c,minute:d,second:p,millisecond:0});let O=+t;const r=O%1e3;return O-=r>=0?r:1e3+r,(b-O)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let np={};function lE(o,e={}){const t=JSON.stringify([o,e]);let i=np[t];return i||(i=new Intl.ListFormat(o,e),np[t]=i),i}let ic={};function sc(o,e={}){const t=JSON.stringify([o,e]);let i=ic[t];return i||(i=new Intl.DateTimeFormat(o,e),ic[t]=i),i}let nc={};function cE(o,e={}){const t=JSON.stringify([o,e]);let i=nc[t];return i||(i=new Intl.NumberFormat(o,e),nc[t]=i),i}let rc={};function hE(o,e={}){const{base:t,...i}=e,s=JSON.stringify([o,i]);let n=rc[s];return n||(n=new Intl.RelativeTimeFormat(o,e),rc[s]=n),n}let hr=null;function dE(){return hr||(hr=new Intl.DateTimeFormat().resolvedOptions().locale,hr)}let rp={};function uE(o){let e=rp[o];if(!e){const t=new Intl.Locale(o);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,rp[o]=e}return e}function fE(o){const e=o.indexOf("-x-");e!==-1&&(o=o.substring(0,e));const t=o.indexOf("-u-");if(t===-1)return[o];{let i,s;try{i=sc(o).resolvedOptions(),s=o}catch{const c=o.substring(0,t);i=sc(c).resolvedOptions(),s=c}const{numberingSystem:n,calendar:a}=i;return[s,n,a]}}function pE(o,e,t){return(t||e)&&(o.includes("-u-")||(o+="-u"),t&&(o+=`-ca-${t}`),e&&(o+=`-nu-${e}`)),o}function gE(o){const e=[];for(let t=1;t<=12;t++){const i=Re.utc(2009,t,1);e.push(o(i))}return e}function mE(o){const e=[];for(let t=1;t<=7;t++){const i=Re.utc(2016,11,13+t);e.push(o(i))}return e}function $o(o,e,t,i){const s=o.listingMode();return s==="error"?null:s==="en"?t(e):i(e)}function bE(o){return o.numberingSystem&&o.numberingSystem!=="latn"?!1:o.numberingSystem==="latn"||!o.locale||o.locale.startsWith("en")||new Intl.DateTimeFormat(o.intl).resolvedOptions().numberingSystem==="latn"}class yE{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:n,...a}=i;if(!t||Object.keys(a).length>0){const l={useGrouping:!1,...i};i.padTo>0&&(l.minimumIntegerDigits=i.padTo),this.inf=cE(e,l)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):uc(e,3);return Ue(t,this.padTo)}}}class OE{constructor(e,t,i){this.opts=i,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const a=-1*(e.offset/60),l=a>=0?`Etc/GMT+${a}`:`Etc/GMT${a}`;e.offset!==0&&Ti.create(l).valid?(s=l,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=sc(t,n)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:i}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class xE{constructor(e,t,i){this.opts={style:"long",...i},!t&&kp()&&(this.rtf=hE(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):VE(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const vE={firstDay:1,minimalDays:4,weekend:[6,7]};class Te{static fromOpts(e){return Te.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,i,s,n=!1){const a=e||Ye.defaultLocale,l=a||(n?"en-US":dE()),c=t||Ye.defaultNumberingSystem,d=i||Ye.defaultOutputCalendar,p=hc(s)||Ye.defaultWeekSettings;return new Te(l,c,d,p,a)}static resetCache(){hr=null,ic={},nc={},rc={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:i,weekSettings:s}={}){return Te.create(e,t,i,s)}constructor(e,t,i,s,n){const[a,l,c]=fE(e);this.locale=a,this.numberingSystem=t||l||null,this.outputCalendar=i||c||null,this.weekSettings=s,this.intl=pE(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=bE(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Te.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,hc(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return $o(this,e,$p,()=>{const i=t?{month:e,day:"numeric"}:{month:e},s=t?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=gE(n=>this.extract(n,i,"month"))),this.monthsCache[s][e]})}weekdays(e,t=!1){return $o(this,e,Np,()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=t?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=mE(n=>this.extract(n,i,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return $o(this,void 0,()=>Dp,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Re.utc(2016,11,13,9),Re.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return $o(this,e,Mp,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Re.utc(-40,1,1),Re.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[e]})}extract(e,t,i){const s=this.dtFormatter(e,t),n=s.formatToParts(),a=n.find(l=>l.type.toLowerCase()===i);return a?a.value:null}numberFormatter(e={}){return new yE(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new OE(e,this.intl,t)}relFormatter(e={}){return new xE(this.intl,this.isEnglish(),e)}listFormatter(e={}){return lE(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Sp()?uE(this.locale):vE}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let oc=null;class bt extends cr{static get utcInstance(){return oc===null&&(oc=new bt(0)),oc}static instance(e){return e===0?bt.utcInstance:new bt(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new bt(Mo(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${fr(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${fr(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return fr(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class wE extends cr{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Hi(o,e){if(pe(o)||o===null)return e;if(o instanceof cr)return o;if(CE(o)){const t=o.toLowerCase();return t==="default"?e:t==="local"||t==="system"?To.instance:t==="utc"||t==="gmt"?bt.utcInstance:bt.parseSpecifier(t)||Ti.create(o)}else return Cs(o)?bt.instance(o):typeof o=="object"&&"offset"in o&&typeof o.offset=="function"?o:new wE(o)}let op=()=>Date.now(),ap="system",lp=null,cp=null,hp=null,dp=60,up,fp=null;class Ye{static get now(){return op}static set now(e){op=e}static set defaultZone(e){ap=e}static get defaultZone(){return Hi(ap,To.instance)}static get defaultLocale(){return lp}static set defaultLocale(e){lp=e}static get defaultNumberingSystem(){return cp}static set defaultNumberingSystem(e){cp=e}static get defaultOutputCalendar(){return hp}static set defaultOutputCalendar(e){hp=e}static get defaultWeekSettings(){return fp}static set defaultWeekSettings(e){fp=hc(e)}static get twoDigitCutoffYear(){return dp}static set twoDigitCutoffYear(e){dp=e%100}static get throwOnInvalid(){return up}static set throwOnInvalid(e){up=e}static resetCaches(){Te.resetCache(),Ti.resetCache()}}class Jt{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const pp=[0,31,59,90,120,151,181,212,243,273,304,334],gp=[0,31,60,91,121,152,182,213,244,274,305,335];function Vt(o,e){return new Jt("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${o}, which is invalid`)}function ac(o,e,t){const i=new Date(Date.UTC(o,e-1,t));o<100&&o>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function mp(o,e,t){return t+(dr(o)?gp:pp)[e-1]}function bp(o,e){const t=dr(o)?gp:pp,i=t.findIndex(n=>n<e),s=e-t[i];return{month:i+1,day:s}}function lc(o,e){return(o-e+7)%7+1}function Po(o,e=4,t=1){const{year:i,month:s,day:n}=o,a=mp(i,s,n),l=lc(ac(i,s,n),t);let c=Math.floor((a-l+14-e)/7),d;return c<1?(d=i-1,c=ur(d,e,t)):c>ur(i,e,t)?(d=i+1,c=1):d=i,{weekYear:d,weekNumber:c,weekday:l,...Io(o)}}function yp(o,e=4,t=1){const{weekYear:i,weekNumber:s,weekday:n}=o,a=lc(ac(i,1,e),t),l=sn(i);let c=s*7+n-a-7+e,d;c<1?(d=i-1,c+=sn(d)):c>l?(d=i+1,c-=sn(i)):d=i;const{month:p,day:g}=bp(d,c);return{year:d,month:p,day:g,...Io(o)}}function cc(o){const{year:e,month:t,day:i}=o,s=mp(e,t,i);return{year:e,ordinal:s,...Io(o)}}function Op(o){const{year:e,ordinal:t}=o,{month:i,day:s}=bp(e,t);return{year:e,month:i,day:s,...Io(o)}}function xp(o,e){if(!pe(o.localWeekday)||!pe(o.localWeekNumber)||!pe(o.localWeekYear)){if(!pe(o.weekday)||!pe(o.weekNumber)||!pe(o.weekYear))throw new en("Cannot mix locale-based week fields with ISO-based week fields");return pe(o.localWeekday)||(o.weekday=o.localWeekday),pe(o.localWeekNumber)||(o.weekNumber=o.localWeekNumber),pe(o.localWeekYear)||(o.weekYear=o.localWeekYear),delete o.localWeekday,delete o.localWeekNumber,delete o.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function kE(o,e=4,t=1){const i=Lo(o.weekYear),s=Ft(o.weekNumber,1,ur(o.weekYear,e,t)),n=Ft(o.weekday,1,7);return i?s?n?!1:Vt("weekday",o.weekday):Vt("week",o.weekNumber):Vt("weekYear",o.weekYear)}function SE(o){const e=Lo(o.year),t=Ft(o.ordinal,1,sn(o.year));return e?t?!1:Vt("ordinal",o.ordinal):Vt("year",o.year)}function vp(o){const e=Lo(o.year),t=Ft(o.month,1,12),i=Ft(o.day,1,No(o.year,o.month));return e?t?i?!1:Vt("day",o.day):Vt("month",o.month):Vt("year",o.year)}function wp(o){const{hour:e,minute:t,second:i,millisecond:s}=o,n=Ft(e,0,23)||e===24&&t===0&&i===0&&s===0,a=Ft(t,0,59),l=Ft(i,0,59),c=Ft(s,0,999);return n?a?l?c?!1:Vt("millisecond",s):Vt("second",i):Vt("minute",t):Vt("hour",e)}function pe(o){return typeof o>"u"}function Cs(o){return typeof o=="number"}function Lo(o){return typeof o=="number"&&o%1===0}function CE(o){return typeof o=="string"}function _E(o){return Object.prototype.toString.call(o)==="[object Date]"}function kp(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Sp(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function TE(o){return Array.isArray(o)?o:[o]}function Cp(o,e,t){if(o.length!==0)return o.reduce((i,s)=>{const n=[e(s),s];return i&&t(i[0],n[0])===i[0]?i:n},null)[1]}function AE(o,e){return e.reduce((t,i)=>(t[i]=o[i],t),{})}function tn(o,e){return Object.prototype.hasOwnProperty.call(o,e)}function hc(o){if(o==null)return null;if(typeof o!="object")throw new vt("Week settings must be an object");if(!Ft(o.firstDay,1,7)||!Ft(o.minimalDays,1,7)||!Array.isArray(o.weekend)||o.weekend.some(e=>!Ft(e,1,7)))throw new vt("Invalid week settings");return{firstDay:o.firstDay,minimalDays:o.minimalDays,weekend:Array.from(o.weekend)}}function Ft(o,e,t){return Lo(o)&&o>=e&&o<=t}function EE(o,e){return o-e*Math.floor(o/e)}function Ue(o,e=2){const t=o<0;let i;return t?i="-"+(""+-o).padStart(e,"0"):i=(""+o).padStart(e,"0"),i}function Gi(o){if(!(pe(o)||o===null||o===""))return parseInt(o,10)}function _s(o){if(!(pe(o)||o===null||o===""))return parseFloat(o)}function dc(o){if(!(pe(o)||o===null||o==="")){const e=parseFloat("0."+o)*1e3;return Math.floor(e)}}function uc(o,e,t=!1){const i=10**e;return(t?Math.trunc:Math.round)(o*i)/i}function dr(o){return o%4===0&&(o%100!==0||o%400===0)}function sn(o){return dr(o)?366:365}function No(o,e){const t=EE(e-1,12)+1,i=o+(e-t)/12;return t===2?dr(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Do(o){let e=Date.UTC(o.year,o.month-1,o.day,o.hour,o.minute,o.second,o.millisecond);return o.year<100&&o.year>=0&&(e=new Date(e),e.setUTCFullYear(o.year,o.month-1,o.day)),+e}function _p(o,e,t){return-lc(ac(o,1,e),t)+e-1}function ur(o,e=4,t=1){const i=_p(o,e,t),s=_p(o+1,e,t);return(sn(o)-i+s)/7}function fc(o){return o>99?o:o>Ye.twoDigitCutoffYear?1900+o:2e3+o}function Tp(o,e,t,i=null){const s=new Date(o),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(n.timeZone=i);const a={timeZoneName:e,...n},l=new Intl.DateTimeFormat(t,a).formatToParts(s).find(c=>c.type.toLowerCase()==="timezonename");return l?l.value:null}function Mo(o,e){let t=parseInt(o,10);Number.isNaN(t)&&(t=0);const i=parseInt(e,10)||0,s=t<0||Object.is(t,-0)?-i:i;return t*60+s}function Ap(o){const e=Number(o);if(typeof o=="boolean"||o===""||Number.isNaN(e))throw new vt(`Invalid unit value ${o}`);return e}function Ro(o,e){const t={};for(const i in o)if(tn(o,i)){const s=o[i];if(s==null)continue;t[e(i)]=Ap(s)}return t}function fr(o,e){const t=Math.trunc(Math.abs(o/60)),i=Math.trunc(Math.abs(o%60)),s=o>=0?"+":"-";switch(e){case"short":return`${s}${Ue(t,2)}:${Ue(i,2)}`;case"narrow":return`${s}${t}${i>0?`:${i}`:""}`;case"techie":return`${s}${Ue(t,2)}${Ue(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Io(o){return AE(o,["hour","minute","second","millisecond"])}const $E=["January","February","March","April","May","June","July","August","September","October","November","December"],Ep=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],PE=["J","F","M","A","M","J","J","A","S","O","N","D"];function $p(o){switch(o){case"narrow":return[...PE];case"short":return[...Ep];case"long":return[...$E];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Pp=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Lp=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],LE=["M","T","W","T","F","S","S"];function Np(o){switch(o){case"narrow":return[...LE];case"short":return[...Lp];case"long":return[...Pp];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Dp=["AM","PM"],NE=["Before Christ","Anno Domini"],DE=["BC","AD"],ME=["B","A"];function Mp(o){switch(o){case"narrow":return[...ME];case"short":return[...DE];case"long":return[...NE];default:return null}}function RE(o){return Dp[o.hour<12?0:1]}function IE(o,e){return Np(e)[o.weekday-1]}function BE(o,e){return $p(e)[o.month-1]}function QE(o,e){return Mp(e)[o.year<0?0:1]}function VE(o,e,t="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(o)===-1;if(t==="auto"&&n){const g=o==="days";switch(e){case 1:return g?"tomorrow":`next ${s[o][0]}`;case-1:return g?"yesterday":`last ${s[o][0]}`;case 0:return g?"today":`this ${s[o][0]}`}}const a=Object.is(e,-0)||e<0,l=Math.abs(e),c=l===1,d=s[o],p=i?c?d[1]:d[2]||d[1]:c?s[o][0]:o;return a?`${l} ${p} ago`:`in ${l} ${p}`}function Rp(o,e){let t="";for(const i of o)i.literal?t+=i.val:t+=e(i.val);return t}const FE={D:_o,DD:Qf,DDD:Vf,DDDD:Ff,t:Wf,tt:zf,ttt:Xf,tttt:Yf,T:Hf,TT:Gf,TTT:jf,TTTT:Uf,f:Zf,ff:Kf,fff:ep,ffff:ip,F:qf,FF:Jf,FFF:tp,FFFF:sp};class ft{static create(e,t={}){return new ft(e,t)}static parseFormat(e){let t=null,i="",s=!1;const n=[];for(let a=0;a<e.length;a++){const l=e.charAt(a);l==="'"?(i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),t=null,i="",s=!s):s||l===t?i+=l:(i.length>0&&n.push({literal:/^\s+$/.test(i),val:i}),i=l,t=l)}return i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),n}static macroTokenToFormatOpts(e){return FE[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return Ue(e,t);const i={...this.opts};return t>0&&(i.padTo=t),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,t){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(O,r)=>this.loc.extract(e,O,r),a=O=>e.isOffsetFixed&&e.offset===0&&O.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,O.format):"",l=()=>i?RE(e):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(O,r)=>i?BE(e,O):n(r?{month:O}:{month:O,day:"numeric"},"month"),d=(O,r)=>i?IE(e,O):n(r?{weekday:O}:{weekday:O,month:"long",day:"numeric"},"weekday"),p=O=>{const r=ft.macroTokenToFormatOpts(O);return r?this.formatWithSystemDefault(e,r):O},g=O=>i?QE(e,O):n({era:O},"era"),b=O=>{switch(O){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return s?n({day:"numeric"},"day"):this.num(e.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return d("short",!0);case"cccc":return d("long",!0);case"ccccc":return d("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return d("short",!1);case"EEEE":return d("long",!1);case"EEEEE":return d("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(e.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(e.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(e.year,6);case"G":return g("short");case"GG":return g("long");case"GGGGG":return g("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(O)}};return Rp(ft.parseFormat(t),b)}formatDurationFromString(e,t){const i=c=>{switch(c[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=c=>d=>{const p=i(d);return p?this.num(c.get(p),d.length):d},n=ft.parseFormat(t),a=n.reduce((c,{literal:d,val:p})=>d?c:c.concat(p),[]),l=e.shiftTo(...a.map(i).filter(c=>c));return Rp(n,s(l))}}const Ip=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function nn(...o){const e=o.reduce((t,i)=>t+i.source,"");return RegExp(`^${e}$`)}function rn(...o){return e=>o.reduce(([t,i,s],n)=>{const[a,l,c]=n(e,s);return[{...t,...a},l||i,c]},[{},null,1]).slice(0,2)}function on(o,...e){if(o==null)return[null,null];for(const[t,i]of e){const s=t.exec(o);if(s)return i(s)}return[null,null]}function Bp(...o){return(e,t)=>{const i={};let s;for(s=0;s<o.length;s++)i[o[s]]=Gi(e[t+s]);return[i,null,t+s]}}const Qp=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,WE=`(?:${Qp.source}?(?:\\[(${Ip.source})\\])?)?`,pc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Vp=RegExp(`${pc.source}${WE}`),gc=RegExp(`(?:T${Vp.source})?`),zE=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,XE=/(\d{4})-?W(\d\d)(?:-?(\d))?/,YE=/(\d{4})-?(\d{3})/,HE=Bp("weekYear","weekNumber","weekDay"),GE=Bp("year","ordinal"),jE=/(\d{4})-(\d\d)-(\d\d)/,Fp=RegExp(`${pc.source} ?(?:${Qp.source}|(${Ip.source}))?`),UE=RegExp(`(?: ${Fp.source})?`);function an(o,e,t){const i=o[e];return pe(i)?t:Gi(i)}function ZE(o,e){return[{year:an(o,e),month:an(o,e+1,1),day:an(o,e+2,1)},null,e+3]}function ln(o,e){return[{hours:an(o,e,0),minutes:an(o,e+1,0),seconds:an(o,e+2,0),milliseconds:dc(o[e+3])},null,e+4]}function pr(o,e){const t=!o[e]&&!o[e+1],i=Mo(o[e+1],o[e+2]),s=t?null:bt.instance(i);return[{},s,e+3]}function gr(o,e){const t=o[e]?Ti.create(o[e]):null;return[{},t,e+1]}const qE=RegExp(`^T?${pc.source}$`),KE=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function JE(o){const[e,t,i,s,n,a,l,c,d]=o,p=e[0]==="-",g=c&&c[0]==="-",b=(O,r=!1)=>O!==void 0&&(r||O&&p)?-O:O;return[{years:b(_s(t)),months:b(_s(i)),weeks:b(_s(s)),days:b(_s(n)),hours:b(_s(a)),minutes:b(_s(l)),seconds:b(_s(c),c==="-0"),milliseconds:b(dc(d),g)}]}const e$={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function mc(o,e,t,i,s,n,a){const l={year:e.length===2?fc(Gi(e)):Gi(e),month:Ep.indexOf(t)+1,day:Gi(i),hour:Gi(s),minute:Gi(n)};return a&&(l.second=Gi(a)),o&&(l.weekday=o.length>3?Pp.indexOf(o)+1:Lp.indexOf(o)+1),l}const t$=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function i$(o){const[,e,t,i,s,n,a,l,c,d,p,g]=o,b=mc(e,s,i,t,n,a,l);let O;return c?O=e$[c]:d?O=0:O=Mo(p,g),[b,new bt(O)]}function s$(o){return o.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const n$=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,r$=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,o$=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Wp(o){const[,e,t,i,s,n,a,l]=o;return[mc(e,s,i,t,n,a,l),bt.utcInstance]}function a$(o){const[,e,t,i,s,n,a,l]=o;return[mc(e,l,t,i,s,n,a),bt.utcInstance]}const l$=nn(zE,gc),c$=nn(XE,gc),h$=nn(YE,gc),d$=nn(Vp),zp=rn(ZE,ln,pr,gr),u$=rn(HE,ln,pr,gr),f$=rn(GE,ln,pr,gr),p$=rn(ln,pr,gr);function g$(o){return on(o,[l$,zp],[c$,u$],[h$,f$],[d$,p$])}function m$(o){return on(s$(o),[t$,i$])}function b$(o){return on(o,[n$,Wp],[r$,Wp],[o$,a$])}function y$(o){return on(o,[KE,JE])}const O$=rn(ln);function x$(o){return on(o,[qE,O$])}const v$=nn(jE,UE),w$=nn(Fp),k$=rn(ln,pr,gr);function S$(o){return on(o,[v$,zp],[w$,k$])}const Xp="Invalid Duration",Yp={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},C$={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Yp},Wt=146097/400,cn=146097/4800,_$={years:{quarters:4,months:12,weeks:Wt/7,days:Wt,hours:Wt*24,minutes:Wt*24*60,seconds:Wt*24*60*60,milliseconds:Wt*24*60*60*1e3},quarters:{months:3,weeks:Wt/28,days:Wt/4,hours:Wt*24/4,minutes:Wt*24*60/4,seconds:Wt*24*60*60/4,milliseconds:Wt*24*60*60*1e3/4},months:{weeks:cn/7,days:cn,hours:cn*24,minutes:cn*24*60,seconds:cn*24*60*60,milliseconds:cn*24*60*60*1e3},...Yp},Ts=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],T$=Ts.slice(0).reverse();function ji(o,e,t=!1){const i={values:t?e.values:{...o.values,...e.values||{}},loc:o.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||o.conversionAccuracy,matrix:e.matrix||o.matrix};return new xe(i)}function Hp(o,e){let t=e.milliseconds??0;for(const i of T$.slice(1))e[i]&&(t+=e[i]*o[i].milliseconds);return t}function Gp(o,e){const t=Hp(o,e)<0?-1:1;Ts.reduceRight((i,s)=>{if(pe(e[s]))return i;if(i){const n=e[i]*t,a=o[s][i],l=Math.floor(n/a);e[s]+=l*t,e[i]-=l*a*t}return s},null),Ts.reduce((i,s)=>{if(pe(e[s]))return i;if(i){const n=e[i]%1;e[i]-=n,e[s]+=n*o[i][s]}return s},null)}function A$(o){const e={};for(const[t,i]of Object.entries(o))i!==0&&(e[t]=i);return e}class xe{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let i=t?_$:C$;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||Te.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return xe.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new vt(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new xe({values:Ro(e,xe.normalizeUnit),loc:Te.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Cs(e))return xe.fromMillis(e);if(xe.isDuration(e))return e;if(typeof e=="object")return xe.fromObject(e);throw new vt(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[i]=y$(e);return i?xe.fromObject(i,t):xe.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[i]=x$(e);return i?xe.fromObject(i,t):xe.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new vt("need to specify a reason the Duration is invalid");const i=e instanceof Jt?e:new Jt(e,t);if(Ye.throwOnInvalid)throw new tE(i);return new xe({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Bf(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?ft.create(this.loc,i).formatDurationFromString(this,e):Xp}toHuman(e={}){if(!this.isValid)return Xp;const t=Ts.map(i=>{const s=this.values[i];return pe(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=uc(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Re.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Hp(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=xe.fromDurationLike(e),i={};for(const s of Ts)(tn(t.values,s)||tn(this.values,s))&&(i[s]=t.get(s)+this.get(s));return ji(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=xe.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=Ap(e(this.values[i],i));return ji(this,{values:t},!0)}get(e){return this[xe.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...Ro(e,xe.normalizeUnit)};return ji(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:s}={}){const a={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:s,conversionAccuracy:i};return ji(this,a)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Gp(this.matrix,e),ji(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=A$(this.normalize().shiftToAll().toObject());return ji(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(a=>xe.normalizeUnit(a));const t={},i={},s=this.toObject();let n;for(const a of Ts)if(e.indexOf(a)>=0){n=a;let l=0;for(const d in i)l+=this.matrix[d][a]*i[d],i[d]=0;Cs(s[a])&&(l+=s[a]);const c=Math.trunc(l);t[a]=c,i[a]=(l*1e3-c*1e3)/1e3}else Cs(s[a])&&(i[a]=s[a]);for(const a in i)i[a]!==0&&(t[n]+=a===n?i[a]:i[a]/this.matrix[n][a]);return Gp(this.matrix,t),ji(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return ji(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of Ts)if(!t(this.values[i],e.values[i]))return!1;return!0}}const hn="Invalid Interval";function E$(o,e){return!o||!o.isValid?Fe.invalid("missing or invalid start"):!e||!e.isValid?Fe.invalid("missing or invalid end"):e<o?Fe.invalid("end before start",`The end of an interval must be after its start, but you had start=${o.toISO()} and end=${e.toISO()}`):null}class Fe{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new vt("need to specify a reason the Interval is invalid");const i=e instanceof Jt?e:new Jt(e,t);if(Ye.throwOnInvalid)throw new eE(i);return new Fe({invalid:i})}static fromDateTimes(e,t){const i=br(e),s=br(t),n=E$(i,s);return n??new Fe({start:i,end:s})}static after(e,t){const i=xe.fromDurationLike(t),s=br(e);return Fe.fromDateTimes(s,s.plus(i))}static before(e,t){const i=xe.fromDurationLike(t),s=br(e);return Fe.fromDateTimes(s.minus(i),s)}static fromISO(e,t){const[i,s]=(e||"").split("/",2);if(i&&s){let n,a;try{n=Re.fromISO(i,t),a=n.isValid}catch{a=!1}let l,c;try{l=Re.fromISO(s,t),c=l.isValid}catch{c=!1}if(a&&c)return Fe.fromDateTimes(n,l);if(a){const d=xe.fromISO(s,t);if(d.isValid)return Fe.after(n,d)}else if(c){const d=xe.fromISO(i,t);if(d.isValid)return Fe.before(l,d)}}return Fe.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const i=this.start.startOf(e,t);let s;return t!=null&&t.useLocaleWeeks?s=this.end.reconfigure({locale:i.locale}):s=this.end,s=s.startOf(e,t),Math.floor(s.diff(i,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?Fe.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(br).filter(a=>this.contains(a)).sort((a,l)=>a.toMillis()-l.toMillis()),i=[];let{s}=this,n=0;for(;s<this.e;){const a=t[n]||this.e,l=+a>+this.e?this.e:a;i.push(Fe.fromDateTimes(s,l)),s=l,n+=1}return i}splitBy(e){const t=xe.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,s=1,n;const a=[];for(;i<this.e;){const l=this.start.plus(t.mapUnits(c=>c*s));n=+l>+this.e?this.e:l,a.push(Fe.fromDateTimes(i,n)),i=n,s+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:Fe.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return Fe.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort((s,n)=>s.s-n.s).reduce(([s,n],a)=>n?n.overlaps(a)||n.abutsStart(a)?[s,n.union(a)]:[s.concat([n]),a]:[s,a],[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const s=[],n=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),a=Array.prototype.concat(...n),l=a.sort((c,d)=>c.time-d.time);for(const c of l)i+=c.type==="s"?1:-1,i===1?t=c.time:(t&&+t!=+c.time&&s.push(Fe.fromDateTimes(t,c.time)),t=null);return Fe.merge(s)}difference(...e){return Fe.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:hn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=_o,t={}){return this.isValid?ft.create(this.s.loc.clone(t),e).formatInterval(this):hn}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:hn}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:hn}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:hn}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:hn}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):xe.invalid(this.invalidReason)}mapEndpoints(e){return Fe.fromDateTimes(e(this.s),e(this.e))}}class Bo{static hasDST(e=Ye.defaultZone){const t=Re.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Ti.isValidZone(e)}static normalizeZone(e){return Hi(e,Ye.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Te.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Te.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Te.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Te.create(t,i,n)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||Te.create(t,i,n)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Te.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Te.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Te.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Te.create(t,null,"gregory").eras(e)}static features(){return{relative:kp(),localeWeek:Sp()}}}function jp(o,e){const t=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(e)-t(o);return Math.floor(xe.fromMillis(i).as("days"))}function $$(o,e,t){const i=[["years",(c,d)=>d.year-c.year],["quarters",(c,d)=>d.quarter-c.quarter+(d.year-c.year)*4],["months",(c,d)=>d.month-c.month+(d.year-c.year)*12],["weeks",(c,d)=>{const p=jp(c,d);return(p-p%7)/7}],["days",jp]],s={},n=o;let a,l;for(const[c,d]of i)t.indexOf(c)>=0&&(a=c,s[c]=d(o,e),l=n.plus(s),l>e?(s[c]--,o=n.plus(s),o>e&&(l=o,s[c]--,o=n.plus(s))):o=l);return[o,s,l,a]}function P$(o,e,t,i){let[s,n,a,l]=$$(o,e,t);const c=e-s,d=t.filter(g=>["hours","minutes","seconds","milliseconds"].indexOf(g)>=0);d.length===0&&(a<e&&(a=s.plus({[l]:1})),a!==s&&(n[l]=(n[l]||0)+c/(a-s)));const p=xe.fromObject(n,i);return d.length>0?xe.fromMillis(c,i).shiftTo(...d).plus(p):p}const bc={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Up={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},L$=bc.hanidec.replace(/[\[|\]]/g,"").split("");function N$(o){let e=parseInt(o,10);if(isNaN(e)){e="";for(let t=0;t<o.length;t++){const i=o.charCodeAt(t);if(o[t].search(bc.hanidec)!==-1)e+=L$.indexOf(o[t]);else for(const s in Up){const[n,a]=Up[s];i>=n&&i<=a&&(e+=i-n)}}return parseInt(e,10)}else return e}function ei({numberingSystem:o},e=""){return new RegExp(`${bc[o||"latn"]}${e}`)}const D$="missing Intl.DateTimeFormat.formatToParts support";function Ce(o,e=t=>t){return{regex:o,deser:([t])=>e(N$(t))}}const Zp=`[ ${String.fromCharCode(160)}]`,qp=new RegExp(Zp,"g");function M$(o){return o.replace(/\./g,"\\.?").replace(qp,Zp)}function Kp(o){return o.replace(/\./g,"").replace(qp," ").toLowerCase()}function ti(o,e){return o===null?null:{regex:RegExp(o.map(M$).join("|")),deser:([t])=>o.findIndex(i=>Kp(t)===Kp(i))+e}}function Jp(o,e){return{regex:o,deser:([,t,i])=>Mo(t,i),groups:e}}function Qo(o){return{regex:o,deser:([e])=>e}}function R$(o){return o.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function I$(o,e){const t=ei(e),i=ei(e,"{2}"),s=ei(e,"{3}"),n=ei(e,"{4}"),a=ei(e,"{6}"),l=ei(e,"{1,2}"),c=ei(e,"{1,3}"),d=ei(e,"{1,6}"),p=ei(e,"{1,9}"),g=ei(e,"{2,4}"),b=ei(e,"{4,6}"),O=u=>({regex:RegExp(R$(u.val)),deser:([m])=>m,literal:!0}),h=(u=>{if(o.literal)return O(u);switch(u.val){case"G":return ti(e.eras("short"),0);case"GG":return ti(e.eras("long"),0);case"y":return Ce(d);case"yy":return Ce(g,fc);case"yyyy":return Ce(n);case"yyyyy":return Ce(b);case"yyyyyy":return Ce(a);case"M":return Ce(l);case"MM":return Ce(i);case"MMM":return ti(e.months("short",!0),1);case"MMMM":return ti(e.months("long",!0),1);case"L":return Ce(l);case"LL":return Ce(i);case"LLL":return ti(e.months("short",!1),1);case"LLLL":return ti(e.months("long",!1),1);case"d":return Ce(l);case"dd":return Ce(i);case"o":return Ce(c);case"ooo":return Ce(s);case"HH":return Ce(i);case"H":return Ce(l);case"hh":return Ce(i);case"h":return Ce(l);case"mm":return Ce(i);case"m":return Ce(l);case"q":return Ce(l);case"qq":return Ce(i);case"s":return Ce(l);case"ss":return Ce(i);case"S":return Ce(c);case"SSS":return Ce(s);case"u":return Qo(p);case"uu":return Qo(l);case"uuu":return Ce(t);case"a":return ti(e.meridiems(),0);case"kkkk":return Ce(n);case"kk":return Ce(g,fc);case"W":return Ce(l);case"WW":return Ce(i);case"E":case"c":return Ce(t);case"EEE":return ti(e.weekdays("short",!1),1);case"EEEE":return ti(e.weekdays("long",!1),1);case"ccc":return ti(e.weekdays("short",!0),1);case"cccc":return ti(e.weekdays("long",!0),1);case"Z":case"ZZ":return Jp(new RegExp(`([+-]${l.source})(?::(${i.source}))?`),2);case"ZZZ":return Jp(new RegExp(`([+-]${l.source})(${i.source})?`),2);case"z":return Qo(/[a-z_+-/]{1,256}?/i);case" ":return Qo(/[^\S\n\r]/);default:return O(u)}})(o)||{invalidReason:D$};return h.token=o,h}const B$={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Q$(o,e,t){const{type:i,value:s}=o;if(i==="literal"){const c=/^\s+$/.test(s);return{literal:!c,val:c?" ":s}}const n=e[i];let a=i;i==="hour"&&(e.hour12!=null?a=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?a="hour12":a="hour24":a=t.hour12?"hour12":"hour24");let l=B$[a];if(typeof l=="object"&&(l=l[n]),l)return{literal:!1,val:l}}function V$(o){return[`^${o.map(t=>t.regex).reduce((t,i)=>`${t}(${i.source})`,"")}$`,o]}function F$(o,e,t){const i=o.match(e);if(i){const s={};let n=1;for(const a in t)if(tn(t,a)){const l=t[a],c=l.groups?l.groups+1:1;!l.literal&&l.token&&(s[l.token.val[0]]=l.deser(i.slice(n,n+c))),n+=c}return[i,s]}else return[i,{}]}function W$(o){const e=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,i;return pe(o.z)||(t=Ti.create(o.z)),pe(o.Z)||(t||(t=new bt(o.Z)),i=o.Z),pe(o.q)||(o.M=(o.q-1)*3+1),pe(o.h)||(o.h<12&&o.a===1?o.h+=12:o.h===12&&o.a===0&&(o.h=0)),o.G===0&&o.y&&(o.y=-o.y),pe(o.u)||(o.S=dc(o.u)),[Object.keys(o).reduce((n,a)=>{const l=e(a);return l&&(n[l]=o[a]),n},{}),t,i]}let yc=null;function z$(){return yc||(yc=Re.fromMillis(1555555555555)),yc}function X$(o,e){if(o.literal)return o;const t=ft.macroTokenToFormatOpts(o.val),i=ig(t,e);return i==null||i.includes(void 0)?o:i}function eg(o,e){return Array.prototype.concat(...o.map(t=>X$(t,e)))}function tg(o,e,t){const i=eg(ft.parseFormat(t),o),s=i.map(a=>I$(a,o)),n=s.find(a=>a.invalidReason);if(n)return{input:e,tokens:i,invalidReason:n.invalidReason};{const[a,l]=V$(s),c=RegExp(a,"i"),[d,p]=F$(e,c,l),[g,b,O]=p?W$(p):[null,null,void 0];if(tn(p,"a")&&tn(p,"H"))throw new en("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:i,regex:c,rawMatches:d,matches:p,result:g,zone:b,specificOffset:O}}}function Y$(o,e,t){const{result:i,zone:s,specificOffset:n,invalidReason:a}=tg(o,e,t);return[i,s,n,a]}function ig(o,e){if(!o)return null;const i=ft.create(e,o).dtFormatter(z$()),s=i.formatToParts(),n=i.resolvedOptions();return s.map(a=>Q$(a,o,n))}const Oc="Invalid DateTime",sg=864e13;function Vo(o){return new Jt("unsupported zone",`the zone "${o.name}" is not supported`)}function xc(o){return o.weekData===null&&(o.weekData=Po(o.c)),o.weekData}function vc(o){return o.localWeekData===null&&(o.localWeekData=Po(o.c,o.loc.getMinDaysInFirstWeek(),o.loc.getStartOfWeek())),o.localWeekData}function As(o,e){const t={ts:o.ts,zone:o.zone,c:o.c,o:o.o,loc:o.loc,invalid:o.invalid};return new Re({...t,...e,old:t})}function ng(o,e,t){let i=o-e*60*1e3;const s=t.offset(i);if(e===s)return[i,e];i-=(s-e)*60*1e3;const n=t.offset(i);return s===n?[i,s]:[o-Math.min(s,n)*60*1e3,Math.max(s,n)]}function Fo(o,e){o+=e*60*1e3;const t=new Date(o);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function Wo(o,e,t){return ng(Do(o),e,t)}function rg(o,e){const t=o.o,i=o.c.year+Math.trunc(e.years),s=o.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,n={...o.c,year:i,month:s,day:Math.min(o.c.day,No(i,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},a=xe.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=Do(n);let[c,d]=ng(l,t,o.zone);return a!==0&&(c+=a,d=o.zone.offset(c)),{ts:c,o:d}}function mr(o,e,t,i,s,n){const{setZone:a,zone:l}=t;if(o&&Object.keys(o).length!==0||e){const c=e||l,d=Re.fromObject(o,{...t,zone:c,specificOffset:n});return a?d:d.setZone(l)}else return Re.invalid(new Jt("unparsable",`the input "${s}" can't be parsed as ${i}`))}function zo(o,e,t=!0){return o.isValid?ft.create(Te.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(o,e):null}function wc(o,e){const t=o.c.year>9999||o.c.year<0;let i="";return t&&o.c.year>=0&&(i+="+"),i+=Ue(o.c.year,t?6:4),e?(i+="-",i+=Ue(o.c.month),i+="-",i+=Ue(o.c.day)):(i+=Ue(o.c.month),i+=Ue(o.c.day)),i}function og(o,e,t,i,s,n){let a=Ue(o.c.hour);return e?(a+=":",a+=Ue(o.c.minute),(o.c.millisecond!==0||o.c.second!==0||!t)&&(a+=":")):a+=Ue(o.c.minute),(o.c.millisecond!==0||o.c.second!==0||!t)&&(a+=Ue(o.c.second),(o.c.millisecond!==0||!i)&&(a+=".",a+=Ue(o.c.millisecond,3))),s&&(o.isOffsetFixed&&o.offset===0&&!n?a+="Z":o.o<0?(a+="-",a+=Ue(Math.trunc(-o.o/60)),a+=":",a+=Ue(Math.trunc(-o.o%60))):(a+="+",a+=Ue(Math.trunc(o.o/60)),a+=":",a+=Ue(Math.trunc(o.o%60)))),n&&(a+="["+o.zone.ianaName+"]"),a}const ag={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},H$={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},G$={ordinal:1,hour:0,minute:0,second:0,millisecond:0},lg=["year","month","day","hour","minute","second","millisecond"],j$=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],U$=["year","ordinal","hour","minute","second","millisecond"];function Z$(o){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[o.toLowerCase()];if(!e)throw new Bf(o);return e}function cg(o){switch(o.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Z$(o)}}function hg(o,e){const t=Hi(e.zone,Ye.defaultZone),i=Te.fromObject(e),s=Ye.now();let n,a;if(pe(o.year))n=s;else{for(const d of lg)pe(o[d])&&(o[d]=ag[d]);const l=vp(o)||wp(o);if(l)return Re.invalid(l);const c=t.offset(s);[n,a]=Wo(o,c,t)}return new Re({ts:n,zone:t,loc:i,o:a})}function dg(o,e,t){const i=pe(t.round)?!0:t.round,s=(a,l)=>(a=uc(a,i||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(a,l)),n=a=>t.calendary?e.hasSame(o,a)?0:e.startOf(a).diff(o.startOf(a),a).get(a):e.diff(o,a).get(a);if(t.unit)return s(n(t.unit),t.unit);for(const a of t.units){const l=n(a);if(Math.abs(l)>=1)return s(l,a)}return s(o>e?-0:0,t.units[t.units.length-1])}function ug(o){let e={},t;return o.length>0&&typeof o[o.length-1]=="object"?(e=o[o.length-1],t=Array.from(o).slice(0,o.length-1)):t=Array.from(o),[e,t]}let Re=class ze{constructor(e){const t=e.zone||Ye.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new Jt("invalid input"):null)||(t.isValid?null:Vo(t));this.ts=pe(e.ts)?Ye.now():e.ts;let s=null,n=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[s,n]=[e.old.c,e.old.o];else{const l=t.offset(this.ts);s=Fo(this.ts,l),i=Number.isNaN(s.year)?new Jt("invalid input"):null,s=i?null:s,n=i?null:l}this._zone=t,this.loc=e.loc||Te.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new ze({})}static local(){const[e,t]=ug(arguments),[i,s,n,a,l,c,d]=t;return hg({year:i,month:s,day:n,hour:a,minute:l,second:c,millisecond:d},e)}static utc(){const[e,t]=ug(arguments),[i,s,n,a,l,c,d]=t;return e.zone=bt.utcInstance,hg({year:i,month:s,day:n,hour:a,minute:l,second:c,millisecond:d},e)}static fromJSDate(e,t={}){const i=_E(e)?e.valueOf():NaN;if(Number.isNaN(i))return ze.invalid("invalid input");const s=Hi(t.zone,Ye.defaultZone);return s.isValid?new ze({ts:i,zone:s,loc:Te.fromObject(t)}):ze.invalid(Vo(s))}static fromMillis(e,t={}){if(Cs(e))return e<-sg||e>sg?ze.invalid("Timestamp out of range"):new ze({ts:e,zone:Hi(t.zone,Ye.defaultZone),loc:Te.fromObject(t)});throw new vt(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Cs(e))return new ze({ts:e*1e3,zone:Hi(t.zone,Ye.defaultZone),loc:Te.fromObject(t)});throw new vt("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=Hi(t.zone,Ye.defaultZone);if(!i.isValid)return ze.invalid(Vo(i));const s=Te.fromObject(t),n=Ro(e,cg),{minDaysInFirstWeek:a,startOfWeek:l}=xp(n,s),c=Ye.now(),d=pe(t.specificOffset)?i.offset(c):t.specificOffset,p=!pe(n.ordinal),g=!pe(n.year),b=!pe(n.month)||!pe(n.day),O=g||b,r=n.weekYear||n.weekNumber;if((O||p)&&r)throw new en("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&p)throw new en("Can't mix ordinal dates with month/day");const h=r||n.weekday&&!O;let u,m,y=Fo(c,d);h?(u=j$,m=H$,y=Po(y,a,l)):p?(u=U$,m=G$,y=cc(y)):(u=lg,m=ag);let v=!1;for(const N of u){const P=n[N];pe(P)?v?n[N]=m[N]:n[N]=y[N]:v=!0}const w=h?kE(n,a,l):p?SE(n):vp(n),S=w||wp(n);if(S)return ze.invalid(S);const C=h?yp(n,a,l):p?Op(n):n,[T,_]=Wo(C,d,i),$=new ze({ts:T,zone:i,o:_,loc:s});return n.weekday&&O&&e.weekday!==$.weekday?ze.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${$.toISO()}`):$}static fromISO(e,t={}){const[i,s]=g$(e);return mr(i,s,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,s]=m$(e);return mr(i,s,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,s]=b$(e);return mr(i,s,t,"HTTP",t)}static fromFormat(e,t,i={}){if(pe(e)||pe(t))throw new vt("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=i,a=Te.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[l,c,d,p]=Y$(a,e,t);return p?ze.invalid(p):mr(l,c,i,`format ${t}`,e,d)}static fromString(e,t,i={}){return ze.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,s]=S$(e);return mr(i,s,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new vt("need to specify a reason the DateTime is invalid");const i=e instanceof Jt?e:new Jt(e,t);if(Ye.throwOnInvalid)throw new JA(i);return new ze({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const i=ig(e,Te.fromObject(t));return i?i.map(s=>s?s.val:null).join(""):null}static expandFormat(e,t={}){return eg(ft.parseFormat(e),Te.fromObject(t)).map(s=>s.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?xc(this).weekYear:NaN}get weekNumber(){return this.isValid?xc(this).weekNumber:NaN}get weekday(){return this.isValid?xc(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?vc(this).weekday:NaN}get localWeekNumber(){return this.isValid?vc(this).weekNumber:NaN}get localWeekYear(){return this.isValid?vc(this).weekYear:NaN}get ordinal(){return this.isValid?cc(this.c).ordinal:NaN}get monthShort(){return this.isValid?Bo.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Bo.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Bo.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Bo.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,i=Do(this.c),s=this.zone.offset(i-e),n=this.zone.offset(i+e),a=this.zone.offset(i-s*t),l=this.zone.offset(i-n*t);if(a===l)return[this];const c=i-a*t,d=i-l*t,p=Fo(c,a),g=Fo(d,l);return p.hour===g.hour&&p.minute===g.minute&&p.second===g.second&&p.millisecond===g.millisecond?[As(this,{ts:c}),As(this,{ts:d})]:[this]}get isInLeapYear(){return dr(this.year)}get daysInMonth(){return No(this.year,this.month)}get daysInYear(){return this.isValid?sn(this.year):NaN}get weeksInWeekYear(){return this.isValid?ur(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?ur(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:s}=ft.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:s}}toUTC(e=0,t={}){return this.setZone(bt.instance(e),t)}toLocal(){return this.setZone(Ye.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(e=Hi(e,Ye.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(t||i){const n=e.offset(this.ts),a=this.toObject();[s]=Wo(a,n,e)}return As(this,{ts:s,zone:e})}else return ze.invalid(Vo(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){const s=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i});return As(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=Ro(e,cg),{minDaysInFirstWeek:i,startOfWeek:s}=xp(t,this.loc),n=!pe(t.weekYear)||!pe(t.weekNumber)||!pe(t.weekday),a=!pe(t.ordinal),l=!pe(t.year),c=!pe(t.month)||!pe(t.day),d=l||c,p=t.weekYear||t.weekNumber;if((d||a)&&p)throw new en("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new en("Can't mix ordinal dates with month/day");let g;n?g=yp({...Po(this.c,i,s),...t},i,s):pe(t.ordinal)?(g={...this.toObject(),...t},pe(t.day)&&(g.day=Math.min(No(g.year,g.month),g.day))):g=Op({...cc(this.c),...t});const[b,O]=Wo(g,this.o,this.zone);return As(this,{ts:b,o:O})}plus(e){if(!this.isValid)return this;const t=xe.fromDurationLike(e);return As(this,rg(this,t))}minus(e){if(!this.isValid)return this;const t=xe.fromDurationLike(e).negate();return As(this,rg(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const i={},s=xe.normalizeUnit(e);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks")if(t){const n=this.loc.getStartOfWeek(),{weekday:a}=this;a<n&&(i.weekNumber=this.weekNumber-1),i.weekday=n}else i.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);i.month=(n-1)*3+1}return this.set(i)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?ft.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Oc}toLocaleString(e=_o,t={}){return this.isValid?ft.create(this.loc.clone(t),e).formatDateTime(this):Oc}toLocaleParts(e={}){return this.isValid?ft.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const a=e==="extended";let l=wc(this,a);return l+="T",l+=og(this,a,t,i,s,n),l}toISODate({format:e="extended"}={}){return this.isValid?wc(this,e==="extended"):null}toISOWeekDate(){return zo(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:n=!1,format:a="extended"}={}){return this.isValid?(s?"T":"")+og(this,a==="extended",t,e,i,n):null}toRFC2822(){return zo(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return zo(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?wc(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(t||e)&&(i&&(s+=" "),t?s+="z":e&&(s+="ZZ")),zo(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Oc}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return xe.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},n=TE(t).map(xe.normalizeUnit),a=e.valueOf()>this.valueOf(),l=a?this:e,c=a?e:this,d=P$(l,c,n,s);return a?d.negate():d}diffNow(e="milliseconds",t={}){return this.diff(ze.now(),e,t)}until(e){return this.isValid?Fe.fromDateTimes(this,e):this}hasSame(e,t,i){if(!this.isValid)return!1;const s=e.valueOf(),n=this.setZone(e.zone,{keepLocalTime:!0});return n.startOf(t,i)<=s&&s<=n.endOf(t,i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||ze.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=e.unit;return Array.isArray(e.unit)&&(s=e.unit,n=void 0),dg(t,this.plus(i),{...e,numeric:"always",units:s,unit:n})}toRelativeCalendar(e={}){return this.isValid?dg(e.base||ze.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ze.isDateTime))throw new vt("min requires all arguments be DateTimes");return Cp(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(ze.isDateTime))throw new vt("max requires all arguments be DateTimes");return Cp(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:s=null,numberingSystem:n=null}=i,a=Te.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return tg(a,e,t)}static fromStringExplain(e,t,i={}){return ze.fromFormatExplain(e,t,i)}static get DATE_SHORT(){return _o}static get DATE_MED(){return Qf}static get DATE_MED_WITH_WEEKDAY(){return iE}static get DATE_FULL(){return Vf}static get DATE_HUGE(){return Ff}static get TIME_SIMPLE(){return Wf}static get TIME_WITH_SECONDS(){return zf}static get TIME_WITH_SHORT_OFFSET(){return Xf}static get TIME_WITH_LONG_OFFSET(){return Yf}static get TIME_24_SIMPLE(){return Hf}static get TIME_24_WITH_SECONDS(){return Gf}static get TIME_24_WITH_SHORT_OFFSET(){return jf}static get TIME_24_WITH_LONG_OFFSET(){return Uf}static get DATETIME_SHORT(){return Zf}static get DATETIME_SHORT_WITH_SECONDS(){return qf}static get DATETIME_MED(){return Kf}static get DATETIME_MED_WITH_SECONDS(){return Jf}static get DATETIME_MED_WITH_WEEKDAY(){return sE}static get DATETIME_FULL(){return ep}static get DATETIME_FULL_WITH_SECONDS(){return tp}static get DATETIME_HUGE(){return ip}static get DATETIME_HUGE_WITH_SECONDS(){return sp}};function br(o){if(Re.isDateTime(o))return o;if(o&&o.valueOf&&Cs(o.valueOf()))return Re.fromJSDate(o);if(o&&typeof o=="object")return Re.fromObject(o);throw new vt(`Unknown datetime argument: ${o}, of type ${typeof o}`)}let ot=(Ke=class extends Date{constructor(t=null,i="YYYY-MM-DD",s="en-US"){super(Ke.parseDateTime(t,i,s));Me(this,"lang");this.lang=s}static parseDateTime(t,i="YYYY-MM-DD",s="en-US"){if(!t)return new Date(new Date().setHours(0,0,0,0));if(t instanceof Ke)return t.toJSDate();if(t instanceof Date)return t;if(/^-?\d{10,}$/.test(String(t)))return new Date(Number(t));if(typeof t=="string"){const n=[];let a=null;for(;(a=Ke.regex.exec(i))!=null;)a[1]!=="\\"&&n.push(a);if(n.length){const l={year:null,month:null,shortMonth:null,longMonth:null,day:null,hour:0,minute:0,second:0,ampm:null,value:""};n[0].index>0&&(l.value+=".*?");for(const[d,p]of Object.entries(n)){const g=Number(d),{group:b,pattern:O}=Ke.formatPatterns(p[0],s);l[b]=g+1,l.value+=O,l.value+=".*?"}const c=new RegExp(`^${l.value}$`);if(c.test(t)){const d=c.exec(t),p=Number(d[l.year]);let g=null;l.month?g=Number(d[l.month])-1:l.shortMonth?g=Ke.shortMonths(s).indexOf(d[l.shortMonth]):l.longMonth&&(g=Ke.longMonths(s).indexOf(d[l.longMonth]));const b=Number(d[l.day])||1,O=Number(d[l.hour]);let r=Number.isNaN(O)?0:O;const h=Number(d[l.minute]),u=Number.isNaN(h)?0:h,m=Number(d[l.second]),y=Number.isNaN(m)?0:m,v=d[l.ampm];return v&&v==="PM"&&(r+=12,r===24&&(r=0)),new Date(p,g,b,r,u,y,0)}}}return new Date(new Date().setHours(0,0,0,0))}static shortMonths(t){return Ke.MONTH_JS.map(i=>new Date(2019,i).toLocaleString(t,{month:"short"}))}static longMonths(t){return Ke.MONTH_JS.map(i=>new Date(2019,i).toLocaleString(t,{month:"long"}))}static formatPatterns(t,i){switch(t){case"YY":case"YYYY":return{group:"year",pattern:`(\\d{${t.length}})`};case"M":return{group:"month",pattern:"(\\d{1,2})"};case"MM":return{group:"month",pattern:"(\\d{2})"};case"MMM":return{group:"shortMonth",pattern:`(${Ke.shortMonths(i).join("|")})`};case"MMMM":return{group:"longMonth",pattern:`(${Ke.longMonths(i).join("|")})`};case"D":return{group:"day",pattern:"(\\d{1,2})"};case"DD":return{group:"day",pattern:"(\\d{2})"};case"h":case"H":return{group:"hour",pattern:"(\\d{1,2})"};case"hh":case"HH":return{group:"hour",pattern:"(\\d{2})"};case"m":return{group:"minute",pattern:"(\\d{1,2})"};case"mm":return{group:"minute",pattern:"(\\d{2})"};case"s":return{group:"second",pattern:"(\\d{1,2})"};case"ss":return{group:"second",pattern:"(\\d{2})"};case"a":case"A":return{group:"ampm",pattern:"(AM|PM|am|pm)"}}}getWeek(t){const i=new Date(this.midnight_ts(this)),s=(this.getDay()+(7-t))%7;i.setDate(i.getDate()-s);const n=i.getTime();return i.setMonth(0,1),i.getDay()!==t&&i.setMonth(0,1+(4-i.getDay()+7)%7),1+Math.ceil((n-i.getTime())/6048e5)}clone(){return new Ke(this)}toJSDate(){return new Date(this)}inArray(t,i="[]"){return t.some(s=>s instanceof Array?this.isBetween(s[0],s[1],i):this.isSame(s,"day"))}isBetween(t,i,s="()"){switch(s){default:case"()":return this.midnight_ts(this)>this.midnight_ts(t)&&this.midnight_ts(this)<this.midnight_ts(i);case"[)":return this.midnight_ts(this)>=this.midnight_ts(t)&&this.midnight_ts(this)<this.midnight_ts(i);case"(]":return this.midnight_ts(this)>this.midnight_ts(t)&&this.midnight_ts(this)<=this.midnight_ts(i);case"[]":return this.midnight_ts()>=this.midnight_ts(t)&&this.midnight_ts()<=this.midnight_ts(i)}}isBefore(t,i="days"){switch(i){case"day":case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()>new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(t.getFullYear(),t.getMonth(),1).getTime()>new Date(this.getFullYear(),this.getMonth(),1).getTime();case"year":case"years":return t.getFullYear()>this.getFullYear()}throw new Error("isBefore: Invalid unit!")}isSameOrBefore(t,i="days"){switch(i){case"day":case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()>=new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(t.getFullYear(),t.getMonth(),1).getTime()>=new Date(this.getFullYear(),this.getMonth(),1).getTime()}throw new Error("isSameOrBefore: Invalid unit!")}isAfter(t,i="days"){switch(i){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>new Date(t.getFullYear(),t.getMonth(),1).getTime();case"year":case"years":return this.getFullYear()>t.getFullYear()}throw new Error("isAfter: Invalid unit!")}isSameOrAfter(t,i="days"){switch(i){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>=new Date(t.getFullYear(),t.getMonth(),1).getTime()}throw new Error("isSameOrAfter: Invalid unit!")}isSame(t,i="days"){switch(i){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()===new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()===new Date(t.getFullYear(),t.getMonth(),1).getTime()}throw new Error("isSame: Invalid unit!")}add(t,i="days"){switch(i){case"day":case"days":this.setDate(this.getDate()+t);break;case"month":case"months":this.setMonth(this.getMonth()+t)}return this}subtract(t,i="days"){switch(i){case"day":case"days":this.setDate(this.getDate()-t);break;case"month":case"months":this.setMonth(this.getMonth()-t)}return this}diff(t,i="days"){switch(i){default:case"day":case"days":return Math.round((this.midnight_ts()-this.midnight_ts(t))/864e5);case"month":case"months":let s=12*(t.getFullYear()-this.getFullYear());return s-=t.getMonth(),s+=this.getMonth(),s}}format(t,i="en-US"){let s="";const n=[];let a=null;for(;(a=Ke.regex.exec(t))!=null;)a[1]!=="\\"&&n.push(a);if(n.length){n[0].index>0&&(s+=t.substring(0,n[0].index));for(const[l,c]of Object.entries(n)){const d=Number(l);s+=this.formatTokens(c[0],i),n[d+1]&&(s+=t.substring(c.index+c[0].length,n[d+1].index)),d===n.length-1&&(s+=t.substring(c.index+c[0].length))}}return s.replace(/\\/g,"")}midnight_ts(t){return t?new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime():new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0).getTime()}formatTokens(t,i){switch(t){case"YY":return String(this.getFullYear()).slice(-2);case"YYYY":return String(this.getFullYear());case"M":return String(this.getMonth()+1);case"MM":return`0${this.getMonth()+1}`.slice(-2);case"MMM":return Ke.shortMonths(i)[this.getMonth()];case"MMMM":return Ke.longMonths(i)[this.getMonth()];case"D":return String(this.getDate());case"DD":return`0${this.getDate()}`.slice(-2);case"H":return String(this.getHours());case"HH":return`0${this.getHours()}`.slice(-2);case"h":return String(this.getHours()%12||12);case"hh":return`0${this.getHours()%12||12}`.slice(-2);case"m":return String(this.getMinutes());case"mm":return`0${this.getMinutes()}`.slice(-2);case"s":return String(this.getSeconds());case"ss":return`0${this.getSeconds()}`.slice(-2);case"a":return this.getHours()<12||this.getHours()===24?"am":"pm";case"A":return this.getHours()<12||this.getHours()===24?"AM":"PM";default:return""}}},Me(Ke,"regex",/(\\)?(Y{2,4}|M{1,4}|D{1,2}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|A|a)/g),Me(Ke,"MONTH_JS",[0,1,2,3,4,5,6,7,8,9,10,11]),Ke);class q${constructor(e){Me(this,"picker");this.picker=e}render(e,t){e||(e=new ot),e.setDate(1),e.setHours(0,0,0,0),typeof this[`get${t}View`]=="function"&&this[`get${t}View`](e)}getContainerView(e){this.picker.ui.container.innerHTML="",this.picker.options.header&&this.picker.trigger("render",{date:e.clone(),view:"Header"}),this.picker.trigger("render",{date:e.clone(),view:"Main"}),this.picker.options.autoApply||this.picker.trigger("render",{date:e.clone(),view:"Footer"})}getHeaderView(e){const t=document.createElement("header");this.picker.options.header instanceof HTMLElement&&t.appendChild(this.picker.options.header),typeof this.picker.options.header=="string"&&(t.innerHTML=this.picker.options.header),this.picker.ui.container.appendChild(t),this.picker.trigger("view",{target:t,date:e.clone(),view:"Header"})}getMainView(e){const t=document.createElement("main");this.picker.ui.container.appendChild(t);const i=document.createElement("div");i.className=`calendars grid-${this.picker.options.grid}`;for(let s=0;s<this.picker.options.calendars;s++){const n=document.createElement("div");n.className="calendar",i.appendChild(n);const a=this.getCalendarHeaderView(e.clone());n.appendChild(a),this.picker.trigger("view",{date:e.clone(),view:"CalendarHeader",index:s,target:a});const l=this.getCalendarDayNamesView();n.appendChild(l),this.picker.trigger("view",{date:e.clone(),view:"CalendarDayNames",index:s,target:l});const c=this.getCalendarDaysView(e.clone());n.appendChild(c),this.picker.trigger("view",{date:e.clone(),view:"CalendarDays",index:s,target:c});const d=this.getCalendarFooterView(this.picker.options.lang,e.clone());n.appendChild(d),this.picker.trigger("view",{date:e.clone(),view:"CalendarFooter",index:s,target:d}),this.picker.trigger("view",{date:e.clone(),view:"CalendarItem",index:s,target:n}),e.add(1,"month")}t.appendChild(i),this.picker.trigger("view",{date:e.clone(),view:"Calendars",target:i}),this.picker.trigger("view",{date:e.clone(),view:"Main",target:t})}getFooterView(e){const t=document.createElement("footer"),i=document.createElement("div");i.className="footer-buttons";const s=document.createElement("button");s.className="cancel-button unit",s.innerHTML=this.picker.options.locale.cancel,i.appendChild(s);const n=document.createElement("button");n.className="apply-button unit",n.innerHTML=this.picker.options.locale.apply,n.disabled=!0,i.appendChild(n),t.appendChild(i),this.picker.ui.container.appendChild(t),this.picker.trigger("view",{date:e,target:t,view:"Footer"})}getCalendarHeaderView(e){const t=document.createElement("div");t.className="header";const i=document.createElement("div");i.className="month-name",i.innerHTML=`<span>${e.toLocaleString(this.picker.options.lang,{month:"long"})}</span> ${e.format("YYYY")}`,t.appendChild(i);const s=document.createElement("button");s.className="previous-button unit",s.innerHTML=this.picker.options.locale.previousMonth,t.appendChild(s);const n=document.createElement("button");return n.className="next-button unit",n.innerHTML=this.picker.options.locale.nextMonth,t.appendChild(n),t}getCalendarDayNamesView(){const e=document.createElement("div");e.className="daynames-row";for(let t=1;t<=7;t++){const i=3+this.picker.options.firstDay+t,s=document.createElement("div");s.className="dayname",s.innerHTML=new Date(1970,0,i,12,0,0,0).toLocaleString(this.picker.options.lang,{weekday:"short"}),s.title=new Date(1970,0,i,12,0,0,0).toLocaleString(this.picker.options.lang,{weekday:"long"}),e.appendChild(s),this.picker.trigger("view",{dayIdx:i,view:"CalendarDayName",target:s})}return e}getCalendarDaysView(e){const t=document.createElement("div");t.className="days-grid";const i=this.calcOffsetDays(e,this.picker.options.firstDay),s=32-new Date(e.getFullYear(),e.getMonth(),32).getDate();for(let n=0;n<i;n++){const a=document.createElement("div");a.className="offset",t.appendChild(a)}for(let n=1;n<=s;n++){e.setDate(n);const a=this.getCalendarDayView(e);t.appendChild(a),this.picker.trigger("view",{date:e,view:"CalendarDay",target:a})}return t}getCalendarDayView(e){const t=this.picker.options.date?new ot(this.picker.options.date):null,i=new ot,s=document.createElement("div");return s.className="day unit",s.innerHTML=e.format("D"),s.dataset.time=String(e.getTime()),e.isSame(i,"day")&&s.classList.add("today"),[0,6].includes(e.getDay())&&s.classList.add("weekend"),this.picker.datePicked.length?this.picker.datePicked[0].isSame(e,"day")&&s.classList.add("selected"):t&&e.isSame(t,"day")&&s.classList.add("selected"),this.picker.trigger("view",{date:e,view:"CalendarDay",target:s}),s}getCalendarFooterView(e,t){const i=document.createElement("div");return i.className="footer",i}calcOffsetDays(e,t){let i=e.getDay()-t;return i<0&&(i+=7),i}}let K$=class{constructor(e){Me(this,"picker");Me(this,"instances",{});this.picker=e}initialize(){const e=[];this.picker.options.plugins.forEach(t=>{typeof t=="function"?e.push(new t):typeof t=="string"&&typeof easepick<"u"&&Object.prototype.hasOwnProperty.call(easepick,t)?e.push(new easepick[t]):console.warn(`easepick: ${t} not found.`)}),e.sort((t,i)=>t.priority>i.priority?-1:t.priority<i.priority||t.dependencies.length>i.dependencies.length?1:t.dependencies.length<i.dependencies.length?-1:0),e.forEach(t=>{t.attach(this.picker),this.instances[t.getName()]=t})}getInstance(e){return this.instances[e]}addInstance(e){if(Object.prototype.hasOwnProperty.call(this.instances,e))console.warn(`easepick: ${e} already added.`);else{if(typeof easepick<"u"&&Object.prototype.hasOwnProperty.call(easepick,e)){const t=new easepick[e];return t.attach(this.picker),this.instances[t.getName()]=t,t}if(this.getPluginFn(e)!=="undefined"){const t=new(this.getPluginFn(e));return t.attach(this.picker),this.instances[t.getName()]=t,t}console.warn(`easepick: ${e} not found.`)}return null}removeInstance(e){return e in this.instances&&this.instances[e].detach(),delete this.instances[e]}reloadInstance(e){return this.removeInstance(e),this.addInstance(e)}getPluginFn(e){return[...this.picker.options.plugins].filter(t=>typeof t=="function"&&new t().getName()===e).shift()}};class fg{constructor(e){Me(this,"Calendar",new q$(this));Me(this,"PluginManager",new K$(this));Me(this,"calendars",[]);Me(this,"datePicked",[]);Me(this,"cssLoaded",0);Me(this,"binds",{hidePicker:this.hidePicker.bind(this),show:this.show.bind(this)});Me(this,"options",{doc:document,css:[],element:null,firstDay:1,grid:1,calendars:1,lang:"en-US",date:null,format:"YYYY-MM-DD",readonly:!0,autoApply:!0,header:!1,inline:!1,scrollToDate:!0,locale:{nextMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M2.748 16L0 13.333 5.333 8 0 2.667 2.748 0l7.919 8z" fill-rule="nonzero"/></svg>',previousMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M7.919 0l2.748 2.667L5.333 8l5.334 5.333L7.919 16 0 8z" fill-rule="nonzero"/></svg>',cancel:"Cancel",apply:"Apply"},documentClick:this.binds.hidePicker,plugins:[]});Me(this,"ui",{container:null,shadowRoot:null,wrapper:null});Me(this,"version","1.2.1");const t={...this.options.locale,...e.locale};this.options={...this.options,...e},this.options.locale=t,this.handleOptions(),this.ui.wrapper=document.createElement("span"),this.ui.wrapper.style.display="none",this.ui.wrapper.style.position="absolute",this.ui.wrapper.style.pointerEvents="none",this.ui.wrapper.className="easepick-wrapper",this.ui.wrapper.attachShadow({mode:"open"}),this.ui.shadowRoot=this.ui.wrapper.shadowRoot,this.ui.container=document.createElement("div"),this.ui.container.className="container",this.options.zIndex&&(this.ui.container.style.zIndex=String(this.options.zIndex)),this.options.inline&&(this.ui.wrapper.style.position="relative",this.ui.container.classList.add("inline")),this.ui.shadowRoot.appendChild(this.ui.container),this.options.element.after(this.ui.wrapper),this.handleCSS(),this.options.element.addEventListener("click",this.binds.show),this.on("view",this.onView.bind(this)),this.on("render",this.onRender.bind(this)),this.PluginManager.initialize(),this.parseValues(),typeof this.options.setup=="function"&&this.options.setup(this),this.on("click",this.onClick.bind(this));const i=this.options.scrollToDate?this.getDate():null;this.renderAll(i)}on(e,t,i={}){this.ui.container.addEventListener(e,t,i)}off(e,t,i={}){this.ui.container.removeEventListener(e,t,i)}trigger(e,t={}){return this.ui.container.dispatchEvent(new CustomEvent(e,{detail:t}))}destroy(){this.options.element.removeEventListener("click",this.binds.show),typeof this.options.documentClick=="function"&&document.removeEventListener("click",this.options.documentClick,!0),Object.keys(this.PluginManager.instances).forEach(e=>{this.PluginManager.removeInstance(e)}),this.ui.wrapper.remove()}onRender(e){const{view:t,date:i}=e.detail;this.Calendar.render(i,t)}onView(e){const{view:t,target:i}=e.detail;t==="Footer"&&this.datePicked.length&&(i.querySelector(".apply-button").disabled=!1)}onClickHeaderButton(e){this.isCalendarHeaderButton(e)&&(e.classList.contains("next-button")?this.calendars[0].add(1,"month"):this.calendars[0].subtract(1,"month"),this.renderAll(this.calendars[0]))}onClickCalendarDay(e){if(this.isCalendarDay(e)){const t=new ot(e.dataset.time);this.options.autoApply?(this.setDate(t),this.trigger("select",{date:this.getDate()}),this.hide()):(this.datePicked[0]=t,this.trigger("preselect",{date:this.getDate()}),this.renderAll())}}onClickApplyButton(e){if(this.isApplyButton(e)){if(this.datePicked[0]instanceof Date){const t=this.datePicked[0].clone();this.setDate(t)}this.hide(),this.trigger("select",{date:this.getDate()})}}onClickCancelButton(e){this.isCancelButton(e)&&this.hide()}onClick(e){const t=e.target;if(t instanceof HTMLElement){const i=t.closest(".unit");if(!(i instanceof HTMLElement))return;this.onClickHeaderButton(i),this.onClickCalendarDay(i),this.onClickApplyButton(i),this.onClickCancelButton(i)}}isShown(){return this.ui.container.classList.contains("inline")||this.ui.container.classList.contains("show")}show(e){if(this.isShown())return;const t=e&&"target"in e?e.target:this.options.element,{top:i,left:s}=this.adjustPosition(t);this.ui.container.style.top=`${i}px`,this.ui.container.style.left=`${s}px`,this.ui.container.classList.add("show"),this.trigger("show",{target:t})}hide(){this.ui.container.classList.remove("show"),this.datePicked.length=0,this.renderAll(),this.trigger("hide")}setDate(e){const t=new ot(e,this.options.format);this.options.date=t.clone(),this.updateValues(),this.calendars.length&&this.renderAll()}getDate(){return this.options.date instanceof ot?this.options.date.clone():null}parseValues(){this.options.date?this.setDate(this.options.date):this.options.element instanceof HTMLInputElement&&this.options.element.value.length&&this.setDate(this.options.element.value),this.options.date instanceof Date||(this.options.date=null)}updateValues(){const e=this.getDate(),t=e instanceof Date?e.format(this.options.format,this.options.lang):"",i=this.options.element;i instanceof HTMLInputElement?i.value=t:i instanceof HTMLElement&&(i.innerText=t)}hidePicker(e){let t=e.target,i=null;t.shadowRoot&&(t=e.composedPath()[0],i=t.getRootNode().host),this.isShown()&&i!==this.ui.wrapper&&t!==this.options.element&&this.hide()}renderAll(e){this.trigger("render",{view:"Container",date:(e||this.calendars[0]).clone()})}isCalendarHeaderButton(e){return["previous-button","next-button"].some(t=>e.classList.contains(t))}isCalendarDay(e){return e.classList.contains("day")}isApplyButton(e){return e.classList.contains("apply-button")}isCancelButton(e){return e.classList.contains("cancel-button")}gotoDate(e){const t=new ot(e,this.options.format);t.setDate(1),this.calendars[0]=t.clone(),this.renderAll()}clear(){this.options.date=null,this.datePicked.length=0,this.updateValues(),this.renderAll(),this.trigger("clear")}handleOptions(){this.options.element instanceof HTMLElement||(this.options.element=this.options.doc.querySelector(this.options.element)),typeof this.options.documentClick=="function"&&document.addEventListener("click",this.options.documentClick,!0),this.options.element instanceof HTMLInputElement&&(this.options.element.readOnly=this.options.readonly),this.options.date?this.calendars[0]=new ot(this.options.date,this.options.format):this.calendars[0]=new ot}handleCSS(){if(Array.isArray(this.options.css))this.options.css.forEach(e=>{const t=document.createElement("link");t.href=e,t.rel="stylesheet";const i=()=>{this.cssLoaded++,this.cssLoaded===this.options.css.length&&(this.ui.wrapper.style.display="")};t.addEventListener("load",i),t.addEventListener("error",i),this.ui.shadowRoot.append(t)});else if(typeof this.options.css=="string"){const e=document.createElement("style"),t=document.createTextNode(this.options.css);e.appendChild(t),this.ui.shadowRoot.append(e),this.ui.wrapper.style.display=""}else typeof this.options.css=="function"&&(this.options.css.call(this,this),this.ui.wrapper.style.display="")}adjustPosition(e){const t=e.getBoundingClientRect(),i=this.ui.wrapper.getBoundingClientRect();this.ui.container.classList.add("calc");const s=this.ui.container.getBoundingClientRect();this.ui.container.classList.remove("calc");let n=t.bottom-i.bottom,a=t.left-i.left;return typeof window<"u"&&(window.innerHeight<n+s.height&&n-s.height>=0&&(n=t.top-i.top-s.height),window.innerWidth<a+s.width&&t.right-s.width>=0&&(a=t.right-i.right-s.width)),{left:a,top:n}}}var J$=Object.freeze({__proto__:null,Core:fg,create:fg});class eP{constructor(){Me(this,"picker");Me(this,"options");Me(this,"priority",0);Me(this,"dependencies",[])}attach(e){const t=this.getName(),i={...this.options};this.options={...this.options,...e.options[t]||{}};for(const n of Object.keys(i))if(i[n]!==null&&typeof i[n]=="object"&&Object.keys(i[n]).length&&t in e.options&&n in e.options[t]){const a={...e.options[t][n]};a!==null&&typeof a=="object"&&Object.keys(a).length&&Object.keys(a).every(l=>Object.keys(i[n]).includes(l))&&(this.options[n]={...i[n],...a})}if(this.picker=e,this.dependenciesNotFound()){const n=this.dependencies.filter(a=>!this.pluginsAsStringArray().includes(a));return void console.warn(`${this.getName()}: required dependencies (${n.join(", ")}).`)}const s=this.camelCaseToKebab(this.getName());this.picker.ui.container.classList.add(s),this.onAttach()}detach(){const e=this.camelCaseToKebab(this.getName());this.picker.ui.container.classList.remove(e),typeof this.onDetach=="function"&&this.onDetach()}dependenciesNotFound(){return this.dependencies.length&&!this.dependencies.every(e=>this.pluginsAsStringArray().includes(e))}pluginsAsStringArray(){return this.picker.options.plugins.map(e=>typeof e=="function"?new e().getName():e)}camelCaseToKebab(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}}class tP extends eP{constructor(){super(...arguments);Me(this,"tooltipElement");Me(this,"triggerElement");Me(this,"binds",{setStartDate:this.setStartDate.bind(this),setEndDate:this.setEndDate.bind(this),setDateRange:this.setDateRange.bind(this),getStartDate:this.getStartDate.bind(this),getEndDate:this.getEndDate.bind(this),onView:this.onView.bind(this),onShow:this.onShow.bind(this),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),onClickCalendarDay:this.onClickCalendarDay.bind(this),onClickApplyButton:this.onClickApplyButton.bind(this),parseValues:this.parseValues.bind(this),updateValues:this.updateValues.bind(this),clear:this.clear.bind(this)});Me(this,"options",{elementEnd:null,startDate:null,endDate:null,repick:!1,strict:!0,delimiter:" - ",tooltip:!0,tooltipNumber:t=>t,locale:{zero:"",one:"day",two:"",few:"",many:"",other:"days"},documentClick:this.hidePicker.bind(this)})}getName(){return"RangePlugin"}onAttach(){this.binds._setStartDate=this.picker.setStartDate,this.binds._setEndDate=this.picker.setEndDate,this.binds._setDateRange=this.picker.setDateRange,this.binds._getStartDate=this.picker.getStartDate,this.binds._getEndDate=this.picker.getEndDate,this.binds._parseValues=this.picker.parseValues,this.binds._updateValues=this.picker.updateValues,this.binds._clear=this.picker.clear,this.binds._onClickCalendarDay=this.picker.onClickCalendarDay,this.binds._onClickApplyButton=this.picker.onClickApplyButton,Object.defineProperties(this.picker,{setStartDate:{configurable:!0,value:this.binds.setStartDate},setEndDate:{configurable:!0,value:this.binds.setEndDate},setDateRange:{configurable:!0,value:this.binds.setDateRange},getStartDate:{configurable:!0,value:this.binds.getStartDate},getEndDate:{configurable:!0,value:this.binds.getEndDate},parseValues:{configurable:!0,value:this.binds.parseValues},updateValues:{configurable:!0,value:this.binds.updateValues},clear:{configurable:!0,value:this.binds.clear},onClickCalendarDay:{configurable:!0,value:this.binds.onClickCalendarDay},onClickApplyButton:{configurable:!0,value:this.binds.onClickApplyButton}}),this.options.elementEnd&&(this.options.elementEnd instanceof HTMLElement||(this.options.elementEnd=this.picker.options.doc.querySelector(this.options.elementEnd)),this.options.elementEnd instanceof HTMLInputElement&&(this.options.elementEnd.readOnly=this.picker.options.readonly),typeof this.picker.options.documentClick=="function"&&(document.removeEventListener("click",this.picker.options.documentClick,!0),typeof this.options.documentClick=="function"&&document.addEventListener("click",this.options.documentClick,!0)),this.options.elementEnd.addEventListener("click",this.picker.show.bind(this.picker))),this.options.repick=this.options.repick&&this.options.elementEnd instanceof HTMLElement,this.picker.options.date=null,this.picker.on("view",this.binds.onView),this.picker.on("show",this.binds.onShow),this.picker.on("mouseenter",this.binds.onMouseEnter,!0),this.picker.on("mouseleave",this.binds.onMouseLeave,!0),this.checkIntlPluralLocales()}onDetach(){Object.defineProperties(this.picker,{setStartDate:{configurable:!0,value:this.binds._setStartDate},setEndDate:{configurable:!0,value:this.binds._setEndDate},setDateRange:{configurable:!0,value:this.binds._setDateRange},getStartDate:{configurable:!0,value:this.binds._getStartDate},getEndDate:{configurable:!0,value:this.binds._getEndDate},parseValues:{configurable:!0,value:this.binds._parseValues},updateValues:{configurable:!0,value:this.binds._updateValues},clear:{configurable:!0,value:this.binds._clear},onClickCalendarDay:{configurable:!0,value:this.binds._onClickCalendarDay},onClickApplyButton:{configurable:!0,value:this.binds._onClickApplyButton}}),this.picker.off("view",this.binds.onView),this.picker.off("show",this.binds.onShow),this.picker.off("mouseenter",this.binds.onMouseEnter,!0),this.picker.off("mouseleave",this.binds.onMouseLeave,!0)}parseValues(){if(this.options.startDate||this.options.endDate)this.options.strict?this.options.startDate&&this.options.endDate?this.setDateRange(this.options.startDate,this.options.endDate):(this.options.startDate=null,this.options.endDate=null):(this.options.startDate&&this.setStartDate(this.options.startDate),this.options.endDate&&this.setEndDate(this.options.endDate));else if(this.options.elementEnd)this.options.strict?this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length&&this.options.elementEnd instanceof HTMLInputElement&&this.options.elementEnd.value.length&&this.setDateRange(this.picker.options.element.value,this.options.elementEnd.value):(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length&&this.setStartDate(this.picker.options.element.value),this.options.elementEnd instanceof HTMLInputElement&&this.options.elementEnd.value.length&&this.setEndDate(this.options.elementEnd.value));else if(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length){const[t,i]=this.picker.options.element.value.split(this.options.delimiter);this.options.strict?t&&i&&this.setDateRange(t,i):(t&&this.setStartDate(t),i&&this.setEndDate(i))}}updateValues(){const t=this.picker.options.element,i=this.options.elementEnd,s=this.picker.getStartDate(),n=this.picker.getEndDate(),a=s instanceof Date?s.format(this.picker.options.format,this.picker.options.lang):"",l=n instanceof Date?n.format(this.picker.options.format,this.picker.options.lang):"";if(i)t instanceof HTMLInputElement?t.value=a:t instanceof HTMLElement&&(t.innerText=a),i instanceof HTMLInputElement?i.value=l:i instanceof HTMLElement&&(i.innerText=l);else{const c=`${a}${a||l?this.options.delimiter:""}${l}`;t instanceof HTMLInputElement?t.value=c:t instanceof HTMLElement&&(t.innerText=c)}}clear(){this.options.startDate=null,this.options.endDate=null,this.picker.datePicked.length=0,this.updateValues(),this.picker.renderAll(),this.picker.trigger("clear")}onShow(t){const{target:i}=t.detail;this.triggerElement=i,this.picker.options.scrollToDate&&this.getStartDate()instanceof Date&&this.picker.gotoDate(this.getStartDate()),this.initializeRepick()}onView(t){const{view:i,target:s}=t.detail;if(i==="Main"&&(this.tooltipElement=document.createElement("span"),this.tooltipElement.className="range-plugin-tooltip",s.appendChild(this.tooltipElement)),i==="CalendarDay"){const n=new ot(s.dataset.time),a=this.picker.datePicked,l=a.length?this.picker.datePicked[0]:this.getStartDate(),c=a.length?this.picker.datePicked[1]:this.getEndDate();l&&l.isSame(n,"day")&&s.classList.add("start"),l&&c&&(c.isSame(n,"day")&&s.classList.add("end"),n.isBetween(l,c)&&s.classList.add("in-range"))}if(i==="Footer"){const n=this.picker.datePicked.length===1&&!this.options.strict||this.picker.datePicked.length===2;s.querySelector(".apply-button").disabled=!n}}hidePicker(t){let i=t.target,s=null;i.shadowRoot&&(i=t.composedPath()[0],s=i.getRootNode().host),this.picker.isShown()&&s!==this.picker.ui.wrapper&&i!==this.picker.options.element&&i!==this.options.elementEnd&&this.picker.hide()}setStartDate(t){const i=new ot(t,this.picker.options.format);this.options.startDate=i?i.clone():null,this.updateValues(),this.picker.renderAll()}setEndDate(t){const i=new ot(t,this.picker.options.format);this.options.endDate=i?i.clone():null,this.updateValues(),this.picker.renderAll()}setDateRange(t,i){const s=new ot(t,this.picker.options.format),n=new ot(i,this.picker.options.format);this.options.startDate=s?s.clone():null,this.options.endDate=n?n.clone():null,this.updateValues(),this.picker.renderAll()}getStartDate(){return this.options.startDate instanceof Date?this.options.startDate.clone():null}getEndDate(){return this.options.endDate instanceof Date?this.options.endDate.clone():null}onMouseEnter(t){const i=t.target;if(i instanceof HTMLElement){this.isContainer(i)&&this.initializeRepick();const s=i.closest(".unit");if(!(s instanceof HTMLElement))return;if(this.picker.isCalendarDay(s)){if(this.picker.datePicked.length!==1)return;let n=this.picker.datePicked[0].clone(),a=new ot(s.dataset.time),l=!1;if(n.isAfter(a,"day")){const c=n.clone();n=a.clone(),a=c.clone(),l=!0}if([...this.picker.ui.container.querySelectorAll(".day")].forEach(c=>{const d=new ot(c.dataset.time),p=this.picker.Calendar.getCalendarDayView(d);d.isBetween(n,a)&&p.classList.add("in-range"),d.isSame(this.picker.datePicked[0],"day")&&(p.classList.add("start"),p.classList.toggle("flipped",l)),c===s&&(p.classList.add("end"),p.classList.toggle("flipped",l)),c.className=p.className}),this.options.tooltip){const c=this.options.tooltipNumber(a.diff(n,"day")+1);if(c>0){const d=new Intl.PluralRules(this.picker.options.lang).select(c),p=`${c} ${this.options.locale[d]}`;this.showTooltip(s,p)}else this.hideTooltip()}}}}onMouseLeave(t){if(this.isContainer(t.target)&&this.options.repick){const i=this.getStartDate(),s=this.getEndDate();i&&s&&(this.picker.datePicked.length=0,this.picker.renderAll())}}onClickCalendarDay(t){if(this.picker.isCalendarDay(t)){this.picker.datePicked.length===2&&(this.picker.datePicked.length=0);const i=new ot(t.dataset.time);if(this.picker.datePicked[this.picker.datePicked.length]=i,this.picker.datePicked.length===2&&this.picker.datePicked[0].isAfter(this.picker.datePicked[1])){const s=this.picker.datePicked[1].clone();this.picker.datePicked[1]=this.picker.datePicked[0].clone(),this.picker.datePicked[0]=s.clone()}this.picker.datePicked.length!==1&&this.picker.options.autoApply||this.picker.trigger("preselect",{start:this.picker.datePicked[0]instanceof Date?this.picker.datePicked[0].clone():null,end:this.picker.datePicked[1]instanceof Date?this.picker.datePicked[1].clone():null}),this.picker.datePicked.length===1&&(!this.options.strict&&this.picker.options.autoApply&&(this.picker.options.element===this.triggerElement&&this.setStartDate(this.picker.datePicked[0]),this.options.elementEnd===this.triggerElement&&this.setEndDate(this.picker.datePicked[0]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()})),this.picker.renderAll()),this.picker.datePicked.length===2&&(this.picker.options.autoApply?(this.setDateRange(this.picker.datePicked[0],this.picker.datePicked[1]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide()):(this.hideTooltip(),this.picker.renderAll()))}}onClickApplyButton(t){this.picker.isApplyButton(t)&&(this.picker.datePicked.length!==1||this.options.strict||(this.picker.options.element===this.triggerElement&&(this.options.endDate=null,this.setStartDate(this.picker.datePicked[0])),this.options.elementEnd===this.triggerElement&&(this.options.startDate=null,this.setEndDate(this.picker.datePicked[0]))),this.picker.datePicked.length===2&&this.setDateRange(this.picker.datePicked[0],this.picker.datePicked[1]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide())}showTooltip(t,i){this.tooltipElement.style.visibility="visible",this.tooltipElement.innerHTML=i;const s=this.picker.ui.container.getBoundingClientRect(),n=this.tooltipElement.getBoundingClientRect(),a=t.getBoundingClientRect();let l=a.top,c=a.left;l-=s.top,c-=s.left,l-=n.height,c-=n.width/2,c+=a.width/2,this.tooltipElement.style.top=`${l}px`,this.tooltipElement.style.left=`${c}px`}hideTooltip(){this.tooltipElement.style.visibility="hidden"}checkIntlPluralLocales(){if(!this.options.tooltip)return;const t=[...new Set([new Intl.PluralRules(this.picker.options.lang).select(0),new Intl.PluralRules(this.picker.options.lang).select(1),new Intl.PluralRules(this.picker.options.lang).select(2),new Intl.PluralRules(this.picker.options.lang).select(6),new Intl.PluralRules(this.picker.options.lang).select(18)])],i=Object.keys(this.options.locale);t.every(s=>i.includes(s))||console.warn(`${this.getName()}: provide locales (${t.join(", ")}) for correct tooltip text.`)}initializeRepick(){if(!this.options.repick)return;const t=this.getStartDate(),i=this.getEndDate();i&&this.triggerElement===this.picker.options.element&&(this.picker.datePicked[0]=i),t&&this.triggerElement===this.options.elementEnd&&(this.picker.datePicked[0]=t)}isContainer(t){return t===this.picker.ui.container}}const MH="",iP=["placeholder"],sP="DD/MM/YYYY",pg=f.defineComponent({__name:"FormDatepicker",props:{modelValue:{},config:{default:()=>({})},placeholder:{},label:{},range:{type:Boolean},noClear:{type:Boolean},size:{},disabled:{type:Boolean},loading:{type:Boolean},float:{type:Boolean},labelInfo:{},state:{type:Boolean,default:void 0},invalidFeedback:{},last:{type:Boolean},autofocus:{type:Boolean}},emits:["update:modelValue","update"],setup(o,{expose:e,emit:t}){var g;const i=o,s=t,n=f.shallowRef(),a=`ui-form-datepicker-${(g=f.getCurrentInstance())==null?void 0:g.uid}`,l=f.computed(()=>[i.range&&"-range",i.size&&`-${i.size}`,i.state===!0?"-valid":i.state===!1?"-invalid":""]),c=b=>{s("update:modelValue",b),s("update",b)},d=f.watchEffect(()=>{if(n.value&&i.modelValue){const b=i.modelValue.split("--"),O=Re.fromSQL(b[0]).toFormat("dd/MM/yyyy");if(i.range&&b.length>1){const r=Re.fromSQL(b[1]).toFormat("dd/MM/yyyy");n.value.setDateRange(O,r)}else n.value.setDate(O)}i.range&&(i.config.singleMode=!1,i.config.numberOfMonths=2,i.config.numberOfColumns=2)});f.onMounted(()=>{const b=document.getElementById(a);if(b){const O={element:b,format:sP,plugins:[],css:".calendar,.calendar>.header,.container>footer,.container>header{padding:10px}.container.inline,.container.range-plugin .calendar>.days-grid>.day{position:relative}:host{--color-bg-default:var(--s-color-fill-default);--color-bg-secondary:var(--s-color-fill-default-light);--color-fg-default:var(--s-color-content-default);--color-fg-primary:var(--s-color-fill-highlight);--color-fg-secondary:var(--s-color-fill-highlight-light);--color-fg-selected:#fff;--color-fg-muted:var(--s-color-content-light);--color-fg-accent:var(--s-color-content-critical);--color-btn-primary-bg:#fff;--color-btn-primary-fg:#6b82ff;--color-btn-primary-border:var(--s-color-border-default);--color-btn-primary-hover-bg:#6b82ff;--color-btn-primary-hover-fg:#fff;--color-btn-primary-hover-border:#6b82ff;--color-btn-primary-disabled-bg:#a2b0ff;--color-btn-primary-disabled-fg:#fff;--color-btn-primary-disabled-border:#a2b0ff;--color-btn-secondary-bg:#fff;--color-btn-secondary-fg:var(--s-color-content-light);--color-btn-secondary-border:#748194;--color-btn-secondary-hover-bg:#748194;--color-btn-secondary-hover-fg:#fff;--color-btn-secondary-hover-border:#748194;--color-btn-secondary-disabled-bg:#b5bbc4;--color-btn-secondary-disabled-fg:#fff;--color-btn-secondary-disabled-border:#b5bbc4;--color-border-default:var(--s-color-border-default);--color-border-locked:#f9f9f9;--day-width:var(--s-spacing-large);--day-height:var(--s-spacing-large);--border-radius:var(--s-border-radius-small);--primary-color:var(--b-color-base);--secondary-color:#748194;--white-color:#fff;--black-color:#333;--lightgray-color:#f9f9f9;--gray-color:#9e9e9e;--red-color:#e63757}*{box-sizing:border-box}.container{border-radius:4px;border:var(--s-border-light);color:var(--color-fg-default);cursor:default;display:inline-block;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;font-size:.8em;height:0;overflow:hidden;pointer-events:all;position:absolute;transform:scale(0);transform-origin:top left;transition:transform .3s ease-out}.container.calc{height:auto;transform:none;transition:none;visibility:hidden}.container.show{box-shadow:var(--s-shadow-level-2);height:auto;transform:scale(1);z-index:var(--s-index-max);left:0!important;}.container.inline{box-shadow:0 7px 14px 0 rgba(65,69,88,.1),0 3px 6px 0 rgba(0,0,0,.07);height:auto;left:0;top:0;transform:scaleY(1)}.container>main{background-color:var(--color-bg-default)}.calendar>.header button:hover,.container>footer,.container>header,.preset-plugin-container{background-color:var(--color-bg-secondary)}.container>footer .footer-buttons{-moz-column-gap:5px;column-gap:5px;display:flex;justify-content:flex-end}.container>footer .footer-buttons>button{background-color:transparent;border:1px solid transparent;border-radius:var(--border-radius);cursor:pointer;padding:5px 10px}.container>footer .footer-buttons>button.apply-button{background-color:var(--color-btn-primary-bg);border-color:var(--color-btn-primary-border);color:var(--color-btn-primary-fg)}.container>footer .footer-buttons>button.apply-button:hover{background-color:var(--color-btn-primary-hover-bg);border-color:var(--color-btn-primary-hover-border);color:var(--color-btn-primary-hover-fg)}.container>footer .footer-buttons>button.apply-button:disabled{background-color:var(--color-btn-primary-disabled-bg);border-color:var(--color-btn-primary-disabled-border);color:var(--color-btn-primary-disabled-fg);cursor:default}.container>footer .footer-buttons>button.cancel-button{background-color:var(--color-btn-secondary-bg);border-color:var(--color-btn-secondary-border);color:var(--color-btn-secondary-fg)}.container>footer .footer-buttons>button.cancel-button:hover{background-color:var(--color-btn-secondary-hover-bg);border-color:var(--color-btn-secondary-hover-border);color:var(--color-btn-secondary-hover-fg)}.container>footer .footer-buttons>button.cancel-button:disabled{background-color:var(--color-btn-secondary-disabled-bg);border-color:var(--color-btn-secondary-disabled-border);color:var(--color-btn-secondary-disabled-fg);cursor:default}.grid-1{grid-template-columns:repeat(1,1fr)}.grid-2{grid-template-columns:repeat(2,1fr)}.grid-3{grid-template-columns:repeat(3,1fr)}.grid-4{grid-template-columns:repeat(4,1fr)}.grid-5{grid-template-columns:repeat(5,1fr)}.grid-6{grid-template-columns:repeat(6,1fr)}.grid-7{grid-template-columns:repeat(7,1fr)}.grid-8{grid-template-columns:repeat(8,1fr)}.grid-9{grid-template-columns:repeat(9,1fr)}.grid-10{grid-template-columns:repeat(10,1fr)}.grid-11{grid-template-columns:repeat(11,1fr)}.grid-12{grid-template-columns:repeat(12,1fr)}.calendars,.container.preset-plugin main{display:grid}.calendars:not(.grid-1) .calendar>.header .month-name{order:2;text-align:center}.calendars:not(.grid-1) .calendar>.header .previous-button{order:1;visibility:hidden}.calendars:not(.grid-1) .calendar>.header .next-button{order:3;visibility:hidden}.calendars:not(.grid-1) .calendar:first-child>.header .previous-button,.calendars:not(.grid-1) .calendar:last-child>.header .next-button,.container.amp-plugin .calendars.calendars:not(.grid-1) .calendar:last-child>.header .reset-button{visibility:visible}.calendar>.header{align-items:center;-moz-column-gap:5px;column-gap:5px;display:flex;justify-content:space-between}.calendar>.header .month-name{flex:1;font-size:15px;font-weight:500}.calendar>.header .month-name>span,.container.amp-plugin .calendars .calendar>.header .month-name select.month-name--dropdown{font-weight:700}.calendar>.header button{align-items:center;background-color:transparent;border:1px solid transparent;border-radius:2px;color:var(--color-btn-secondary-fg);cursor:pointer;display:flex;justify-content:center;padding:4px 7px}.calendar>.header button:hover>img,.calendar>.header button:hover>svg{fill:var(--color-fg-primary);color:var(--color-fg-primary)}.calendar>.header button>img,.calendar>.header button>svg{fill:var(--color-btn-secondary-fg);color:var(--color-btn-secondary-fg);pointer-events:none;transform:scale(.7)}.calendar>.daynames-row,.calendar>.days-grid{display:grid;grid-template-columns:repeat(7,1fr);row-gap:2px}.calendar>.daynames-row>.day,.calendar>.daynames-row>.dayname,.calendar>.days-grid>.day,.calendar>.days-grid>.dayname{align-items:center;cursor:default;display:flex;flex-direction:column;font-size:13px;justify-content:center}.calendar>.daynames-row>.dayname{color:var(--color-fg-muted);font-size:12px;padding:5px 0}.calendar>.days-grid>.day{border:1px solid transparent;border-radius:2px;height:var(--day-height);max-height:var(--day-height);max-width:var(--day-width);min-height:var(--day-height);min-width:var(--day-width);padding:10px 0;width:var(--day-width)}.calendar>.days-grid>.day:hover{border:1px solid var(--s-color-border-highlight);color:var(--s-color-content-highlight)}.calendar>.days-grid>.day.today{color:var(--s-color-content-highlight)}.calendar>.days-grid>.day.selected,.container.range-plugin .calendar>.days-grid>.day.end,.container.range-plugin .calendar>.days-grid>.day.start{background-color:var(--s-color-fill-highlight);color:var(--color-fg-selected)}@media (max-width:480px){.container:not(.inline){transform:scaleY(0)!important;transform-origin:bottom center!important}.container:not(.inline).show{top:var(--s-spacing-large)!important;left:0!important;position:absolute!important;right:0!important;bottom:auto!important;transform:scaleY(1)!important}.container{width:100%}.calendars{grid-template-columns:repeat(1,1fr)}.calendars .calendar{box-sizing:border-box;width:100%}.calendars .calendar:nth-child(n+2){display:none}.calendars .calendar>.days-grid>.day{height:auto;max-height:unset;max-width:unset;min-height:unset;min-width:unset;width:auto}.calendars .calendar>.header:not(.no-next-month) .next-button{visibility:visible}}:host{--color-fg-locked:#9e9e9e;--color-bg-locked:#ffab91;--color-bg-unavailable:#f9f9f9;--color-bg-inrange:var(--s-color-fill-highlight-light);--color-bg-tooltip:#fff;--color-fg-tooltip:#333}.container.amp-plugin .calendars.calendars:not(.grid-1) .calendar>.header .reset-button,.container.lock-plugin .calendars .calendar:first-child>.header.no-previous-month .previous-button,.container.lock-plugin .calendars .calendar:last-child>.header.no-next-month .next-button{visibility:hidden}.container.lock-plugin .calendar>.days-grid>.day.not-available{background-color:var(--color-bg-unavailable);color:var(--color-fg-locked);font-style:italic;pointer-events:none}.container.lock-plugin .calendar>.days-grid>.day.locked{background-color:transparent;border:1px solid var(--color-border-locked);color:var(--color-fg-locked);pointer-events:none}.container.lock-plugin .calendar>.days-grid>.day.locked:not(.start):not(.end){background-image:repeating-linear-gradient(135deg,transparent,var(--color-bg-locked) 2px,transparent 2px,transparent 4px);font-style:italic}.container.lock-plugin .preset-plugin-container>button:disabled{color:var(--color-fg-locked);pointer-events:none}.container.preset-plugin>main{display:flex}.container.preset-plugin>main.preset-left{flex-direction:row-reverse}.container.preset-plugin>main.preset-bottom .preset-plugin-container,.container.preset-plugin>main.preset-right,.container.preset-plugin>main.preset-top .preset-plugin-container{flex-direction:row}.container.preset-plugin>main.preset-left .preset-plugin-container,.container.preset-plugin>main.preset-right .preset-plugin-container{flex-direction:column;width:130px}.container.preset-plugin>main.preset-top{flex-direction:column-reverse}.container.preset-plugin>main.preset-bottom,.container>main:not([class*=preset-]){flex-direction:column}.preset-plugin-container{display:flex;justify-content:space-between;padding:10px}.preset-plugin-container>button{background-color:var(--color-bg-default);border:1px solid transparent;border-radius:4px;color:var(--color-fg-default);padding:5px}.preset-plugin-container>button:hover{border:1px solid var(--color-fg-primary);color:var(--color-fg-primary);cursor:pointer}.range-plugin-tooltip{background-color:var(--color-bg-tooltip);border-radius:var(--border-radius);box-shadow:0 1px 3px rgba(0,0,0,.25);color:var(--color-fg-tooltip);font-size:12px;margin-top:-4px;padding:4px 8px;pointer-events:none;position:absolute;visibility:hidden;white-space:nowrap;z-index:1}.range-plugin-tooltip:before{border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid rgba(0,0,0,.12);bottom:-5px;content:'';left:calc(50% - 5px);position:absolute}.range-plugin-tooltip:after{border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid var(--color-bg-tooltip);bottom:-4px;content:'';left:calc(50% - 4px);position:absolute}.container.range-plugin .calendar>.days-grid>.day.in-range:last-of-type,.container.range-plugin .calendar>.days-grid>div:nth-child(7n).in-range{border-bottom-right-radius:var(--border-radius);border-top-right-radius:var(--border-radius)}.container.range-plugin .calendar>.days-grid>.day.in-range{background-color:var(--color-bg-inrange);border-radius:0}.container.range-plugin .calendar>.days-grid>.day.start{border-bottom-right-radius:0;border-top-right-radius:0}.container.range-plugin .calendar>.days-grid>.day.start:after{border:8px solid transparent;border-left:8px solid var(--color-fg-primary);content:'';pointer-events:none;position:absolute;right:-14px;z-index:1}.container.range-plugin .calendar>.days-grid>.day.start.flipped{border-bottom-left-radius:0;border-bottom-right-radius:var(--border-radius);border-top-left-radius:0;border-top-right-radius:var(--border-radius)}.container.range-plugin .calendar>.days-grid>.day.start.flipped:after{border-left-color:transparent;border-right-color:var(--color-fg-primary);left:-14px;right:auto}.container.range-plugin .calendar>.days-grid>.day.end{border-bottom-left-radius:0;border-top-left-radius:0}.container.range-plugin .calendar>.days-grid>.day.end:after{border:8px solid transparent;border-right:8px solid var(--color-fg-primary);content:'';left:-14px;pointer-events:none;position:absolute;z-index:1}.container.range-plugin .calendar>.days-grid>.day.end.flipped,.container.range-plugin .calendar>.days-grid>div:not(.day)+.day.in-range,.container.range-plugin .calendar>.days-grid>div:nth-child(7n+1).in-range{border-bottom-left-radius:var(--border-radius);border-top-left-radius:var(--border-radius)}.container.range-plugin .calendar>.days-grid>.day.end.flipped{border-bottom-right-radius:0;border-top-right-radius:0}.container.range-plugin .calendar>.days-grid>.day.end.flipped:after{border-left-color:var(--color-fg-primary);border-right-color:transparent;left:auto;right:-14px}.container.range-plugin .calendar>.days-grid>.day.start.end{border-radius:var(--border-radius)}.container.range-plugin .calendar>.days-grid>.day.start.end:after{content:none}.container.preset-plugin main.preset-left>.calendars,.container.preset-plugin main.preset-top>.calendars{order:2}.container.preset-plugin main.preset-left>.preset-plugin-container,.container.preset-plugin main.preset-top>.preset-plugin-container{order:1}.container.preset-plugin main.preset-left,.container.preset-plugin main.preset-right{grid-template-columns:auto auto}.container.preset-plugin main.preset-left .preset-plugin-container,.container.preset-plugin main.preset-right .preset-plugin-container{grid-row:span 2;width:130px}.container.amp-plugin .calendars .calendar>.header .reset-button,.container.preset-plugin main.preset-bottom>.preset-plugin-container{order:4}.container.preset-plugin main.preset-bottom,.container.preset-plugin main.preset-top{grid-template-columns:auto}.container.preset-plugin main>.time-plugin-container{order:3}.time-plugin-container{background-color:var(--color-bg-secondary);border-bottom:1px solid var(--color-border-default);display:flex;justify-content:space-around;padding:10px}.time-plugin-container input[type=time]{font-size:18px}.time-plugin-container input[type=time],.time-plugin-container select{background-color:var(--color-bg-default);border:1px solid transparent;border-radius:4px;color:var(--color-fg-default)}.time-plugin-container select{margin:0 3px}.container.amp-plugin .calendars .calendar>.header .month-name{align-items:center;-moz-column-gap:5px;column-gap:5px;display:flex;justify-content:center}.container.amp-plugin .calendars .calendar>.header .month-name select{border:none;font-size:14px;padding:3px}.container.amp-plugin.week-numbers .calendar>.daynames-row,.container.amp-plugin.week-numbers .calendar>.days-grid{grid-template-columns:30px repeat(7,1fr)}.container.amp-plugin.week-numbers .calendar>.daynames-row .wnum-header,.container.amp-plugin.week-numbers .calendar>.daynames-row .wnum-item,.container.amp-plugin.week-numbers .calendar>.days-grid .wnum-header,.container.amp-plugin.week-numbers .calendar>.days-grid .wnum-item{align-items:center;color:var(--color-fg-muted);display:flex;font-size:12px;justify-content:center}.container[data-theme=dark]{--color-bg-default:#22272e;--color-bg-secondary:#2d333b;--color-bg-inrange:#2c542e;--color-bg-locked:#ec775c;--color-bg-unavailable:#545d68;--color-bg-tooltip:#9e9e9e;--color-fg-default:#adbac7;--color-fg-primary:#46954a;--color-fg-secondary:#202122;--color-fg-muted:#9e9e9e;--color-fg-accent:#ec775c;--color-fg-locked:#9e9e9e;--color-btn-primary-bg:#2d333b;--color-btn-primary-fg:#46954a;--color-btn-primary-border:#46954a;--color-btn-primary-hover-bg:#46954a;--color-btn-primary-hover-fg:#fff;--color-btn-primary-hover-border:#46954a;--color-btn-secondary-bg:#2d333b;--color-btn-secondary-fg:#adbac7;--color-btn-secondary-border:#adbac7;--color-btn-secondary-hover-bg:#adbac7;--color-btn-secondary-hover-fg:#202122;--color-btn-secondary-hover-border:#adbac7;--color-border-default:#373e47;--color-border-locked:#2d333b}",setup(r){r.on("select",h=>{d();const{start:u,end:m,date:y}=h.detail,v="YYYY-MM-DD";let w=null;i.range?u instanceof Date&&m instanceof Date&&(w=`${u.format(v)}--${m.format(v)}`):y instanceof Date&&(w=y.format(v)),c(w)})},...i.config};i.range&&(O.plugins.push(tP),O.RangePlugin={delimiter:" ~ "}),n.value=new J$.create(O)}});const p=()=>{n.value.clear(),c(null)};return e({clearDate:p}),(b,O)=>(f.openBlock(),f.createBlock(jn,{size:b.size,class:f.normalizeClass(["ui-form-datepicker",l.value]),state:b.state,invalidFeedback:b.invalidFeedback,leadingIcon:"event",disabled:b.disabled,loading:b.loading,float:b.float,label:b.label,labelInfo:b.labelInfo,last:b.last,autofocus:b.autofocus},f.createSlots({default:f.withCtx(()=>[f.createElementVNode("input",{class:f.normalizeClass(["form-control",l.value]),id:a,autocomplete:"off",placeholder:b.placeholder,readonly:""},null,10,iP)]),_:2},[!b.noClear&&!b.loading?{name:"trailingIcon",fn:f.withCtx(()=>[b.modelValue?(f.openBlock(),f.createBlock(Rt,{key:0,icon:"close",onClick:p,variant:"plain",size:"sm",class:"btn-remove"})):f.createCommentVNode("",!0)]),key:"0"}:void 0]),1032,["size","class","state","invalidFeedback","disabled","loading","float","label","labelInfo","last","autofocus"]))}}),RH="",nP=["autofocus","readonly","tabindex","name","title","id","required","disabled"],rP={key:0,class:"form-select-option",value:"",selected:"",disabled:""},oP=["value","disabled"],gg=f.defineComponent({__name:"FormSelect",props:{leadingIcon:{},trailingIcon:{},labelInfo:{},trailingText:{},loading:{type:Boolean},last:{type:Boolean},float:{type:Boolean},modelValue:{},value:{},placeholder:{},label:{},id:{},size:{},autofocus:{type:Boolean},readonly:{type:Boolean},tabindex:{},name:{},title:{},required:{type:Boolean},options:{default:()=>[]},disabled:{type:Boolean},state:{type:Boolean,default:void 0},invalidFeedback:{}},emits:["update:modelValue","update"],setup(o,{emit:e}){const t=o,i=e,s=p=>/\{/.test(p)?JSON.parse(p):p,n=p=>At(p)?JSON.stringify(p):p===null?"":p,a=p=>{const g=p.target,b=g.value;i("update:modelValue",s(b)),i("update",s(b)),l.value=g.value},l=f.ref(n(t.modelValue)),c=f.computed(()=>[t.size&&`-${t.size}`,t.float&&"-float",t.loading&&"-loading",t.last&&"-last",(t.disabled||t.loading)&&"-disabled"]),d=()=>{const p=t.value!==void 0?t.value:t.modelValue;l.value=n(p),t.modelValue===null&&(l.value="")};return f.watchEffect(d),(p,g)=>(f.openBlock(),f.createBlock(jn,{id:p.id,leadingIcon:p.leadingIcon,trailingIcon:p.trailingIcon,trailingText:p.trailingText,label:p.label,loading:p.loading,last:p.last,disabled:p.disabled,float:p.float,labelInfo:p.labelInfo,autofocus:p.autofocus,size:p.size,state:p.state,invalidFeedback:p.invalidFeedback,class:"ui-form-select"},{default:f.withCtx(()=>[f.withDirectives(f.createElementVNode("select",{"onUpdate:modelValue":g[0]||(g[0]=b=>l.value=b),onInput:a,class:f.normalizeClass(["form-control -select",c.value]),autofocus:p.autofocus,readonly:p.readonly,tabindex:p.tabindex,name:p.name,title:p.title,id:p.id,required:p.required,disabled:p.disabled},[p.placeholder?(f.openBlock(),f.createElementBlock("option",rP,f.toDisplayString(p.placeholder),1)):f.createCommentVNode("",!0),f.renderSlot(p.$slots,"default"),(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(p.options,b=>f.withDirectives((f.openBlock(),f.createElementBlock("option",{class:"form-select-option",value:n(b.value),key:b.value,disabled:b.disabled},f.toDisplayString(b.label),9,oP)),[[f.vShow,p.options.length]])),128))],42,nP),[[f.vModelSelect,l.value]])]),_:3},8,["id","leadingIcon","trailingIcon","trailingText","label","loading","last","disabled","float","labelInfo","autofocus","size","state","invalidFeedback"]))}}),aP=["value"],lP=f.defineComponent({__name:"FormSelectOption",props:{value:{}},setup(o){const e=t=>At(t)?JSON.stringify(t):t;return(t,i)=>(f.openBlock(),f.createElementBlock("option",{class:"form-select-option",value:e(t.value)},[f.renderSlot(t.$slots,"default")],8,aP))}}),IH="",cP={class:"ui-layout-sidebar"},hP={class:"ui-layout-navbar"},dP={class:"ui-layout-content",id:"ui-layout-content"},uP={class:"ui-layout-content-page"},fP=f.defineComponent({__name:"Layout",setup(o){const e=f.ref(!1);return(t,i)=>{const s=f.resolveComponent("router-view");return f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-layout",{"-scrolled":e.value}]),_scroll:"onScroll",id:"wrapper"},[f.createElementVNode("div",cP,[f.renderSlot(t.$slots,"sidebar")]),f.createElementVNode("div",hP,[f.renderSlot(t.$slots,"navbar")]),f.createElementVNode("div",dP,[f.createElementVNode("div",uP,[f.createVNode(s,null,{default:f.withCtx(({Component:n})=>[(f.openBlock(),f.createBlock(f.resolveDynamicComponent(n)))]),_:1})])])],2)}}}),BH="",Ui=f.defineComponent({__name:"Col",props:{cols:{},sm:{},md:{},offset:{},offsetSm:{},auto:{type:Boolean}},setup(o){const e=o,t=f.ref(["ui-col"]);return e.cols=="auto"||e.auto?t.value.push("ui-col-auto"):e.cols&&t.value.push(`-col-${e.cols}`),e.sm&&t.value.push(`-sm-${e.sm}`),e.md&&t.value.push(`-md-${e.md}`),e.offset&&t.value.push(`-offset-${e.offset}`),e.offsetSm&&t.value.push(`-offset-sm-${e.offsetSm}`),(i,s)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(t.value)},[f.renderSlot(i.$slots,"default")],2))}}),QH="",yr=f.defineComponent({__name:"Row",props:{alignV:{}},setup(o){const e=o,t=f.ref([]);return e.alignV&&t.value.push(`-align-items-${e.alignV}`),(i,s)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-row",t.value])},[f.renderSlot(i.$slots,"default")],2))}}),VH="",pP={class:"ui-card-annotation"},gP={key:0,class:"ui-card-annotation-title"},mP={class:"ui-card-annotation-text"},bP={key:1,class:"ui-card-annotation-link"},mg=f.defineComponent({__name:"CardAnnotation",props:{title:{},text:{}},setup(o){const e=f.useSlots(),t=(i="default")=>!!e[i];return(i,s)=>(f.openBlock(),f.createElementBlock("div",pP,[i.title?(f.openBlock(),f.createElementBlock("h5",gP,f.toDisplayString(i.title),1)):f.createCommentVNode("",!0),f.createElementVNode("div",mP,[f.renderSlot(i.$slots,"default")]),t("link")?(f.openBlock(),f.createElementBlock("div",bP,[f.renderSlot(i.$slots,"link")])):f.createCommentVNode("",!0)]))}}),FH="",yP={class:"ui-frame-annotation"},OP={class:"pr-4"},xP=f.defineComponent({__name:"FrameAnnotation",props:{title:{},annotation:{}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",yP,[f.createVNode(yr,null,{default:f.withCtx(()=>[f.createVNode(Ui,{cols:"4",sm:"12"},{default:f.withCtx(()=>[f.createElementVNode("div",OP,[f.createVNode(mg,{title:e.title},{default:f.withCtx(()=>[f.renderSlot(e.$slots,"annotation",{},()=>[f.createTextVNode(f.toDisplayString(e.annotation),1)])]),_:3},8,["title"])])]),_:3}),f.createVNode(Ui,{cols:"8",sm:"12"},{default:f.withCtx(()=>[f.renderSlot(e.$slots,"default")]),_:3})]),_:3})]))}});let R=class Hn{static bind(e,t){return function(){return e.apply(t,arguments)}}static isObject(e){return e&&typeof e=="object"&&!Array.isArray(e)&&e!=null}static is(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}static listToArray(e){let t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i}static extend(e,t){typeof Object.assign!="function"&&function(){Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");let n=Object(s);for(let a=1;a<arguments.length;a++){let l=arguments[a];if(l!=null)for(let c in l)l.hasOwnProperty(c)&&(n[c]=l[c])}return n}}();let i=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach(s=>{this.isObject(t[s])?s in e?i[s]=this.extend(e[s],t[s]):Object.assign(i,{[s]:t[s]}):Object.assign(i,{[s]:t[s]})}),i}static extendArray(e,t){let i=[];return e.map(s=>{i.push(Hn.extend(t,s))}),e=i,e}static monthMod(e){return e%12}static clone(e){if(Hn.is("Array",e)){let t=[];for(let i=0;i<e.length;i++)t[i]=this.clone(e[i]);return t}else{if(Hn.is("Null",e))return null;if(Hn.is("Date",e))return e;if(typeof e=="object"){let t={};for(let i in e)e.hasOwnProperty(i)&&(t[i]=this.clone(e[i]));return t}else return e}}static log10(e){return Math.log(e)/Math.LN10}static roundToBase10(e){return Math.pow(10,Math.floor(Math.log10(e)))}static roundToBase(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}static parseNumber(e){return e===null?e:parseFloat(e)}static stripNumber(e,t=2){return Number.isInteger(e)?e:parseFloat(e.toPrecision(t))}static randomId(){return(Math.random()+1).toString(36).substring(4)}static noExponents(e){let t=String(e).split(/[eE]/);if(t.length===1)return t[0];let i="",s=e<0?"-":"",n=t[0].replace(".",""),a=Number(t[1])+1;if(a<0){for(i=s+"0.";a++;)i+="0";return i+n.replace(/^-/,"")}for(a-=n.length;a--;)i+="0";return n+i}static getDimensions(e){const t=getComputedStyle(e,null);let i=e.clientHeight,s=e.clientWidth;return i-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),s-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),[s,i]}static getBoundingClientRect(e){const t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}static getLargestStringFromArr(e){return e.reduce((t,i)=>(Array.isArray(i)&&(i=i.reduce((s,n)=>s.length>n.length?s:n)),t.length>i.length?t:i),0)}static hexToRgba(e="#999999",t=.6){e.substring(0,1)!=="#"&&(e="#999999");let i=e.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(let s=0;s<i.length;s++)i[s]=parseInt(i[s].length===1?i[s]+i[s]:i[s],16);return typeof t<"u"&&i.push(t),"rgba("+i.join(",")+")"}static getOpacityFromRGBA(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}static rgb2hex(e){return e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),e&&e.length===4?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}shadeRGBColor(e,t){let i=t.split(","),s=e<0?0:255,n=e<0?e*-1:e,a=parseInt(i[0].slice(4),10),l=parseInt(i[1],10),c=parseInt(i[2],10);return"rgb("+(Math.round((s-a)*n)+a)+","+(Math.round((s-l)*n)+l)+","+(Math.round((s-c)*n)+c)+")"}shadeHexColor(e,t){let i=parseInt(t.slice(1),16),s=e<0?0:255,n=e<0?e*-1:e,a=i>>16,l=i>>8&255,c=i&255;return"#"+(16777216+(Math.round((s-a)*n)+a)*65536+(Math.round((s-l)*n)+l)*256+(Math.round((s-c)*n)+c)).toString(16).slice(1)}shadeColor(e,t){return Hn.isColorHex(t)?this.shadeHexColor(e,t):this.shadeRGBColor(e,t)}static isColorHex(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}static getPolygonPos(e,t){let i=[],s=Math.PI*2/t;for(let n=0;n<t;n++){let a={};a.x=e*Math.sin(n*s),a.y=-e*Math.cos(n*s),i.push(a)}return i}static polarToCartesian(e,t,i,s){let n=(s-90)*Math.PI/180;return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}}static escapeString(e,t="x"){let i=e.toString().slice();return i=i.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,t),i}static negToZero(e){return e<0?0:e}static moveIndexInArray(e,t,i){if(i>=e.length){let s=i-e.length+1;for(;s--;)e.push(void 0)}return e.splice(i,0,e.splice(t,1)[0]),e}static extractNumber(e){return parseFloat(e.replace(/[^\d.]*/g,""))}static findAncestor(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}static setELstyles(e,t){for(let i in t)t.hasOwnProperty(i)&&(e.style.key=t[i])}static isNumber(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}static isFloat(e){return Number(e)===e&&e%1!==0}static isSafari(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}static isFirefox(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}static isIE11(){if(window.navigator.userAgent.indexOf("MSIE")!==-1||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}static isIE(){let e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){let n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}let s=e.indexOf("Edge/");return s>0?parseInt(e.substring(s+5,e.indexOf(".",s)),10):!1}static getGCD(e,t,i=7){let s=Math.pow(10,i-Math.floor(Math.log10(Math.max(e,t))));for(e=Math.round(Math.abs(e)*s),t=Math.round(Math.abs(t)*s);t;){let n=t;t=e%t,e=n}return e/s}static getPrimeFactors(e){const t=[];let i=2;for(;e>=2;)e%i==0?(t.push(i),e=e/i):i++;return t}static mod(e,t,i=7){let s=Math.pow(10,i-Math.floor(Math.log10(Math.max(e,t))));return e=Math.round(Math.abs(e)*s),t=Math.round(Math.abs(t)*s),e%t/s}};class dn{constructor(e){this.ctx=e,this.w=e.w,this.setEasingFunctions()}setEasingFunctions(){let e;if(this.w.globals.easing)return;switch(this.w.config.chart.animations.easing){case"linear":{e="-";break}case"easein":{e="<";break}case"easeout":{e=">";break}case"easeinout":{e="<>";break}case"swing":{e=i=>{let s=1.70158;return(i-=1)*i*((s+1)*i+s)+1};break}case"bounce":{e=i=>{let s="";return i<1/2.75?s=7.5625*i*i:i<2/2.75?s=7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?s=7.5625*(i-=2.25/2.75)*i+.9375:s=7.5625*(i-=2.625/2.75)*i+.984375,s};break}case"elastic":{e=i=>i===!!i?i:Math.pow(2,-10*i)*Math.sin((i-.075)*(2*Math.PI)/.3)+1;break}default:e="<>"}this.w.globals.easing=e}animateLine(e,t,i,s){e.attr(t).animate(s).attr(i)}animateMarker(e,t,i,s,n,a){t||(t=0),e.attr({r:t,width:t,height:t}).animate(s,n).attr({r:i,width:i.width,height:i.height}).afterAll(()=>{a()})}animateCircle(e,t,i,s,n){e.attr({r:t.r,cx:t.cx,cy:t.cy}).animate(s,n).attr({r:i.r,cx:i.cx,cy:i.cy})}animateRect(e,t,i,s,n){e.attr(t).animate(s).attr(i).afterAll(()=>n())}animatePathsGradually(e){let{el:t,realIndex:i,j:s,fill:n,pathFrom:a,pathTo:l,speed:c,delay:d}=e,p=this,g=this.w,b=0;g.config.chart.animations.animateGradually.enabled&&(b=g.config.chart.animations.animateGradually.delay),g.config.chart.animations.dynamicAnimation.enabled&&g.globals.dataChanged&&g.config.chart.type!=="bar"&&(b=0),p.morphSVG(t,i,s,g.config.chart.type==="line"&&!g.globals.comboCharts?"stroke":n,a,l,c,d*b)}showDelayedElements(){this.w.globals.delayedElements.forEach(e=>{const t=e.el;t.classList.remove("apexcharts-element-hidden"),t.classList.add("apexcharts-hidden-element-shown")})}animationCompleted(e){const t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),typeof t.config.chart.events.animationEnd=="function"&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}morphSVG(e,t,i,s,n,a,l,c){let d=this.w;n||(n=e.attr("pathFrom")),a||(a=e.attr("pathTo"));const p=g=>(d.config.chart.type==="radar"&&(l=1),`M 0 ${d.globals.gridHeight}`);(!n||n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n=p()),(!a||a.indexOf("undefined")>-1||a.indexOf("NaN")>-1)&&(a=p()),d.globals.shouldAnimate||(l=1),e.plot(n).animate(1,d.globals.easing,c).plot(n).animate(l,d.globals.easing,c).plot(a).afterAll(()=>{R.isNumber(i)?i===d.globals.series[d.globals.maxValsInArrayIndex].length-2&&d.globals.shouldAnimate&&this.animationCompleted(e):s!=="none"&&d.globals.shouldAnimate&&(!d.globals.comboCharts&&t===d.globals.series.length-1||d.globals.comboCharts)&&this.animationCompleted(e),this.showDelayedElements()})}}class pt{constructor(e){this.ctx=e,this.w=e.w}getDefaultFilter(e,t){const i=this.w;e.unfilter(!0),new window.SVG.Filter().size("120%","180%","-5%","-40%"),i.config.states.normal.filter!=="none"?this.applyFilter(e,t,i.config.states.normal.filter.type,i.config.states.normal.filter.value):i.config.chart.dropShadow.enabled&&this.dropShadow(e,i.config.chart.dropShadow,t)}addNormalFilter(e,t){const i=this.w;i.config.chart.dropShadow.enabled&&!e.node.classList.contains("apexcharts-marker")&&this.dropShadow(e,i.config.chart.dropShadow,t)}addLightenFilter(e,t,i){const s=this.w,{intensity:n}=i;e.unfilter(!0);let a=new window.SVG.Filter;e.filter(l=>{const c=s.config.chart.dropShadow;c.enabled?a=this.addShadow(l,t,c):a=l,a.componentTransfer({rgb:{type:"linear",slope:1.5,intercept:n}})}),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}addDarkenFilter(e,t,i){const s=this.w,{intensity:n}=i;e.unfilter(!0);let a=new window.SVG.Filter;e.filter(l=>{const c=s.config.chart.dropShadow;c.enabled?a=this.addShadow(l,t,c):a=l,a.componentTransfer({rgb:{type:"linear",slope:n}})}),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}applyFilter(e,t,i,s=.5){switch(i){case"none":{this.addNormalFilter(e,t);break}case"lighten":{this.addLightenFilter(e,t,{intensity:s});break}case"darken":{this.addDarkenFilter(e,t,{intensity:s});break}}}addShadow(e,t,i){var g;const s=this.w,{blur:n,top:a,left:l,color:c,opacity:d}=i;if(((g=s.config.chart.dropShadow.enabledOnSeries)==null?void 0:g.length)>0&&s.config.chart.dropShadow.enabledOnSeries.indexOf(t)===-1)return e;let p=e.flood(Array.isArray(c)?c[t]:c,d).composite(e.sourceAlpha,"in").offset(l,a).gaussianBlur(n).merge(e.source);return e.blend(e.source,p)}dropShadow(e,t,i=0){var g,b;let{top:s,left:n,blur:a,color:l,opacity:c,noUserSpaceOnUse:d}=t;const p=this.w;return e.unfilter(!0),R.isIE()&&p.config.chart.type==="radialBar"||((g=p.config.chart.dropShadow.enabledOnSeries)==null?void 0:g.length)>0&&((b=p.config.chart.dropShadow.enabledOnSeries)==null?void 0:b.indexOf(i))===-1||(l=Array.isArray(l)?l[i]:l,e.filter(O=>{let r=null;R.isSafari()||R.isFirefox()||R.isIE()?r=O.flood(l,c).composite(O.sourceAlpha,"in").offset(n,s).gaussianBlur(a):r=O.flood(l,c).composite(O.sourceAlpha,"in").offset(n,s).gaussianBlur(a).merge(O.source),O.blend(O.source,r)}),d||e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)),e}setSelectionFilter(e,t,i){const s=this.w;if(typeof s.globals.selectedDataPoints[t]<"u"&&s.globals.selectedDataPoints[t].indexOf(i)>-1){e.node.setAttribute("selected",!0);let n=s.config.states.active.filter;n!=="none"&&this.applyFilter(e,t,n.type,n.value)}}_scaleFilterSize(e){(i=>{for(let s in i)i.hasOwnProperty(s)&&e.setAttribute(s,i[s])})({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}class Y{constructor(e){this.ctx=e,this.w=e.w}roundPathCorners(e,t){e.indexOf("NaN")>-1&&(e="");function i($,N,P){var E=N.x-$.x,x=N.y-$.y,k=Math.sqrt(E*E+x*x);return s($,N,Math.min(1,P/k))}function s($,N,P){return{x:$.x+(N.x-$.x)*P,y:$.y+(N.y-$.y)*P}}function n($,N){$.length>2&&($[$.length-2]=N.x,$[$.length-1]=N.y)}function a($){return{x:parseFloat($[$.length-2]),y:parseFloat($[$.length-1])}}var l=e.split(/[,\s]/).reduce(function($,N){var P=N.match("([a-zA-Z])(.+)");return P?($.push(P[1]),$.push(P[2])):$.push(N),$},[]),c=l.reduce(function($,N){return parseFloat(N)==N&&$.length?$[$.length-1].push(N):$.push([N]),$},[]),d=[];if(c.length>1){var p=a(c[0]),g=null;c[c.length-1][0]=="Z"&&c[0].length>2&&(g=["L",p.x,p.y],c[c.length-1]=g),d.push(c[0]);for(var b=1;b<c.length;b++){var O=d[d.length-1],r=c[b],h=r==g?c[1]:c[b+1];if(h&&O&&O.length>2&&r[0]=="L"&&h.length>2&&h[0]=="L"){var u=a(O),m=a(r),y=a(h),v,w;v=i(m,u,t),w=i(m,y,t),n(r,v),r.origPoint=m,d.push(r);var S=s(v,m,.5),C=s(m,w,.5),T=["C",S.x,S.y,C.x,C.y,w.x,w.y];T.origPoint=m,d.push(T)}else d.push(r)}if(g){var _=a(d[d.length-1]);d.push(["Z"]),n(d[0],_)}}else d=c;return d.reduce(function($,N){return $+N.join(" ")+" "},"")}drawLine(e,t,i,s,n="#a8a8a8",a=0,l=null,c="butt"){return this.w.globals.dom.Paper.line().attr({x1:e,y1:t,x2:i,y2:s,stroke:n,"stroke-dasharray":a,"stroke-width":l,"stroke-linecap":c})}drawRect(e=0,t=0,i=0,s=0,n=0,a="#fefefe",l=1,c=null,d=null,p=0){let b=this.w.globals.dom.Paper.rect();return b.attr({x:e,y:t,width:i>0?i:0,height:s>0?s:0,rx:n,ry:n,opacity:l,"stroke-width":c!==null?c:0,stroke:d!==null?d:"none","stroke-dasharray":p}),b.node.setAttribute("fill",a),b}drawPolygon(e,t="#e1e1e1",i=1,s="none"){return this.w.globals.dom.Paper.polygon(e).attr({fill:s,stroke:t,"stroke-width":i})}drawCircle(e,t=null){const i=this.w;e<0&&(e=0);const s=i.globals.dom.Paper.circle(e*2);return t!==null&&s.attr(t),s}drawPath({d:e="",stroke:t="#a8a8a8",strokeWidth:i=1,fill:s,fillOpacity:n=1,strokeOpacity:a=1,classes:l,strokeLinecap:c=null,strokeDashArray:d=0}){let p=this.w;return c===null&&(c=p.config.stroke.lineCap),(e.indexOf("undefined")>-1||e.indexOf("NaN")>-1)&&(e=`M 0 ${p.globals.gridHeight}`),p.globals.dom.Paper.path(e).attr({fill:s,"fill-opacity":n,stroke:t,"stroke-opacity":a,"stroke-linecap":c,"stroke-width":i,"stroke-dasharray":d,class:l})}group(e=null){const i=this.w.globals.dom.Paper.group();return e!==null&&i.attr(e),i}move(e,t){return["M",e,t].join(" ")}line(e,t,i=null){let s=null;return i===null?s=[" L",e,t].join(" "):i==="H"?s=[" H",e].join(" "):i==="V"&&(s=[" V",t].join(" ")),s}curve(e,t,i,s,n,a){return["C",e,t,i,s,n,a].join(" ")}quadraticCurve(e,t,i,s){return["Q",e,t,i,s].join(" ")}arc(e,t,i,s,n,a,l,c=!1){let d="A";return c&&(d="a"),[d,e,t,i,s,n,a,l].join(" ")}renderPaths({j:e,realIndex:t,pathFrom:i,pathTo:s,stroke:n,strokeWidth:a,strokeLinecap:l,fill:c,animationDelay:d,initialSpeed:p,dataChangeSpeed:g,className:b,shouldClipToGrid:O=!0,bindEventsOnPaths:r=!0,drawShadow:h=!0}){let u=this.w;const m=new pt(this.ctx),y=new dn(this.ctx);let v=this.w.config.chart.animations.enabled,w=v&&this.w.config.chart.animations.dynamicAnimation.enabled,S,C=!!(v&&!u.globals.resized||w&&u.globals.dataChanged&&u.globals.shouldAnimate);C?S=i:(S=s,u.globals.animationEnded=!0);let T=u.config.stroke.dashArray,_=0;Array.isArray(T)?_=T[t]:_=u.config.stroke.dashArray;let $=this.drawPath({d:S,stroke:n,strokeWidth:a,fill:c,fillOpacity:1,classes:b,strokeLinecap:l,strokeDashArray:_});if($.attr("index",t),O&&$.attr({"clip-path":`url(#gridRectMask${u.globals.cuid})`}),u.config.states.normal.filter.type!=="none")m.getDefaultFilter($,t);else if(u.config.chart.dropShadow.enabled&&h){const P=u.config.chart.dropShadow;m.dropShadow($,P,t)}r&&($.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,$)),$.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,$)),$.node.addEventListener("mousedown",this.pathMouseDown.bind(this,$))),$.attr({pathTo:s,pathFrom:i});const N={el:$,j:e,realIndex:t,pathFrom:i,pathTo:s,fill:c,strokeWidth:a,delay:d};return v&&!u.globals.resized&&!u.globals.dataChanged?y.animatePathsGradually({...N,speed:p}):(u.globals.resized||!u.globals.dataChanged)&&y.showDelayedElements(),u.globals.dataChanged&&w&&C&&y.animatePathsGradually({...N,speed:g}),$}drawPattern(e,t,i,s="#a8a8a8",n=0,a=1){return this.w.globals.dom.Paper.pattern(t,i,d=>{e==="horizontalLines"?d.line(0,0,i,0).stroke({color:s,width:n+1}):e==="verticalLines"?d.line(0,0,0,t).stroke({color:s,width:n+1}):e==="slantedLines"?d.line(0,0,t,i).stroke({color:s,width:n}):e==="squares"?d.rect(t,i).fill("none").stroke({color:s,width:n}):e==="circles"&&d.circle(t).fill("none").stroke({color:s,width:n})})}drawGradient(e,t,i,s,n,a=null,l=null,c=null,d=0){let p=this.w,g;t.length<9&&t.indexOf("#")===0&&(t=R.hexToRgba(t,s)),i.length<9&&i.indexOf("#")===0&&(i=R.hexToRgba(i,n));let b=0,O=1,r=1,h=null;l!==null&&(b=typeof l[0]<"u"?l[0]/100:0,O=typeof l[1]<"u"?l[1]/100:1,r=typeof l[2]<"u"?l[2]/100:1,h=typeof l[3]<"u"?l[3]/100:null);let u=p.config.chart.type==="donut"||p.config.chart.type==="pie"||p.config.chart.type==="polarArea"||p.config.chart.type==="bubble";if(c===null||c.length===0?g=p.globals.dom.Paper.gradient(u?"radial":"linear",m=>{m.at(b,t,s),m.at(O,i,n),m.at(r,i,n),h!==null&&m.at(h,t,s)}):g=p.globals.dom.Paper.gradient(u?"radial":"linear",m=>{(Array.isArray(c[d])?c[d]:c).forEach(v=>{m.at(v.offset/100,v.color,v.opacity)})}),!u)e==="vertical"?g.from(0,0).to(0,1):e==="diagonal"?g.from(0,0).to(1,1):e==="horizontal"?g.from(0,1).to(1,1):e==="diagonal2"&&g.from(1,0).to(0,1);else{let m=p.globals.gridWidth/2,y=p.globals.gridHeight/2;p.config.chart.type!=="bubble"?g.attr({gradientUnits:"userSpaceOnUse",cx:m,cy:y,r:a}):g.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}return g}getTextBasedOnMaxWidth({text:e,maxWidth:t,fontSize:i,fontFamily:s}){const n=this.getTextRects(e,i,s),a=n.width/e.length,l=Math.floor(t/a);return t<n.width?e.slice(0,l-3)+"...":e}drawText({x:e,y:t,text:i,textAnchor:s,fontSize:n,fontFamily:a,fontWeight:l,foreColor:c,opacity:d,maxWidth:p,cssClass:g="",isPlainText:b=!0,dominantBaseline:O="auto"}){let r=this.w;typeof i>"u"&&(i="");let h=i;s||(s="start"),(!c||!c.length)&&(c=r.config.chart.foreColor),a=a||r.config.chart.fontFamily,n=n||"11px",l=l||"regular";const u={maxWidth:p,fontSize:n,fontFamily:a};let m;return Array.isArray(i)?m=r.globals.dom.Paper.text(y=>{for(let v=0;v<i.length;v++)h=i[v],p&&(h=this.getTextBasedOnMaxWidth({text:i[v],...u})),v===0?y.tspan(h):y.tspan(h).newLine()}):(p&&(h=this.getTextBasedOnMaxWidth({text:i,...u})),m=b?r.globals.dom.Paper.plain(i):r.globals.dom.Paper.text(y=>y.tspan(h))),m.attr({x:e,y:t,"text-anchor":s,"dominant-baseline":O,"font-size":n,"font-family":a,"font-weight":l,fill:c,class:"apexcharts-text "+g}),m.node.style.fontFamily=a,m.node.style.opacity=d,m}createGroupWithAttributes(e,t,i,s){let n=this.group();return i.forEach(a=>n.add(a)),n.attr({class:s.class?s.class:"",cy:t,cx:e}),n}drawPlus(e,t,i,s){let n=i/2,a=this.drawLine(e,t-n,e,t+n,s.pointStrokeColor,s.pointStrokeDashArray,s.pointStrokeWidth,s.pointStrokeLineCap),l=this.drawLine(e-n,t,e+n,t,s.pointStrokeColor,s.pointStrokeDashArray,s.pointStrokeWidth,s.pointStrokeLineCap);return this.createGroupWithAttributes(e,t,[a,l],s)}drawX(e,t,i,s){let n=i/2,a=this.drawLine(e-n,t-n,e+n,t+n,s.pointStrokeColor,s.pointStrokeDashArray,s.pointStrokeWidth,s.pointStrokeLineCap),l=this.drawLine(e-n,t+n,e+n,t-n,s.pointStrokeColor,s.pointStrokeDashArray,s.pointStrokeWidth,s.pointStrokeLineCap);return this.createGroupWithAttributes(e,t,[a,l],s)}drawMarker(e,t,i){e=e||0;let s=i.pSize||0,n=null;if((i==null?void 0:i.shape)==="X"||(i==null?void 0:i.shape)==="x")n=this.drawX(e,t,s,i);else if((i==null?void 0:i.shape)==="plus"||(i==null?void 0:i.shape)==="+")n=this.drawPlus(e,t,s,i);else if(i.shape==="square"||i.shape==="rect"){let a=i.pRadius===void 0?s/2:i.pRadius;(t===null||!s)&&(s=0,a=0);let l=s*1.2+a,c=this.drawRect(l,l,l,l,a);c.attr({x:e-l/2,y:t-l/2,cx:e,cy:t,class:i.class?i.class:"",fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,stroke:i.pointStrokeColor,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}),n=c}else(i.shape==="circle"||!i.shape)&&(R.isNumber(t)||(s=0,t=0),n=this.drawCircle(s,{cx:e,cy:t,class:i.class?i.class:"",stroke:i.pointStrokeColor,fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}));return n}pathMouseEnter(e,t){let i=this.w;const s=new pt(this.ctx),n=parseInt(e.node.getAttribute("index"),10),a=parseInt(e.node.getAttribute("j"),10);if(typeof i.config.chart.events.dataPointMouseEnter=="function"&&i.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:n,dataPointIndex:a,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:n,dataPointIndex:a,w:i}]),!(i.config.states.active.filter.type!=="none"&&e.node.getAttribute("selected")==="true")&&i.config.states.hover.filter.type!=="none"&&!i.globals.isTouchDevice){let l=i.config.states.hover.filter;s.applyFilter(e,n,l.type,l.value)}}pathMouseLeave(e,t){let i=this.w;const s=new pt(this.ctx),n=parseInt(e.node.getAttribute("index"),10),a=parseInt(e.node.getAttribute("j"),10);typeof i.config.chart.events.dataPointMouseLeave=="function"&&i.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:n,dataPointIndex:a,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:n,dataPointIndex:a,w:i}]),!(i.config.states.active.filter.type!=="none"&&e.node.getAttribute("selected")==="true")&&i.config.states.hover.filter.type!=="none"&&s.getDefaultFilter(e,n)}pathMouseDown(e,t){let i=this.w;const s=new pt(this.ctx),n=parseInt(e.node.getAttribute("index"),10),a=parseInt(e.node.getAttribute("j"),10);let l="false";if(e.node.getAttribute("selected")==="true"){if(e.node.setAttribute("selected","false"),i.globals.selectedDataPoints[n].indexOf(a)>-1){let d=i.globals.selectedDataPoints[n].indexOf(a);i.globals.selectedDataPoints[n].splice(d,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];const d=i.globals.dom.Paper.select(".apexcharts-series path").members,p=i.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,g=b=>{Array.prototype.forEach.call(b,O=>{O.node.setAttribute("selected","false"),s.getDefaultFilter(O,n)})};g(d),g(p)}e.node.setAttribute("selected","true"),l="true",typeof i.globals.selectedDataPoints[n]>"u"&&(i.globals.selectedDataPoints[n]=[]),i.globals.selectedDataPoints[n].push(a)}if(l==="true"){let d=i.config.states.active.filter;if(d!=="none")s.applyFilter(e,n,d.type,d.value);else if(i.config.states.hover.filter!=="none"&&!i.globals.isTouchDevice){var c=i.config.states.hover.filter;s.applyFilter(e,n,c.type,c.value)}}else if(i.config.states.active.filter.type!=="none")if(i.config.states.hover.filter.type!=="none"&&!i.globals.isTouchDevice){var c=i.config.states.hover.filter;s.applyFilter(e,n,c.type,c.value)}else s.getDefaultFilter(e,n);typeof i.config.chart.events.dataPointSelection=="function"&&i.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:a,w:i}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:a,w:i}])}rotateAroundCenter(e){let t={};e&&typeof e.getBBox=="function"&&(t=e.getBBox());let i=t.x+t.width/2,s=t.y+t.height/2;return{x:i,y:s}}static setAttrs(e,t){for(let i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])}getTextRects(e,t,i,s,n=!0){let a=this.w,l=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:i,foreColor:"#fff",opacity:0});s&&l.attr("transform",s),a.globals.dom.Paper.add(l);let c=l.bbox();return n||(c=l.node.getBoundingClientRect()),l.remove(),{width:c.width,height:c.height}}placeTextWithEllipsis(e,t,i){if(typeof e.getComputedTextLength=="function"&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=i/1.1)){for(let s=t.length-3;s>0;s-=3)if(e.getSubStringLength(0,s)<=i/1.1){e.textContent=t.substring(0,s)+"...";return}e.textContent="."}}}class Je{constructor(e){this.ctx=e,this.w=e.w}static checkComboSeries(e,t){let i=!1,s=0,n=0;return t===void 0&&(t="line"),e.length&&typeof e[0].type<"u"&&e.forEach(a=>{(a.type==="bar"||a.type==="column"||a.type==="candlestick"||a.type==="boxPlot")&&s++,typeof a.type<"u"&&a.type!==t&&n++}),n>0&&(i=!0),{comboBarCount:s,comboCharts:i}}getStackedSeriesTotals(e=[]){const t=this.w;let i=[];if(t.globals.series.length===0)return i;for(let s=0;s<t.globals.series[t.globals.maxValsInArrayIndex].length;s++){let n=0;for(let a=0;a<t.globals.series.length;a++)typeof t.globals.series[a][s]<"u"&&e.indexOf(a)===-1&&(n+=t.globals.series[a][s]);i.push(n)}return i}getSeriesTotalByIndex(e=null){return e===null?this.w.config.series.reduce((t,i)=>t+i,0):this.w.globals.series[e].reduce((t,i)=>t+i,0)}getStackedSeriesTotalsByGroups(){const e=this.w;let t=[];return e.globals.seriesGroups.forEach(i=>{let s=[];e.config.series.forEach((a,l)=>{i.indexOf(a.name)>-1&&s.push(l)});const n=e.globals.series.map((a,l)=>s.indexOf(l)===-1?l:-1).filter(a=>a!==-1);t.push(this.getStackedSeriesTotals(n))}),t}isSeriesNull(e=null){let t=[];return e===null?t=this.w.config.series.filter(i=>i!==null):t=this.w.config.series[e].data.filter(i=>i!==null),t.length===0}seriesHaveSameValues(e){return this.w.globals.series[e].every((t,i,s)=>t===s[0])}getCategoryLabels(e){const t=this.w;let i=e.slice();return t.config.xaxis.convertedCatToNumeric&&(i=e.map((s,n)=>t.config.xaxis.labels.formatter(s-t.globals.minX+1))),i}getLargestSeries(){const e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map(t=>t.length).indexOf(Math.max.apply(Math,e.globals.series.map(t=>t.length)))}getLargestMarkerSize(){const e=this.w;let t=0;return e.globals.markers.size.forEach(i=>{t=Math.max(t,i)}),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach(i=>{t=Math.max(t,i.size)}),t>0&&(t+=e.config.markers.hover.sizeOffset+1),e.globals.markers.largestSize=t,t}getSeriesTotals(){const e=this.w;e.globals.seriesTotals=e.globals.series.map((t,i)=>{let s=0;if(Array.isArray(t))for(let n=0;n<t.length;n++)s+=t[n];else s+=t;return s})}getSeriesTotalsXRange(e,t){const i=this.w;return i.globals.series.map((n,a)=>{let l=0;for(let c=0;c<n.length;c++)i.globals.seriesX[a][c]>e&&i.globals.seriesX[a][c]<t&&(l+=n[c]);return l})}getPercentSeries(){const e=this.w;e.globals.seriesPercent=e.globals.series.map((t,i)=>{let s=[];if(Array.isArray(t))for(let n=0;n<t.length;n++){let a=e.globals.stackedSeriesTotals[n],l=0;a&&(l=100*t[n]/a),s.push(l)}else{const n=e.globals.seriesTotals.reduce((l,c)=>l+c,0);let a=100*t/n;s.push(a)}return s})}getCalculatedRatios(){let e=this.w,t=e.globals,i=[],s=0,n=0,a=0,l=0,c=[],d=.1,p=0;if(t.yRange=[],t.isMultipleYAxis)for(let g=0;g<t.minYArr.length;g++)t.yRange.push(Math.abs(t.minYArr[g]-t.maxYArr[g])),c.push(0);else t.yRange.push(Math.abs(t.minY-t.maxY));t.xRange=Math.abs(t.maxX-t.minX),t.zRange=Math.abs(t.maxZ-t.minZ);for(let g=0;g<t.yRange.length;g++)i.push(t.yRange[g]/t.gridHeight);if(n=t.xRange/t.gridWidth,s=t.yRange/t.gridWidth,a=t.xRange/t.gridHeight,l=t.zRange/t.gridHeight*16,l||(l=1),t.minY!==Number.MIN_VALUE&&Math.abs(t.minY)!==0&&(t.hasNegs=!0),e.globals.seriesYAxisReverseMap.length>0){let g=(b,O)=>{let r=e.config.yaxis[e.globals.seriesYAxisReverseMap[O]],h=b<0?-1:1;return b=Math.abs(b),r.logarithmic&&(b=this.getBaseLog(r.logBase,b)),-h*b/i[O]};if(t.isMultipleYAxis){c=[];for(let b=0;b<i.length;b++)c.push(g(t.minYArr[b],b))}else c=[],c.push(g(t.minY,0)),t.minY!==Number.MIN_VALUE&&Math.abs(t.minY)!==0&&(d=-t.minY/s,p=t.minX/n)}else c=[],c.push(0),d=0,p=0;return{yRatio:i,invertedYRatio:s,zRatio:l,xRatio:n,invertedXRatio:a,baseLineInvertedY:d,baseLineY:c,baseLineX:p}}getLogSeries(e){const t=this.w;return t.globals.seriesLog=e.map((i,s)=>{let n=t.globals.seriesYAxisReverseMap[s];return t.config.yaxis[n]&&t.config.yaxis[n].logarithmic?i.map(a=>a===null?null:this.getLogVal(t.config.yaxis[n].logBase,a,s)):i}),t.globals.invalidLogScale?e:t.globals.seriesLog}getBaseLog(e,t){return Math.log(t)/Math.log(e)}getLogVal(e,t,i){if(t<=0)return 0;const s=this.w,n=s.globals.minYArr[i]===0?-1:this.getBaseLog(e,s.globals.minYArr[i]),l=(s.globals.maxYArr[i]===0?0:this.getBaseLog(e,s.globals.maxYArr[i]))-n;return t<1?t/l:(this.getBaseLog(e,t)-n)/l}getLogYRatios(e){const t=this.w,i=this.w.globals;return i.yLogRatio=e.slice(),i.logYRange=i.yRange.map((s,n)=>{let a=t.globals.seriesYAxisReverseMap[n];if(t.config.yaxis[a]&&this.w.config.yaxis[a].logarithmic){let l=-Number.MAX_VALUE,c=Number.MIN_VALUE,d=1;return i.seriesLog.forEach((p,g)=>{p.forEach(b=>{t.config.yaxis[g]&&t.config.yaxis[g].logarithmic&&(l=Math.max(b,l),c=Math.min(b,c))})}),d=Math.pow(i.yRange[n],Math.abs(c-l)/i.yRange[n]),i.yLogRatio[n]=d/i.gridHeight,d}}),i.invalidLogScale?e.slice():i.yLogRatio}static extendArrayProps(e,t,i){var s,n;return t!=null&&t.yaxis&&(t=e.extendYAxis(t,i)),t!=null&&t.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),(s=t==null?void 0:t.annotations)!=null&&s.xaxis&&(t=e.extendXAxisAnnotations(t)),(n=t==null?void 0:t.annotations)!=null&&n.points&&(t=e.extendPointAnnotations(t))),t}}let Xo=class{constructor(e){this.w=e.w,this.annoCtx=e}setOrientations(e,t=null){let i=this.w;if(e.label.orientation==="vertical"){const s=t!==null?t:0;let n=i.globals.dom.baseEl.querySelector(`.apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='${s}']`);if(n!==null){const a=n.getBoundingClientRect();n.setAttribute("x",parseFloat(n.getAttribute("x"))-a.height+4),e.label.position==="top"?n.setAttribute("y",parseFloat(n.getAttribute("y"))+a.width):n.setAttribute("y",parseFloat(n.getAttribute("y"))-a.width);let l=this.annoCtx.graphics.rotateAroundCenter(n);const c=l.x,d=l.y;n.setAttribute("transform",`rotate(-90 ${c} ${d})`)}}}addBackgroundToAnno(e,t){const i=this.w;if(!e||typeof t.label.text>"u"||typeof t.label.text<"u"&&!String(t.label.text).trim())return null;const s=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),n=e.getBoundingClientRect();let a=t.label.style.padding.left,l=t.label.style.padding.right,c=t.label.style.padding.top,d=t.label.style.padding.bottom;t.label.orientation==="vertical"&&(c=t.label.style.padding.left,d=t.label.style.padding.right,a=t.label.style.padding.top,l=t.label.style.padding.bottom);const p=n.left-s.left-a,g=n.top-s.top-c,b=this.annoCtx.graphics.drawRect(p-i.globals.barPadForNumericAxis,g,n.width+a+l,n.height+c+d,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&b.node.classList.add(t.id),b}annotationsBackground(){const e=this.w,t=(i,s,n)=>{let a=e.globals.dom.baseEl.querySelector(`.apexcharts-${n}-annotations .apexcharts-${n}-annotation-label[rel='${s}']`);if(a){const l=a.parentNode,c=this.addBackgroundToAnno(a,i);c&&(l.insertBefore(c.node,a),i.label.mouseEnter&&c.node.addEventListener("mouseenter",i.label.mouseEnter.bind(this,i)),i.label.mouseLeave&&c.node.addEventListener("mouseleave",i.label.mouseLeave.bind(this,i)),i.label.click&&c.node.addEventListener("click",i.label.click.bind(this,i)))}};e.config.annotations.xaxis.map((i,s)=>{t(i,s,"xaxis")}),e.config.annotations.yaxis.map((i,s)=>{t(i,s,"yaxis")}),e.config.annotations.points.map((i,s)=>{t(i,s,"point")})}getY1Y2(e,t){let i=e==="y1"?t.y:t.y2,s,n=!1;const a=this.w;if(this.annoCtx.invertAxis){let l=a.globals.labels;a.config.xaxis.convertedCatToNumeric&&(l=a.globals.categoryLabels);let c=l.indexOf(i);const d=a.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(c+1)+")");d?s=parseFloat(d.getAttribute("y")):s=(a.globals.gridHeight/l.length-1)*(c+1)-a.globals.barHeight,typeof t.seriesIndex<"u"&&a.globals.barHeight&&(s=s-a.globals.barHeight/2*(a.globals.series.length-1)+a.globals.barHeight*t.seriesIndex)}else{let l,c=a.globals.seriesYAxisMap[t.yAxisIndex][0];a.config.yaxis[t.yAxisIndex].logarithmic?(i=new Je(this.annoCtx.ctx).getLogVal(a.config.yaxis[t.yAxisIndex].logBase,i,c),l=i/a.globals.yLogRatio[c]):l=(i-a.globals.minYArr[c])/(a.globals.yRange[c]/a.globals.gridHeight),l>a.globals.gridHeight?(l=a.globals.gridHeight,n=!0):l<0&&(l=0,n=!0),s=a.globals.gridHeight-l,t.marker&&(t.y===void 0||t.y===null)&&(s=0),a.config.yaxis[t.yAxisIndex]&&a.config.yaxis[t.yAxisIndex].reversed&&(s=l)}return typeof i=="string"&&i.indexOf("px")>-1&&(s=parseFloat(i)),{yP:s,clipped:n}}getX1X2(e,t){let i=e==="x1"?t.x:t.x2;const s=this.w;let n=this.annoCtx.invertAxis?s.globals.minY:s.globals.minX,a=this.annoCtx.invertAxis?s.globals.maxY:s.globals.maxX;const l=this.annoCtx.invertAxis?s.globals.yRange[0]:s.globals.xRange;let c=!1,d;return this.annoCtx.inversedReversedAxis?d=(a-i)/(l/s.globals.gridWidth):d=(i-n)/(l/s.globals.gridWidth),(s.config.xaxis.type==="category"||s.config.xaxis.convertedCatToNumeric)&&!this.annoCtx.invertAxis&&!s.globals.dataFormatXNumeric&&(s.config.chart.sparkline.enabled||(d=this.getStringX(i))),typeof i=="string"&&i.indexOf("px")>-1&&(d=parseFloat(i)),i==null&&t.marker&&(d=s.globals.gridWidth),typeof t.seriesIndex<"u"&&s.globals.barWidth&&!this.annoCtx.invertAxis&&(d=d-s.globals.barWidth/2*(s.globals.series.length-1)+s.globals.barWidth*t.seriesIndex),d>s.globals.gridWidth?(d=s.globals.gridWidth,c=!0):d<0&&(d=0,c=!0),{x:d,clipped:c}}getStringX(e){const t=this.w;let i=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);let s=t.globals.labels.indexOf(e);const n=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(s+1)+")");return n&&(i=parseFloat(n.getAttribute("x"))),i}};class vP{constructor(e){this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new Xo(this.annoCtx)}addXaxisAnnotation(e,t,i){let s=this.w,n=this.helpers.getX1X2("x1",e),a=n.x,l=n.clipped,c=!0,d;const p=e.label.text;let g=e.strokeDashArray;if(R.isNumber(a)){if(e.x2===null||typeof e.x2>"u"){if(!l){let b=this.annoCtx.graphics.drawLine(a+e.offsetX,0+e.offsetY,a+e.offsetX,s.globals.gridHeight+e.offsetY,e.borderColor,g,e.borderWidth);t.appendChild(b.node),e.id&&b.node.classList.add(e.id)}}else{let b=this.helpers.getX1X2("x2",e);if(d=b.x,c=b.clipped,!(l&&c)){if(d<a){let r=a;a=d,d=r}let O=this.annoCtx.graphics.drawRect(a+e.offsetX,0+e.offsetY,d-a,s.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,g);O.node.classList.add("apexcharts-annotation-rect"),O.attr("clip-path",`url(#gridRectMask${s.globals.cuid})`),t.appendChild(O.node),e.id&&O.node.classList.add(e.id)}}if(!(l&&c)){let b=this.annoCtx.graphics.getTextRects(p,parseFloat(e.label.style.fontSize)),O=e.label.position==="top"?4:e.label.position==="center"?s.globals.gridHeight/2+(e.label.orientation==="vertical"?b.width/2:0):s.globals.gridHeight,r=this.annoCtx.graphics.drawText({x:a+e.label.offsetX,y:O+e.label.offsetY-(e.label.orientation==="vertical"?e.label.position==="top"?b.width/2-12:-b.width/2:0),text:p,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:`apexcharts-xaxis-annotation-label ${e.label.style.cssClass} ${e.id?e.id:""}`});r.attr({rel:i}),t.appendChild(r.node),this.annoCtx.helpers.setOrientations(e,i)}}}drawXAxisAnnotations(){let e=this.w,t=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return e.config.annotations.xaxis.map((i,s)=>{this.addXaxisAnnotation(i,t.node,s)}),t}}class at{constructor(e){this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}isValidDate(e){return typeof e=="number"?!1:!isNaN(this.parseDate(e))}getTimeStamp(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}getDate(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}parseDate(e){const t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);let i=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return i=this.getTimeStamp(i),i}parseDateWithTimezone(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}formatDate(e,t){const i=this.w.globals.locale,s=this.w.config.xaxis.labels.datetimeUTC;let n=["\0",...i.months],a=["",...i.shortMonths],l=["",...i.days],c=["",...i.shortDays];function d(T,_){let $=T+"";for(_=_||2;$.length<_;)$="0"+$;return $}let p=s?e.getUTCFullYear():e.getFullYear();t=t.replace(/(^|[^\\])yyyy+/g,"$1"+p),t=t.replace(/(^|[^\\])yy/g,"$1"+p.toString().substr(2,2)),t=t.replace(/(^|[^\\])y/g,"$1"+p);let g=(s?e.getUTCMonth():e.getMonth())+1;t=t.replace(/(^|[^\\])MMMM+/g,"$1"+n[0]),t=t.replace(/(^|[^\\])MMM/g,"$1"+a[0]),t=t.replace(/(^|[^\\])MM/g,"$1"+d(g)),t=t.replace(/(^|[^\\])M/g,"$1"+g);let b=s?e.getUTCDate():e.getDate();t=t.replace(/(^|[^\\])dddd+/g,"$1"+l[0]),t=t.replace(/(^|[^\\])ddd/g,"$1"+c[0]),t=t.replace(/(^|[^\\])dd/g,"$1"+d(b)),t=t.replace(/(^|[^\\])d/g,"$1"+b);let O=s?e.getUTCHours():e.getHours();t=t.replace(/(^|[^\\])HH+/g,"$1"+d(O)),t=t.replace(/(^|[^\\])H/g,"$1"+O);let r=O>12?O-12:O===0?12:O;t=t.replace(/(^|[^\\])hh+/g,"$1"+d(r)),t=t.replace(/(^|[^\\])h/g,"$1"+r);let h=s?e.getUTCMinutes():e.getMinutes();t=t.replace(/(^|[^\\])mm+/g,"$1"+d(h)),t=t.replace(/(^|[^\\])m/g,"$1"+h);let u=s?e.getUTCSeconds():e.getSeconds();t=t.replace(/(^|[^\\])ss+/g,"$1"+d(u)),t=t.replace(/(^|[^\\])s/g,"$1"+u);let m=s?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+d(m,3)),m=Math.round(m/10),t=t.replace(/(^|[^\\])ff/g,"$1"+d(m)),m=Math.round(m/10),t=t.replace(/(^|[^\\])f/g,"$1"+m);let y=O<12?"AM":"PM";t=t.replace(/(^|[^\\])TT+/g,"$1"+y),t=t.replace(/(^|[^\\])T/g,"$1"+y.charAt(0));let v=y.toLowerCase();t=t.replace(/(^|[^\\])tt+/g,"$1"+v),t=t.replace(/(^|[^\\])t/g,"$1"+v.charAt(0));let w=-e.getTimezoneOffset(),S=s||!w?"Z":w>0?"+":"-";if(!s){w=Math.abs(w);let T=Math.floor(w/60),_=w%60;S+=d(T)+":"+d(_)}t=t.replace(/(^|[^\\])K/g,"$1"+S);let C=(s?e.getUTCDay():e.getDay())+1;return t=t.replace(new RegExp(l[0],"g"),l[C]),t=t.replace(new RegExp(c[0],"g"),c[C]),t=t.replace(new RegExp(n[0],"g"),n[g]),t=t.replace(new RegExp(a[0],"g"),a[g]),t=t.replace(/\\(.)/g,"$1"),t}getTimeUnitsfromTimestamp(e,t,i){let s=this.w;s.config.xaxis.min!==void 0&&(e=s.config.xaxis.min),s.config.xaxis.max!==void 0&&(t=s.config.xaxis.max);const n=this.getDate(e),a=this.getDate(t),l=this.formatDate(n,"yyyy MM dd HH mm ss fff").split(" "),c=this.formatDate(a,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(l[6],10),maxMillisecond:parseInt(c[6],10),minSecond:parseInt(l[5],10),maxSecond:parseInt(c[5],10),minMinute:parseInt(l[4],10),maxMinute:parseInt(c[4],10),minHour:parseInt(l[3],10),maxHour:parseInt(c[3],10),minDate:parseInt(l[2],10),maxDate:parseInt(c[2],10),minMonth:parseInt(l[1],10)-1,maxMonth:parseInt(c[1],10)-1,minYear:parseInt(l[0],10),maxYear:parseInt(c[0],10)}}isLeapYear(e){return e%4===0&&e%100!==0||e%400===0}calculcateLastDaysOfMonth(e,t,i){return this.determineDaysOfMonths(e,t)-i}determineDaysOfYear(e){let t=365;return this.isLeapYear(e)&&(t=366),t}determineRemainingDaysOfYear(e,t,i){let s=this.daysCntOfYear[t]+i;return t>1&&this.isLeapYear()&&s++,s}determineDaysOfMonths(e,t){let i=30;switch(e=R.monthMod(e),!0){case this.months30.indexOf(e)>-1:e===2&&(this.isLeapYear(t)?i=29:i=28);break;case this.months31.indexOf(e)>-1:i=31;break;default:i=31;break}return i}}class Or{constructor(e){this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}xLabelFormat(e,t,i,s){let n=this.w;if(n.config.xaxis.type==="datetime"&&n.config.xaxis.labels.formatter===void 0&&n.config.tooltip.x.formatter===void 0){let a=new at(this.ctx);return a.formatDate(a.getDate(t),n.config.tooltip.x.format)}return e(t,i,s)}defaultGeneralFormatter(e){return Array.isArray(e)?e.map(t=>t):e}defaultYFormatter(e,t,i){let s=this.w;if(R.isNumber(e))if(s.globals.yValueDecimal!==0)e=e.toFixed(t.decimalsInFloat!==void 0?t.decimalsInFloat:s.globals.yValueDecimal);else{const n=e.toFixed(0);e=e==n?n:e.toFixed(1)}return e}setLabelFormatters(){let e=this.w;return e.globals.xaxisTooltipFormatter=t=>this.defaultGeneralFormatter(t),e.globals.ttKeyFormatter=t=>this.defaultGeneralFormatter(t),e.globals.ttZFormatter=t=>t,e.globals.legendFormatter=t=>this.defaultGeneralFormatter(t),e.config.xaxis.labels.formatter!==void 0?e.globals.xLabelFormatter=e.config.xaxis.labels.formatter:e.globals.xLabelFormatter=t=>{if(R.isNumber(t)){if(!e.config.xaxis.convertedCatToNumeric&&e.config.xaxis.type==="numeric"){if(R.isNumber(e.config.xaxis.decimalsInFloat))return t.toFixed(e.config.xaxis.decimalsInFloat);{const i=e.globals.maxX-e.globals.minX;return i>0&&i<100?t.toFixed(1):t.toFixed(0)}}return e.globals.isBarHorizontal&&e.globals.maxY-e.globals.minYArr<4?t.toFixed(1):t.toFixed(0)}return t},typeof e.config.tooltip.x.formatter=="function"?e.globals.ttKeyFormatter=e.config.tooltip.x.formatter:e.globals.ttKeyFormatter=e.globals.xLabelFormatter,typeof e.config.xaxis.tooltip.formatter=="function"&&(e.globals.xaxisTooltipFormatter=e.config.xaxis.tooltip.formatter),(Array.isArray(e.config.tooltip.y)||e.config.tooltip.y.formatter!==void 0)&&(e.globals.ttVal=e.config.tooltip.y),e.config.tooltip.z.formatter!==void 0&&(e.globals.ttZFormatter=e.config.tooltip.z.formatter),e.config.legend.formatter!==void 0&&(e.globals.legendFormatter=e.config.legend.formatter),e.config.yaxis.forEach((t,i)=>{t.labels.formatter!==void 0?e.globals.yLabelFormatters[i]=t.labels.formatter:e.globals.yLabelFormatters[i]=s=>e.globals.xyCharts?Array.isArray(s)?s.map(n=>this.defaultYFormatter(n,t,i)):this.defaultYFormatter(s,t,i):s}),e.globals}heatmapLabelFormatters(){const e=this.w;if(e.config.chart.type==="heatmap"){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();let t=e.globals.seriesNames.reduce((i,s)=>i.length>s.length?i:s,0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}class Zi{constructor(e){this.ctx=e,this.w=e.w}getLabel(e,t,i,s,n=[],a="12px",l=!0){const c=this.w;let d=typeof e[s]>"u"?"":e[s],p=d,g=c.globals.xLabelFormatter,b=c.config.xaxis.labels.formatter,O=!1,r=new Or(this.ctx),h=d;l&&(p=r.xLabelFormat(g,d,h,{i:s,dateFormatter:new at(this.ctx).formatDate,w:c}),b!==void 0&&(p=b(d,e[s],{i:s,dateFormatter:new at(this.ctx).formatDate,w:c})));const u=w=>{let S=null;return t.forEach(C=>{C.unit==="month"?S="year":C.unit==="day"?S="month":C.unit==="hour"?S="day":C.unit==="minute"&&(S="hour")}),S===w};t.length>0?(O=u(t[s].unit),i=t[s].position,p=t[s].value):c.config.xaxis.type==="datetime"&&b===void 0&&(p=""),typeof p>"u"&&(p=""),p=Array.isArray(p)?p:p.toString();let m=new Y(this.ctx),y={};c.globals.rotateXLabels&&l?y=m.getTextRects(p,parseInt(a,10),null,`rotate(${c.config.xaxis.labels.rotate} 0 0)`,!1):y=m.getTextRects(p,parseInt(a,10));const v=!c.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(p)&&(String(p)==="NaN"||n.indexOf(p)>=0&&v)&&(p=""),{x:i,text:p,textRect:y,isBold:O}}checkLabelBasedOnTickamount(e,t,i){const s=this.w;let n=s.config.xaxis.tickAmount;if(n==="dataPoints"&&(n=Math.round(s.globals.gridWidth/120)),n>i)return t;let a=Math.round(i/(n+1));return e%a===0||(t.text=""),t}checkForOverflowingLabels(e,t,i,s,n){const a=this.w;if(e===0&&a.globals.skipFirstTimelinelabel&&(t.text=""),e===i-1&&a.globals.skipLastTimelinelabel&&(t.text=""),a.config.xaxis.labels.hideOverlappingLabels&&s.length>0){const l=n[n.length-1];t.x<l.textRect.width/(a.globals.rotateXLabels?Math.abs(a.config.xaxis.labels.rotate)/12:1.01)+l.x&&(t.text="")}return t}checkForReversedLabels(e,t){const i=this.w;return i.config.yaxis[e]&&i.config.yaxis[e].reversed&&t.reverse(),t}isYAxisHidden(e){const t=this.w,i=new Je(this.ctx);return!t.globals.seriesYAxisMap[e].some(n=>t.globals.collapsedSeriesIndices.indexOf(n)===-1)||!t.config.yaxis[e].show||!t.config.yaxis[e].showForNullSeries&&i.isSeriesNull(e)}getYAxisForeColor(e,t){const i=this.w;return Array.isArray(e)&&i.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,i.globals.yAxisScale[t].result.length,!1),e}drawYAxisTicks(e,t,i,s,n,a,l){let c=this.w,d=new Y(this.ctx),p=c.globals.translateY;if(s.show&&t>0){c.config.yaxis[n].opposite===!0&&(e=e+s.width);for(let g=t;g>=0;g--){let b=p+t/10+c.config.yaxis[n].labels.offsetY-1;c.globals.isBarHorizontal&&(b=a*g),c.config.chart.type==="heatmap"&&(b=b+a/2);let O=d.drawLine(e+i.offsetX-s.width+s.offsetX,b+s.offsetY,e+i.offsetX+s.offsetX,b+s.offsetY,s.color);l.add(O),p=p+a}}}}class wP{constructor(e){this.w=e.w,this.annoCtx=e,this.helpers=new Xo(this.annoCtx),this.axesUtils=new Zi(this.annoCtx)}addYaxisAnnotation(e,t,i){let s=this.w,n=e.strokeDashArray,a=this.helpers.getY1Y2("y1",e),l=a.yP,c=a.clipped,d,p=!0,g=!1;const b=e.label.text;if(e.y2===null||typeof e.y2>"u"){if(!c){g=!0;let O=this.annoCtx.graphics.drawLine(0+e.offsetX,l+e.offsetY,this._getYAxisAnnotationWidth(e),l+e.offsetY,e.borderColor,n,e.borderWidth);t.appendChild(O.node),e.id&&O.node.classList.add(e.id)}}else{if(a=this.helpers.getY1Y2("y2",e),d=a.yP,p=a.clipped,d>l){let O=l;l=d,d=O}if(!(c&&p)){g=!0;let O=this.annoCtx.graphics.drawRect(0+e.offsetX,d+e.offsetY,this._getYAxisAnnotationWidth(e),l-d,0,e.fillColor,e.opacity,1,e.borderColor,n);O.node.classList.add("apexcharts-annotation-rect"),O.attr("clip-path",`url(#gridRectMask${s.globals.cuid})`),t.appendChild(O.node),e.id&&O.node.classList.add(e.id)}}if(g){let O=e.label.position==="right"?s.globals.gridWidth:e.label.position==="center"?s.globals.gridWidth/2:0,r=this.annoCtx.graphics.drawText({x:O+e.label.offsetX,y:(d??l)+e.label.offsetY-3,text:b,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:`apexcharts-yaxis-annotation-label ${e.label.style.cssClass} ${e.id?e.id:""}`});r.attr({rel:i}),t.appendChild(r.node)}}_getYAxisAnnotationWidth(e){const t=this.w;let i=t.globals.gridWidth;return e.width.indexOf("%")>-1?i=t.globals.gridWidth*parseInt(e.width,10)/100:i=parseInt(e.width,10),i+e.offsetX}drawYAxisAnnotations(){let e=this.w,t=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return e.config.annotations.yaxis.forEach((i,s)=>{e.globals.seriesYAxisMap[i.yAxisIndex][0],this.axesUtils.isYAxisHidden(i.yAxisIndex)||this.addYaxisAnnotation(i,t.node,s)}),t}}class kP{constructor(e){this.w=e.w,this.annoCtx=e,this.helpers=new Xo(this.annoCtx)}addPointAnnotation(e,t,i){this.w;let s=this.helpers.getX1X2("x1",e),n=s.x,a=s.clipped;s=this.helpers.getY1Y2("y1",e);let l=s.yP,c=s.clipped;if(R.isNumber(n)&&!(c||a)){let d={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:`apexcharts-point-annotation-marker ${e.marker.cssClass} ${e.id?e.id:""}`},p=this.annoCtx.graphics.drawMarker(n+e.marker.offsetX,l+e.marker.offsetY,d);t.appendChild(p.node);const g=e.label.text?e.label.text:"";let b=this.annoCtx.graphics.drawText({x:n+e.label.offsetX,y:l+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:g,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:`apexcharts-point-annotation-label ${e.label.style.cssClass} ${e.id?e.id:""}`});if(b.attr({rel:i}),t.appendChild(b.node),e.customSVG.SVG){let O=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});O.attr({transform:`translate(${n+e.customSVG.offsetX}, ${l+e.customSVG.offsetY})`}),O.node.innerHTML=e.customSVG.SVG,t.appendChild(O.node)}if(e.image.path){let O=e.image.width?e.image.width:20,r=e.image.height?e.image.height:20;p=this.annoCtx.addImage({x:n+e.image.offsetX-O/2,y:l+e.image.offsetY-r/2,width:O,height:r,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&p.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&p.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e)),e.click&&p.node.addEventListener("click",e.click.bind(this,e))}}drawPointAnnotations(){let e=this.w,t=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return e.config.annotations.points.map((i,s)=>{this.addPointAnnotation(i,t.node,s)}),t}}const bg={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}};class Es{constructor(){this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}init(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[bg],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter(e){return new Date(e).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter(e){return e.globals.seriesTotals.reduce((t,i)=>t+i,0)/e.globals.series.length+"%"}}},barLabels:{enabled:!1,margin:5,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter(e){return e},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter(e){return e.globals.seriesTotals.reduce((t,i)=>t+i,0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter(e){return e!==null?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}class SP{constructor(e){this.ctx=e,this.w=e.w,this.graphics=new Y(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Xo(this),this.xAxisAnnotations=new vP(this),this.yAxisAnnotations=new wP(this),this.pointsAnnotations=new kP(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}drawAxesAnnotations(){const e=this.w;if(e.globals.axisCharts){let t=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),s=this.pointsAnnotations.drawPointAnnotations();const n=e.config.chart.animations.enabled,a=[t,i,s],l=[i.node,t.node,s.node];for(let c=0;c<3;c++)e.globals.dom.elGraphical.add(a[c]),n&&!e.globals.resized&&!e.globals.dataChanged&&e.config.chart.type!=="scatter"&&e.config.chart.type!=="bubble"&&e.globals.dataPoints>1&&l[c].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:l[c],index:0});this.helpers.annotationsBackground()}}drawImageAnnos(){this.w.config.annotations.images.map((t,i)=>{this.addImage(t,i)})}drawTextAnnos(){this.w.config.annotations.texts.map((t,i)=>{this.addText(t,i)})}addXaxisAnnotation(e,t,i){this.xAxisAnnotations.addXaxisAnnotation(e,t,i)}addYaxisAnnotation(e,t,i){this.yAxisAnnotations.addYaxisAnnotation(e,t,i)}addPointAnnotation(e,t,i){this.pointsAnnotations.addPointAnnotation(e,t,i)}addText(e,t){const{x:i,y:s,text:n,textAnchor:a,foreColor:l,fontSize:c,fontFamily:d,fontWeight:p,cssClass:g,backgroundColor:b,borderWidth:O,strokeDashArray:r,borderRadius:h,borderColor:u,appendTo:m=".apexcharts-svg",paddingLeft:y=4,paddingRight:v=4,paddingBottom:w=2,paddingTop:S=2}=e,C=this.w;let T=this.graphics.drawText({x:i,y:s,text:n,textAnchor:a||"start",fontSize:c||"12px",fontWeight:p||"regular",fontFamily:d||C.config.chart.fontFamily,foreColor:l||C.config.chart.foreColor,cssClass:"apexcharts-text "+g?g:""});const _=C.globals.dom.baseEl.querySelector(m);_&&_.appendChild(T.node);const $=T.bbox();if(n){const N=this.graphics.drawRect($.x-y,$.y-S,$.width+y+v,$.height+w+S,h,b||"transparent",1,O,u,r);_.insertBefore(N.node,T.node)}}addImage(e,t){const i=this.w,{path:s,x:n=0,y:a=0,width:l=20,height:c=20,appendTo:d=".apexcharts-svg"}=e;let p=i.globals.dom.Paper.image(s);p.size(l,c).move(n,a);const g=i.globals.dom.baseEl.querySelector(d);return g&&g.appendChild(p.node),p}addXaxisAnnotationExternal(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}addYaxisAnnotationExternal(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}addPointAnnotationExternal(e,t,i){return typeof this.invertAxis>"u"&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}addAnnotationExternal({params:e,pushToMemory:t,context:i,type:s,contextMethod:n}){const a=i,l=a.w,c=l.globals.dom.baseEl.querySelector(`.apexcharts-${s}-annotations`),d=c.childNodes.length+1,p=new Es,g=Object.assign({},s==="xaxis"?p.xAxisAnnotation:s==="yaxis"?p.yAxisAnnotation:p.pointAnnotation),b=R.extend(g,e);switch(s){case"xaxis":this.addXaxisAnnotation(b,c,d);break;case"yaxis":this.addYaxisAnnotation(b,c,d);break;case"point":this.addPointAnnotation(b,c,d);break}let O=l.globals.dom.baseEl.querySelector(`.apexcharts-${s}-annotations .apexcharts-${s}-annotation-label[rel='${d}']`);const r=this.helpers.addBackgroundToAnno(O,b);return r&&c.insertBefore(r.node,O),t&&l.globals.memory.methodsToExec.push({context:a,id:b.id?b.id:R.randomId(),method:n,label:"addAnnotation",params:e}),i}clearAnnotations(e){const t=e.w;let i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");t.globals.memory.methodsToExec.map((s,n)=>{(s.label==="addText"||s.label==="addAnnotation")&&t.globals.memory.methodsToExec.splice(n,1)}),i=R.listToArray(i),Array.prototype.forEach.call(i,s=>{for(;s.firstChild;)s.removeChild(s.firstChild)})}removeAnnotation(e,t){const i=e.w;let s=i.globals.dom.baseEl.querySelectorAll(`.${t}`);s&&(i.globals.memory.methodsToExec.map((n,a)=>{n.id===t&&i.globals.memory.methodsToExec.splice(a,1)}),Array.prototype.forEach.call(s,n=>{n.parentElement.removeChild(n)}))}}const kc=({isTimeline:o,ctx:e,seriesIndex:t,dataPointIndex:i,y1:s,y2:n,w:a})=>{var m;let l=a.globals.seriesRangeStart[t][i],c=a.globals.seriesRangeEnd[t][i],d=a.globals.labels[i],p=a.config.series[t].name?a.config.series[t].name:"";const g=a.globals.ttKeyFormatter,b=a.config.tooltip.y.title.formatter,O={w:a,seriesIndex:t,dataPointIndex:i,start:l,end:c};typeof b=="function"&&(p=b(p,O)),(m=a.config.series[t].data[i])!=null&&m.x&&(d=a.config.series[t].data[i].x),o||a.config.xaxis.type==="datetime"&&(d=new Or(e).xLabelFormat(a.globals.ttKeyFormatter,d,d,{i:void 0,dateFormatter:new at(e).formatDate,w:a})),typeof g=="function"&&(d=g(d,O)),Number.isFinite(s)&&Number.isFinite(n)&&(l=s,c=n);let r="",h="";const u=a.globals.colors[t];if(a.config.tooltip.x.formatter===void 0)if(a.config.xaxis.type==="datetime"){let y=new at(e);r=y.formatDate(y.getDate(l),a.config.tooltip.x.format),h=y.formatDate(y.getDate(c),a.config.tooltip.x.format)}else r=l,h=c;else r=a.config.tooltip.x.formatter(l),h=a.config.tooltip.x.formatter(c);return{start:l,end:c,startVal:r,endVal:h,ylabel:d,color:u,seriesName:p}},Sc=o=>{let{color:e,seriesName:t,ylabel:i,start:s,end:n,seriesIndex:a,dataPointIndex:l}=o;const c=o.ctx.tooltip.tooltipLabels.getFormatters(a);s=c.yLbFormatter(s),n=c.yLbFormatter(n);const d=c.yLbFormatter(o.w.globals.series[a][l]);let p="";const g=`<span class="value start-value">
  ${s}
  </span> <span class="separator">-</span> <span class="value end-value">
  ${n}
  </span>`;return o.w.globals.comboCharts?o.w.config.series[a].type==="rangeArea"||o.w.config.series[a].type==="rangeBar"?p=g:p=`<span>${d}</span>`:p=g,'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e+'">'+(t||"")+'</span></div><div> <span class="category">'+i+": </span> "+p+" </div></div>"};class xr{constructor(e){this.opts=e}hideYAxis(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}line(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}sparkline(e){this.hideYAxis();const t={grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}};return R.extend(e,t)}bar(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}funnel(){return this.hideYAxis(),{...this.bar(),chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}}}candlestick(){return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:({seriesIndex:e,dataPointIndex:t,w:i})=>this._getBoxTooltip(i,e,t,["Open","High","","Low","Close"],"candlestick")},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}boxPlot(){return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:({seriesIndex:e,dataPointIndex:t,w:i})=>this._getBoxTooltip(i,e,t,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}rangeBar(){const e=i=>{const{color:s,seriesName:n,ylabel:a,startVal:l,endVal:c}=kc({...i,isTimeline:!0});return Sc({...i,color:s,seriesName:n,ylabel:a,start:l,end:c})},t=i=>{const{color:s,seriesName:n,ylabel:a,start:l,end:c}=kc(i);return Sc({...i,color:s,seriesName:n,ylabel:a,start:l,end:c})};return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter(i,{ctx:s,seriesIndex:n,dataPointIndex:a,w:l}){const c=()=>{const d=l.globals.seriesRangeStart[n][a];return l.globals.seriesRangeEnd[n][a]-d};return l.globals.comboCharts?l.config.series[n].type==="rangeBar"||l.config.series[n].type==="rangeArea"?c():i:c()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom(i){return i.w.config.plotOptions&&i.w.config.plotOptions.bar&&i.w.config.plotOptions.bar.horizontal?e(i):t(i)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}dumbbell(e){var t,i;return(t=e.plotOptions.bar)!=null&&t.barHeight||(e.plotOptions.bar.barHeight=2),(i=e.plotOptions.bar)!=null&&i.columnWidth||(e.plotOptions.bar.columnWidth=2),e}area(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}rangeArea(){const e=t=>{const{color:i,seriesName:s,ylabel:n,start:a,end:l}=kc(t);return Sc({...t,color:i,seriesName:s,ylabel:n,start:a,end:l})};return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom(t){return e(t)}}}}brush(e){const t={chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}};return R.extend(e,t)}stacked100(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;const t=e.dataLabels.formatter;return e.yaxis.forEach((s,n)=>{e.yaxis[n].min=0,e.yaxis[n].max=100}),e.chart.type==="bar"&&(e.dataLabels.formatter=t||function(s){return typeof s=="number"?s&&s.toFixed(0)+"%":s}),e}stackedBars(){const e=this.bar();return{...e,plotOptions:{...e.plotOptions,bar:{...e.plotOptions.bar,borderRadiusApplication:"end",borderRadiusWhenStacked:"last"}}}}convertCatToNumeric(e){return e.xaxis.convertedCatToNumeric=!0,e}convertCatToNumericXaxis(e,t,i){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(a){return R.isNumber(a)?Math.floor(a):a};const s=e.xaxis.labels.formatter;let n=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return i&&i.length&&(n=i.map(a=>Array.isArray(a)?a:String(a))),n&&n.length&&(e.xaxis.labels.formatter=function(a){return R.isNumber(a)?s(n[Math.floor(a)-1]):s(a)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}bubble(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}scatter(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}heatmap(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}treemap(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}pie(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}donut(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}polarArea(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}radar(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:e=>e,style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}radialBar(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}_getBoxTooltip(e,t,i,s,n){const a=e.globals.seriesCandleO[t][i],l=e.globals.seriesCandleH[t][i],c=e.globals.seriesCandleM[t][i],d=e.globals.seriesCandleL[t][i],p=e.globals.seriesCandleC[t][i];return e.config.series[t].type&&e.config.series[t].type!==n?`<div class="apexcharts-custom-tooltip">
          ${e.config.series[t].name?e.config.series[t].name:"series-"+(t+1)}: <strong>${e.globals.series[t][i]}</strong>
        </div>`:`<div class="apexcharts-tooltip-box apexcharts-tooltip-${e.config.chart.type}"><div>${s[0]}: <span class="value">`+a+`</span></div><div>${s[1]}: <span class="value">`+l+"</span></div>"+(c?`<div>${s[2]}: <span class="value">`+c+"</span></div>":"")+`<div>${s[3]}: <span class="value">`+d+`</span></div><div>${s[4]}: <span class="value">`+p+"</span></div></div>"}}class vr{constructor(e){this.opts=e}init({responsiveOverride:e}){var c,d,p,g,b,O,r,h;let t=this.opts,i=new Es,s=new xr(t);this.chartType=t.chart.type,t=this.extendYAxis(t),t=this.extendAnnotations(t);let n=i.init(),a={};if(t&&typeof t=="object"){let u={};["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(t.chart.type)!==-1?u=s[t.chart.type]():u=s.line(),(d=(c=t.plotOptions)==null?void 0:c.bar)!=null&&d.isFunnel&&(u=s.funnel()),t.chart.stacked&&t.chart.type==="bar"&&(u=s.stackedBars()),(p=t.chart.brush)!=null&&p.enabled&&(u=s.brush(u)),t.chart.stacked&&t.chart.stackType==="100%"&&(t=s.stacked100(t)),(b=(g=t.plotOptions)==null?void 0:g.bar)!=null&&b.isDumbbell&&(t=s.dumbbell(t)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(t),t.xaxis=t.xaxis||window.Apex.xaxis||{},e||(t.xaxis.convertedCatToNumeric=!1),t=this.checkForCatToNumericXAxis(this.chartType,u,t),((O=t.chart.sparkline)!=null&&O.enabled||(h=(r=window.Apex.chart)==null?void 0:r.sparkline)!=null&&h.enabled)&&(u=s.sparkline(u)),a=R.extend(n,u)}let l=R.extend(a,window.Apex);return n=R.extend(l,t),n=this.handleUserInputErrors(n),n}checkForCatToNumericXAxis(e,t,i){var d,p;let s=new xr(i);const n=(e==="bar"||e==="boxPlot")&&((p=(d=i.plotOptions)==null?void 0:d.bar)==null?void 0:p.horizontal),a=e==="pie"||e==="polarArea"||e==="donut"||e==="radar"||e==="radialBar"||e==="heatmap",l=i.xaxis.type!=="datetime"&&i.xaxis.type!=="numeric";let c=i.xaxis.tickPlacement?i.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return!n&&!a&&l&&c!=="between"&&(i=s.convertCatToNumeric(i)),i}extendYAxis(e,t){let i=new Es;(typeof e.yaxis>"u"||!e.yaxis||Array.isArray(e.yaxis)&&e.yaxis.length===0)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=R.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[R.extend(i.yAxis,e.yaxis)]:e.yaxis=R.extendArray(e.yaxis,i.yAxis);let s=!1;e.yaxis.forEach(a=>{a.logarithmic&&(s=!0)});let n=e.series;return t&&!n&&(n=t.config.series),s&&n.length!==e.yaxis.length&&n.length&&(e.yaxis=n.map((a,l)=>{if(a.name||(n[l].name=`series-${l+1}`),e.yaxis[l])return e.yaxis[l].seriesName=n[l].name,e.yaxis[l];{const c=R.extend(i.yAxis,e.yaxis[0]);return c.show=!1,c}})),s&&n.length>1&&n.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),e}extendAnnotations(e){return typeof e.annotations>"u"&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),e=this.extendPointAnnotations(e),e}extendYAxisAnnotations(e){let t=new Es;return e.annotations.yaxis=R.extendArray(typeof e.annotations.yaxis<"u"?e.annotations.yaxis:[],t.yAxisAnnotation),e}extendXAxisAnnotations(e){let t=new Es;return e.annotations.xaxis=R.extendArray(typeof e.annotations.xaxis<"u"?e.annotations.xaxis:[],t.xAxisAnnotation),e}extendPointAnnotations(e){let t=new Es;return e.annotations.points=R.extendArray(typeof e.annotations.points<"u"?e.annotations.points:[],t.pointAnnotation),e}checkForDarkTheme(e){e.theme&&e.theme.mode==="dark"&&(e.tooltip||(e.tooltip={}),e.tooltip.theme!=="light"&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.chart.background||(e.chart.background="#424242"),e.theme.palette||(e.theme.palette="palette4"))}handleUserInputErrors(e){let t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(t.chart.type==="bar"&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return(t.chart.type==="bar"||t.chart.type==="rangeBar")&&t.tooltip.shared&&t.xaxis.crosshairs.width==="barWidth"&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),(t.chart.type==="candlestick"||t.chart.type==="boxPlot")&&t.yaxis[0].reversed&&(console.warn(`Reversed y-axis in ${t.chart.type} chart is not supported.`),t.yaxis[0].reversed=!1),t}}class yg{initGlobalVars(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRange=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.labels=[],e.hasXaxisGroups=!1,e.groups=[],e.hasSeriesGroups=!1,e.seriesGroups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0,e.multiAxisTickAmount=0}globalVars(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:e.chart.toolbar.autoSelected==="zoom"&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:e.chart.toolbar.autoSelected==="pan"&&e.chart.toolbar.tools.pan,selectionEnabled:e.chart.toolbar.autoSelected==="selection"&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}init(e){let t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=R.extend({},e),t.initialSeries=R.clone(e.series),t.lastXAxis=R.clone(t.initialConfig.xaxis),t.lastYAxis=R.clone(t.initialConfig.yaxis),t}}class CP{constructor(e){this.opts=e}init(){const e=new vr(this.opts).init({responsiveOverride:!1}),t=new yg().init(e);return{config:e,globals:t}}}class ii{constructor(e){this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0}clippedImgArea(e){let t=this.w,i=t.config,s=parseInt(t.globals.gridWidth,10),n=parseInt(t.globals.gridHeight,10),a=s>n?s:n,l=e.image,c=0,d=0;typeof e.width>"u"&&typeof e.height>"u"?i.fill.image.width!==void 0&&i.fill.image.height!==void 0?(c=i.fill.image.width+1,d=i.fill.image.height):(c=a+1,d=a):(c=e.width,d=e.height);let p=document.createElementNS(t.globals.SVGNS,"pattern");Y.setAttrs(p,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:c+"px",height:d+"px"});let g=document.createElementNS(t.globals.SVGNS,"image");p.appendChild(g),g.setAttributeNS(window.SVG.xlink,"href",l),Y.setAttrs(g,{x:0,y:0,preserveAspectRatio:"none",width:c+"px",height:d+"px"}),g.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(p)}getSeriesIndex(e){const t=this.w,i=t.config.chart.type;return(i==="bar"||i==="rangeBar")&&t.config.plotOptions.bar.distributed||i==="heatmap"||i==="treemap"?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}fillPath(e){let t=this.w;this.opts=e;let i=this.w.config,s,n,a;this.seriesIndex=this.getSeriesIndex(e);let c=this.getFillColors()[this.seriesIndex];t.globals.seriesColors[this.seriesIndex]!==void 0&&(c=t.globals.seriesColors[this.seriesIndex]),typeof c=="function"&&(c=c({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:t}));let d=e.fillType?e.fillType:this.getFillType(this.seriesIndex),p=Array.isArray(i.fill.opacity)?i.fill.opacity[this.seriesIndex]:i.fill.opacity;e.color&&(c=e.color),c||(c="#fff",console.warn("undefined color - ApexCharts"));let g=c;if(c.indexOf("rgb")===-1?c.length<9&&(g=R.hexToRgba(c,p)):c.indexOf("rgba")>-1&&(p=R.getOpacityFromRGBA(c)),e.opacity&&(p=e.opacity),d==="pattern"&&(n=this.handlePatternFill({fillConfig:e.fillConfig,patternFill:n,fillColor:c,fillOpacity:p,defaultColor:g})),d==="gradient"&&(a=this.handleGradientFill({fillConfig:e.fillConfig,fillColor:c,fillOpacity:p,i:this.seriesIndex})),d==="image"){let b=i.fill.image.src,O=e.patternID?e.patternID:"";this.clippedImgArea({opacity:p,image:Array.isArray(b)?e.seriesNumber<b.length?b[e.seriesNumber]:b[0]:b,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:`pattern${t.globals.cuid}${e.seriesNumber+1}${O}`}),s=`url(#pattern${t.globals.cuid}${e.seriesNumber+1}${O})`}else d==="gradient"?s=a:d==="pattern"?s=n:s=g;return e.solid&&(s=g),s}getFillType(e){const t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}getFillColors(){const e=this.w,t=e.config,i=this.opts;let s=[];return e.globals.comboCharts?e.config.series[this.seriesIndex].type==="line"?Array.isArray(e.globals.stroke.colors)?s=e.globals.stroke.colors:s.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?s=e.globals.fill.colors:s.push(e.globals.fill.colors):t.chart.type==="line"?Array.isArray(e.globals.stroke.colors)?s=e.globals.stroke.colors:s.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?s=e.globals.fill.colors:s.push(e.globals.fill.colors),typeof i.fillColors<"u"&&(s=[],Array.isArray(i.fillColors)?s=i.fillColors.slice():s.push(i.fillColors)),s}handlePatternFill({fillConfig:e,patternFill:t,fillColor:i,fillOpacity:s,defaultColor:n}){let a=this.w.config.fill;e&&(a=e);const l=this.opts;let c=new Y(this.ctx),d=Array.isArray(a.pattern.strokeWidth)?a.pattern.strokeWidth[this.seriesIndex]:a.pattern.strokeWidth,p=i;return Array.isArray(a.pattern.style)?typeof a.pattern.style[l.seriesNumber]<"u"?t=c.drawPattern(a.pattern.style[l.seriesNumber],a.pattern.width,a.pattern.height,p,d,s):t=n:t=c.drawPattern(a.pattern.style,a.pattern.width,a.pattern.height,p,d,s),t}handleGradientFill({fillColor:e,fillOpacity:t,fillConfig:i,i:s}){let n=this.w.config.fill;i&&(n={...n,...i});const a=this.opts;let l=new Y(this.ctx),c=new R,d=n.gradient.type,p=e,g,b=n.gradient.opacityFrom===void 0?t:Array.isArray(n.gradient.opacityFrom)?n.gradient.opacityFrom[s]:n.gradient.opacityFrom;p.indexOf("rgba")>-1&&(b=R.getOpacityFromRGBA(p));let O=n.gradient.opacityTo===void 0?t:Array.isArray(n.gradient.opacityTo)?n.gradient.opacityTo[s]:n.gradient.opacityTo;if(n.gradient.gradientToColors===void 0||n.gradient.gradientToColors.length===0)n.gradient.shade==="dark"?g=c.shadeColor(parseFloat(n.gradient.shadeIntensity)*-1,e.indexOf("rgb")>-1?R.rgb2hex(e):e):g=c.shadeColor(parseFloat(n.gradient.shadeIntensity),e.indexOf("rgb")>-1?R.rgb2hex(e):e);else if(n.gradient.gradientToColors[a.seriesNumber]){const r=n.gradient.gradientToColors[a.seriesNumber];g=r,r.indexOf("rgba")>-1&&(O=R.getOpacityFromRGBA(r))}else g=e;if(n.gradient.gradientFrom&&(p=n.gradient.gradientFrom),n.gradient.gradientTo&&(g=n.gradient.gradientTo),n.gradient.inverseColors){let r=p;p=g,g=r}return p.indexOf("rgb")>-1&&(p=R.rgb2hex(p)),g.indexOf("rgb")>-1&&(g=R.rgb2hex(g)),l.drawGradient(d,p,g,b,O,a.size,n.gradient.stops,n.gradient.colorStops,s)}}class wr{constructor(e,t){this.ctx=e,this.w=e.w}setGlobalMarkerSize(){const e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(let t=0;t<=e.globals.series.length;t++)typeof e.globals.markers.size[t]>"u"&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map(t=>e.config.markers.size)}plotChartMarkers(e,t,i,s,n=!1){let a=this.w,l=t,c=e,d=null,p=new Y(this.ctx),g;const b=a.config.markers.discrete&&a.config.markers.discrete.length;if((a.globals.markers.size[t]>0||n||b)&&(d=p.group({class:n||b?"":"apexcharts-series-markers"}),d.attr("clip-path",`url(#gridRectMarkerMask${a.globals.cuid})`)),Array.isArray(c.x))for(let O=0;O<c.x.length;O++){let r=i;i===1&&O===0&&(r=0),i===1&&O===1&&(r=1);let h="apexcharts-marker";if((a.config.chart.type==="line"||a.config.chart.type==="area")&&!a.globals.comboCharts&&!a.config.tooltip.intersect&&(h+=" no-pointer-events"),(Array.isArray(a.config.markers.size)?a.globals.markers.size[t]>0:a.config.markers.size>0)||n||b){R.isNumber(c.y[O])?h+=` w${R.randomId()}`:h="apexcharts-nullpoint";let m=this.getMarkerConfig({cssClass:h,seriesIndex:t,dataPointIndex:r});a.config.series[l].data[r]&&(a.config.series[l].data[r].fillColor&&(m.pointFillColor=a.config.series[l].data[r].fillColor),a.config.series[l].data[r].strokeColor&&(m.pointStrokeColor=a.config.series[l].data[r].strokeColor)),s&&(m.pSize=s),(c.x[O]<0||c.x[O]>a.globals.gridWidth||c.y[O]<-a.globals.markers.largestSize||c.y[O]>a.globals.gridHeight+a.globals.markers.largestSize)&&(m.pSize=0),g=p.drawMarker(c.x[O],c.y[O],m),g.attr("rel",r),g.attr("j",r),g.attr("index",t),g.node.setAttribute("default-marker-size",m.pSize),new pt(this.ctx).setSelectionFilter(g,t,r),this.addEvents(g),d&&d.add(g)}else typeof a.globals.pointsArray[t]>"u"&&(a.globals.pointsArray[t]=[]),a.globals.pointsArray[t].push([c.x[O],c.y[O]])}return d}getMarkerConfig({cssClass:e,seriesIndex:t,dataPointIndex:i=null,finishRadius:s=null}){const n=this.w;let a=this.getMarkerStyle(t),l=n.globals.markers.size[t];const c=n.config.markers;return i!==null&&c.discrete.length&&c.discrete.map(d=>{d.seriesIndex===t&&d.dataPointIndex===i&&(a.pointStrokeColor=d.strokeColor,a.pointFillColor=d.fillColor,l=d.size,a.pointShape=d.shape)}),{pSize:s===null?l:s,pRadius:c.radius,width:Array.isArray(c.width)?c.width[t]:c.width,height:Array.isArray(c.height)?c.height[t]:c.height,pointStrokeWidth:Array.isArray(c.strokeWidth)?c.strokeWidth[t]:c.strokeWidth,pointStrokeColor:a.pointStrokeColor,pointFillColor:a.pointFillColor,shape:a.pointShape||(Array.isArray(c.shape)?c.shape[t]:c.shape),class:e,pointStrokeOpacity:Array.isArray(c.strokeOpacity)?c.strokeOpacity[t]:c.strokeOpacity,pointStrokeDashArray:Array.isArray(c.strokeDashArray)?c.strokeDashArray[t]:c.strokeDashArray,pointFillOpacity:Array.isArray(c.fillOpacity)?c.fillOpacity[t]:c.fillOpacity,seriesIndex:t}}addEvents(e){const t=this.w,i=new Y(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,e),{passive:!0})}getMarkerStyle(e){let t=this.w,i=t.globals.markers.colors,s=t.config.markers.strokeColor||t.config.markers.strokeColors,n=Array.isArray(s)?s[e]:s,a=Array.isArray(i)?i[e]:i;return{pointStrokeColor:n,pointFillColor:a}}}class Og{constructor(e){this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}draw(e,t,i){let s=this.w,n=new Y(this.ctx),a=i.realIndex,l=i.pointsPos,c=i.zRatio,d=i.elParent,p=n.group({class:`apexcharts-series-markers apexcharts-series-${s.config.chart.type}`});if(p.attr("clip-path",`url(#gridRectMarkerMask${s.globals.cuid})`),Array.isArray(l.x))for(let g=0;g<l.x.length;g++){let b=t+1,O=!0;t===0&&g===0&&(b=0),t===0&&g===1&&(b=1);let r=0,h=s.globals.markers.size[a];if(c!==1/0){const y=s.config.plotOptions.bubble;h=s.globals.seriesZ[a][b],y.zScaling&&(h/=c),y.minBubbleRadius&&h<y.minBubbleRadius&&(h=y.minBubbleRadius),y.maxBubbleRadius&&h>y.maxBubbleRadius&&(h=y.maxBubbleRadius)}s.config.chart.animations.enabled||(r=h);let u=l.x[g],m=l.y[g];if(r=r||0,(m===null||typeof s.globals.series[a][b]>"u")&&(O=!1),O){const y=this.drawPoint(u,m,r,h,a,b,t);p.add(y)}d.add(p)}}drawPoint(e,t,i,s,n,a,l){const c=this.w;let d=n,p=new dn(this.ctx),g=new pt(this.ctx),b=new ii(this.ctx),O=new wr(this.ctx);const r=new Y(this.ctx),h=O.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:d,dataPointIndex:a,finishRadius:c.config.chart.type==="bubble"||c.globals.comboCharts&&c.config.series[n]&&c.config.series[n].type==="bubble"?s:null});s=h.pSize;let u=b.fillPath({seriesNumber:n,dataPointIndex:a,color:h.pointFillColor,patternUnits:"objectBoundingBox",value:c.globals.series[n][l]}),m;if(h.shape==="circle"?m=r.drawCircle(i):(h.shape==="square"||h.shape==="rect")&&(m=r.drawRect(0,0,h.width-h.pointStrokeWidth/2,h.height-h.pointStrokeWidth/2,h.pRadius)),c.config.series[d].data[a]&&c.config.series[d].data[a].fillColor&&(u=c.config.series[d].data[a].fillColor),m.attr({x:e-h.width/2-h.pointStrokeWidth/2,y:t-h.height/2-h.pointStrokeWidth/2,cx:e,cy:t,fill:u,"fill-opacity":h.pointFillOpacity,stroke:h.pointStrokeColor,r:s,"stroke-width":h.pointStrokeWidth,"stroke-dasharray":h.pointStrokeDashArray,"stroke-opacity":h.pointStrokeOpacity}),c.config.chart.dropShadow.enabled){const y=c.config.chart.dropShadow;g.dropShadow(m,y,n)}if(this.initialAnim&&!c.globals.dataChanged&&!c.globals.resized){let y=c.config.chart.animations.speed;p.animateMarker(m,0,h.shape==="circle"?s:{width:h.width,height:h.height},y,c.globals.easing,()=>{window.setTimeout(()=>{p.animationCompleted(m)},100)})}else c.globals.animationEnded=!0;if(c.globals.dataChanged&&h.shape==="circle")if(this.dynamicAnim){let y=c.config.chart.animations.dynamicAnimation.speed,v,w,S,C=null;C=c.globals.previousPaths[n]&&c.globals.previousPaths[n][l],typeof C<"u"&&C!==null&&(v=C.x,w=C.y,S=typeof C.r<"u"?C.r:s);for(let T=0;T<c.globals.collapsedSeries.length;T++)c.globals.collapsedSeries[T].index===n&&(y=1,s=0);e===0&&t===0&&(s=0),p.animateCircle(m,{cx:v,cy:w,r:S},{cx:e,cy:t,r:s},y,c.globals.easing)}else m.attr({r:s});return m.attr({rel:a,j:a,index:n,"default-marker-size":s}),g.setSelectionFilter(m,n,a),O.addEvents(m),m.node.classList.add("apexcharts-marker"),m}centerTextInBubble(e){let t=this.w;return e=e+parseInt(t.config.dataLabels.style.fontSize,10)/4,{y:e}}}class un{constructor(e){this.ctx=e,this.w=e.w}dataLabelsCorrection(e,t,i,s,n,a,l){let c=this.w,d=new Y(this.ctx),p=!1,g=d.getTextRects(i,l),b=g.width,O=g.height;t<0&&(t=0),t>c.globals.gridHeight+O&&(t=c.globals.gridHeight+O/2),typeof c.globals.dataLabelsRects[s]>"u"&&(c.globals.dataLabelsRects[s]=[]),c.globals.dataLabelsRects[s].push({x:e,y:t,width:b,height:O});let r=c.globals.dataLabelsRects[s].length-2,h=typeof c.globals.lastDrawnDataLabelsIndexes[s]<"u"?c.globals.lastDrawnDataLabelsIndexes[s][c.globals.lastDrawnDataLabelsIndexes[s].length-1]:0;if(typeof c.globals.dataLabelsRects[s][r]<"u"){let u=c.globals.dataLabelsRects[s][h];(e>u.x+u.width||t>u.y+u.height||t+O<u.y||e+b<u.x)&&(p=!0)}return(n===0||a)&&(p=!0),{x:e,y:t,textRects:g,drawnextLabel:p}}drawDataLabel({type:e,pos:t,i,j:s,isRangeStart:n,strokeWidth:a=2}){let l=this.w;const c=new Y(this.ctx);let d=l.config.dataLabels,p=0,g=0,b=s,O=null;if(l.globals.collapsedSeriesIndices.indexOf(i)!==-1||!d.enabled||!Array.isArray(t.x))return O;O=c.group({class:"apexcharts-data-labels"});for(let h=0;h<t.x.length;h++)if(p=t.x[h]+d.offsetX,g=t.y[h]+d.offsetY+a,!isNaN(p)){s===1&&h===0&&(b=0),s===1&&h===1&&(b=1);let u=l.globals.series[i][b];e==="rangeArea"&&(n?u=l.globals.seriesRangeStart[i][b]:u=l.globals.seriesRangeEnd[i][b]);let m="";const y=v=>l.config.dataLabels.formatter(v,{ctx:this.ctx,seriesIndex:i,dataPointIndex:b,w:l});l.config.chart.type==="bubble"?(u=l.globals.seriesZ[i][b],m=y(u),g=t.y[h],g=new Og(this.ctx).centerTextInBubble(g,i,b).y):typeof u<"u"&&(m=y(u)),this.plotDataLabelsText({x:p,y:g,text:m,i,j:b,parent:O,offsetCorrection:!0,dataLabelsConfig:l.config.dataLabels})}return O}plotDataLabelsText(e){let t=this.w,i=new Y(this.ctx),{x:s,y:n,i:a,j:l,text:c,textAnchor:d,fontSize:p,parent:g,dataLabelsConfig:b,color:O,alwaysDrawDataLabel:r,offsetCorrection:h}=e;if(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(a)<0)return;let u={x:s,y:n,drawnextLabel:!0,textRects:null};h&&(u=this.dataLabelsCorrection(s,n,c,a,l,r,parseInt(b.style.fontSize,10))),t.globals.zoomed||(s=u.x,n=u.y),u.textRects&&(s<-20-u.textRects.width||s>t.globals.gridWidth+u.textRects.width+30)&&(c="");let m=t.globals.dataLabels.style.colors[a];((t.config.chart.type==="bar"||t.config.chart.type==="rangeBar")&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(m=t.globals.dataLabels.style.colors[l]),typeof m=="function"&&(m=m({series:t.globals.series,seriesIndex:a,dataPointIndex:l,w:t})),O&&(m=O);let y=b.offsetX,v=b.offsetY;if((t.config.chart.type==="bar"||t.config.chart.type==="rangeBar")&&(y=0,v=0),u.drawnextLabel){let w=i.drawText({width:100,height:parseInt(b.style.fontSize,10),x:s+y,y:n+v,foreColor:m,textAnchor:d||b.textAnchor,text:c,fontSize:p||b.style.fontSize,fontFamily:b.style.fontFamily,fontWeight:b.style.fontWeight||"normal"});if(w.attr({class:"apexcharts-datalabel",cx:s,cy:n}),b.dropShadow.enabled){const S=b.dropShadow;new pt(this.ctx).dropShadow(w,S)}g.add(w),typeof t.globals.lastDrawnDataLabelsIndexes[a]>"u"&&(t.globals.lastDrawnDataLabelsIndexes[a]=[]),t.globals.lastDrawnDataLabelsIndexes[a].push(l)}}addBackgroundToDataLabel(e,t){const i=this.w,s=i.config.dataLabels.background,n=s.padding,a=s.padding/2,l=t.width,c=t.height,p=new Y(this.ctx).drawRect(t.x-n,t.y-a/2,l+n*2,c+a,s.borderRadius,i.config.chart.background==="transparent"?"#fff":i.config.chart.background,s.opacity,s.borderWidth,s.borderColor);return s.dropShadow.enabled&&new pt(this.ctx).dropShadow(p,s.dropShadow),p}dataLabelsBackground(){const e=this.w;if(e.config.chart.type==="bubble")return;const t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text");for(let i=0;i<t.length;i++){const s=t[i],n=s.getBBox();let a=null;if(n.width&&n.height&&(a=this.addBackgroundToDataLabel(s,n)),a){s.parentNode.insertBefore(a.node,s);const l=s.getAttribute("fill");e.config.chart.animations.enabled&&!e.globals.resized&&!e.globals.dataChanged?a.animate().attr({fill:l}):a.attr({fill:l}),s.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}bringForward(){const e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child");for(let s=0;s<t.length;s++)i&&i.insertBefore(t[s],i.nextSibling)}}class zt{constructor(e){this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}getAllSeriesEls(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}getSeriesByName(e){return this.w.globals.dom.baseEl.querySelector(`.apexcharts-inner .apexcharts-series[seriesName='${R.escapeString(e)}']`)}isSeriesHidden(e){const t=this.getSeriesByName(e);let i=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:i}}addCollapsedClassToSeries(e,t){const i=this.w;function s(n){for(let a=0;a<n.length;a++)n[a].index===t&&e.node.classList.add("apexcharts-series-collapsed")}s(i.globals.collapsedSeries),s(i.globals.ancillaryCollapsedSeries)}toggleSeries(e){let t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}showSeries(e){let t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}hideSeries(e){let t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}resetSeries(e=!0,t=!0,i=!0){const s=this.w;let n=R.clone(s.globals.initialSeries);s.globals.previousPaths=[],i?(s.globals.collapsedSeries=[],s.globals.ancillaryCollapsedSeries=[],s.globals.collapsedSeriesIndices=[],s.globals.ancillaryCollapsedSeriesIndices=[]):n=this.emptyCollapsedSeries(n),s.config.series=n,e&&(t&&(s.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(n,s.config.chart.animations.dynamicAnimation.enabled))}emptyCollapsedSeries(e){const t=this.w;for(let i=0;i<e.length;i++)t.globals.collapsedSeriesIndices.indexOf(i)>-1&&(e[i].data=[]);return e}toggleSeriesOnHover(e,t){const i=this.w;t||(t=e.target);let s=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if(e.type==="mousemove"){let n=parseInt(t.getAttribute("rel"),10)-1,a=null,l=null;i.globals.axisCharts||i.config.chart.type==="radialBar"?i.globals.axisCharts?(a=i.globals.dom.baseEl.querySelector(`.apexcharts-series[data\\:realIndex='${n}']`),l=i.globals.dom.baseEl.querySelector(`.apexcharts-datalabels[data\\:realIndex='${n}']`)):a=i.globals.dom.baseEl.querySelector(`.apexcharts-series[rel='${n+1}']`):a=i.globals.dom.baseEl.querySelector(`.apexcharts-series[rel='${n+1}'] path`);for(let c=0;c<s.length;c++)s[c].classList.add(this.legendInactiveClass);a!==null&&(i.globals.axisCharts||a.parentNode.classList.remove(this.legendInactiveClass),a.classList.remove(this.legendInactiveClass),l!==null&&l.classList.remove(this.legendInactiveClass))}else if(e.type==="mouseout")for(let n=0;n<s.length;n++)s[n].classList.remove(this.legendInactiveClass)}highlightRangeInSeries(e,t){const i=this.w,s=i.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),n=l=>{for(let c=0;c<s.length;c++)s[c].classList[l](this.legendInactiveClass)},a=l=>{for(let c=0;c<s.length;c++){const d=parseInt(s[c].getAttribute("val"),10);d>=l.from&&d<=l.to&&s[c].classList.remove(this.legendInactiveClass)}};if(e.type==="mousemove"){let l=parseInt(t.getAttribute("rel"),10)-1;n("add");const c=i.config.plotOptions.heatmap.colorScale.ranges[l];a(c)}else e.type==="mouseout"&&n("remove")}getActiveConfigSeriesIndex(e="asc",t=[]){const i=this.w;let s=0;if(i.config.series.length>1){let n=i.config.series.map((a,l)=>{const c=()=>i.globals.comboCharts?t.length===0||t.length&&t.indexOf(i.config.series[l].type)>-1:!0;return a.data&&a.data.length>0&&i.globals.collapsedSeriesIndices.indexOf(l)===-1&&c()?l:-1});for(let a=e==="asc"?0:n.length-1;e==="asc"?a<n.length:a>=0;e==="asc"?a++:a--)if(n[a]!==-1){s=n[a];break}}return s}getBarSeriesIndices(){return this.w.globals.comboCharts?this.w.config.series.map((t,i)=>t.type==="bar"||t.type==="column"?i:-1).filter(t=>t!==-1):this.w.config.series.map((t,i)=>i)}getPreviousPaths(){let e=this.w;e.globals.previousPaths=[];function t(a,l,c){let d=a[l].childNodes,p={type:c,paths:[],realIndex:a[l].getAttribute("data:realIndex")};for(let g=0;g<d.length;g++)if(d[g].hasAttribute("pathTo")){let b=d[g].getAttribute("pathTo");p.paths.push({d:b})}e.globals.previousPaths.push(p)}const i=a=>e.globals.dom.baseEl.querySelectorAll(`.apexcharts-${a}-series .apexcharts-series`);["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(a=>{const l=i(a);for(let c=0;c<l.length;c++)t(l,c,a)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");let n=e.globals.dom.baseEl.querySelectorAll(`.apexcharts-${e.config.chart.type} .apexcharts-series`);if(n.length>0)for(let a=0;a<n.length;a++){let l=e.globals.dom.baseEl.querySelectorAll(`.apexcharts-${e.config.chart.type} .apexcharts-series[data\\:realIndex='${a}'] rect`),c=[];for(let d=0;d<l.length;d++){const p=b=>l[d].getAttribute(b),g={x:parseFloat(p("x")),y:parseFloat(p("y")),width:parseFloat(p("width")),height:parseFloat(p("height"))};c.push({rect:g,color:l[d].getAttribute("color")})}e.globals.previousPaths.push(c)}e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}handlePrevBubbleScatterPaths(e){const t=this.w;let i=t.globals.dom.baseEl.querySelectorAll(`.apexcharts-${e}-series .apexcharts-series`);if(i.length>0)for(let s=0;s<i.length;s++){let n=t.globals.dom.baseEl.querySelectorAll(`.apexcharts-${e}-series .apexcharts-series[data\\:realIndex='${s}'] circle`),a=[];for(let l=0;l<n.length;l++)a.push({x:n[l].getAttribute("cx"),y:n[l].getAttribute("cy"),r:n[l].getAttribute("r")});t.globals.previousPaths.push(a)}}clearPreviousPaths(){const e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}handleNoData(){const e=this.w,t=this,i=e.config.noData,s=new Y(t.ctx);let n=e.globals.svgWidth/2,a=e.globals.svgHeight/2,l="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,i.align==="left"?(n=10,l="start"):i.align==="right"&&(n=e.globals.svgWidth-10,l="end"),i.verticalAlign==="top"?a=50:i.verticalAlign==="bottom"&&(a=e.globals.svgHeight-50),n=n+i.offsetX,a=a+parseInt(i.style.fontSize,10)+2+i.offsetY,i.text!==void 0&&i.text!==""){let c=s.drawText({x:n,y:a,text:i.text,textAnchor:l,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,foreColor:i.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(c)}}setNullSeriesToZeroValues(e){let t=this.w;for(let i=0;i<e.length;i++)if(e[i].length===0)for(let s=0;s<e[t.globals.maxValsInArrayIndex].length;s++)e[i].push(0);return e}hasAllSeriesEqualX(){let e=!0;const t=this.w,i=this.filteredSeriesX();for(let s=0;s<i.length-1;s++)if(i[s][0]!==i[s+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}filteredSeriesX(){return this.w.globals.seriesX.map(i=>i.length>0?i:[])}}class xg{constructor(e){this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new Je(this.ctx)}isMultiFormat(){return this.isFormatXY()||this.isFormat2DArray()}isFormatXY(){const e=this.w.config.series.slice(),t=new zt(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),typeof e[this.activeSeriesIndex].data<"u"&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==null&&typeof e[this.activeSeriesIndex].data[0].x<"u"&&e[this.activeSeriesIndex].data[0]!==null)return!0}isFormat2DArray(){const e=this.w.config.series.slice(),t=new zt(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),typeof e[this.activeSeriesIndex].data<"u"&&e[this.activeSeriesIndex].data.length>0&&typeof e[this.activeSeriesIndex].data[0]<"u"&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}handleFormat2DArray(e,t){const i=this.w.config,s=this.w.globals,n=i.chart.type==="boxPlot"||i.series[t].type==="boxPlot";for(let a=0;a<e[t].data.length;a++)if(typeof e[t].data[a][1]<"u"&&(Array.isArray(e[t].data[a][1])&&e[t].data[a][1].length===4&&!n?this.twoDSeries.push(R.parseNumber(e[t].data[a][1][3])):e[t].data[a].length>=5?this.twoDSeries.push(R.parseNumber(e[t].data[a][4])):this.twoDSeries.push(R.parseNumber(e[t].data[a][1])),s.dataFormatXNumeric=!0),i.xaxis.type==="datetime"){let l=new Date(e[t].data[a][0]);l=new Date(l).getTime(),this.twoDSeriesX.push(l)}else this.twoDSeriesX.push(e[t].data[a][0]);for(let a=0;a<e[t].data.length;a++)typeof e[t].data[a][2]<"u"&&(this.threeDSeries.push(e[t].data[a][2]),s.isDataXYZ=!0)}handleFormatXY(e,t){const i=this.w.config,s=this.w.globals,n=new at(this.ctx);let a=t;s.collapsedSeriesIndices.indexOf(t)>-1&&(a=this.activeSeriesIndex);for(let l=0;l<e[t].data.length;l++)typeof e[t].data[l].y<"u"&&(Array.isArray(e[t].data[l].y)?this.twoDSeries.push(R.parseNumber(e[t].data[l].y[e[t].data[l].y.length-1])):this.twoDSeries.push(R.parseNumber(e[t].data[l].y))),typeof e[t].data[l].goals<"u"&&Array.isArray(e[t].data[l].goals)?(typeof this.seriesGoals[t]>"u"&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[l].goals)):(typeof this.seriesGoals[t]>"u"&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(let l=0;l<e[a].data.length;l++){const c=typeof e[a].data[l].x=="string",d=Array.isArray(e[a].data[l].x),p=!d&&!!n.isValidDate(e[a].data[l].x);if(c||p)if(c||i.xaxis.convertedCatToNumeric){const g=s.isBarHorizontal&&s.isRangeData;i.xaxis.type==="datetime"&&!g?this.twoDSeriesX.push(n.parseDate(e[a].data[l].x)):(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[a].data[l].x),!isNaN(e[a].data[l].x)&&this.w.config.xaxis.type!=="category"&&typeof e[a].data[l].x!="string"&&(s.isXNumeric=!0))}else i.xaxis.type==="datetime"?this.twoDSeriesX.push(n.parseDate(e[a].data[l].x.toString())):(s.dataFormatXNumeric=!0,s.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[a].data[l].x)));else d?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[a].data[l].x)):(s.isXNumeric=!0,s.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[a].data[l].x))}if(e[t].data[0]&&typeof e[t].data[0].z<"u"){for(let l=0;l<e[t].data.length;l++)this.threeDSeries.push(e[t].data[l].z);s.isDataXYZ=!0}}handleRangeData(e,t){const i=this.w.globals;let s={};return this.isFormat2DArray()?s=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(s=this.handleRangeDataFormat("xy",e,t)),i.seriesRangeStart.push(s.start===void 0?[]:s.start),i.seriesRangeEnd.push(s.end===void 0?[]:s.end),i.seriesRange.push(s.rangeUniques),i.seriesRange.forEach((n,a)=>{n&&n.forEach((l,c)=>{l.y.forEach((d,p)=>{for(let g=0;g<l.y.length;g++)if(p!==g){const b=d.y1,O=d.y2,r=l.y[g].y1,h=l.y[g].y2;b<=h&&r<=O&&(l.overlaps.indexOf(d.rangeName)<0&&l.overlaps.push(d.rangeName),l.overlaps.indexOf(l.y[g].rangeName)<0&&l.overlaps.push(l.y[g].rangeName))}})})}),s}handleCandleStickBoxData(e,t){const i=this.w.globals;let s={};return this.isFormat2DArray()?s=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(s=this.handleCandleStickBoxDataFormat("xy",e,t)),i.seriesCandleO[t]=s.o,i.seriesCandleH[t]=s.h,i.seriesCandleM[t]=s.m,i.seriesCandleL[t]=s.l,i.seriesCandleC[t]=s.c,s}handleRangeDataFormat(e,t,i){const s=[],n=[],a=t[i].data.filter((l,c,d)=>c===d.findIndex(p=>p.x===l.x)).map((l,c)=>({x:l.x,overlaps:[],y:[]}));if(e==="array")for(let l=0;l<t[i].data.length;l++)Array.isArray(t[i].data[l])?(s.push(t[i].data[l][1][0]),n.push(t[i].data[l][1][1])):(s.push(t[i].data[l]),n.push(t[i].data[l]));else if(e==="xy")for(let l=0;l<t[i].data.length;l++){let c=Array.isArray(t[i].data[l].y);const d=R.randomId(),p=t[i].data[l].x,g={y1:c?t[i].data[l].y[0]:t[i].data[l].y,y2:c?t[i].data[l].y[1]:t[i].data[l].y,rangeName:d};t[i].data[l].rangeName=d;const b=a.findIndex(O=>O.x===p);a[b].y.push(g),s.push(g.y1),n.push(g.y2)}return{start:s,end:n,rangeUniques:a}}handleCandleStickBoxDataFormat(e,t,i){const s=this.w,n=s.config.chart.type==="boxPlot"||s.config.series[i].type==="boxPlot",a=[],l=[],c=[],d=[],p=[];if(e==="array")if(n&&t[i].data[0].length===6||!n&&t[i].data[0].length===5)for(let g=0;g<t[i].data.length;g++)a.push(t[i].data[g][1]),l.push(t[i].data[g][2]),n?(c.push(t[i].data[g][3]),d.push(t[i].data[g][4]),p.push(t[i].data[g][5])):(d.push(t[i].data[g][3]),p.push(t[i].data[g][4]));else for(let g=0;g<t[i].data.length;g++)Array.isArray(t[i].data[g][1])&&(a.push(t[i].data[g][1][0]),l.push(t[i].data[g][1][1]),n?(c.push(t[i].data[g][1][2]),d.push(t[i].data[g][1][3]),p.push(t[i].data[g][1][4])):(d.push(t[i].data[g][1][2]),p.push(t[i].data[g][1][3])));else if(e==="xy")for(let g=0;g<t[i].data.length;g++)Array.isArray(t[i].data[g].y)&&(a.push(t[i].data[g].y[0]),l.push(t[i].data[g].y[1]),n?(c.push(t[i].data[g].y[2]),d.push(t[i].data[g].y[3]),p.push(t[i].data[g].y[4])):(d.push(t[i].data[g].y[2]),p.push(t[i].data[g].y[3])));return{o:a,h:l,m:c,l:d,c:p}}parseDataAxisCharts(e,t=this.ctx){var c;const i=this.w.config,s=this.w.globals,n=new at(t),a=i.labels.length>0?i.labels.slice():i.xaxis.categories.slice();if(s.isRangeBar=i.chart.type==="rangeBar"&&s.isBarHorizontal,s.hasXaxisGroups=i.xaxis.type==="category"&&i.xaxis.group.groups.length>0,s.hasXaxisGroups&&(s.groups=i.xaxis.group.groups),s.hasSeriesGroups=(c=e[0])==null?void 0:c.group,s.hasSeriesGroups){let d=[],p=[...new Set(e.map(g=>g.group))];e.forEach((g,b)=>{let O=p.indexOf(g.group);d[O]||(d[O]=[]),d[O].push(g.name)}),s.seriesGroups=d}const l=()=>{for(let d=0;d<a.length;d++)if(typeof a[d]=="string")if(n.isValidDate(a[d]))this.twoDSeriesX.push(n.parseDate(a[d]));else throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");else this.twoDSeriesX.push(a[d])};for(let d=0;d<e.length;d++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],typeof e[d].data>"u"){console.error("It is a possibility that you may have not included 'data' property in series.");return}if((i.chart.type==="rangeBar"||i.chart.type==="rangeArea"||e[d].type==="rangeBar"||e[d].type==="rangeArea")&&(s.isRangeData=!0,(i.chart.type==="rangeBar"||i.chart.type==="rangeArea")&&this.handleRangeData(e,d)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,d):this.isFormatXY()&&this.handleFormatXY(e,d),(i.chart.type==="candlestick"||e[d].type==="candlestick"||i.chart.type==="boxPlot"||e[d].type==="boxPlot")&&this.handleCandleStickBoxData(e,d),s.series.push(this.twoDSeries),s.labels.push(this.twoDSeriesX),s.seriesX.push(this.twoDSeriesX),s.seriesGoals=this.seriesGoals,d===this.activeSeriesIndex&&!this.fallbackToCategory&&(s.isXNumeric=!0);else{i.xaxis.type==="datetime"?(s.isXNumeric=!0,l(),s.seriesX.push(this.twoDSeriesX)):i.xaxis.type==="numeric"&&(s.isXNumeric=!0,a.length>0&&(this.twoDSeriesX=a,s.seriesX.push(this.twoDSeriesX))),s.labels.push(this.twoDSeriesX);const p=e[d].data.map(g=>R.parseNumber(g));s.series.push(p)}s.seriesZ.push(this.threeDSeries),e[d].name!==void 0?s.seriesNames.push(e[d].name):s.seriesNames.push("series-"+parseInt(d+1,10)),e[d].color!==void 0?s.seriesColors.push(e[d].color):s.seriesColors.push(void 0)}return this.w}parseDataNonAxisCharts(e){const t=this.w.globals,i=this.w.config;t.series=e.slice(),t.seriesNames=i.labels.slice();for(let s=0;s<t.series.length;s++)t.seriesNames[s]===void 0&&t.seriesNames.push("series-"+(s+1));return this.w}handleExternalLabelsData(e){const t=this.w.config,i=this.w.globals;t.xaxis.categories.length>0?i.labels=t.xaxis.categories:t.labels.length>0?i.labels=t.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRange.length&&(i.seriesRange.map(s=>{s.forEach(n=>{i.labels.indexOf(n.x)<0&&n.x&&i.labels.push(n.x)})}),i.labels=Array.from(new Set(i.labels.map(JSON.stringify)),JSON.parse)),t.xaxis.convertedCatToNumeric&&(new xr(t).convertCatToNumericXaxis(t,this.ctx,i.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}_generateExternalLabels(e){const t=this.w.globals,i=this.w.config;let s=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY()){const n=i.series.map((l,c)=>l.data.filter((d,p,g)=>g.findIndex(b=>b.x===d.x)===p)),a=n.reduce((l,c,d,p)=>p[l].length>c.length?l:d,0);for(let l=0;l<n[a].length;l++)s.push(l+1)}else for(let n=0;n<t.series[t.maxValsInArrayIndex].length;n++)s.push(n+1);t.seriesX=[];for(let n=0;n<e.length;n++)t.seriesX.push(s);this.w.globals.isBarHorizontal||(t.isXNumeric=!0)}if(s.length===0){s=t.axisCharts?[]:t.series.map((n,a)=>a+1);for(let n=0;n<e.length;n++)t.seriesX.push(s)}t.labels=s,i.xaxis.convertedCatToNumeric&&(t.categoryLabels=s.map(n=>i.xaxis.labels.formatter(n))),t.noLabelsProvided=!0}parseData(e){let t=this.w,i=t.config,s=t.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),s.axisCharts?(this.parseDataAxisCharts(e),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(e),i.chart.stacked){const a=new zt(this.ctx);s.series=a.setNullSeriesToZeroValues(s.series)}this.coreUtils.getSeriesTotals(),s.axisCharts&&(s.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),s.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),!s.dataFormatXNumeric&&(!s.isXNumeric||i.xaxis.type==="numeric"&&i.labels.length===0&&i.xaxis.categories.length===0)&&this.handleExternalLabelsData(e);const n=this.coreUtils.getCategoryLabels(s.labels);for(let a=0;a<n.length;a++)if(Array.isArray(n[a])){s.isMultiLineX=!0;break}}excludeCollapsedSeriesInYAxis(){const e=this.w;let t=[];e.globals.seriesYAxisMap.forEach((i,s)=>{let n=0;i.forEach(a=>{e.globals.collapsedSeriesIndices.indexOf(a)!==-1&&n++}),n>0&&n==i.length&&t.push(s)}),e.globals.ignoreYAxisIndexes=t.map(i=>i)}}class Yo{constructor(e){this.ctx=e,this.w=e.w}scaleSvgNode(e,t){let i=parseFloat(e.getAttributeNS(null,"width")),s=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",i*t),e.setAttributeNS(null,"height",s*t),e.setAttributeNS(null,"viewBox","0 0 "+i+" "+s)}fixSvgStringForIe11(e){if(!R.isIE11())return e.replace(/&nbsp;/g,"&#160;");let t=0,i=e.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,s=>(t++,t===2?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':s));return i=i.replace(/xmlns:NS\d+=""/g,""),i=i.replace(/NS\d+:(\w+:\w+=")/g,"$1"),i}getSvgString(e){e==null&&(e=1);let t=this.w.globals.dom.Paper.svg();if(e!==1){const i=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(i,e),t=new XMLSerializer().serializeToString(i)}return this.fixSvgStringForIe11(t)}cleanup(){const e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),i=e.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(s,n=>{n.setAttribute("width",0)}),t&&t[0]&&(t[0].setAttribute("x",-500),t[0].setAttribute("x1",-500),t[0].setAttribute("x2",-500)),i&&i[0]&&(i[0].setAttribute("y",-100),i[0].setAttribute("y1",-100),i[0].setAttribute("y2",-100))}svgUrl(){this.cleanup();const e=this.getSvgString(),t=new Blob([e],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(t)}dataURI(e){return new Promise(t=>{const i=this.w,s=e?e.scale||e.width/i.globals.svgWidth:1;this.cleanup();const n=document.createElement("canvas");n.width=i.globals.svgWidth*s,n.height=parseInt(i.globals.dom.elWrap.style.height,10)*s;const a=i.config.chart.background==="transparent"?"#fff":i.config.chart.background;let l=n.getContext("2d");l.fillStyle=a,l.fillRect(0,0,n.width*s,n.height*s);const c=this.getSvgString(s);if(window.canvg&&R.isIE11()){let d=window.canvg.Canvg.fromString(l,c,{ignoreClear:!0,ignoreDimensions:!0});d.start();let p=n.msToBlob();d.stop(),t({blob:p})}else{const d="data:image/svg+xml,"+encodeURIComponent(c);let p=new Image;p.crossOrigin="anonymous",p.onload=()=>{if(l.drawImage(p,0,0),n.msToBlob){let g=n.msToBlob();t({blob:g})}else{let g=n.toDataURL("image/png");t({imgURI:g})}},p.src=d}})}exportToSVG(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}exportToPng(){this.dataURI().then(({imgURI:e,blob:t})=>{t?navigator.msSaveOrOpenBlob(t,this.w.globals.chartID+".png"):this.triggerDownload(e,this.w.config.chart.toolbar.export.png.filename,".png")})}exportToCSV({series:e,fileName:t,columnDelimiter:i=",",lineDelimiter:s=`
`}){const n=this.w;e||(e=n.config.series);let a=[],l=[],c="",d="\uFEFF",p=n.globals.series.map((v,w)=>n.globals.collapsedSeriesIndices.indexOf(w)===-1?v:[]);const g=v=>n.config.xaxis.type==="datetime"&&String(v).length>=10,b=Math.max(...e.map(v=>v.data?v.data.length:0)),O=new xg(this.ctx),r=new Zi(this.ctx),h=v=>{let w="";if(!n.globals.axisCharts)w=n.config.labels[v];else{if(n.config.xaxis.type==="category"||n.config.xaxis.convertedCatToNumeric)if(n.globals.isBarHorizontal){let S=n.globals.yLabelFormatters[0],T=new zt(this.ctx).getActiveConfigSeriesIndex();w=S(n.globals.labels[v],{seriesIndex:T,dataPointIndex:v,w:n})}else w=r.getLabel(n.globals.labels,n.globals.timescaleLabels,0,v).text;n.config.xaxis.type==="datetime"&&(n.config.xaxis.categories.length?w=n.config.xaxis.categories[v]:n.config.labels.length&&(w=n.config.labels[v]))}return Array.isArray(w)&&(w=w.join(" ")),R.isNumber(w)?w:w.split(i).join("")},u=()=>[...Array(b)].map(()=>""),m=(v,w)=>{var S;if(a.length&&w===0&&l.push(a.join(i)),v.data){v.data=v.data.length&&v.data||u();for(let C=0;C<v.data.length;C++){a=[];let T=h(C);if(T||(O.isFormatXY()?T=e[w].data[C].x:O.isFormat2DArray()&&(T=e[w].data[C]?e[w].data[C][0]:"")),w===0){a.push(g(T)?n.config.chart.toolbar.export.csv.dateFormatter(T):R.isNumber(T)?T:T.split(i).join(""));for(let _=0;_<n.globals.series.length;_++)O.isFormatXY()?a.push((S=e[_].data[C])==null?void 0:S.y):a.push(p[_][C])}(n.config.chart.type==="candlestick"||v.type&&v.type==="candlestick")&&(a.pop(),a.push(n.globals.seriesCandleO[w][C]),a.push(n.globals.seriesCandleH[w][C]),a.push(n.globals.seriesCandleL[w][C]),a.push(n.globals.seriesCandleC[w][C])),(n.config.chart.type==="boxPlot"||v.type&&v.type==="boxPlot")&&(a.pop(),a.push(n.globals.seriesCandleO[w][C]),a.push(n.globals.seriesCandleH[w][C]),a.push(n.globals.seriesCandleM[w][C]),a.push(n.globals.seriesCandleL[w][C]),a.push(n.globals.seriesCandleC[w][C])),n.config.chart.type==="rangeBar"&&(a.pop(),a.push(n.globals.seriesRangeStart[w][C]),a.push(n.globals.seriesRangeEnd[w][C])),a.length&&l.push(a.join(i))}}},y=()=>{const v=new Set,w={};e.forEach((S,C)=>{S==null||S.data.forEach(T=>{let _,$;if(O.isFormatXY())_=T.x,$=T.y;else if(O.isFormat2DArray())_=T[0],$=T[1];else return;w[_]||(w[_]=Array(e.length).fill("")),w[_][C]=$,v.add(_)})}),a.length&&l.push(a.join(i)),Array.from(v).sort().forEach(S=>{l.push([g(S)&&n.config.xaxis.type==="datetime"?n.config.chart.toolbar.export.csv.dateFormatter(S):R.isNumber(S)?S:S.split(i).join(""),w[S].join(i)])})};a.push(n.config.chart.toolbar.export.csv.headerCategory),n.config.chart.type==="boxPlot"?(a.push("minimum"),a.push("q1"),a.push("median"),a.push("q3"),a.push("maximum")):n.config.chart.type==="candlestick"?(a.push("open"),a.push("high"),a.push("low"),a.push("close")):n.config.chart.type==="rangeBar"?(a.push("minimum"),a.push("maximum")):e.map((v,w)=>{const S=(v.name?v.name:`series-${w}`)+"";n.globals.axisCharts&&a.push(S.split(i).join("")?S.split(i).join(""):`series-${w}`)}),n.globals.axisCharts||(a.push(n.config.chart.toolbar.export.csv.headerValue),l.push(a.join(i))),!n.globals.allSeriesHasEqualX&&n.globals.axisCharts&&!n.config.xaxis.categories.length&&!n.config.labels.length?y():e.map((v,w)=>{n.globals.axisCharts?m(v,w):(a=[],a.push(n.globals.labels[w].split(i).join("")),a.push(p[w]),l.push(a.join(i)))}),c+=l.join(s),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent(d+c),t||n.config.chart.toolbar.export.csv.filename,".csv")}triggerDownload(e,t,i){const s=document.createElement("a");s.href=e,s.download=(t||this.w.globals.chartID)+i,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}class kr{constructor(e,t){this.ctx=e,this.elgrid=t,this.w=e.w;const i=this.w;this.axesUtils=new Zi(e),this.xaxisLabels=i.globals.labels.slice(),i.globals.timescaleLabels.length>0&&!i.globals.isBarHorizontal&&(this.xaxisLabels=i.globals.timescaleLabels.slice()),i.config.xaxis.overwriteCategories&&(this.xaxisLabels=i.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],i.config.xaxis.position==="top"?this.offY=0:this.offY=i.globals.gridHeight+1,this.offY=this.offY+i.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=i.config.chart.type==="bar"&&i.config.plotOptions.bar.horizontal,this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.xaxisBorderWidth=i.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=i.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=i.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=i.config.xaxis.axisBorder.height,this.yaxis=i.config.yaxis[0]}drawXaxis(){let e=this.w,t=new Y(this.ctx),i=t.group({class:"apexcharts-xaxis",transform:`translate(${e.config.xaxis.offsetX}, ${e.config.xaxis.offsetY})`}),s=t.group({class:"apexcharts-xaxis-texts-g",transform:`translate(${e.globals.translateXAxisX}, ${e.globals.translateXAxisY})`});i.add(s);let n=[];for(let a=0;a<this.xaxisLabels.length;a++)n.push(this.xaxisLabels[a]);if(this.drawXAxisLabelAndGroup(!0,t,s,n,e.globals.isXNumeric,(a,l)=>l),e.globals.hasXaxisGroups){let a=e.globals.groups;n=[];for(let c=0;c<a.length;c++)n.push(a[c].title);let l={};e.config.xaxis.group.style&&(l.xaxisFontSize=e.config.xaxis.group.style.fontSize,l.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,l.xaxisForeColors=e.config.xaxis.group.style.colors,l.fontWeight=e.config.xaxis.group.style.fontWeight,l.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,s,n,!1,(c,d)=>a[c].cols*d,l)}if(e.config.xaxis.title.text!==void 0){let a=t.group({class:"apexcharts-xaxis-title"}),l=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(e.config.xaxis.position==="bottom"?e.globals.xAxisLabelsHeight:-e.globals.xAxisLabelsHeight-10)+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});a.add(l),i.add(a)}if(e.config.xaxis.axisBorder.show){const a=e.globals.barPadForNumericAxis;let l=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-a,this.offY,this.xaxisBorderWidth+a,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&e.config.grid.show?this.elgrid.elGridBorders.add(l):i.add(l)}return i}drawXAxisLabelAndGroup(e,t,i,s,n,a,l={}){let c=[],d=[],p=this.w;const g=l.xaxisFontSize||this.xaxisFontSize,b=l.xaxisFontFamily||this.xaxisFontFamily,O=l.xaxisForeColors||this.xaxisForeColors,r=l.fontWeight||p.config.xaxis.labels.style.fontWeight,h=l.cssClass||p.config.xaxis.labels.style.cssClass;let u,m=p.globals.padHorizontal,y=s.length,v=p.config.xaxis.type==="category"?p.globals.dataPoints:y;if(v===0&&y>v&&(v=y),n){let w=v>1?v-1:v;u=p.globals.gridWidth/Math.min(w,y-1),m=m+a(0,u)/2+p.config.xaxis.labels.offsetX}else u=p.globals.gridWidth/v,m=m+a(0,u)+p.config.xaxis.labels.offsetX;for(let w=0;w<=y-1;w++){let S=m-a(w,u)/2+p.config.xaxis.labels.offsetX;w===0&&y===1&&u/2===m&&v===1&&(S=p.globals.gridWidth/2);let C=this.axesUtils.getLabel(s,p.globals.timescaleLabels,S,w,c,g,e),T=28;p.globals.rotateXLabels&&e&&(T=22),p.config.xaxis.title.text&&p.config.xaxis.position==="top"&&(T+=parseFloat(p.config.xaxis.title.style.fontSize)+2),e||(T=T+parseFloat(g)+(p.globals.xAxisLabelsHeight-p.globals.xAxisGroupLabelsHeight)+(p.globals.rotateXLabels?10:0)),typeof p.config.xaxis.tickAmount<"u"&&p.config.xaxis.tickAmount!=="dataPoints"&&p.config.xaxis.type!=="datetime"?C=this.axesUtils.checkLabelBasedOnTickamount(w,C,y):C=this.axesUtils.checkForOverflowingLabels(w,C,y,c,d);const $=()=>e&&p.config.xaxis.convertedCatToNumeric?O[p.globals.minX+w-1]:O[w];if(p.config.xaxis.labels.show){let N=t.drawText({x:C.x,y:this.offY+p.config.xaxis.labels.offsetY+T-(p.config.xaxis.position==="top"?p.globals.xAxisHeight+p.config.xaxis.axisTicks.height-2:0),text:C.text,textAnchor:"middle",fontWeight:C.isBold?600:r,fontSize:g,fontFamily:b,foreColor:Array.isArray(O)?$():O,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+h});if(i.add(N),N.on("click",P=>{if(typeof p.config.chart.events.xAxisLabelClick=="function"){const E=Object.assign({},p,{labelIndex:w});p.config.chart.events.xAxisLabelClick(P,this.ctx,E)}}),e){let P=document.createElementNS(p.globals.SVGNS,"title");P.textContent=Array.isArray(C.text)?C.text.join(" "):C.text,N.node.appendChild(P),C.text!==""&&(c.push(C.text),d.push(C))}}w<y-1&&(m=m+a(w+1,u))}}drawXaxisInversed(e){let t=this.w,i=new Y(this.ctx),s=t.config.yaxis[0].opposite?t.globals.translateYAxisX[e]:0,n=i.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),a=i.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+s+", 0)"});n.add(a);let l,c,d=[];if(t.config.yaxis[e].show)for(let r=0;r<this.xaxisLabels.length;r++)d.push(this.xaxisLabels[r]);l=t.globals.gridHeight/d.length,c=-(l/2.2);let p=t.globals.yLabelFormatters[0];const g=t.config.yaxis[0].labels;if(g.show)for(let r=0;r<=d.length-1;r++){let h=typeof d[r]>"u"?"":d[r];h=p(h,{seriesIndex:e,dataPointIndex:r,w:t});const u=this.axesUtils.getYAxisForeColor(g.style.colors,e),m=()=>Array.isArray(u)?u[r]:u;let y=0;Array.isArray(h)&&(y=h.length/2*parseInt(g.style.fontSize,10));let v=g.offsetX-15,w="end";this.yaxis.opposite&&(w="start"),t.config.yaxis[0].labels.align==="left"?(v=g.offsetX,w="start"):t.config.yaxis[0].labels.align==="center"?(v=g.offsetX,w="middle"):t.config.yaxis[0].labels.align==="right"&&(w="end");let S=i.drawText({x:v,y:c+l+g.offsetY-y,text:h,textAnchor:w,foreColor:m(),fontSize:g.style.fontSize,fontFamily:g.style.fontFamily,fontWeight:g.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+g.style.cssClass,maxWidth:g.maxWidth});a.add(S),S.on("click",T=>{if(typeof t.config.chart.events.xAxisLabelClick=="function"){const _=Object.assign({},t,{labelIndex:r});t.config.chart.events.xAxisLabelClick(T,this.ctx,_)}});let C=document.createElementNS(t.globals.SVGNS,"title");if(C.textContent=Array.isArray(h)?h.join(" "):h,S.node.appendChild(C),t.config.yaxis[e].labels.rotate!==0){let T=i.rotateAroundCenter(S.node);S.node.setAttribute("transform",`rotate(${t.config.yaxis[e].labels.rotate} 0 ${T.y})`)}c=c+l}if(t.config.yaxis[0].title.text!==void 0){let r=i.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+s+", 0)"}),h=i.drawText({x:t.config.yaxis[0].title.offsetX,y:t.globals.gridHeight/2+t.config.yaxis[0].title.offsetY,text:t.config.yaxis[0].title.text,textAnchor:"middle",foreColor:t.config.yaxis[0].title.style.color,fontSize:t.config.yaxis[0].title.style.fontSize,fontWeight:t.config.yaxis[0].title.style.fontWeight,fontFamily:t.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+t.config.yaxis[0].title.style.cssClass});r.add(h),n.add(r)}let b=0;this.isCategoryBarHorizontal&&t.config.yaxis[0].opposite&&(b=t.globals.gridWidth);const O=t.config.xaxis.axisBorder;if(O.show){let r=i.drawLine(t.globals.padHorizontal+O.offsetX+b,1+O.offsetY,t.globals.padHorizontal+O.offsetX+b,t.globals.gridHeight+O.offsetY,O.color,0);this.elgrid&&this.elgrid.elGridBorders&&t.config.grid.show?this.elgrid.elGridBorders.add(r):n.add(r)}return t.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(b,d.length,t.config.yaxis[0].axisBorder,t.config.yaxis[0].axisTicks,0,l,n),n}drawXaxisTicks(e,t,i){let s=this.w,n=e;if(e<0||e-2>s.globals.gridWidth)return;let a=this.offY+s.config.xaxis.axisTicks.offsetY;if(t=t+a+s.config.xaxis.axisTicks.height,s.config.xaxis.position==="top"&&(t=a-s.config.xaxis.axisTicks.height),s.config.xaxis.axisTicks.show){let c=new Y(this.ctx).drawLine(e+s.config.xaxis.axisTicks.offsetX,a+s.config.xaxis.offsetY,n+s.config.xaxis.axisTicks.offsetX,t+s.config.xaxis.offsetY,s.config.xaxis.axisTicks.color);i.add(c),c.node.classList.add("apexcharts-xaxis-tick")}}getXAxisTicksPositions(){const e=this.w;let t=[];const i=this.xaxisLabels.length;let s=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(let n=0;n<i;n++)s=this.xaxisLabels[n].position,t.push(s);else{let n=i;for(let a=0;a<n;a++){let l=n;e.globals.isXNumeric&&e.config.chart.type!=="bar"&&(l-=1),s=s+e.globals.gridWidth/l,t.push(s)}}return t}xAxisLabelCorrections(){let e=this.w,t=new Y(this.ctx),i=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(let l=0;l<s.length;l++){let c=t.rotateAroundCenter(s[l]);c.y=c.y-1,c.x=c.x+1,s[l].setAttribute("transform",`rotate(${e.config.xaxis.labels.rotate} ${c.x} ${c.y})`),s[l].setAttribute("text-anchor","end");let d=10;i.setAttribute("transform",`translate(0, ${-d})`);let p=s[l].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(p,g=>{t.placeTextWithEllipsis(g,g.textContent,e.globals.xAxisLabelsHeight-(e.config.legend.position==="bottom"?20:10))})}else{let l=e.globals.gridWidth/(e.globals.labels.length+1);for(let c=0;c<s.length;c++){let d=s[c].childNodes;e.config.xaxis.labels.trim&&e.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(d,p=>{t.placeTextWithEllipsis(p,p.textContent,l)})}}if(n.length>0){let l=n[n.length-1].getBBox(),c=n[0].getBBox();l.x<-20&&n[n.length-1].parentNode.removeChild(n[n.length-1]),c.x+c.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&n[0].parentNode.removeChild(n[0]);for(let d=0;d<a.length;d++)t.placeTextWithEllipsis(a[d],a[d].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?parseFloat(e.config.yaxis[0].title.style.fontSize)*2:0)-15)}}}class vg{constructor(e){this.ctx=e,this.w=e.w;const t=this.w;this.xaxisLabels=t.globals.labels.slice(),this.axesUtils=new Zi(e),this.isRangeBar=t.globals.seriesRange.length&&t.globals.isBarHorizontal,t.globals.timescaleLabels.length>0&&(this.xaxisLabels=t.globals.timescaleLabels.slice())}drawGridArea(e=null){let t=this.w,i=new Y(this.ctx);e===null&&(e=i.group({class:"apexcharts-grid"}));let s=i.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),n=i.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(n),e.add(s),e}drawGrid(){let e=this.w.globals,t=null;return e.axisCharts&&(t=this.renderGrid(),this.drawGridArea(t.el)),t}createGridMask(){let e=this.w,t=e.globals;const i=new Y(this.ctx);let s=Array.isArray(e.config.stroke.width)?0:e.config.stroke.width;if(Array.isArray(e.config.stroke.width)){let g=0;e.config.stroke.width.forEach(b=>{g=Math.max(g,b)}),s=g}t.dom.elGridRectMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMask.setAttribute("id",`gridRectMask${t.cuid}`),t.dom.elGridRectMarkerMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMarkerMask.setAttribute("id",`gridRectMarkerMask${t.cuid}`),t.dom.elForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elForecastMask.setAttribute("id",`forecastMask${t.cuid}`),t.dom.elNonForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elNonForecastMask.setAttribute("id",`nonForecastMask${t.cuid}`);const n=e.config.chart.type,a=n==="bar"||n==="rangeBar"||n==="candlestick"||n==="boxPlot"||e.globals.comboBarCount>0;let l=0,c=0;a&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(l=e.config.grid.padding.left,c=e.config.grid.padding.right,t.barPadForNumericAxis>l&&(l=t.barPadForNumericAxis,c=t.barPadForNumericAxis)),t.dom.elGridRect=i.drawRect(-s/2-l-2,-s/2-2,t.gridWidth+s+c+l+4,t.gridHeight+s+4,0,"#fff");let d=e.globals.markers.largestSize+1;t.dom.elGridRectMarker=i.drawRect(-d*2,-d*2,t.gridWidth+d*4,t.gridHeight+d*4,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);let p=t.dom.baseEl.querySelector("defs");p.appendChild(t.dom.elGridRectMask),p.appendChild(t.dom.elForecastMask),p.appendChild(t.dom.elNonForecastMask),p.appendChild(t.dom.elGridRectMarkerMask)}_drawGridLines({i:e,x1:t,y1:i,x2:s,y2:n,xCount:a,parent:l}){const c=this.w;if((()=>!(e===0&&c.globals.skipFirstTimelinelabel||e===a-1&&c.globals.skipLastTimelinelabel&&!c.config.xaxis.labels.formatter||c.config.chart.type==="radar"))()){c.config.grid.xaxis.lines.show&&this._drawGridLine({i:e,x1:t,y1:i,x2:s,y2:n,xCount:a,parent:l});let p=0;if(c.globals.hasXaxisGroups&&c.config.xaxis.tickPlacement==="between"){const b=c.globals.groups;if(b){let O=0;for(let r=0;O<e&&r<b.length;r++)O+=b[r].cols;O===e&&(p=c.globals.xAxisLabelsHeight*.6)}}new kr(this.ctx).drawXaxisTicks(t,p,c.globals.dom.elGraphical)}}_drawGridLine({i:e,x1:t,y1:i,x2:s,y2:n,xCount:a,parent:l}){const c=this.w;let d=!1;const p=l.node.classList.contains("apexcharts-gridlines-horizontal");let g=c.config.grid.strokeDashArray;const b=c.globals.barPadForNumericAxis;(i===0&&n===0||t===0&&s===0)&&(d=!0),i===c.globals.gridHeight&&n===c.globals.gridHeight&&(d=!0),c.globals.isBarHorizontal&&(e===0||e===a-1)&&(d=!0);let r=new Y(this).drawLine(t-(p?b:0),i,s+(p?b:0),n,c.config.grid.borderColor,g);r.node.classList.add("apexcharts-gridline"),d&&c.config.grid.show?this.elGridBorders.add(r):l.add(r)}_drawGridBandRect({c:e,x1:t,y1:i,x2:s,y2:n,type:a}){const l=this.w,c=new Y(this.ctx),d=l.globals.barPadForNumericAxis;if(a==="column"&&l.config.xaxis.type==="datetime")return;const p=l.config.grid[a].colors[e];let g=c.drawRect(t-(a==="row"?d:0),i,s+(a==="row"?d*2:0),n,0,p,l.config.grid[a].opacity);this.elg.add(g),g.attr("clip-path",`url(#gridRectMask${l.globals.cuid})`),g.node.classList.add(`apexcharts-grid-${a}`)}_drawXYLines({xCount:e,tickAmount:t}){const i=this.w,s=({xC:a,x1:l,y1:c,x2:d,y2:p})=>{for(let g=0;g<a;g++)l=this.xaxisLabels[g].position,d=this.xaxisLabels[g].position,this._drawGridLines({i:g,x1:l,y1:c,x2:d,y2:p,xCount:e,parent:this.elgridLinesV})},n=({xC:a,x1:l,y1:c,x2:d,y2:p})=>{for(let g=0;g<a+(i.globals.isXNumeric?0:1);g++)g===0&&a===1&&i.globals.dataPoints===1&&(l=i.globals.gridWidth/2,d=l),this._drawGridLines({i:g,x1:l,y1:c,x2:d,y2:p,xCount:e,parent:this.elgridLinesV}),l=l+i.globals.gridWidth/(i.globals.isXNumeric?a-1:a),d=l};if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show){let a=i.globals.padHorizontal,l=0,c,d=i.globals.gridHeight;i.globals.timescaleLabels.length?s({xC:e,x1:a,y1:l,x2:c,y2:d}):(i.globals.isXNumeric&&(e=i.globals.xAxisScale.result.length),n({xC:e,x1:a,y1:l,x2:c,y2:d}))}if(i.config.grid.yaxis.lines.show){let a=0,l=0,c=0,d=i.globals.gridWidth,p=t+1;this.isRangeBar&&(p=i.globals.labels.length);for(let g=0;g<p+(this.isRangeBar?1:0);g++)this._drawGridLine({i:g,xCount:p+(this.isRangeBar?1:0),x1:a,y1:l,x2:d,y2:c,parent:this.elgridLinesH}),l=l+i.globals.gridHeight/(this.isRangeBar?p:t),c=l}}_drawInvertedXYLines({xCount:e}){const t=this.w;if(t.config.grid.xaxis.lines.show||t.config.xaxis.axisTicks.show){let i=t.globals.padHorizontal,s=0,n,a=t.globals.gridHeight;for(let l=0;l<e+1;l++)t.config.grid.xaxis.lines.show&&this._drawGridLine({i:l,xCount:e+1,x1:i,y1:s,x2:n,y2:a,parent:this.elgridLinesV}),new kr(this.ctx).drawXaxisTicks(i,0,t.globals.dom.elGraphical),i=i+t.globals.gridWidth/e,n=i}if(t.config.grid.yaxis.lines.show){let i=0,s=0,n=0,a=t.globals.gridWidth;for(let l=0;l<t.globals.dataPoints+1;l++)this._drawGridLine({i:l,xCount:t.globals.dataPoints+1,x1:i,y1:s,x2:a,y2:n,parent:this.elgridLinesH}),s=s+t.globals.gridHeight/t.globals.dataPoints,n=s}}renderGrid(){var a,l,c;let e=this.w,t=new Y(this.ctx);this.elg=t.group({class:"apexcharts-grid"}),this.elgridLinesH=t.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=t.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=t.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());let i=0;for(;i<e.globals.seriesYAxisMap.length&&e.globals.ignoreYAxisIndexes.indexOf(i)!==-1;)i++;i===e.globals.seriesYAxisMap.length&&(i=0);let s=e.globals.yAxisScale[i].result.length-1,n;return!e.globals.isBarHorizontal||this.isRangeBar?(n=this.xaxisLabels.length,this.isRangeBar&&(n--,s=e.globals.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(n=e.config.xaxis.tickAmount),((c=(l=(a=e.globals.yAxisScale)==null?void 0:a[i])==null?void 0:l.result)==null?void 0:c.length)>0&&e.config.xaxis.type!=="datetime"&&(n=e.globals.yAxisScale[i].result.length-1)),this._drawXYLines({xCount:n,tickAmount:s})):(n=s,s=e.globals.xTickAmount,this._drawInvertedXYLines({xCount:n,tickAmount:s})),this.drawGridBands(n,s),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:e.globals.gridWidth/n}}drawGridBands(e,t){const i=this.w;if(i.config.grid.row.colors!==void 0&&i.config.grid.row.colors.length>0){let s=0,n=0,a=i.globals.gridHeight/t,l=i.globals.gridWidth;for(let c=0,d=0;c<t;c++,d++)d>=i.config.grid.row.colors.length&&(d=0),this._drawGridBandRect({c:d,x1:s,y1:n,x2:l,y2:a,type:"row"}),n=n+i.globals.gridHeight/t}if(i.config.grid.column.colors!==void 0&&i.config.grid.column.colors.length>0){const s=!i.globals.isBarHorizontal&&i.config.xaxis.tickPlacement==="on"&&(i.config.xaxis.type==="category"||i.config.xaxis.convertedCatToNumeric)?e-1:e;let n=i.globals.padHorizontal,a=0,l=i.globals.padHorizontal+i.globals.gridWidth/s,c=i.globals.gridHeight;for(let d=0,p=0;d<e;d++,p++)p>=i.config.grid.column.colors.length&&(p=0),this._drawGridBandRect({c:p,x1:n,y1:a,x2:l,y2:c,type:"column"}),n=n+i.globals.gridWidth/s}}}class wg{constructor(e){this.ctx=e,this.w=e.w}niceScale(e,t,i=0){const n=this.w,a=n.globals;let l,c,d,p;a.isBarHorizontal?(l=n.config.xaxis,c=Math.max((a.svgWidth-100)/25,2)):(l=n.config.yaxis[i],c=Math.max((a.svgHeight-100)/15,2)),d=l.min!==void 0&&l.min!==null,p=l.max!==void 0&&l.min!==null;let g=l.stepSize!==void 0&&l.stepSize!==null,b=l.tickAmount!==void 0&&l.tickAmount!==null,O=b?l.tickAmount:l.forceNiceScale?a.niceScaleDefaultTicks[Math.min(Math.round(c/2),a.niceScaleDefaultTicks.length-1)]:10;if(a.isMultipleYAxis&&!b&&a.multiAxisTickAmount>0&&(O=a.multiAxisTickAmount,b=!0),O==="dataPoints"?O=a.dataPoints-1:O=Math.abs(Math.round(O)),(e===Number.MIN_VALUE&&t===0||!R.isNumber(e)&&!R.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE)&&(e=0,t=O,a.allSeriesCollapsed=!1),e>t){console.warn("axis.min cannot be greater than axis.max: swapping min and max");let P=t;t=e,e=P}else e===t&&(e=e===0?0:e-1,t=t===0?2:t+1);let r=[];O<1&&(O=1);let h=O,u=Math.abs(t-e);if(l.forceNiceScale){let P=.15;!d&&e>0&&e/u<P&&(e=0,d=!0),!p&&t<0&&-t/u<P&&(t=0,p=!0),u=Math.abs(t-e)}let m=u/h,y=m,v=Math.floor(Math.log10(y)),w=Math.pow(10,v),S=Math.ceil(y/w);if(S=a.niceScaleAllowedMagMsd[a.yValueDecimal===0?0:1][S],y=S*w,m=y,a.isBarHorizontal&&l.stepSize&&l.type!=="datetime"?(m=l.stepSize,g=!0):g&&(m=l.stepSize),g&&l.forceNiceScale){let P=Math.floor(Math.log10(m));m*=Math.pow(10,v-P)}if(d&&p){let P=u/h;if(b)if(g)if(R.mod(u,m)!=0){let E=R.getGCD(m,P);P/E<10?m=E:m=P}else R.mod(m,P)==0?m=P:(P=m,b=!1);else m=P;else if(g)R.mod(u,m)==0?P=m:m=P;else if(R.mod(u,m)==0)P=m;else{h=Math.ceil(u/m),P=u/h;let E=R.getGCD(u,m);u/E<c&&(P=E),m=P}h=Math.round(u/m)}else{if(!d&&!p)if(b){let P=m/(t-e>t?1:2),E=P*Math.floor(e/P);Math.abs(E-e)<=P/2?(e=E,t=e+m*h):(t=P*Math.ceil(t/P),e=t-m*h)}else e=m*Math.floor(e/m),t=m*Math.ceil(t/m);else if(p)if(b)e=t-m*h;else{let P=e;e=m*Math.floor(e/m),Math.abs(t-e)/R.getGCD(u,m)>c&&(e=t-m*O,e+=m*Math.floor((P-e)/m))}else d&&(b?t=e+m*h:t=m*Math.ceil(t/m));u=Math.abs(t-e),m=R.getGCD(u,m),h=Math.round(u/m)}if(!b&&!(d||p)&&(h=Math.ceil((u-1e-11)/(m+1e-11)),h>16&&R.getPrimeFactors(h).length<2&&h++),!b&&l.forceNiceScale&&a.yValueDecimal===0&&h>u&&(h=u,m=Math.round(u/h)),a.isMultipleYAxis&&a.multiAxisTickAmount==0&&(a.multiAxisTickAmount=h),h>c&&(!(b||g)||l.forceNiceScale)){let P=R.getPrimeFactors(h),E=P.length-1,x=h;e:for(var C=0;C<E;C++)for(var T=0;T<=E-C;T++){let k=Math.min(T+C,E),A=x,L=1;for(var _=T;_<=k;_++)L*=P[_];if(A/=L,A<c){x=A;break e}}x===h?m=u:m=u/x}let $=e-m,N=m*1e-11;do $+=m,r.push(R.stripNumber($,7));while(t-$>N);return{result:r,niceMin:r[0],niceMax:r[r.length-1]}}linearScale(e,t,i=10,s=0,n=void 0){let a=Math.abs(t-e);i=this._adjustTicksForSmallRange(i,s,a),i==="dataPoints"&&(i=this.w.globals.dataPoints-1),n||(n=a/i),i===Number.MAX_VALUE&&(i=5,n=1);let l=[],c=e;for(;i>=0;)l.push(c),c=c+n,i-=1;return{result:l,niceMin:l[0],niceMax:l[l.length-1]}}logarithmicScaleNice(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));const s=[],n=Math.ceil(Math.log(t)/Math.log(i)+1),a=Math.floor(Math.log(e)/Math.log(i));for(let l=a;l<n;l++)s.push(Math.pow(i,l));return{result:s,niceMin:s[0],niceMax:s[s.length-1]}}logarithmicScale(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));const s=[],n=Math.log(t)/Math.log(i),a=Math.log(e)/Math.log(i),l=n-a,c=Math.round(l),d=l/c;for(let p=0,g=a;p<c;p++,g+=d)s.push(Math.pow(i,g));return s.push(Math.pow(i,n)),{result:s,niceMin:e,niceMax:t}}_adjustTicksForSmallRange(e,t,i){let s=e;if(typeof t<"u"&&this.w.config.yaxis[t].labels.formatter&&this.w.config.yaxis[t].tickAmount===void 0){const n=Number(this.w.config.yaxis[t].labels.formatter(1));R.isNumber(n)&&this.w.globals.yValueDecimal===0&&(s=Math.ceil(i))}return s<e?s:e}setYScaleForIndex(e,t,i){const s=this.w.globals,n=this.w.config;let a=s.isBarHorizontal?n.xaxis:n.yaxis[e];typeof s.yAxisScale[e]>"u"&&(s.yAxisScale[e]=[]);let l=Math.abs(i-t);a.logarithmic&&l<=5&&(s.invalidLogScale=!0),a.logarithmic&&l>5?(s.allSeriesCollapsed=!1,s.yAxisScale[e]=a.forceNiceScale?this.logarithmicScaleNice(t,i,a.logBase):this.logarithmicScale(t,i,a.logBase)):i===-Number.MAX_VALUE||!R.isNumber(i)?s.yAxisScale[e]=this.linearScale(0,10,10,e,n.yaxis[e].stepSize):(s.allSeriesCollapsed=!1,s.yAxisScale[e]=this.niceScale(t,i,e))}setXScale(e,t){const i=this.w,s=i.globals;let n=Math.abs(t-e);return t===-Number.MAX_VALUE||!R.isNumber(t)?s.xAxisScale=this.linearScale(0,10,10):s.xAxisScale=this.linearScale(e,t,i.config.xaxis.tickAmount?i.config.xaxis.tickAmount:n<10&&n>1?n+1:10,0,i.config.xaxis.stepSize),s.xAxisScale}setMultipleYScales(){const e=this.w.globals,t=this.w.config,i=e.minYArr,s=e.maxYArr;let n=[],a=[],l=[],c=t.yaxis.length!==t.series.length;t.series.forEach((g,b)=>{l.push(b),a.push(null)}),t.yaxis.forEach((g,b)=>{n[b]=[]});let d=[];t.yaxis.forEach((g,b)=>{let O=!1;if(g.seriesName){let r=[];Array.isArray(g.seriesName)?r=g.seriesName:r.push(g.seriesName),r.forEach(h=>{t.series.forEach((u,m)=>{if(u.name===h){b===m||c?n[b].push(m):n[m].push(b),O=!0;let y=l.indexOf(m);y!==-1&&l.splice(y,1)}})})}O||d.push(b)}),n.forEach((g,b)=>{g.forEach(O=>{a[O]=b})});let p;for(let g=0;g<d.length&&(p=d[g],n[p]=[],l);g++){let b=l[0];l.shift(),n[p].push(b),a[b]=p}p&&l.forEach(g=>{n[p].push(g),a[g]=p}),e.seriesYAxisMap=n.map(g=>g),e.seriesYAxisReverseMap=a.map(g=>g),this.sameScaleInMultipleAxes(i,s,n)}sameScaleInMultipleAxes(e,t,i){const s=this.w.config,n=this.w.globals;i.forEach((a,l)=>{if(a.length>0){let c=Number.MAX_VALUE,d=-Number.MAX_VALUE;if(s.chart.stacked){let p=n.seriesX[a[0]].map(r=>Number.MIN_VALUE),g=n.seriesX[a[0]].map(r=>Number.MIN_VALUE),b=n.seriesX[a[0]].map(r=>Number.MIN_VALUE),O=s.series[a[0]].type;for(let r=0;r<a.length;r++){let h=a[r];if(n.collapsedSeriesIndices.indexOf(h)===-1)for(let u=0;u<n.series[h].length;u++){let m=n.series[h][u];m>=0?g[u]+=m:b[u]+=m,p[u]+=m}}O==="bar"?(c=Math.min.apply(null,b),d=Math.max.apply(null,g)):(c=Math.min.apply(null,p),d=Math.max.apply(null,p))}else{for(let p=0;p<a.length;p++)c=Math.min(c,e[a[p]]);for(let p=0;p<a.length;p++)d=Math.max(d,t[a[p]])}s.yaxis[l].min!==void 0&&(typeof s.yaxis[l].min=="function"?c=s.yaxis[l].min(c):c=s.yaxis[l].min),s.yaxis[l].max!==void 0&&(typeof s.yaxis[l].max=="function"?d=s.yaxis[l].max(d):d=s.yaxis[l].max),this.setYScaleForIndex(l,c,d),a.forEach(p=>{e[p]=n.yAxisScale[l].niceMin,t[p]=n.yAxisScale[l].niceMax})}})}}let Cc=class{constructor(e){this.ctx=e,this.w=e.w,this.scales=new wg(e)}init(){this.setYRange(),this.setXRange(),this.setZRange()}getMinYMaxY(e,t=Number.MAX_VALUE,i=-Number.MAX_VALUE,s=null){var h;const n=this.w.config,a=this.w.globals;let l=-Number.MAX_VALUE,c=Number.MIN_VALUE;s===null&&(s=e+1);let d=0,p=0,g;if(a.seriesX.length>=s){g=[...new Set([].concat(...a.seriesX.slice(e,s)))],d=0,p=g.length-1;let u=(h=a.brushSource)==null?void 0:h.w.config.chart.brush;if(n.chart.zoom.enabled&&n.chart.zoom.autoScaleYaxis||u!=null&&u.enabled&&(u!=null&&u.autoScaleYaxis)){if(n.xaxis.min)for(d=0;d<p&&g[d]<n.xaxis.min;d++);if(n.xaxis.max)for(;p>d&&g[p]>n.xaxis.max;p--);}}let b=a.series,O=b,r=b;n.chart.type==="candlestick"?(O=a.seriesCandleL,r=a.seriesCandleH):n.chart.type==="boxPlot"?(O=a.seriesCandleO,r=a.seriesCandleC):a.isRangeData&&(O=a.seriesRangeStart,r=a.seriesRangeEnd);for(let u=e;u<s;u++){a.dataPoints=Math.max(a.dataPoints,b[u].length);const m=n.series[u].type;a.categoryLabels.length&&(a.dataPoints=a.categoryLabels.filter(y=>typeof y<"u").length),a.labels.length&&n.xaxis.type!=="datetime"&&a.series.reduce((y,v)=>y+v.length,0)!==0&&(a.dataPoints=Math.max(a.dataPoints,a.labels.length)),g||(d=0,p=a.series[u].length);for(let y=d;y<=p&&y<a.series[u].length;y++){let v=b[u][y];if(v!==null&&R.isNumber(v)){switch(typeof r[u][y]<"u"&&(l=Math.max(l,r[u][y]),t=Math.min(t,r[u][y])),typeof O[u][y]<"u"&&(t=Math.min(t,O[u][y]),i=Math.max(i,O[u][y])),m){case"candlestick":typeof a.seriesCandleC[u][y]<"u"&&(l=Math.max(l,a.seriesCandleH[u][y]),t=Math.min(t,a.seriesCandleL[u][y]));case"boxPlot":typeof a.seriesCandleC[u][y]<"u"&&(l=Math.max(l,a.seriesCandleC[u][y]),t=Math.min(t,a.seriesCandleO[u][y]))}m&&m!=="candlestick"&&m!=="boxPlot"&&m!=="rangeArea"&&m!=="rangeBar"&&(l=Math.max(l,a.series[u][y]),t=Math.min(t,a.series[u][y])),i=l,a.seriesGoals[u]&&a.seriesGoals[u][y]&&Array.isArray(a.seriesGoals[u][y])&&a.seriesGoals[u][y].forEach(w=>{c!==Number.MIN_VALUE&&(c=Math.min(c,w.value),t=c),l=Math.max(l,w.value),i=l}),R.isFloat(v)&&(v=R.noExponents(v),a.yValueDecimal=Math.max(a.yValueDecimal,v.toString().split(".")[1].length)),c>O[u][y]&&O[u][y]<0&&(c=O[u][y])}else a.hasNullValues=!0}(m==="bar"||m==="column")&&(c<0&&l<0&&(l=0,i=Math.max(i,0)),c===Number.MIN_VALUE&&(c=0,t=Math.min(t,0)))}return n.chart.type==="rangeBar"&&a.seriesRangeStart.length&&a.isBarHorizontal&&(c=t),n.chart.type==="bar"&&(c<0&&l<0&&(l=0),c===Number.MIN_VALUE&&(c=0)),{minY:c,maxY:l,lowestY:t,highestY:i}}setYRange(){let e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;let i=Number.MAX_VALUE,s;if(e.isMultipleYAxis){i=Number.MAX_VALUE;for(let n=0;n<e.series.length;n++)s=this.getMinYMaxY(n),e.minYArr[n]=s.lowestY,e.maxYArr[n]=s.highestY,i=Math.min(i,s.lowestY)}return s=this.getMinYMaxY(0,i,null,e.series.length),t.chart.type==="bar"?(e.minY=s.minY,e.maxY=s.maxY):(e.minY=s.lowestY,e.maxY=s.highestY),i=s.lowestY,t.chart.stacked&&this._setStackedMinMax(),t.chart.type==="line"||t.chart.type==="area"||t.chart.type==="scatter"||t.chart.type==="candlestick"||t.chart.type==="boxPlot"||t.chart.type==="rangeBar"&&!e.isBarHorizontal?e.minY===Number.MIN_VALUE&&i!==-Number.MAX_VALUE&&i!==e.maxY&&(e.minY=i):e.minY=s.minY,t.yaxis.forEach((n,a)=>{n.max!==void 0&&(typeof n.max=="number"?e.maxYArr[a]=n.max:typeof n.max=="function"&&(e.maxYArr[a]=n.max(e.isMultipleYAxis?e.maxYArr[a]:e.maxY)),e.maxY=e.maxYArr[a]),n.min!==void 0&&(typeof n.min=="number"?e.minYArr[a]=n.min:typeof n.min=="function"&&(e.minYArr[a]=n.min(e.isMultipleYAxis?e.minYArr[a]===Number.MIN_VALUE?0:e.minYArr[a]:e.minY)),e.minY=e.minYArr[a])}),e.isBarHorizontal&&["min","max"].forEach(a=>{t.xaxis[a]!==void 0&&typeof t.xaxis[a]=="number"&&(a==="min"?e.minY=t.xaxis[a]:e.maxY=t.xaxis[a])}),e.isMultipleYAxis?(this.scales.setMultipleYScales(),e.minY=i):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.yAxisScale[0].niceMin,e.maxYArr[0]=e.yAxisScale[0].niceMax,e.seriesYAxisMap=[e.series.map((n,a)=>a)],e.seriesYAxisReverseMap=e.series.map((n,a)=>0)),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}setXRange(){let e=this.w.globals,t=this.w.config;const i=t.xaxis.type==="numeric"||t.xaxis.type==="datetime"||t.xaxis.type==="category"&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric,s=()=>{for(let n=0;n<e.series.length;n++)if(e.labels[n])for(let a=0;a<e.labels[n].length;a++)e.labels[n][a]!==null&&R.isNumber(e.labels[n][a])&&(e.maxX=Math.max(e.maxX,e.labels[n][a]),e.initialMaxX=Math.max(e.maxX,e.labels[n][a]),e.minX=Math.min(e.minX,e.labels[n][a]),e.initialMinX=Math.min(e.minX,e.labels[n][a]))};if(e.isXNumeric&&s(),e.noLabelsProvided&&t.xaxis.categories.length===0&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){let n;if(t.xaxis.tickAmount===void 0?(n=Math.round(e.svgWidth/150),t.xaxis.type==="numeric"&&e.dataPoints<30&&(n=e.dataPoints-1),n>e.dataPoints&&e.dataPoints!==0&&(n=e.dataPoints-1)):t.xaxis.tickAmount==="dataPoints"?(e.series.length>1&&(n=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric&&(n=e.maxX-e.minX-1)):n=t.xaxis.tickAmount,e.xTickAmount=n,t.xaxis.max!==void 0&&typeof t.xaxis.max=="number"&&(e.maxX=t.xaxis.max),t.xaxis.min!==void 0&&typeof t.xaxis.min=="number"&&(e.minX=t.xaxis.min),t.xaxis.range!==void 0&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){let a=[];for(let l=e.minX-1;l<e.maxX;l++)a.push(l+1);e.xAxisScale={result:a,niceMin:a[0],niceMax:a[a.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(0,n,n,0,t.xaxis.stepSize),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,n-1,0,t.xaxis.stepSize),e.seriesX=e.labels.slice());i&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}setZRange(){let e=this.w.globals;if(e.isDataXYZ){for(let t=0;t<e.series.length;t++)if(typeof e.seriesZ[t]<"u")for(let i=0;i<e.seriesZ[t].length;i++)e.seriesZ[t][i]!==null&&R.isNumber(e.seriesZ[t][i])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][i]),e.minZ=Math.min(e.minZ,e.seriesZ[t][i]))}}_handleSingleDataPoint(){const e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){let i=new at(this.ctx);if(t.xaxis.type==="datetime"){const s=i.getDate(e.minX);t.xaxis.labels.datetimeUTC?s.setUTCDate(s.getUTCDate()-2):s.setDate(s.getDate()-2),e.minX=new Date(s).getTime();const n=i.getDate(e.maxX);t.xaxis.labels.datetimeUTC?n.setUTCDate(n.getUTCDate()+2):n.setDate(n.getDate()+2),e.maxX=new Date(n).getTime()}else(t.xaxis.type==="numeric"||t.xaxis.type==="category"&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}_getMinXDiff(){const e=this.w.globals;e.isXNumeric&&e.seriesX.forEach((t,i)=>{t.length===1&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);const s=t.slice();s.sort((n,a)=>n-a),s.forEach((n,a)=>{if(a>0){let l=n-s[a-1];l>0&&(e.minXDiff=Math.min(l,e.minXDiff))}}),(e.dataPoints===1||e.minXDiff===Number.MAX_VALUE)&&(e.minXDiff=.5)})}_setStackedMinMax(){const e=this.w.globals;if(!e.series.length)return;let t=e.seriesGroups;t.length||(t=[this.w.config.series.map(n=>n.name)]);let i={},s={};t.forEach(n=>{i[n]=[],s[n]=[],this.w.config.series.map((l,c)=>n.indexOf(l.name)>-1?c:null).filter(l=>l!==null).forEach(l=>{var c,d;for(let p=0;p<e.series[e.maxValsInArrayIndex].length;p++)typeof i[n][p]>"u"&&(i[n][p]=0,s[n][p]=0),(this.w.config.chart.stacked&&!e.comboCharts||this.w.config.chart.stacked&&e.comboCharts&&(!this.w.config.chart.stackOnlyBar||((d=(c=this.w.config.series)==null?void 0:c[l])==null?void 0:d.type)==="bar"))&&e.series[l][p]!==null&&R.isNumber(e.series[l][p])&&(e.series[l][p]>0?i[n][p]+=parseFloat(e.series[l][p])+1e-4:s[n][p]+=parseFloat(e.series[l][p]))})}),Object.entries(i).forEach(([n])=>{i[n].forEach((a,l)=>{e.maxY=Math.max(e.maxY,i[n][l]),e.minY=Math.min(e.minY,s[n][l])})})}};class _c{constructor(e,t){this.ctx=e,this.elgrid=t,this.w=e.w;const i=this.w;this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.axisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=i.config.chart.type==="bar"&&i.config.plotOptions.bar.horizontal,this.xAxisoffX=0,i.config.xaxis.position==="bottom"&&(this.xAxisoffX=i.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Zi(e)}drawYaxis(e){let t=this.w,i=new Y(this.ctx);const s=t.config.yaxis[e].labels.style;let n=s.fontSize,a=s.fontFamily,l=s.fontWeight,c=i.group({class:"apexcharts-yaxis",rel:e,transform:"translate("+t.globals.translateYAxisX[e]+", 0)"});if(this.axesUtils.isYAxisHidden(e))return c;let d=i.group({class:"apexcharts-yaxis-texts-g"});c.add(d);let p=t.globals.yAxisScale[e].result.length-1,g=t.globals.gridHeight/p,b=t.globals.translateY,O=t.globals.yLabelFormatters[e],r=t.globals.yAxisScale[e].result.slice();r=this.axesUtils.checkForReversedLabels(e,r);let h="";if(t.config.yaxis[e].labels.show)for(let y=p;y>=0;y--){let v=r[y];v=O(v,y,t);let w=t.config.yaxis[e].labels.padding;t.config.yaxis[e].opposite&&t.config.yaxis.length!==0&&(w=w*-1);let S="end";t.config.yaxis[e].opposite&&(S="start"),t.config.yaxis[e].labels.align==="left"?S="start":t.config.yaxis[e].labels.align==="center"?S="middle":t.config.yaxis[e].labels.align==="right"&&(S="end");const C=this.axesUtils.getYAxisForeColor(s.colors,e),T=()=>Array.isArray(C)?C[y]:C;let _=t.config.yaxis[e].labels.offsetY;if(t.config.chart.type==="heatmap"){const P=t.globals.gridHeight/t.globals.series.length-1;_=_-P/2}let $=i.drawText({x:w,y:b+p/10+_+1,text:v,textAnchor:S,fontSize:n,fontFamily:a,fontWeight:l,maxWidth:t.config.yaxis[e].labels.maxWidth,foreColor:T(),isPlainText:!1,cssClass:"apexcharts-yaxis-label "+s.cssClass});y===p&&(h=$),d.add($);let N=document.createElementNS(t.globals.SVGNS,"title");if(N.textContent=Array.isArray(v)?v.join(" "):v,$.node.appendChild(N),t.config.yaxis[e].labels.rotate!==0){let P=i.rotateAroundCenter(h.node),E=i.rotateAroundCenter($.node);$.node.setAttribute("transform",`rotate(${t.config.yaxis[e].labels.rotate} ${P.x} ${E.y})`)}b=b+g}if(t.config.yaxis[e].title.text!==void 0){let y=i.group({class:"apexcharts-yaxis-title"}),v=0;t.config.yaxis[e].opposite&&(v=t.globals.translateYAxisX[e]);let w=i.drawText({x:v,y:t.globals.gridHeight/2+t.globals.translateY+t.config.yaxis[e].title.offsetY,text:t.config.yaxis[e].title.text,textAnchor:"end",foreColor:t.config.yaxis[e].title.style.color,fontSize:t.config.yaxis[e].title.style.fontSize,fontWeight:t.config.yaxis[e].title.style.fontWeight,fontFamily:t.config.yaxis[e].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+t.config.yaxis[e].title.style.cssClass});y.add(w),c.add(y)}let u=t.config.yaxis[e].axisBorder,m=31+u.offsetX;if(t.config.yaxis[e].opposite&&(m=-31-u.offsetX),u.show){let y=i.drawLine(m,t.globals.translateY+u.offsetY-2,m,t.globals.gridHeight+t.globals.translateY+u.offsetY+2,u.color,0,u.width);c.add(y)}return t.config.yaxis[e].axisTicks.show&&this.axesUtils.drawYAxisTicks(m,p,u,t.config.yaxis[e].axisTicks,e,g,c),c}drawYaxisInversed(e){let t=this.w,i=new Y(this.ctx),s=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),n=i.group({class:"apexcharts-xaxis-texts-g",transform:`translate(${t.globals.translateXAxisX}, ${t.globals.translateXAxisY})`});s.add(n);let a=t.globals.yAxisScale[e].result.length-1,l=t.globals.gridWidth/a+.1,c=l+t.config.xaxis.labels.offsetX,d=t.globals.xLabelFormatter,p=t.globals.yAxisScale[e].result.slice(),g=t.globals.timescaleLabels;g.length>0&&(this.xaxisLabels=g.slice(),p=g.slice(),a=p.length),p=this.axesUtils.checkForReversedLabels(e,p);const b=g.length;if(t.config.xaxis.labels.show)for(let O=b?0:a;b?O<b:O>=0;b?O++:O--){let r=p[O];r=d(r,O,t);let h=t.globals.gridWidth+t.globals.padHorizontal-(c-l+t.config.xaxis.labels.offsetX);if(g.length){let y=this.axesUtils.getLabel(p,g,h,O,this.drawnLabels,this.xaxisFontSize);h=y.x,r=y.text,this.drawnLabels.push(y.text),O===0&&t.globals.skipFirstTimelinelabel&&(r=""),O===p.length-1&&t.globals.skipLastTimelinelabel&&(r="")}let u=i.drawText({x:h,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-(t.config.xaxis.position==="top"?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:r,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+t.config.xaxis.labels.style.cssClass});n.add(u),u.tspan(r);let m=document.createElementNS(t.globals.SVGNS,"title");m.textContent=r,u.node.appendChild(m),c=c+l}return this.inversedYAxisTitleText(s),this.inversedYAxisBorder(s),s}inversedYAxisBorder(e){const t=this.w,i=new Y(this.ctx);let s=t.config.xaxis.axisBorder;if(s.show){let n=0;t.config.chart.type==="bar"&&t.globals.isXNumeric&&(n=n-15);let a=i.drawLine(t.globals.padHorizontal+n+s.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,s.color,0,s.height);this.elgrid&&this.elgrid.elGridBorders&&t.config.grid.show?this.elgrid.elGridBorders.add(a):e.add(a)}}inversedYAxisTitleText(e){const t=this.w,i=new Y(this.ctx);if(t.config.xaxis.title.text!==void 0){let s=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),n=i.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});s.add(n),e.add(s)}}yAxisTitleRotate(e,t){let i=this.w,s=new Y(this.ctx),n={width:0,height:0},a={width:0,height:0},l=i.globals.dom.baseEl.querySelector(` .apexcharts-yaxis[rel='${e}'] .apexcharts-yaxis-texts-g`);l!==null&&(n=l.getBoundingClientRect());let c=i.globals.dom.baseEl.querySelector(`.apexcharts-yaxis[rel='${e}'] .apexcharts-yaxis-title text`);if(c!==null&&(a=c.getBoundingClientRect()),c!==null){let d=this.xPaddingForYAxisTitle(e,n,a,t);c.setAttribute("x",d.xPos-(t?10:0))}if(c!==null){let d=s.rotateAroundCenter(c);c.setAttribute("transform",`rotate(${t?i.config.yaxis[e].title.rotate*-1:i.config.yaxis[e].title.rotate} ${d.x} ${d.y})`)}}xPaddingForYAxisTitle(e,t,i,s){let n=this.w,a=0,l=0,c=10;return n.config.yaxis[e].title.text===void 0||e<0?{xPos:l,padd:0}:(s?(l=t.width+n.config.yaxis[e].title.offsetX+i.width/2+c/2,a+=1,a===0&&(l=l-c/2)):(l=t.width*-1+n.config.yaxis[e].title.offsetX+c/2+i.width/2,n.globals.isBarHorizontal&&(c=25,l=t.width*-1-n.config.yaxis[e].title.offsetX-c)),{xPos:l,padd:c})}setYAxisXPosition(e,t){let i=this.w,s=0,n=0,a=18,l=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.map((c,d)=>{let p=i.globals.ignoreYAxisIndexes.indexOf(d)>-1||!c.show||c.floating||e[d].width===0,g=e[d].width+t[d].width;c.opposite?i.globals.isBarHorizontal?(n=i.globals.gridWidth+i.globals.translateX-1,i.globals.translateYAxisX[d]=n-c.labels.offsetX):(n=i.globals.gridWidth+i.globals.translateX+l,p||(l=l+g+20),i.globals.translateYAxisX[d]=n-c.labels.offsetX+20):(s=i.globals.translateX-a,p||(a=a+g+20),i.globals.translateYAxisX[d]=s+c.labels.offsetX)})}setYAxisTextAlignments(){const e=this.w;let t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");t=R.listToArray(t),t.forEach((i,s)=>{const n=e.config.yaxis[s];if(n&&!n.floating&&n.labels.align!==void 0){const a=e.globals.dom.baseEl.querySelector(`.apexcharts-yaxis[rel='${s}'] .apexcharts-yaxis-texts-g`);let l=e.globals.dom.baseEl.querySelectorAll(`.apexcharts-yaxis[rel='${s}'] .apexcharts-yaxis-label`);l=R.listToArray(l);const c=a.getBoundingClientRect();n.labels.align==="left"?(l.forEach((d,p)=>{d.setAttribute("text-anchor","start")}),n.opposite||a.setAttribute("transform",`translate(-${c.width}, 0)`)):n.labels.align==="center"?(l.forEach((d,p)=>{d.setAttribute("text-anchor","middle")}),a.setAttribute("transform",`translate(${c.width/2*(n.opposite?1:-1)}, 0)`)):n.labels.align==="right"&&(l.forEach((d,p)=>{d.setAttribute("text-anchor","end")}),n.opposite&&a.setAttribute("transform",`translate(${c.width}, 0)`))}})}}class _P{constructor(e){this.ctx=e,this.w=e.w,this.documentEvent=R.bind(this.documentEvent,this)}addEventListener(e,t){const i=this.w;i.globals.events.hasOwnProperty(e)?i.globals.events[e].push(t):i.globals.events[e]=[t]}removeEventListener(e,t){const i=this.w;if(!i.globals.events.hasOwnProperty(e))return;let s=i.globals.events[e].indexOf(t);s!==-1&&i.globals.events[e].splice(s,1)}fireEvent(e,t){const i=this.w;if(!i.globals.events.hasOwnProperty(e))return;(!t||!t.length)&&(t=[]);let s=i.globals.events[e],n=s.length;for(let a=0;a<n;a++)s[a].apply(null,t)}setupEventHandlers(){const e=this.w,t=this.ctx;let i=e.globals.dom.baseEl.querySelector(e.globals.chartClass);this.ctx.eventList.forEach(s=>{i.addEventListener(s,n=>{const a=Object.assign({},e,{seriesIndex:e.globals.capturedSeriesIndex,dataPointIndex:e.globals.capturedDataPointIndex});n.type==="mousemove"||n.type==="touchmove"?typeof e.config.chart.events.mouseMove=="function"&&e.config.chart.events.mouseMove(n,t,a):n.type==="mouseleave"||n.type==="touchleave"?typeof e.config.chart.events.mouseLeave=="function"&&e.config.chart.events.mouseLeave(n,t,a):(n.type==="mouseup"&&n.which===1||n.type==="touchend")&&(typeof e.config.chart.events.click=="function"&&e.config.chart.events.click(n,t,a),t.ctx.events.fireEvent("click",[n,t,a]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(s=>{e.globals.dom.baseEl.addEventListener(s,this.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}documentEvent(e){const t=this.w,i=e.target.className;if(e.type==="click"){let s=t.globals.dom.baseEl.querySelector(".apexcharts-menu");s&&s.classList.contains("apexcharts-menu-open")&&i!=="apexcharts-menu-icon"&&s.classList.remove("apexcharts-menu-open")}t.globals.clientX=e.type==="touchmove"?e.touches[0].clientX:e.clientX,t.globals.clientY=e.type==="touchmove"?e.touches[0].clientY:e.clientY}}class TP{constructor(e){this.ctx=e,this.w=e.w}setCurrentLocaleValues(e){let t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));const i=t.filter(s=>s.name===e)[0];if(i){let s=R.extend(bg,i);this.w.globals.locale=s.options}else throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options")}}class AP{constructor(e){this.ctx=e,this.w=e.w}drawAxis(e,t){let i=this.w.globals,s=this.w.config,n=new kr(this.ctx,t),a=new _c(this.ctx,t);if(i.axisCharts&&e!=="radar"){let l,c;i.isBarHorizontal?(c=a.drawYaxisInversed(0),l=n.drawXaxisInversed(0),i.dom.elGraphical.add(l),i.dom.elGraphical.add(c)):(l=n.drawXaxis(),i.dom.elGraphical.add(l),s.yaxis.map((d,p)=>{if(i.ignoreYAxisIndexes.indexOf(p)===-1&&(c=a.drawYaxis(p),i.dom.Paper.add(c),this.w.config.grid.position==="back")){const g=i.dom.Paper.children()[1];g.remove(),i.dom.Paper.add(g)}}))}}}class Tc{constructor(e){this.ctx=e,this.w=e.w}drawXCrosshairs(){const e=this.w;let t=new Y(this.ctx),i=new pt(this.ctx),s=e.config.xaxis.crosshairs.fill.gradient,n=e.config.xaxis.crosshairs.dropShadow,a=e.config.xaxis.crosshairs.fill.type,l=s.colorFrom,c=s.colorTo,d=s.opacityFrom,p=s.opacityTo,g=s.stops,b="none",O=n.enabled,r=n.left,h=n.top,u=n.blur,m=n.color,y=n.opacity,v=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){a==="gradient"&&(v=t.drawGradient("vertical",l,c,d,p,null,g,null));let w=t.drawRect();e.config.xaxis.crosshairs.width===1&&(w=t.drawLine());let S=e.globals.gridHeight;(!R.isNumber(S)||S<0)&&(S=0);let C=e.config.xaxis.crosshairs.width;(!R.isNumber(C)||C<0)&&(C=0),w.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:S,width:C,height:S,fill:v,filter:b,"fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),O&&(w=i.dropShadow(w,{left:r,top:h,blur:u,color:m,opacity:y})),e.globals.dom.elGraphical.add(w)}}drawYCrosshairs(){const e=this.w;let t=new Y(this.ctx),i=e.config.yaxis[0].crosshairs;const s=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){let a=t.drawLine(-s,0,e.globals.gridWidth+s,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);a.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(a)}let n=t.drawLine(-s,0,e.globals.gridWidth+s,0,i.stroke.color,0,0);n.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(n)}}class EP{constructor(e){this.ctx=e,this.w=e.w}checkResponsiveConfig(e){const t=this.w,i=t.config;if(i.responsive.length===0)return;let s=i.responsive.slice();s.sort((l,c)=>l.breakpoint>c.breakpoint?1:c.breakpoint>l.breakpoint?-1:0).reverse();let n=new vr({});const a=(l={})=>{let c=s[0].breakpoint;const d=window.innerWidth>0?window.innerWidth:screen.width;if(d>c){let p=Je.extendArrayProps(n,t.globals.initialConfig,t);l=R.extend(p,l),l=R.extend(t.config,l),this.overrideResponsiveOptions(l)}else for(let p=0;p<s.length;p++)d<s[p].breakpoint&&(l=Je.extendArrayProps(n,s[p].options,t),l=R.extend(t.config,l),this.overrideResponsiveOptions(l))};if(e){let l=Je.extendArrayProps(n,e,t);l=R.extend(t.config,l),l=R.extend(l,e),a(l)}else a({})}overrideResponsiveOptions(e){let t=new vr(e).init({responsiveOverride:!0});this.w.config=t}}class $P{constructor(e){this.ctx=e,this.colors=[],this.w=e.w;const t=this.w;this.isColorFn=!1,this.isHeatmapDistributed=t.config.chart.type==="treemap"&&t.config.plotOptions.treemap.distributed||t.config.chart.type==="heatmap"&&t.config.plotOptions.heatmap.distributed,this.isBarDistributed=t.config.plotOptions.bar.distributed&&(t.config.chart.type==="bar"||t.config.chart.type==="rangeBar")}init(){this.setDefaultColors()}setDefaultColors(){var n;let e=this.w,t=new R;if(e.globals.dom.elWrap.classList.add(`apexcharts-theme-${e.config.theme.mode}`),e.config.colors===void 0||((n=e.config.colors)==null?void 0:n.length)===0?e.globals.colors=this.predefined():(e.globals.colors=e.config.colors,Array.isArray(e.config.colors)&&e.config.colors.length>0&&typeof e.config.colors[0]=="function"&&(e.globals.colors=e.config.series.map((a,l)=>{let c=e.config.colors[l];return c||(c=e.config.colors[0]),typeof c=="function"?(this.isColorFn=!0,c({value:e.globals.axisCharts?e.globals.series[l][0]?e.globals.series[l][0]:0:e.globals.series[l],seriesIndex:l,dataPointIndex:l,w:e})):c}))),e.globals.seriesColors.map((a,l)=>{a&&(e.globals.colors[l]=a)}),e.config.theme.monochrome.enabled){let a=[],l=e.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(l=e.globals.series[0].length*e.globals.series.length);let c=e.config.theme.monochrome.color,d=1/(l/e.config.theme.monochrome.shadeIntensity),p=e.config.theme.monochrome.shadeTo,g=0;for(let b=0;b<l;b++){let O;p==="dark"?(O=t.shadeColor(g*-1,c),g=g+d):(O=t.shadeColor(g,c),g=g+d),a.push(O)}e.globals.colors=a.slice()}const i=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),["fill","stroke"].forEach(a=>{e.config[a].colors===void 0?e.globals[a].colors=this.isColorFn?e.config.colors:i:e.globals[a].colors=e.config[a].colors.slice(),this.pushExtraColors(e.globals[a].colors)}),e.config.dataLabels.style.colors===void 0?e.globals.dataLabels.style.colors=i:e.globals.dataLabels.style.colors=e.config.dataLabels.style.colors.slice(),this.pushExtraColors(e.globals.dataLabels.style.colors,50),e.config.plotOptions.radar.polygons.fill.colors===void 0?e.globals.radarPolygons.fill.colors=[e.config.theme.mode==="dark"?"#424242":"none"]:e.globals.radarPolygons.fill.colors=e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20),e.config.markers.colors===void 0?e.globals.markers.colors=i:e.globals.markers.colors=e.config.markers.colors.slice(),this.pushExtraColors(e.globals.markers.colors)}pushExtraColors(e,t,i=null){let s=this.w,n=t||s.globals.series.length;if(i===null&&(i=this.isBarDistributed||this.isHeatmapDistributed||s.config.chart.type==="heatmap"&&s.config.plotOptions.heatmap.colorScale.inverse),i&&s.globals.series.length&&(n=s.globals.series[s.globals.maxValsInArrayIndex].length*s.globals.series.length),e.length<n){let a=n-e.length;for(let l=0;l<a;l++)e.push(e[l])}}updateThemeOptions(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};const t=e.theme.mode||"light",i=e.theme.palette?e.theme.palette:t==="dark"?"palette4":"palette1",s=e.chart.foreColor?e.chart.foreColor:t==="dark"?"#f6f7f8":"#373d3f";return e.tooltip.theme=t,e.chart.foreColor=s,e.theme.palette=i,e}predefined(){switch(this.w.config.theme.palette){case"palette1":this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"];break;default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break}return this.colors}}class PP{constructor(e){this.ctx=e,this.w=e.w}draw(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}drawTitleSubtitle(e){let t=this.w;const i=e==="title"?t.config.title:t.config.subtitle;let s=t.globals.svgWidth/2,n=i.offsetY,a="middle";if(i.align==="left"?(s=10,a="start"):i.align==="right"&&(s=t.globals.svgWidth-10,a="end"),s=s+i.offsetX,n=n+parseInt(i.style.fontSize,10)+i.margin/2,i.text!==void 0){let c=new Y(this.ctx).drawText({x:s,y:n,text:i.text,textAnchor:a,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});c.node.setAttribute("class",`apexcharts-${e}-text`),t.globals.dom.Paper.add(c)}}}let LP=class{constructor(e){this.w=e.w,this.dCtx=e}getTitleSubtitleCoords(e){let t=this.w,i=0,s=0;const n=e==="title"?t.config.title.floating:t.config.subtitle.floating;let a=t.globals.dom.baseEl.querySelector(`.apexcharts-${e}-text`);if(a!==null&&!n){let l=a.getBoundingClientRect();i=l.width,s=t.globals.axisCharts?l.height+5:l.height}return{width:i,height:s}}getLegendsRect(){let e=this.w,t=e.globals.dom.elLegendWrap;!e.config.legend.height&&(e.config.legend.position==="top"||e.config.legend.position==="bottom")&&(t.style.maxHeight=e.globals.svgHeight/2+"px");let i=Object.assign({},R.getBoundingClientRect(t));return t!==null&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:i.x,y:i.y,height:i.height,width:i.height===0?0:i.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},(e.config.legend.position==="left"||e.config.legend.position==="right")&&this.dCtx.lgRect.width*1.5>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}getLargestStringFromMultiArr(e,t){const i=this.w;let s=e;if(i.globals.isMultiLineX){let n=t.map((c,d)=>Array.isArray(c)?c.length:1),a=Math.max(...n),l=n.indexOf(a);s=t[l]}return s}};class NP{constructor(e){this.w=e.w,this.dCtx=e}getxAxisLabelsCoords(){let e=this.w,t=e.globals.labels.slice();e.config.xaxis.convertedCatToNumeric&&t.length===0&&(t=e.globals.categoryLabels);let i;if(e.globals.timescaleLabels.length>0){const s=this.getxAxisTimeScaleLabelsCoords();i={width:s.width,height:s.height},e.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=(e.config.legend.position==="left"||e.config.legend.position==="right")&&!e.config.legend.floating?this.dCtx.lgRect.width:0;let s=e.globals.xLabelFormatter,n=R.getLargestStringFromArr(t),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(n,t);e.globals.isBarHorizontal&&(n=e.globals.yAxisScale[0].result.reduce((b,O)=>b.length>O.length?b:O,0),a=n);let l=new Or(this.dCtx.ctx),c=n;n=l.xLabelFormat(s,n,c,{i:void 0,dateFormatter:new at(this.dCtx.ctx).formatDate,w:e}),a=l.xLabelFormat(s,a,c,{i:void 0,dateFormatter:new at(this.dCtx.ctx).formatDate,w:e}),(e.config.xaxis.convertedCatToNumeric&&typeof n>"u"||String(n).trim()==="")&&(n="1",a=n);let d=new Y(this.dCtx.ctx),p=d.getTextRects(n,e.config.xaxis.labels.style.fontSize),g=p;if(n!==a&&(g=d.getTextRects(a,e.config.xaxis.labels.style.fontSize)),i={width:p.width>=g.width?p.width:g.width,height:p.height>=g.height?p.height:g.height},i.width*t.length>e.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&e.config.xaxis.labels.rotate!==0||e.config.xaxis.labels.rotateAlways){if(!e.globals.isBarHorizontal){e.globals.rotateXLabels=!0;const b=O=>d.getTextRects(O,e.config.xaxis.labels.style.fontSize,e.config.xaxis.labels.style.fontFamily,`rotate(${e.config.xaxis.labels.rotate} 0 0)`,!1);p=b(n),n!==a&&(g=b(a)),i.height=(p.height>g.height?p.height:g.height)/1.5,i.width=p.width>g.width?p.width:g.width}}else e.globals.rotateXLabels=!1}return e.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}getxAxisGroupLabelsCoords(){var p;let e=this.w;if(!e.globals.hasXaxisGroups)return{width:0,height:0};const t=((p=e.config.xaxis.group.style)==null?void 0:p.fontSize)||e.config.xaxis.labels.style.fontSize;let i=e.globals.groups.map(g=>g.title),s,n=R.getLargestStringFromArr(i),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(n,i),l=new Y(this.dCtx.ctx),c=l.getTextRects(n,t),d=c;return n!==a&&(d=l.getTextRects(a,t)),s={width:c.width>=d.width?c.width:d.width,height:c.height>=d.height?c.height:d.height},e.config.xaxis.labels.show||(s={width:0,height:0}),{width:s.width,height:s.height}}getxAxisTitleCoords(){let e=this.w,t=0,i=0;if(e.config.xaxis.title.text!==void 0){let n=new Y(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=n.width,i=n.height}return{width:t,height:i}}getxAxisTimeScaleLabelsCoords(){let e=this.w,t;this.dCtx.timescaleLabels=e.globals.timescaleLabels.slice();let i=this.dCtx.timescaleLabels.map(l=>l.value),s=i.reduce((l,c)=>typeof l>"u"?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):l.length>c.length?l:c,0);return t=new Y(this.dCtx.ctx).getTextRects(s,e.config.xaxis.labels.style.fontSize),t.width*1.05*i.length>e.globals.gridWidth&&e.config.xaxis.labels.rotate!==0&&(e.globals.overlappingXLabels=!0),t}additionalPaddingXLabels(e){const t=this.w,i=t.globals,s=t.config,n=s.xaxis.type;let a=e.width;i.skipLastTimelinelabel=!1,i.skipFirstTimelinelabel=!1;const l=t.config.yaxis[0].opposite&&t.globals.isBarHorizontal,c=g=>i.collapsedSeriesIndices.indexOf(g)!==-1,d=g=>{if(this.dCtx.timescaleLabels&&this.dCtx.timescaleLabels.length){const b=this.dCtx.timescaleLabels[0],r=this.dCtx.timescaleLabels[this.dCtx.timescaleLabels.length-1].position+a/1.75-this.dCtx.yAxisWidthRight,h=b.position-a/1.75+this.dCtx.yAxisWidthLeft;let u=t.config.legend.position==="right"&&this.dCtx.lgRect.width>0?this.dCtx.lgRect.width:0;r>i.svgWidth-i.translateX-u&&(i.skipLastTimelinelabel=!0),h<-((!g.show||g.floating)&&(s.chart.type==="bar"||s.chart.type==="candlestick"||s.chart.type==="rangeBar"||s.chart.type==="boxPlot")?a/1.75:10)&&(i.skipFirstTimelinelabel=!0)}else n==="datetime"?this.dCtx.gridPad.right<a&&!i.rotateXLabels&&(i.skipLastTimelinelabel=!0):n!=="datetime"&&this.dCtx.gridPad.right<a/2-this.dCtx.yAxisWidthRight&&!i.rotateXLabels&&!t.config.xaxis.labels.trim&&(t.config.xaxis.tickPlacement!=="between"||t.globals.isBarHorizontal)&&(this.dCtx.xPadRight=a/2+1)},p=(g,b)=>{s.yaxis.length>1&&c(b)||d(g)};s.yaxis.forEach((g,b)=>{l?(this.dCtx.gridPad.left<a&&(this.dCtx.xPadLeft=a/2+1),this.dCtx.xPadRight=a/2+1):p(g,b)})}}class DP{constructor(e){this.w=e.w,this.dCtx=e}getyAxisLabelsCoords(){let e=this.w,t=0,i=0,s=[],n=10;const a=new Zi(this.dCtx.ctx);return e.config.yaxis.map((l,c)=>{const d={seriesIndex:c,dataPointIndex:-1,w:e},p=e.globals.yAxisScale[c];let g=0;if(!a.isYAxisHidden(c)&&l.labels.show&&l.labels.minWidth!==void 0&&(g=l.labels.minWidth),!a.isYAxisHidden(c)&&l.labels.show&&p.result.length){let b=e.globals.yLabelFormatters[c],O=p.niceMin===Number.MIN_VALUE?0:p.niceMin,r=p.result.reduce((w,S)=>{var C,T;return((C=String(b(w,d)))==null?void 0:C.length)>((T=String(b(S,d)))==null?void 0:T.length)?w:S},O);r=b(r,d);let h=r;if((typeof r>"u"||r.length===0)&&(r=p.niceMax),e.globals.isBarHorizontal){n=0;let w=e.globals.labels.slice();r=R.getLargestStringFromArr(w),r=b(r,{seriesIndex:c,dataPointIndex:-1,w:e}),h=this.dCtx.dimHelpers.getLargestStringFromMultiArr(r,w)}let u=new Y(this.dCtx.ctx),m="rotate(".concat(l.labels.rotate," 0 0)"),y=u.getTextRects(r,l.labels.style.fontSize,l.labels.style.fontFamily,m,!1),v=y;r!==h&&(v=u.getTextRects(h,l.labels.style.fontSize,l.labels.style.fontFamily,m,!1)),s.push({width:(g>v.width||g>y.width?g:v.width>y.width?v.width:y.width)+n,height:v.height>y.height?v.height:y.height})}else s.push({width:t,height:i})}),s}getyAxisTitleCoords(){let e=this.w,t=[];return e.config.yaxis.map((i,s)=>{if(i.show&&i.title.text!==void 0){let n=new Y(this.dCtx.ctx),a="rotate(".concat(i.title.rotate," 0 0)"),l=n.getTextRects(i.title.text,i.title.style.fontSize,i.title.style.fontFamily,a,!1);t.push({width:l.width,height:l.height})}else t.push({width:0,height:0})}),t}getTotalYAxisWidth(){let e=this.w,t=0,i=0,s=0,n=e.globals.yAxisScale.length>1?10:0;const a=new Zi(this.dCtx.ctx),l=function(d){return e.globals.ignoreYAxisIndexes.indexOf(d)>-1},c=(d,p)=>{let g=e.config.yaxis[p].floating,b=0;d.width>0&&!g?(b=d.width+n,l(p)&&(b=b-d.width-n)):b=g||a.isYAxisHidden(p)?0:5,e.config.yaxis[p].opposite?s=s+b:i=i+b,t=t+b};return e.globals.yLabelsCoords.map((d,p)=>{c(d,p)}),e.globals.yTitleCoords.map((d,p)=>{c(d,p)}),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=s,t}}class MP{constructor(e){this.w=e.w,this.dCtx=e}gridPadForColumnsInNumericAxis(e){const t=this.w;if(t.globals.noData||t.globals.allSeriesCollapsed)return 0;const i=c=>c==="bar"||c==="rangeBar"||c==="candlestick"||c==="boxPlot",s=t.config.chart.type;let n=0,a=i(s)?t.config.series.length:1;if(t.globals.comboBarCount>0&&(a=t.globals.comboBarCount),t.globals.collapsedSeries.forEach(c=>{i(c.type)&&(a=a-1)}),t.config.chart.stacked&&(a=1),(i(s)||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&a>0){let c=0,d=Math.abs(t.globals.initialMaxX-t.globals.initialMinX);d<=3&&(d=t.globals.dataPoints),c=d/e;let p;t.globals.minXDiff&&t.globals.minXDiff/c>0&&(p=t.globals.minXDiff/c),p>e/2&&(p=p/2),n=p*parseInt(t.config.plotOptions.bar.columnWidth,10)/100,n<1&&(n=1),t.globals.barPadForNumericAxis=n}return n}gridPadFortitleSubtitle(){const e=this.w,t=e.globals;let i=this.dCtx.isSparkline||!e.globals.axisCharts?0:10;["title","subtitle"].forEach(l=>{e.config[l].text!==void 0?i+=e.config[l].margin:i+=this.dCtx.isSparkline||!e.globals.axisCharts?0:5}),e.config.legend.show&&e.config.legend.position==="bottom"&&!e.config.legend.floating&&!e.globals.axisCharts&&(i+=10);let n=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),a=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");t.gridHeight=t.gridHeight-n.height-a.height-i,t.translateY=t.translateY+n.height+a.height+i}setGridXPosForDualYAxis(e,t){let i=this.w;const s=new Zi(this.dCtx.ctx);i.config.yaxis.map((n,a)=>{i.globals.ignoreYAxisIndexes.indexOf(a)===-1&&!n.floating&&!s.isYAxisHidden(a)&&(n.opposite&&(i.globals.translateX=i.globals.translateX-(t[a].width+e[a].width)-parseInt(i.config.yaxis[a].labels.style.fontSize,10)/1.2-12),i.globals.translateX<2&&(i.globals.translateX=2))})}}class Ho{constructor(e){this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new LP(this),this.dimYAxis=new DP(this),this.dimXAxis=new NP(this),this.dimGrid=new MP(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}plotCoords(){let e=this.w,t=e.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&((e.config.markers.discrete.length>0||e.config.markers.size>0)&&Object.entries(this.gridPad).forEach(([s,n])=>{this.gridPad[s]=Math.max(n,this.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(e.config.stroke.width/2,this.gridPad.top),this.gridPad.bottom=Math.max(e.config.stroke.width/2,this.gridPad.bottom)),t.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),t.gridHeight=t.gridHeight-this.gridPad.top-this.gridPad.bottom,t.gridWidth=t.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;let i=this.dimGrid.gridPadForColumnsInNumericAxis(t.gridWidth);t.gridWidth=t.gridWidth-i*2,t.translateX=t.translateX+this.gridPad.left+this.xPadLeft+(i>0?i+4:0),t.translateY=t.translateY+this.gridPad.top}setDimensionsForAxisCharts(){let e=this.w,t=e.globals,i=this.dimYAxis.getyAxisLabelsCoords(),s=this.dimYAxis.getyAxisTitleCoords();e.globals.yLabelsCoords=[],e.globals.yTitleCoords=[],e.config.yaxis.map((O,r)=>{e.globals.yLabelsCoords.push({width:i[r].width,index:r}),e.globals.yTitleCoords.push({width:s[r].width,index:r})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();let n=this.dimXAxis.getxAxisLabelsCoords(),a=this.dimXAxis.getxAxisGroupLabelsCoords(),l=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(n,l,a),t.translateXAxisY=e.globals.rotateXLabels?this.xAxisHeight/8:-4,t.translateXAxisX=e.globals.rotateXLabels&&e.globals.isXNumeric&&e.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,e.globals.isBarHorizontal&&(t.rotateXLabels=!1,t.translateXAxisY=-1*(parseInt(e.config.xaxis.labels.style.fontSize,10)/1.5)),t.translateXAxisY=t.translateXAxisY+e.config.xaxis.labels.offsetY,t.translateXAxisX=t.translateXAxisX+e.config.xaxis.labels.offsetX;let c=this.yAxisWidth,d=this.xAxisHeight;t.xAxisLabelsHeight=this.xAxisHeight-l.height,t.xAxisGroupLabelsHeight=t.xAxisLabelsHeight-n.height,t.xAxisLabelsWidth=this.xAxisWidth,t.xAxisHeight=this.xAxisHeight;let p=10;(e.config.chart.type==="radar"||this.isSparkline)&&(c=0,d=t.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||e.config.chart.type==="treemap")&&(c=0,d=0,p=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(n);const g=()=>{t.translateX=c,t.gridHeight=t.svgHeight-this.lgRect.height-d-(!this.isSparkline&&e.config.chart.type!=="treemap"?e.globals.rotateXLabels?10:15:0),t.gridWidth=t.svgWidth-c};switch(e.config.xaxis.position==="top"&&(p=t.xAxisHeight-e.config.xaxis.axisTicks.height-5),e.config.legend.position){case"bottom":t.translateY=p,g();break;case"top":t.translateY=this.lgRect.height+p,g();break;case"left":t.translateY=p,t.translateX=this.lgRect.width+c,t.gridHeight=t.svgHeight-d-12,t.gridWidth=t.svgWidth-this.lgRect.width-c;break;case"right":t.translateY=p,t.translateX=c,t.gridHeight=t.svgHeight-d-12,t.gridWidth=t.svgWidth-this.lgRect.width-c-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(s,i),new _c(this.ctx).setYAxisXPosition(i,s)}setDimensionsForNonAxisCharts(){let e=this.w,t=e.globals,i=e.config,s=0;e.config.legend.show&&!e.config.legend.floating&&(s=20);const n=i.chart.type==="pie"||i.chart.type==="polarArea"||i.chart.type==="donut"?"pie":"radialBar";let a=i.plotOptions[n].offsetY,l=i.plotOptions[n].offsetX;if(!i.legend.show||i.legend.floating){t.gridHeight=t.svgHeight-i.grid.padding.left+i.grid.padding.right,t.gridWidth=t.gridHeight,t.translateY=a,t.translateX=l+(t.svgWidth-t.gridWidth)/2;return}switch(i.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=a-10,t.translateX=l+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+a+10,t.translateX=l+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-s,t.gridHeight=i.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=a,t.translateX=l+this.lgRect.width+s;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-s-5,t.gridHeight=i.chart.height!=="auto"?t.svgHeight:t.gridWidth,t.translateY=a,t.translateX=l+10;break;default:throw new Error("Legend position not supported")}}conditionalChecksForAxisCoords(e,t,i){const s=this.w,n=s.globals.hasXaxisGroups?2:1,a=i.height+e.height+t.height,l=s.globals.isMultiLineX?1.2:s.globals.LINE_HEIGHT_RATIO,c=s.globals.rotateXLabels?22:10,p=s.globals.rotateXLabels&&s.config.legend.position==="bottom"?10:0;this.xAxisHeight=a*l+n*c+p,this.xAxisWidth=e.width,this.xAxisHeight-t.height>s.config.xaxis.labels.maxHeight&&(this.xAxisHeight=s.config.xaxis.labels.maxHeight),s.config.xaxis.labels.minHeight&&this.xAxisHeight<s.config.xaxis.labels.minHeight&&(this.xAxisHeight=s.config.xaxis.labels.minHeight),s.config.xaxis.floating&&(this.xAxisHeight=0);let g=0,b=0;s.config.yaxis.forEach(O=>{g+=O.labels.minWidth,b+=O.labels.maxWidth}),this.yAxisWidth<g&&(this.yAxisWidth=g),this.yAxisWidth>b&&(this.yAxisWidth=b)}}let RP=class{constructor(e){this.w=e.w,this.lgCtx=e}getLegendStyles(){var n,a,l;let e=document.createElement("style");e.setAttribute("type","text/css");const t=((l=(a=(n=this.lgCtx.ctx)==null?void 0:n.opts)==null?void 0:a.chart)==null?void 0:l.nonce)||this.w.config.chart.nonce;t&&e.setAttribute("nonce",t);const i=`
      .apexcharts-legend {
        display: flex;
        overflow: auto;
        padding: 0 10px;
      }
      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {
        flex-wrap: wrap
      }
      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        flex-direction: column;
        bottom: 0;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        justify-content: flex-start;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
        justify-content: center;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
        justify-content: flex-end;
      }
      .apexcharts-legend-series {
        cursor: pointer;
        line-height: normal;
      }
      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{
        display: flex;
        align-items: center;
      }
      .apexcharts-legend-text {
        position: relative;
        font-size: 14px;
      }
      .apexcharts-legend-text *, .apexcharts-legend-marker * {
        pointer-events: none;
      }
      .apexcharts-legend-marker {
        position: relative;
        display: inline-block;
        cursor: pointer;
        margin-right: 3px;
        border-style: solid;
      }

      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{
        display: inline-block;
      }
      .apexcharts-legend-series.apexcharts-no-click {
        cursor: auto;
      }
      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {
        display: none !important;
      }
      .apexcharts-inactive-legend {
        opacity: 0.45;
      }`;let s=document.createTextNode(i);return e.appendChild(s),e}getLegendBBox(){let i=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),s=i.width;return{clwh:i.height,clww:s}}appendToForeignObject(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}toggleDataSeries(e,t){const i=this.w;if(i.globals.axisCharts||i.config.chart.type==="radialBar"){i.globals.resized=!0;let s=null,n=null;i.globals.risingSeries=[],i.globals.axisCharts?(s=i.globals.dom.baseEl.querySelector(`.apexcharts-series[data\\:realIndex='${e}']`),n=parseInt(s.getAttribute("data:realIndex"),10)):(s=i.globals.dom.baseEl.querySelector(`.apexcharts-series[rel='${e+1}']`),n=parseInt(s.getAttribute("rel"),10)-1),t?[{cs:i.globals.collapsedSeries,csi:i.globals.collapsedSeriesIndices},{cs:i.globals.ancillaryCollapsedSeries,csi:i.globals.ancillaryCollapsedSeriesIndices}].forEach(l=>{this.riseCollapsedSeries(l.cs,l.csi,n)}):this.hideSeries({seriesEl:s,realIndex:n})}else{let s=i.globals.dom.Paper.select(` .apexcharts-series[rel='${e+1}'] path`);const n=i.config.chart.type;if(n==="pie"||n==="polarArea"||n==="donut"){let a=i.config.plotOptions.pie.donut.labels;new Y(this.lgCtx.ctx).pathMouseDown(s.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(s.members[0].node,a)}s.fire("click")}}hideSeries({seriesEl:e,realIndex:t}){const i=this.w;let s=R.clone(i.config.series);if(i.globals.axisCharts){let a=i.config.yaxis[i.globals.seriesYAxisReverseMap[t]];if(a&&a.show&&a.showAlways)i.globals.ancillaryCollapsedSeriesIndices.indexOf(t)<0&&(i.globals.ancillaryCollapsedSeries.push({index:t,data:s[t].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),i.globals.ancillaryCollapsedSeriesIndices.push(t));else if(i.globals.collapsedSeriesIndices.indexOf(t)<0){i.globals.collapsedSeries.push({index:t,data:s[t].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),i.globals.collapsedSeriesIndices.push(t);let l=i.globals.risingSeries.indexOf(t);i.globals.risingSeries.splice(l,1)}}else i.globals.collapsedSeries.push({index:t,data:s[t]}),i.globals.collapsedSeriesIndices.push(t);let n=e.childNodes;for(let a=0;a<n.length;a++)n[a].classList.contains("apexcharts-series-markers-wrap")&&(n[a].classList.contains("apexcharts-hide")?n[a].classList.remove("apexcharts-hide"):n[a].classList.add("apexcharts-hide"));i.globals.allSeriesCollapsed=i.globals.collapsedSeries.length===i.config.series.length,s=this._getSeriesBasedOnCollapsedState(s),this.lgCtx.ctx.updateHelpers._updateSeries(s,i.config.chart.animations.dynamicAnimation.enabled)}riseCollapsedSeries(e,t,i){const s=this.w;let n=R.clone(s.config.series);if(e.length>0){for(let a=0;a<e.length;a++)e[a].index===i&&(s.globals.axisCharts?(n[i].data=e[a].data.slice(),e.splice(a,1),t.splice(a,1),s.globals.risingSeries.push(i)):(n[i]=e[a].data,e.splice(a,1),t.splice(a,1),s.globals.risingSeries.push(i)));n=this._getSeriesBasedOnCollapsedState(n),this.lgCtx.ctx.updateHelpers._updateSeries(n,s.config.chart.animations.dynamicAnimation.enabled)}}_getSeriesBasedOnCollapsedState(e){const t=this.w;return t.globals.axisCharts?e.forEach((i,s)=>{t.globals.collapsedSeriesIndices.indexOf(s)>-1&&(e[s].data=[])}):e.forEach((i,s)=>{t.globals.collapsedSeriesIndices.indexOf(s)>-1&&(e[s]=0)}),e}};class kg{constructor(e){this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new RP(this)}init(){const e=this.w,t=e.globals,i=e.config;if((i.legend.showForSingleSeries&&t.series.length===1||this.isBarsDistributed||t.series.length>1||!t.axisCharts)&&i.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),R.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),i.legend.position==="bottom"||i.legend.position==="top"?this.legendAlignHorizontal():(i.legend.position==="right"||i.legend.position==="left")&&this.legendAlignVertical()}}drawLegends(){var c;let e=this,t=this.w,i=t.config.legend.fontFamily,s=t.globals.seriesNames,n=t.globals.colors.slice();if(t.config.chart.type==="heatmap"){const d=t.config.plotOptions.heatmap.colorScale.ranges;s=d.map(p=>p.name?p.name:p.from+" - "+p.to),n=d.map(p=>p.color)}else this.isBarsDistributed&&(s=t.globals.labels.slice());t.config.legend.customLegendItems.length&&(s=t.config.legend.customLegendItems);let a=t.globals.legendFormatter,l=t.config.legend.inverseOrder;for(let d=l?s.length-1:0;l?d>=0:d<=s.length-1;l?d--:d++){let p=a(s[d],{seriesIndex:d,w:t}),g=!1,b=!1;if(t.globals.collapsedSeries.length>0)for(let N=0;N<t.globals.collapsedSeries.length;N++)t.globals.collapsedSeries[N].index===d&&(g=!0);if(t.globals.ancillaryCollapsedSeriesIndices.length>0)for(let N=0;N<t.globals.ancillaryCollapsedSeriesIndices.length;N++)t.globals.ancillaryCollapsedSeriesIndices[N]===d&&(b=!0);let O=document.createElement("span");O.classList.add("apexcharts-legend-marker");let r=t.config.legend.markers.offsetX,h=t.config.legend.markers.offsetY,u=t.config.legend.markers.height,m=t.config.legend.markers.width,y=t.config.legend.markers.strokeWidth,v=t.config.legend.markers.strokeColor,w=t.config.legend.markers.radius,S=O.style;S.background=n[d],S.color=n[d],S.setProperty("background",n[d],"important"),t.config.legend.markers.fillColors&&t.config.legend.markers.fillColors[d]&&(S.background=t.config.legend.markers.fillColors[d]),t.globals.seriesColors[d]!==void 0&&(S.background=t.globals.seriesColors[d],S.color=t.globals.seriesColors[d]),S.height=Array.isArray(u)?parseFloat(u[d])+"px":parseFloat(u)+"px",S.width=Array.isArray(m)?parseFloat(m[d])+"px":parseFloat(m)+"px",S.left=(Array.isArray(r)?parseFloat(r[d]):parseFloat(r))+"px",S.top=(Array.isArray(h)?parseFloat(h[d]):parseFloat(h))+"px",S.borderWidth=Array.isArray(y)?y[d]:y,S.borderColor=Array.isArray(v)?v[d]:v,S.borderRadius=Array.isArray(w)?parseFloat(w[d])+"px":parseFloat(w)+"px",t.config.legend.markers.customHTML&&(Array.isArray(t.config.legend.markers.customHTML)?t.config.legend.markers.customHTML[d]&&(O.innerHTML=t.config.legend.markers.customHTML[d]()):O.innerHTML=t.config.legend.markers.customHTML()),Y.setAttrs(O,{rel:d+1,"data:collapsed":g||b}),(g||b)&&O.classList.add("apexcharts-inactive-legend");let C=document.createElement("div"),T=document.createElement("span");T.classList.add("apexcharts-legend-text"),T.innerHTML=Array.isArray(p)?p.join(" "):p;let _=t.config.legend.labels.useSeriesColors?t.globals.colors[d]:Array.isArray(t.config.legend.labels.colors)?(c=t.config.legend.labels.colors)==null?void 0:c[d]:t.config.legend.labels.colors;_||(_=t.config.chart.foreColor),T.style.color=_,T.style.fontSize=parseFloat(t.config.legend.fontSize)+"px",T.style.fontWeight=t.config.legend.fontWeight,T.style.fontFamily=i||t.config.chart.fontFamily,Y.setAttrs(T,{rel:d+1,i:d,"data:default-text":encodeURIComponent(p),"data:collapsed":g||b}),C.appendChild(O),C.appendChild(T);const $=new Je(this.ctx);t.config.legend.showForZeroSeries||$.getSeriesTotalByIndex(d)===0&&$.seriesHaveSameValues(d)&&!$.isSeriesNull(d)&&t.globals.collapsedSeriesIndices.indexOf(d)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(d)===-1&&C.classList.add("apexcharts-hidden-zero-series"),t.config.legend.showForNullSeries||$.isSeriesNull(d)&&t.globals.collapsedSeriesIndices.indexOf(d)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(d)===-1&&C.classList.add("apexcharts-hidden-null-series"),t.globals.dom.elLegendWrap.appendChild(C),t.globals.dom.elLegendWrap.classList.add(`apexcharts-align-${t.config.legend.horizontalAlign}`),t.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+t.config.legend.position),C.classList.add("apexcharts-legend-series"),C.style.margin=`${t.config.legend.itemMargin.vertical}px ${t.config.legend.itemMargin.horizontal}px`,t.globals.dom.elLegendWrap.style.width=t.config.legend.width?t.config.legend.width+"px":"",t.globals.dom.elLegendWrap.style.height=t.config.legend.height?t.config.legend.height+"px":"",Y.setAttrs(C,{rel:d+1,seriesName:R.escapeString(s[d]),"data:collapsed":g||b}),(g||b)&&C.classList.add("apexcharts-inactive-legend"),t.config.legend.onItemClick.toggleDataSeries||C.classList.add("apexcharts-no-click")}t.globals.dom.elWrap.addEventListener("click",e.onLegendClick,!0),t.config.legend.onItemHover.highlightDataSeries&&t.config.legend.customLegendItems.length===0&&(t.globals.dom.elWrap.addEventListener("mousemove",e.onLegendHovered,!0),t.globals.dom.elWrap.addEventListener("mouseout",e.onLegendHovered,!0))}setLegendWrapXY(e,t){let i=this.w,s=i.globals.dom.elLegendWrap;const n=s.getBoundingClientRect();let a=0,l=0;if(i.config.legend.position==="bottom")l=l+(i.globals.svgHeight-n.height/2);else if(i.config.legend.position==="top"){const d=new Ho(this.ctx),p=d.dimHelpers.getTitleSubtitleCoords("title").height,g=d.dimHelpers.getTitleSubtitleCoords("subtitle").height;l=l+(p>0?p-10:0)+(g>0?g-10:0)}s.style.position="absolute",a=a+e+i.config.legend.offsetX,l=l+t+i.config.legend.offsetY,s.style.left=a+"px",s.style.top=l+"px",i.config.legend.position==="bottom"?(s.style.top="auto",s.style.bottom=5-i.config.legend.offsetY+"px"):i.config.legend.position==="right"&&(s.style.left="auto",s.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach(d=>{s.style[d]&&(s.style[d]=parseInt(i.config.legend[d],10)+"px")})}legendAlignHorizontal(){let e=this.w,t=e.globals.dom.elLegendWrap;t.style.right=0;let i=this.legendHelpers.getLegendBBox(),s=new Ho(this.ctx),n=s.dimHelpers.getTitleSubtitleCoords("title"),a=s.dimHelpers.getTitleSubtitleCoords("subtitle"),l=20,c=0;e.config.legend.position==="bottom"?c=-i.clwh/1.8:e.config.legend.position==="top"&&(c=n.height+a.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(l,c)}legendAlignVertical(){let e=this.w,t=this.legendHelpers.getLegendBBox(),i=20,s=0;e.config.legend.position==="left"&&(s=20),e.config.legend.position==="right"&&(s=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(s,i)}onLegendHovered(e){const t=this.w,i=e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if(t.config.chart.type!=="heatmap"&&!this.isBarsDistributed)!e.target.classList.contains("apexcharts-inactive-legend")&&i&&new zt(this.ctx).toggleSeriesOnHover(e,e.target);else if(i){let s=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,s,this.w]),new zt(this.ctx).highlightRangeInSeries(e,e.target)}}onLegendClick(e){const t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){let i=parseInt(e.target.getAttribute("rel"),10)-1,s=e.target.getAttribute("data:collapsed")==="true";const n=this.w.config.chart.events.legendClick;typeof n=="function"&&n(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);const a=this.w.config.legend.markers.onClick;typeof a=="function"&&e.target.classList.contains("apexcharts-legend-marker")&&(a(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),t.config.chart.type!=="treemap"&&t.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,s)}}}const IP="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCI+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBpZD0iYSIvPgogICAgPC9kZWZzPgogICAgPGNsaXBQYXRoIGlkPSJiIj4KICAgICAgICA8dXNlIG92ZXJmbG93PSJ2aXNpYmxlIiB4bGluazpocmVmPSIjYSIvPgogICAgPC9jbGlwUGF0aD4KICAgIDxwYXRoIGNsaXAtcGF0aD0idXJsKCNiKSIgZD0iTTIzIDUuNVYyMGMwIDIuMi0xLjggNC00IDRoLTcuM2MtMS4wOCAwLTIuMS0uNDMtMi44NS0xLjE5TDEgMTQuODNzMS4yNi0xLjIzIDEuMy0xLjI1Yy4yMi0uMTkuNDktLjI5Ljc5LS4yOS4yMiAwIC40Mi4wNi42LjE2LjA0LjAxIDQuMzEgMi40NiA0LjMxIDIuNDZWNGMwLS44My42Ny0xLjUgMS41LTEuNVMxMSAzLjE3IDExIDR2N2gxVjEuNWMwLS44My42Ny0xLjUgMS41LTEuNVMxNSAuNjcgMTUgMS41VjExaDFWMi41YzAtLjgzLjY3LTEuNSAxLjUtMS41czEuNS42NyAxLjUgMS41VjExaDFWNS41YzAtLjgzLjY3LTEuNSAxLjUtMS41czEuNS42NyAxLjUgMS41eiIvPgo8L3N2Zz4=",BP="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9IiMwMDAwMDAiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0Ij4KICAgIDxwYXRoIGQ9Ik0xNS41IDE0aC0uNzlsLS4yOC0uMjdDMTUuNDEgMTIuNTkgMTYgMTEuMTEgMTYgOS41IDE2IDUuOTEgMTMuMDkgMyA5LjUgM1MzIDUuOTEgMyA5LjUgNS45MSAxNiA5LjUgMTZjMS42MSAwIDMuMDktLjU5IDQuMjMtMS41N2wuMjcuMjh2Ljc5bDUgNC45OUwyMC40OSAxOWwtNC45OS01em0tNiAwQzcuMDEgMTQgNSAxMS45OSA1IDkuNVM3LjAxIDUgOS41IDUgMTQgNy4wMSAxNCA5LjUgMTEuOTkgMTQgOS41IDE0eiIvPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBkPSJNMTIgMTBoLTJ2Mkg5di0ySDdWOWgyVjdoMXYyaDJ2MXoiLz4KPC9zdmc+",QP="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0xMCAyMHYtNmg0djZoNXYtOGgzTDEyIDMgMiAxMmgzdjh6Ii8+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg==",VP="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik0xMyA3aC0ydjRIN3YyaDR2NGgydi00aDR2LTJoLTRWN3ptLTEtNUM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6Ii8+Cjwvc3ZnPgo=",FP="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik03IDExdjJoMTB2LTJIN3ptNS05QzYuNDggMiAyIDYuNDggMiAxMnM0LjQ4IDEwIDEwIDEwIDEwLTQuNDggMTAtMTBTMTcuNTIgMiAxMiAyem0wIDE4Yy00LjQxIDAtOC0zLjU5LTgtOHMzLjU5LTggOC04IDggMy41OSA4IDgtMy41OSA4LTggOHoiLz4KPC9zdmc+Cg==",WP="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjNkU4MTkyIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik0zIDVoMlYzYy0xLjEgMC0yIC45LTIgMnptMCA4aDJ2LTJIM3Yyem00IDhoMnYtMkg3djJ6TTMgOWgyVjdIM3Yyem0xMC02aC0ydjJoMlYzem02IDB2MmgyYzAtMS4xLS45LTItMi0yek01IDIxdi0ySDNjMCAxLjEuOSAyIDIgMnptLTItNGgydi0ySDN2MnpNOSAzSDd2MmgyVjN6bTIgMThoMnYtMmgtMnYyem04LThoMnYtMmgtMnYyem0wIDhjMS4xIDAgMi0uOSAyLTJoLTJ2MnptMC0xMmgyVjdoLTJ2MnptMCA4aDJ2LTJoLTJ2MnptLTQgNGgydi0yaC0ydjJ6bTAtMTZoMlYzaC0ydjJ6Ii8+Cjwvc3ZnPg==",zP="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDBWMHoiLz48cGF0aCBkPSJNMyAxOGgxOHYtMkgzdjJ6bTAtNWgxOHYtMkgzdjJ6bTAtN3YyaDE4VjZIM3oiLz48L3N2Zz4=";class Sg{constructor(e){this.ctx=e,this.w=e.w;const t=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=t.globals.minX,this.maxX=t.globals.maxX}createToolbar(){let e=this.w;const t=()=>document.createElement("div"),i=t();if(i.setAttribute("class","apexcharts-toolbar"),i.style.top=e.config.chart.toolbar.offsetY+"px",i.style.right=-e.config.chart.toolbar.offsetX+3+"px",e.globals.dom.elWrap.appendChild(i),this.elZoom=t(),this.elZoomIn=t(),this.elZoomOut=t(),this.elPan=t(),this.elSelection=t(),this.elZoomReset=t(),this.elMenuIcon=t(),this.elMenu=t(),this.elCustomIcons=[],this.t=e.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(let l=0;l<this.t.customIcons.length;l++)this.elCustomIcons.push(t());let s=[];const n=(l,c,d)=>{const p=l.toLowerCase();this.t[p]&&e.config.chart.zoom.enabled&&s.push({el:c,icon:typeof this.t[p]=="string"?this.t[p]:d,title:this.localeValues[l],class:`apexcharts-${p}-icon`})};n("zoomIn",this.elZoomIn,VP),n("zoomOut",this.elZoomOut,FP);const a=l=>{this.t[l]&&e.config.chart[l].enabled&&s.push({el:l==="zoom"?this.elZoom:this.elSelection,icon:typeof this.t[l]=="string"?this.t[l]:l==="zoom"?BP:WP,title:this.localeValues[l==="zoom"?"selectionZoom":"selection"],class:e.globals.isTouchDevice?"apexcharts-element-hidden":`apexcharts-${l}-icon`})};a("zoom"),a("selection"),this.t.pan&&e.config.chart.zoom.enabled&&s.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:IP,title:this.localeValues.pan,class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),n("reset",this.elZoomReset,QP),this.t.download&&s.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:zP,title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(let l=0;l<this.elCustomIcons.length;l++)s.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});s.forEach((l,c)=>{l.index&&R.moveIndexInArray(s,c,l.index)});for(let l=0;l<s.length;l++)Y.setAttrs(s[l].el,{class:s[l].class,title:s[l].title}),s[l].el.innerHTML=s[l].icon,i.appendChild(s[l].el);this._createHamburgerMenu(i),e.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):e.globals.panEnabled?this.elPan.classList.add(this.selectedClass):e.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}_createHamburgerMenu(e){this.elMenuItems=[],e.appendChild(this.elMenu),Y.setAttrs(this.elMenu,{class:"apexcharts-menu"});const t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];for(let i=0;i<t.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=t[i].title,Y.setAttrs(this.elMenuItems[i],{class:`apexcharts-menu-item ${t[i].name}`,title:t[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}addToolbarEventListeners(){this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(e=>{e.classList.contains("exportSVG")?e.addEventListener("click",this.handleDownload.bind(this,"svg")):e.classList.contains("exportPNG")?e.addEventListener("click",this.handleDownload.bind(this,"png")):e.classList.contains("exportCSV")&&e.addEventListener("click",this.handleDownload.bind(this,"csv"))});for(let e=0;e<this.t.customIcons.length;e++)this.elCustomIcons[e].addEventListener("click",this.t.customIcons[e].click.bind(this,this.ctx,this.ctx.w))}toggleZoomSelection(e){this.ctx.getSyncedCharts().forEach(i=>{i.ctx.toolbar.toggleOtherControls();let s=e==="selection"?i.ctx.toolbar.elSelection:i.ctx.toolbar.elZoom,n=e==="selection"?"selectionEnabled":"zoomEnabled";i.w.globals[n]=!i.w.globals[n],s.classList.contains(i.ctx.toolbar.selectedClass)?s.classList.remove(i.ctx.toolbar.selectedClass):s.classList.add(i.ctx.toolbar.selectedClass)})}getToolbarIconsReference(){const e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}enableZoomPanFromToolbar(e){this.toggleOtherControls(),e==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;const t=e==="pan"?this.elPan:this.elZoom,i=e==="pan"?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}togglePanning(){this.ctx.getSyncedCharts().forEach(t=>{t.ctx.toolbar.toggleOtherControls(),t.w.globals.panEnabled=!t.w.globals.panEnabled,t.ctx.toolbar.elPan.classList.contains(t.ctx.toolbar.selectedClass)?t.ctx.toolbar.elPan.classList.remove(t.ctx.toolbar.selectedClass):t.ctx.toolbar.elPan.classList.add(t.ctx.toolbar.selectedClass)})}toggleOtherControls(){const e=this.w;e.globals.panEnabled=!1,e.globals.zoomEnabled=!1,e.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(i=>{i&&i.classList.remove(this.selectedClass)})}handleZoomIn(){const e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);const t=(this.minX+this.maxX)/2;let i=(this.minX+t)/2,s=(this.maxX+t)/2;const n=this._getNewMinXMaxX(i,s);e.globals.disableZoomIn||this.zoomUpdateOptions(n.minX,n.maxX)}handleZoomOut(){const e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),e.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)return;const t=(this.minX+this.maxX)/2;let i=this.minX-(t-this.minX),s=this.maxX-(t-this.maxX);const n=this._getNewMinXMaxX(i,s);e.globals.disableZoomOut||this.zoomUpdateOptions(n.minX,n.maxX)}_getNewMinXMaxX(e,t){const i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(e):e,maxX:i?Math.floor(t):t}}zoomUpdateOptions(e,t){const i=this.w;if(e===void 0&&t===void 0){this.handleZoomReset();return}if(i.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=i.globals.dataPoints),t-e<2))return;let s={min:e,max:t};const n=this.getBeforeZoomRange(s);n&&(s=n.xaxis);let a={xaxis:s},l=R.clone(i.globals.initialConfig.yaxis);i.config.chart.group||(a.yaxis=l),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(a,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(s,l)}zoomCallback(e,t){typeof this.ev.zoomed=="function"&&this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t})}getBeforeZoomRange(e,t){let i=null;return typeof this.ev.beforeZoom=="function"&&(i=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),i}toggleMenu(){window.setTimeout(()=>{this.elMenu.classList.contains("apexcharts-menu-open")?this.elMenu.classList.remove("apexcharts-menu-open"):this.elMenu.classList.add("apexcharts-menu-open")},0)}handleDownload(e){const t=this.w,i=new Yo(this.ctx);switch(e){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter});break}}handleZoomReset(e){this.ctx.getSyncedCharts().forEach(i=>{let s=i.w;if(s.globals.lastXAxis.min=s.globals.initialConfig.xaxis.min,s.globals.lastXAxis.max=s.globals.initialConfig.xaxis.max,i.updateHelpers.revertDefaultAxisMinMax(),typeof s.config.chart.events.beforeResetZoom=="function"){const a=s.config.chart.events.beforeResetZoom(i,s);a&&i.updateHelpers.revertDefaultAxisMinMax(a)}typeof s.config.chart.events.zoomed=="function"&&i.ctx.toolbar.zoomCallback({min:s.config.xaxis.min,max:s.config.xaxis.max}),s.globals.zoomed=!1;let n=i.ctx.series.emptyCollapsedSeries(R.clone(s.globals.initialSeries));i.updateHelpers._updateSeries(n,s.config.chart.animations.dynamicAnimation.enabled)})}destroy(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}class XP extends Sg{constructor(e){super(e),this.ctx=e,this.w=e.w,this.dragged=!1,this.graphics=new Y(this.ctx),this.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],this.clientX=0,this.clientY=0,this.startX=0,this.endX=0,this.dragX=0,this.startY=0,this.endY=0,this.dragY=0,this.moveDirection="none"}init({xyRatios:e}){let t=this.w,i=this;this.xyRatios=e,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=t.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),t.globals.dom.elGraphical.add(this.zoomRect),t.globals.dom.elGraphical.add(this.selectionRect),t.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:t.globals.gridWidth,maxY:t.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):t.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:t.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=t.globals.dom.baseEl.querySelector(`${t.globals.chartClass} .apexcharts-svg`),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(s=>{this.hoverArea.addEventListener(s,i.svgMouseEvents.bind(i,e),{capture:!1,passive:!0})})}destroy(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}svgMouseEvents(e,t){let i=this.w,s=this;const n=this.ctx.toolbar;let a=i.globals.zoomEnabled?i.config.chart.zoom.type:i.config.chart.selection.type;const l=i.config.chart.toolbar.autoSelected;if(t.shiftKey?(this.shiftWasPressed=!0,n.enableZoomPanFromToolbar(l==="pan"?"zoom":"pan")):this.shiftWasPressed&&(n.enableZoomPanFromToolbar(l),this.shiftWasPressed=!1),!t.target)return;const c=t.target.classList;let d;if(t.target.parentNode&&t.target.parentNode!==null&&(d=t.target.parentNode.classList),!(c.contains("apexcharts-selection-rect")||c.contains("apexcharts-legend-marker")||c.contains("apexcharts-legend-text")||d&&d.contains("apexcharts-toolbar"))){if(s.clientX=t.type==="touchmove"||t.type==="touchstart"?t.touches[0].clientX:t.type==="touchend"?t.changedTouches[0].clientX:t.clientX,s.clientY=t.type==="touchmove"||t.type==="touchstart"?t.touches[0].clientY:t.type==="touchend"?t.changedTouches[0].clientY:t.clientY,(t.type==="mousedown"||t.type==="touchmove")&&t.which===1){let g=s.gridRect.getBoundingClientRect();s.startX=s.clientX-g.left,s.startY=s.clientY-g.top,s.dragged=!1,s.w.globals.mousedown=!0}if(t.type==="mousemove"&&t.which===1||t.type==="touchmove")if(s.dragged=!0,i.globals.panEnabled){if(i.globals.selection=null,s.w.globals.mousedown||t.type==="touchmove"){if(t.type==="touchmove"&&!s.w.globals.mousedown){console.warn("me.w.globals.mousedown ",s.w.globals.mousedown);let g=s.gridRect.getBoundingClientRect();s.startX=s.clientX-g.left,s.startY=s.clientY-g.top,s.w.globals.mousedown=!0}s.panDragging({context:s,zoomtype:a,xyRatios:e})}}else{if(t.type==="touchmove"){if(!s.w.globals.mousedown){let g=s.gridRect.getBoundingClientRect();s.startX=s.clientX-g.left,s.startY=s.clientY-g.top}s.w.globals.mousedown=!0}(s.w.globals.mousedown&&i.globals.zoomEnabled||s.w.globals.mousedown&&i.globals.selectionEnabled)&&(s.selection=s.selectionDrawing({context:s,zoomtype:a}))}if(t.type==="mouseup"||t.type==="touchend"||t.type==="mouseleave"){let g=s.gridRect.getBoundingClientRect();s.w.globals.mousedown&&(s.endX=s.clientX-g.left,s.endY=s.clientY-g.top,s.dragX=Math.abs(s.endX-s.startX),s.dragY=Math.abs(s.endY-s.startY),(i.globals.zoomEnabled||i.globals.selectionEnabled)&&s.selectionDrawn({context:s,zoomtype:a}),i.globals.panEnabled&&i.config.xaxis.convertedCatToNumeric&&s.delayedPanScrolled()),i.globals.zoomEnabled&&s.hideSelectionRect(this.selectionRect),s.dragged=!1,s.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}makeSelectionRectDraggable(){const e=this.w;if(!this.selectionRect)return;const t=this.selectionRect.node.getBoundingClientRect();t.width>0&&t.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:e.globals.gridWidth,maxY:e.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}preselectedSelection(){const e=this.w,t=this.xyRatios;if(!e.globals.zoomEnabled){if(typeof e.globals.selection<"u"&&e.globals.selection!==null)this.drawSelectionRect(e.globals.selection);else if(e.config.chart.selection.xaxis.min!==void 0&&e.config.chart.selection.xaxis.max!==void 0){let i=(e.config.chart.selection.xaxis.min-e.globals.minX)/t.xRatio,s=e.globals.gridWidth-(e.globals.maxX-e.config.chart.selection.xaxis.max)/t.xRatio-i;e.globals.isRangeBar&&(i=(e.config.chart.selection.xaxis.min-e.globals.yAxisScale[0].niceMin)/t.invertedYRatio,s=(e.config.chart.selection.xaxis.max-e.config.chart.selection.xaxis.min)/t.invertedYRatio);let n={x:i,y:0,width:s,height:e.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(n),this.makeSelectionRectDraggable(),typeof e.config.chart.events.selection=="function"&&e.config.chart.events.selection(this.ctx,{xaxis:{min:e.config.chart.selection.xaxis.min,max:e.config.chart.selection.xaxis.max},yaxis:{}})}}}drawSelectionRect({x:e,y:t,width:i,height:s,translateX:n=0,translateY:a=0}){const l=this.w,c=this.zoomRect,d=this.selectionRect;if(this.dragged||l.globals.selection!==null){let p={transform:"translate("+n+", "+a+")"};l.globals.zoomEnabled&&this.dragged&&(i<0&&(i=1),c.attr({x:e,y:t,width:i,height:s,fill:l.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":l.config.chart.zoom.zoomedArea.fill.opacity,stroke:l.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":l.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":l.config.chart.zoom.zoomedArea.stroke.opacity}),Y.setAttrs(c.node,p)),l.globals.selectionEnabled&&(d.attr({x:e,y:t,width:i>0?i:0,height:s>0?s:0,fill:l.config.chart.selection.fill.color,"fill-opacity":l.config.chart.selection.fill.opacity,stroke:l.config.chart.selection.stroke.color,"stroke-width":l.config.chart.selection.stroke.width,"stroke-dasharray":l.config.chart.selection.stroke.dashArray,"stroke-opacity":l.config.chart.selection.stroke.opacity}),Y.setAttrs(d.node,p))}}hideSelectionRect(e){e&&e.attr({x:0,y:0,width:0,height:0})}selectionDrawing({context:e,zoomtype:t}){const i=this.w;let s=e,n=this.gridRect.getBoundingClientRect(),a=s.startX-1,l=s.startY,c=!1,d=!1,p=s.clientX-n.left-a,g=s.clientY-n.top-l,b={};return Math.abs(p+a)>i.globals.gridWidth?p=i.globals.gridWidth-a:s.clientX-n.left<0&&(p=a),a>s.clientX-n.left&&(c=!0,p=Math.abs(p)),l>s.clientY-n.top&&(d=!0,g=Math.abs(g)),t==="x"?b={x:c?a-p:a,y:0,width:p,height:i.globals.gridHeight}:t==="y"?b={x:0,y:d?l-g:l,width:i.globals.gridWidth,height:g}:b={x:c?a-p:a,y:d?l-g:l,width:p,height:g},s.drawSelectionRect(b),s.selectionDragging("resizing"),b}selectionDragging(e,t){const i=this.w,s=this.xyRatios,n=this.selectionRect;let a=0;e==="resizing"&&(a=30);const l=d=>parseFloat(n.node.getAttribute(d)),c={x:l("x"),y:l("y"),width:l("width"),height:l("height")};i.globals.selection=c,typeof i.config.chart.events.selection=="function"&&i.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(()=>{const d=this.gridRect.getBoundingClientRect(),p=n.node.getBoundingClientRect();let g,b,O,r;i.globals.isRangeBar?(g=i.globals.yAxisScale[0].niceMin+(p.left-d.left)*s.invertedYRatio,b=i.globals.yAxisScale[0].niceMin+(p.right-d.left)*s.invertedYRatio,O=0,r=1):(g=i.globals.xAxisScale.niceMin+(p.left-d.left)*s.xRatio,b=i.globals.xAxisScale.niceMin+(p.right-d.left)*s.xRatio,O=i.globals.yAxisScale[0].niceMin+(d.bottom-p.bottom)*s.yRatio[0],r=i.globals.yAxisScale[0].niceMax-(p.top-d.top)*s.yRatio[0]);const h={xaxis:{min:g,max:b},yaxis:{min:O,max:r}};i.config.chart.events.selection(this.ctx,h),i.config.chart.brush.enabled&&i.config.chart.events.brushScrolled!==void 0&&i.config.chart.events.brushScrolled(this.ctx,h)},a))}selectionDrawn({context:e,zoomtype:t}){const i=this.w,s=e,n=this.xyRatios,a=this.ctx.toolbar;if(s.startX>s.endX){let g=s.startX;s.startX=s.endX,s.endX=g}if(s.startY>s.endY){let g=s.startY;s.startY=s.endY,s.endY=g}let l,c;i.globals.isRangeBar?(l=i.globals.yAxisScale[0].niceMin+s.startX*n.invertedYRatio,c=i.globals.yAxisScale[0].niceMin+s.endX*n.invertedYRatio):(l=i.globals.xAxisScale.niceMin+s.startX*n.xRatio,c=i.globals.xAxisScale.niceMin+s.endX*n.xRatio);let d=[],p=[];if(i.config.yaxis.forEach((g,b)=>{let O=i.globals.seriesYAxisMap[b][0];d.push(i.globals.yAxisScale[b].niceMax-n.yRatio[O]*s.startY),p.push(i.globals.yAxisScale[b].niceMax-n.yRatio[O]*s.endY)}),s.dragged&&(s.dragX>10||s.dragY>10)&&l!==c){if(i.globals.zoomEnabled){let g=R.clone(i.globals.initialConfig.yaxis),b=R.clone(i.globals.initialConfig.xaxis);if(i.globals.zoomed=!0,i.config.xaxis.convertedCatToNumeric&&(l=Math.floor(l),c=Math.floor(c),l<1&&(l=1,c=i.globals.dataPoints),c-l<2&&(c=l+1)),(t==="xy"||t==="x")&&(b={min:l,max:c}),(t==="xy"||t==="y")&&g.forEach((r,h)=>{g[h].min=p[h],g[h].max=d[h]}),a){let r=a.getBeforeZoomRange(b,g);r&&(b=r.xaxis?r.xaxis:b,g=r.yaxis?r.yaxis:g)}let O={xaxis:b};i.config.chart.group||(O.yaxis=g),s.ctx.updateHelpers._updateOptions(O,!1,s.w.config.chart.animations.dynamicAnimation.enabled),typeof i.config.chart.events.zoomed=="function"&&a.zoomCallback(b,g)}else if(i.globals.selectionEnabled){let g=null,b=null;b={min:l,max:c},(t==="xy"||t==="y")&&(g=R.clone(i.config.yaxis),g.forEach((O,r)=>{g[r].min=p[r],g[r].max=d[r]})),i.globals.selection=s.selection,typeof i.config.chart.events.selection=="function"&&i.config.chart.events.selection(s.ctx,{xaxis:b,yaxis:g})}}}panDragging({context:e}){const t=this.w;let i=e;if(typeof t.globals.lastClientPosition.x<"u"){const a=t.globals.lastClientPosition.x-i.clientX,l=t.globals.lastClientPosition.y-i.clientY;Math.abs(a)>Math.abs(l)&&a>0?this.moveDirection="left":Math.abs(a)>Math.abs(l)&&a<0?this.moveDirection="right":Math.abs(l)>Math.abs(a)&&l>0?this.moveDirection="up":Math.abs(l)>Math.abs(a)&&l<0&&(this.moveDirection="down")}t.globals.lastClientPosition={x:i.clientX,y:i.clientY};let s=t.globals.isRangeBar?t.globals.minY:t.globals.minX,n=t.globals.isRangeBar?t.globals.maxY:t.globals.maxX;t.config.xaxis.convertedCatToNumeric||i.panScrolled(s,n)}delayedPanScrolled(){const e=this.w;let t=e.globals.minX,i=e.globals.maxX;const s=(e.globals.maxX-e.globals.minX)/2;this.moveDirection==="left"?(t=e.globals.minX+s,i=e.globals.maxX+s):this.moveDirection==="right"&&(t=e.globals.minX-s,i=e.globals.maxX-s),t=Math.floor(t),i=Math.floor(i),this.updateScrolledChart({xaxis:{min:t,max:i}},t,i)}panScrolled(e,t){const i=this.w,s=this.xyRatios;let n=R.clone(i.globals.initialConfig.yaxis),a=s.xRatio,l=i.globals.minX,c=i.globals.maxX;i.globals.isRangeBar&&(a=s.invertedYRatio,l=i.globals.minY,c=i.globals.maxY),this.moveDirection==="left"?(e=l+i.globals.gridWidth/15*a,t=c+i.globals.gridWidth/15*a):this.moveDirection==="right"&&(e=l-i.globals.gridWidth/15*a,t=c-i.globals.gridWidth/15*a),i.globals.isRangeBar||(e<i.globals.initialMinX||t>i.globals.initialMaxX)&&(e=l,t=c);let d={xaxis:{min:e,max:t}};i.config.chart.group||(d.yaxis=n),this.updateScrolledChart(d,e,t)}updateScrolledChart(e,t,i){const s=this.w;this.ctx.updateHelpers._updateOptions(e,!1,!1),typeof s.config.chart.events.scrolled=="function"&&s.config.chart.events.scrolled(this.ctx,{xaxis:{min:t,max:i}})}}class Cg{constructor(e){this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}getNearestValues({hoverArea:e,elGrid:t,clientX:i,clientY:s}){let n=this.w;const a=t.getBoundingClientRect(),l=a.width,c=a.height;let d=l/(n.globals.dataPoints-1),p=c/n.globals.dataPoints;const g=this.hasBars();(n.globals.comboCharts||g)&&!n.config.xaxis.convertedCatToNumeric&&(d=l/n.globals.dataPoints);let b=i-a.left-n.globals.barPadForNumericAxis,O=s-a.top;b<0||O<0||b>l||O>c?(e.classList.remove("hovering-zoom"),e.classList.remove("hovering-pan")):n.globals.zoomEnabled?(e.classList.remove("hovering-pan"),e.classList.add("hovering-zoom")):n.globals.panEnabled&&(e.classList.remove("hovering-zoom"),e.classList.add("hovering-pan"));let h=Math.round(b/d),u=Math.floor(O/p);g&&!n.config.xaxis.convertedCatToNumeric&&(h=Math.ceil(b/d),h=h-1);let m=null,y=null,v=n.globals.seriesXvalues.map(S=>S.filter(C=>R.isNumber(C))),w=n.globals.seriesYvalues.map(S=>S.filter(C=>R.isNumber(C)));if(n.globals.isXNumeric){const C=this.ttCtx.getElGrid().getBoundingClientRect(),T=b*(C.width/l),_=O*(C.height/c);y=this.closestInMultiArray(T,_,v,w),m=y.index,h=y.j,m!==null&&(v=n.globals.seriesXvalues[m],y=this.closestInArray(T,v),h=y.index)}return n.globals.capturedSeriesIndex=m===null?-1:m,(!h||h<1)&&(h=0),n.globals.isBarHorizontal?n.globals.capturedDataPointIndex=u:n.globals.capturedDataPointIndex=h,{capturedSeries:m,j:n.globals.isBarHorizontal?u:h,hoverX:b,hoverY:O}}closestInMultiArray(e,t,i,s){let n=this.w,a=0,l=null,c=-1;n.globals.series.length>1?a=this.getFirstActiveXArray(i):l=0;let d=i[a][0],p=Math.abs(e-d);if(i.forEach(g=>{g.forEach((b,O)=>{const r=Math.abs(e-b);r<=p&&(p=r,c=O)})}),c!==-1){let g=s[a][c],b=Math.abs(t-g);l=a,s.forEach((O,r)=>{const h=Math.abs(t-O[c]);h<=b&&(b=h,l=r)})}return{index:l,j:c}}getFirstActiveXArray(e){const t=this.w;let i=0,s=e.map((n,a)=>n.length>0?a:-1);for(let n=0;n<s.length;n++)if(s[n]!==-1&&t.globals.collapsedSeriesIndices.indexOf(n)===-1&&t.globals.ancillaryCollapsedSeriesIndices.indexOf(n)===-1){i=s[n];break}return i}closestInArray(e,t){let i=t[0],s=null,n=Math.abs(e-i);for(let a=0;a<t.length;a++){let l=Math.abs(e-t[a]);l<n&&(n=l,s=a)}return{index:s}}isXoverlap(e){let t=this.w,i=[];const s=t.globals.seriesX.filter(n=>typeof n[0]<"u");if(s.length>0)for(let n=0;n<s.length-1;n++)typeof s[n][e]<"u"&&typeof s[n+1][e]<"u"&&s[n][e]!==s[n+1][e]&&i.push("unEqual");return i.length===0}isInitialSeriesSameLen(){let e=!0;const t=this.w.globals.initialSeries;for(let i=0;i<t.length-1;i++)if(t[i].data.length!==t[i+1].data.length){e=!1;break}return e}getBarsHeight(e){return[...e].reduce((s,n)=>s+n.getBBox().height,0)}getElMarkers(e){return typeof e=="number"?this.w.globals.dom.baseEl.querySelectorAll(`.apexcharts-series[data\\:realIndex='${e}'] .apexcharts-series-markers-wrap > *`):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}getAllMarkers(){let e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");e=[...e],e.sort((i,s)=>{var n=Number(i.getAttribute("data:realIndex")),a=Number(s.getAttribute("data:realIndex"));return a<n?1:a>n?-1:0});let t=[];return e.forEach(i=>{t.push(i.querySelector(".apexcharts-marker"))}),t}hasMarkers(e){return this.getElMarkers(e).length>0}getElBars(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}hasBars(){return this.getElBars().length>0}getHoverMarkerSize(e){const t=this.w;let i=t.config.markers.hover.size;return i===void 0&&(i=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),i}toggleAllTooltipSeriesGroups(e){let t=this.w;const i=this.ttCtx;i.allTooltipSeriesGroups.length===0&&(i.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));let s=i.allTooltipSeriesGroups;for(let n=0;n<s.length;n++)e==="enable"?(s[n].classList.add("apexcharts-active"),s[n].style.display=t.config.tooltip.items.display):(s[n].classList.remove("apexcharts-active"),s[n].style.display="none")}}class YP{constructor(e){this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new Cg(e)}drawSeriesTexts({shared:e=!0,ttItems:t,i=0,j:s=null,y1:n,y2:a,e:l}){let c=this.w;c.config.tooltip.custom!==void 0?this.handleCustomTooltip({i,j:s,y1:n,y2:a,w:c}):this.toggleActiveInactiveSeries(e);let d=this.getValuesToPrint({i,j:s});this.printLabels({i,j:s,values:d,ttItems:t,shared:e,e:l});const p=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=p.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=p.getBoundingClientRect().height}printLabels({i:e,j:t,values:i,ttItems:s,shared:n,e:a}){var u;const l=this.w;let c,d=[];const p=m=>l.globals.seriesGoals[m]&&l.globals.seriesGoals[m][t]&&Array.isArray(l.globals.seriesGoals[m][t]),{xVal:g,zVal:b,xAxisTTVal:O}=i;let r="",h=l.globals.colors[e];t!==null&&l.config.plotOptions.bar.distributed&&(h=l.globals.colors[t]);for(let m=0,y=l.globals.series.length-1;m<l.globals.series.length;m++,y--){let v=this.getFormatters(e);r=this.getSeriesName({fn:v.yLbTitleFormatter,index:e,seriesIndex:e,j:t}),l.config.chart.type==="treemap"&&(r=v.yLbTitleFormatter(String(l.config.series[e].data[t].x),{series:l.globals.series,seriesIndex:e,dataPointIndex:t,w:l}));const w=l.config.tooltip.inverseOrder?y:m;if(l.globals.axisCharts){const S=C=>{var T,_,$,N;return l.globals.isRangeData?v.yLbFormatter((_=(T=l.globals.seriesRangeStart)==null?void 0:T[C])==null?void 0:_[t],{series:l.globals.seriesRangeStart,seriesIndex:C,dataPointIndex:t,w:l})+" - "+v.yLbFormatter((N=($=l.globals.seriesRangeEnd)==null?void 0:$[C])==null?void 0:N[t],{series:l.globals.seriesRangeEnd,seriesIndex:C,dataPointIndex:t,w:l}):v.yLbFormatter(l.globals.series[C][t],{series:l.globals.series,seriesIndex:C,dataPointIndex:t,w:l})};if(n)v=this.getFormatters(w),r=this.getSeriesName({fn:v.yLbTitleFormatter,index:w,seriesIndex:e,j:t}),h=l.globals.colors[w],c=S(w),p(w)&&(d=l.globals.seriesGoals[w][t].map(C=>({attrs:C,val:v.yLbFormatter(C.value,{seriesIndex:w,dataPointIndex:t,w:l})})));else{const C=(u=a==null?void 0:a.target)==null?void 0:u.getAttribute("fill");C&&(h=C.indexOf("url")!==-1?document.querySelector(C.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):C),c=S(e),p(e)&&Array.isArray(l.globals.seriesGoals[e][t])&&(d=l.globals.seriesGoals[e][t].map(T=>({attrs:T,val:v.yLbFormatter(T.value,{seriesIndex:e,dataPointIndex:t,w:l})})))}}t===null&&(c=v.yLbFormatter(l.globals.series[e],{...l,seriesIndex:e,dataPointIndex:e})),this.DOMHandling({i:e,t:w,j:t,ttItems:s,values:{val:c,goalVals:d,xVal:g,xAxisTTVal:O,zVal:b},seriesName:r,shared:n,pColor:h})}}getFormatters(e){const t=this.w;let i=t.globals.yLabelFormatters[e],s;return t.globals.ttVal!==void 0?Array.isArray(t.globals.ttVal)?(i=t.globals.ttVal[e]&&t.globals.ttVal[e].formatter,s=t.globals.ttVal[e]&&t.globals.ttVal[e].title&&t.globals.ttVal[e].title.formatter):(i=t.globals.ttVal.formatter,typeof t.globals.ttVal.title.formatter=="function"&&(s=t.globals.ttVal.title.formatter)):s=t.config.tooltip.y.title.formatter,typeof i!="function"&&(t.globals.yLabelFormatters[0]?i=t.globals.yLabelFormatters[0]:i=function(n){return n}),typeof s!="function"&&(s=function(n){return n}),{yLbFormatter:i,yLbTitleFormatter:s}}getSeriesName({fn:e,index:t,seriesIndex:i,j:s}){const n=this.w;return e(String(n.globals.seriesNames[t]),{series:n.globals.series,seriesIndex:i,dataPointIndex:s,w:n})}DOMHandling({i:e,t,j:i,ttItems:s,values:n,seriesName:a,shared:l,pColor:c}){const d=this.w,p=this.ttCtx,{val:g,goalVals:b,xVal:O,xAxisTTVal:r,zVal:h}=n;let u=null;u=s[t].children,d.config.tooltip.fillSeriesColor&&(s[t].style.backgroundColor=c,u[0].style.display="none"),p.showTooltipTitle&&(p.tooltipTitle===null&&(p.tooltipTitle=d.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),p.tooltipTitle.innerHTML=O),p.isXAxisTooltipEnabled&&(p.xaxisTooltipText.innerHTML=r!==""?r:O);const m=s[t].querySelector(".apexcharts-tooltip-text-y-label");m&&(m.innerHTML=a||"");const y=s[t].querySelector(".apexcharts-tooltip-text-y-value");y&&(y.innerHTML=typeof g<"u"?g:""),u[0]&&u[0].classList.contains("apexcharts-tooltip-marker")&&(d.config.tooltip.marker.fillColors&&Array.isArray(d.config.tooltip.marker.fillColors)&&(c=d.config.tooltip.marker.fillColors[t]),u[0].style.backgroundColor=c),d.config.tooltip.marker.show||(u[0].style.display="none");const v=s[t].querySelector(".apexcharts-tooltip-text-goals-label"),w=s[t].querySelector(".apexcharts-tooltip-text-goals-value");if(b.length&&d.globals.seriesGoals[t]){const S=()=>{let C="<div >",T="<div>";b.forEach((_,$)=>{C+=` <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: ${_.attrs.strokeColor}; height: 3px; border-radius: 0; top: 5px;"></span> ${_.attrs.name}</div>`,T+=`<div>${_.val}</div>`}),v.innerHTML=C+"</div>",w.innerHTML=T+"</div>"};l?d.globals.seriesGoals[t][i]&&Array.isArray(d.globals.seriesGoals[t][i])?S():(v.innerHTML="",w.innerHTML=""):S()}else v.innerHTML="",w.innerHTML="";if(h!==null){const S=s[t].querySelector(".apexcharts-tooltip-text-z-label");S.innerHTML=d.config.tooltip.z.title;const C=s[t].querySelector(".apexcharts-tooltip-text-z-value");C.innerHTML=typeof h<"u"?h:""}if(l&&u[0]){if(d.config.tooltip.hideEmptySeries){let S=s[t].querySelector(".apexcharts-tooltip-marker"),C=s[t].querySelector(".apexcharts-tooltip-text");parseFloat(g)==0?(S.style.display="none",C.style.display="none"):(S.style.display="block",C.style.display="block")}typeof g>"u"||g===null||d.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||d.globals.collapsedSeriesIndices.indexOf(t)>-1?u[0].parentNode.style.display="none":u[0].parentNode.style.display=d.config.tooltip.items.display}}toggleActiveInactiveSeries(e){const t=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");let i=t.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");i&&(i.classList.add("apexcharts-active"),i.style.display=t.config.tooltip.items.display)}}getValuesToPrint({i:e,j:t}){const i=this.w,s=this.ctx.series.filteredSeriesX();let n="",a="",l=null,c=null;const d={series:i.globals.series,seriesIndex:e,dataPointIndex:t,w:i};let p=i.globals.ttZFormatter;if(t===null)c=i.globals.series[e];else if(i.globals.isXNumeric&&i.config.chart.type!=="treemap"){if(n=s[e][t],s[e].length===0){const b=this.tooltipUtil.getFirstActiveXArray(s);n=s[b][t]}}else n=typeof i.globals.labels[t]<"u"?i.globals.labels[t]:"";let g=n;return i.globals.isXNumeric&&i.config.xaxis.type==="datetime"?n=new Or(this.ctx).xLabelFormat(i.globals.ttKeyFormatter,g,g,{i:void 0,dateFormatter:new at(this.ctx).formatDate,w:this.w}):i.globals.isBarHorizontal?n=i.globals.yLabelFormatters[0](g,d):n=i.globals.xLabelFormatter(g,d),i.config.tooltip.x.formatter!==void 0&&(n=i.globals.ttKeyFormatter(g,d)),i.globals.seriesZ.length>0&&i.globals.seriesZ[e].length>0&&(l=p(i.globals.seriesZ[e][t],i)),typeof i.config.xaxis.tooltip.formatter=="function"?a=i.globals.xaxisTooltipFormatter(g,d):a=n,{val:Array.isArray(c)?c.join(" "):c,xVal:Array.isArray(n)?n.join(" "):n,xAxisTTVal:Array.isArray(a)?a.join(" "):a,zVal:l}}handleCustomTooltip({i:e,j:t,y1:i,y2:s,w:n}){const a=this.ttCtx.getElTooltip();let l=n.config.tooltip.custom;Array.isArray(l)&&l[e]&&(l=l[e]),a.innerHTML=l({ctx:this.ctx,series:n.globals.series,seriesIndex:e,dataPointIndex:t,y1:i,y2:s,w:n})}}class _g{constructor(e){this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}moveXCrosshairs(e,t=null){const i=this.ttCtx;let s=this.w;const n=i.getElXCrosshairs();let a=e-i.xcrosshairsWidth/2,l=s.globals.labels.slice().length;if(t!==null&&(a=s.globals.gridWidth/l*t),n!==null&&!s.globals.isBarHorizontal&&(n.setAttribute("x",a),n.setAttribute("x1",a),n.setAttribute("x2",a),n.setAttribute("y2",s.globals.gridHeight),n.classList.add("apexcharts-active")),a<0&&(a=0),a>s.globals.gridWidth&&(a=s.globals.gridWidth),i.isXAxisTooltipEnabled){let c=a;(s.config.xaxis.crosshairs.width==="tickWidth"||s.config.xaxis.crosshairs.width==="barWidth")&&(c=a+i.xcrosshairsWidth/2),this.moveXAxisTooltip(c)}}moveYCrosshairs(e){const t=this.ttCtx;t.ycrosshairs!==null&&Y.setAttrs(t.ycrosshairs,{y1:e,y2:e}),t.ycrosshairsHidden!==null&&Y.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}moveXAxisTooltip(e){let t=this.w;const i=this.ttCtx;if(i.xaxisTooltip!==null&&i.xcrosshairsWidth!==0){i.xaxisTooltip.classList.add("apexcharts-active");let s=i.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY,a=i.xaxisTooltip.getBoundingClientRect().width;if(e=e-a/2,!isNaN(e)){e=e+t.globals.translateX;let l=0;l=new Y(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=l.width+"px",i.xaxisTooltip.style.left=e+"px",i.xaxisTooltip.style.top=s+"px"}}}moveYAxisTooltip(e){const t=this.w,i=this.ttCtx;i.yaxisTTEls===null&&(i.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));const s=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10);let n=t.globals.translateY+s;const l=i.yaxisTTEls[e].getBoundingClientRect().height;let c=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(c=c-26),n=n-l/2,t.globals.ignoreYAxisIndexes.indexOf(e)===-1?(i.yaxisTTEls[e].classList.add("apexcharts-active"),i.yaxisTTEls[e].style.top=n+"px",i.yaxisTTEls[e].style.left=c+t.config.yaxis[e].tooltip.offsetX+"px"):i.yaxisTTEls[e].classList.remove("apexcharts-active")}moveTooltip(e,t,i=null){let s=this.w,n=this.ttCtx;const a=n.getElTooltip();let l=n.tooltipRect,c=i!==null?parseFloat(i):1,d=parseFloat(e)+c+5,p=parseFloat(t)+c/2;if(d>s.globals.gridWidth/2&&(d=d-l.ttWidth-c-10),d>s.globals.gridWidth-l.ttWidth-10&&(d=s.globals.gridWidth-l.ttWidth),d<-20&&(d=-20),s.config.tooltip.followCursor){const b=n.getElGrid().getBoundingClientRect();d=n.e.clientX-b.left,d>s.globals.gridWidth/2&&(d=d-n.tooltipRect.ttWidth),p=n.e.clientY+s.globals.translateY-b.top,p>s.globals.gridHeight/2&&(p=p-n.tooltipRect.ttHeight)}else s.globals.isBarHorizontal||l.ttHeight/2+p>s.globals.gridHeight&&(p=s.globals.gridHeight-l.ttHeight+s.globals.translateY);isNaN(d)||(d=d+s.globals.translateX,a.style.left=d+"px",a.style.top=p+"px")}moveMarkers(e,t){let i=this.w,s=this.ttCtx;if(i.globals.markers.size[e]>0){let n=i.globals.dom.baseEl.querySelectorAll(` .apexcharts-series[data\\:realIndex='${e}'] .apexcharts-marker`);for(let a=0;a<n.length;a++)parseInt(n[a].getAttribute("rel"),10)===t&&(s.marker.resetPointsSize(),s.marker.enlargeCurrentPoint(t,n[a]))}else s.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}moveDynamicPointOnHover(e,t){let i=this.w,s=this.ttCtx,n=0,a=0,l=i.globals.pointsArray,c=s.tooltipUtil.getHoverMarkerSize(t);const d=i.config.series[t].type;if(d&&(d==="column"||d==="candlestick"||d==="boxPlot"))return;n=l[t][e][0],a=l[t][e][1]?l[t][e][1]:0;let p=i.globals.dom.baseEl.querySelector(`.apexcharts-series[data\\:realIndex='${t}'] .apexcharts-series-markers circle`);p&&a<i.globals.gridHeight&&a>0&&(p.setAttribute("r",c),p.setAttribute("cx",n),p.setAttribute("cy",a)),this.moveXCrosshairs(n),s.fixedTooltip||this.moveTooltip(n,a,c)}moveDynamicPointsOnHover(e){const t=this.ttCtx;let i=t.w,s=0,n=0,a=0,l=i.globals.pointsArray;a=new zt(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);let d=t.tooltipUtil.getHoverMarkerSize(a);l[a]&&(s=l[a][e][0],n=l[a][e][1]);let p=t.tooltipUtil.getAllMarkers();if(p!==null)for(let g=0;g<i.globals.series.length;g++){let b=l[g];if(i.globals.comboCharts&&typeof b>"u"&&p.splice(g,0,null),b&&b.length){let O=l[g][e][1],r;if(p[g].setAttribute("cx",s),i.config.chart.type==="rangeArea"&&!i.globals.comboCharts){const h=e+i.globals.series[g].length;r=l[g][h][1];const u=Math.abs(O-r)/2;O=O-u}O!==null&&!isNaN(O)&&O<i.globals.gridHeight+d&&O+d>0?(p[g]&&p[g].setAttribute("r",d),p[g]&&p[g].setAttribute("cy",O)):p[g]&&p[g].setAttribute("r",0)}}this.moveXCrosshairs(s),t.fixedTooltip||this.moveTooltip(s,n||i.globals.gridHeight,d)}moveStickyTooltipOverBars(e,t){const i=this.w,s=this.ttCtx;let n=i.globals.columnSeries?i.globals.columnSeries.length:i.globals.series.length,a=n>=2&&n%2===0?Math.floor(n/2):Math.floor(n/2)+1;i.globals.isBarHorizontal&&(a=new zt(this.ctx).getActiveConfigSeriesIndex("desc")+1);let l=i.globals.dom.baseEl.querySelector(`.apexcharts-bar-series .apexcharts-series[rel='${a}'] path[j='${e}'], .apexcharts-candlestick-series .apexcharts-series[rel='${a}'] path[j='${e}'], .apexcharts-boxPlot-series .apexcharts-series[rel='${a}'] path[j='${e}'], .apexcharts-rangebar-series .apexcharts-series[rel='${a}'] path[j='${e}']`);!l&&typeof t=="number"&&(l=i.globals.dom.baseEl.querySelector(`.apexcharts-bar-series .apexcharts-series[data\\:realIndex='${t}'] path[j='${e}'],
        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='${t}'] path[j='${e}'],
        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='${t}'] path[j='${e}'],
        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='${t}'] path[j='${e}']`));let c=l?parseFloat(l.getAttribute("cx")):0,d=l?parseFloat(l.getAttribute("cy")):0,p=l?parseFloat(l.getAttribute("barWidth")):0,b=s.getElGrid().getBoundingClientRect();const O=l&&(l.classList.contains("apexcharts-candlestick-area")||l.classList.contains("apexcharts-boxPlot-area"));i.globals.isXNumeric?(l&&!O&&(c=c-(n%2!==0?p/2:0)),l&&O&&i.globals.comboCharts&&(c=c-p/2)):i.globals.isBarHorizontal||(c=s.xAxisTicksPositions[e-1]+s.dataPointsDividedWidth/2,isNaN(c)&&(c=s.xAxisTicksPositions[e]-s.dataPointsDividedWidth/2)),i.globals.isBarHorizontal?d=d-s.tooltipRect.ttHeight:i.config.tooltip.followCursor?d=s.e.clientY-b.top-s.tooltipRect.ttHeight/2:d+s.tooltipRect.ttHeight+15>i.globals.gridHeight&&(d=i.globals.gridHeight),i.globals.isBarHorizontal||this.moveXCrosshairs(c),s.fixedTooltip||this.moveTooltip(c,d||i.globals.gridHeight)}}class HP{constructor(e){this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new _g(e)}drawDynamicPoints(){let e=this.w,t=new Y(this.ctx),i=new wr(this.ctx),s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");s=[...s],e.config.chart.stacked&&s.sort((n,a)=>parseFloat(n.getAttribute("data:realIndex"))-parseFloat(a.getAttribute("data:realIndex")));for(let n=0;n<s.length;n++){let a=s[n].querySelector(".apexcharts-series-markers-wrap");if(a!==null){let l,c=`apexcharts-marker w${(Math.random()+1).toString(36).substring(4)}`;(e.config.chart.type==="line"||e.config.chart.type==="area")&&!e.globals.comboCharts&&!e.config.tooltip.intersect&&(c+=" no-pointer-events");let d=i.getMarkerConfig({cssClass:c,seriesIndex:Number(a.getAttribute("data:realIndex"))});l=t.drawMarker(0,0,d),l.node.setAttribute("default-marker-size",0);let p=document.createElementNS(e.globals.SVGNS,"g");p.classList.add("apexcharts-series-markers"),p.appendChild(l.node),a.appendChild(p)}}}enlargeCurrentPoint(e,t,i=null,s=null){let n=this.w;n.config.chart.type!=="bubble"&&this.newPointSize(e,t);let a=t.getAttribute("cx"),l=t.getAttribute("cy");if(i!==null&&s!==null&&(a=i,l=s),this.tooltipPosition.moveXCrosshairs(a),!this.fixedTooltip){if(n.config.chart.type==="radar"){const d=this.ttCtx.getElGrid().getBoundingClientRect();a=this.ttCtx.e.clientX-d.left}this.tooltipPosition.moveTooltip(a,l,n.config.markers.hover.size)}}enlargePoints(e){let t=this.w,i=this;const s=this.ttCtx;let n=e,a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),l=t.config.markers.hover.size;for(let c=0;c<a.length;c++){let d=a[c].getAttribute("rel"),p=a[c].getAttribute("index");if(l===void 0&&(l=t.globals.markers.size[p]+t.config.markers.hover.sizeOffset),n===parseInt(d,10)){i.newPointSize(n,a[c]);let g=a[c].getAttribute("cx"),b=a[c].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(g),s.fixedTooltip||i.tooltipPosition.moveTooltip(g,b,l)}else i.oldPointSize(a[c])}}newPointSize(e,t){let i=this.w,s=i.config.markers.hover.size,n=e===0?t.parentNode.firstChild:t.parentNode.lastChild;if(n.getAttribute("default-marker-size")!=="0"){const a=parseInt(n.getAttribute("index"),10);s===void 0&&(s=i.globals.markers.size[a]+i.config.markers.hover.sizeOffset),s<0&&(s=0),n.setAttribute("r",s)}}oldPointSize(e){const t=parseFloat(e.getAttribute("default-marker-size"));e.setAttribute("r",t)}resetPointsSize(){let t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker");for(let i=0;i<t.length;i++){const s=parseFloat(t[i].getAttribute("default-marker-size"));R.isNumber(s)&&s>=0?t[i].setAttribute("r",s):t[i].setAttribute("r",0)}}}class GP{constructor(e){this.w=e.w;const t=this.w;this.ttCtx=e,this.isVerticalGroupedRangeBar=!t.globals.isBarHorizontal&&t.config.chart.type==="rangeBar"&&t.config.plotOptions.bar.rangeBarGroupRows}getAttr(e,t){return parseFloat(e.target.getAttribute(t))}handleHeatTreeTooltip({e,opt:t,x:i,y:s,type:n}){const a=this.ttCtx,l=this.w;if(e.target.classList.contains(`apexcharts-${n}-rect`)){let c=this.getAttr(e,"i"),d=this.getAttr(e,"j"),p=this.getAttr(e,"cx"),g=this.getAttr(e,"cy"),b=this.getAttr(e,"width"),O=this.getAttr(e,"height");if(a.tooltipLabels.drawSeriesTexts({ttItems:t.ttItems,i:c,j:d,shared:!1,e}),l.globals.capturedSeriesIndex=c,l.globals.capturedDataPointIndex=d,i=p+a.tooltipRect.ttWidth/2+b,s=g+a.tooltipRect.ttHeight/2-O/2,a.tooltipPosition.moveXCrosshairs(p+b/2),i>l.globals.gridWidth/2&&(i=p-a.tooltipRect.ttWidth/2+b),a.w.config.tooltip.followCursor){let r=l.globals.dom.elWrap.getBoundingClientRect();i=l.globals.clientX-r.left-(i>l.globals.gridWidth/2?a.tooltipRect.ttWidth:0),s=l.globals.clientY-r.top-(s>l.globals.gridHeight/2?a.tooltipRect.ttHeight:0)}}return{x:i,y:s}}handleMarkerTooltip({e,opt:t,x:i,y:s}){let n=this.w;const a=this.ttCtx;let l,c;if(e.target.classList.contains("apexcharts-marker")){let d=parseInt(t.paths.getAttribute("cx"),10),p=parseInt(t.paths.getAttribute("cy"),10),g=parseFloat(t.paths.getAttribute("val"));if(c=parseInt(t.paths.getAttribute("rel"),10),l=parseInt(t.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,a.intersect){const b=R.findAncestor(t.paths,"apexcharts-series");b&&(l=parseInt(b.getAttribute("data:realIndex"),10))}if(a.tooltipLabels.drawSeriesTexts({ttItems:t.ttItems,i:l,j:c,shared:a.showOnIntersect?!1:n.config.tooltip.shared,e}),e.type==="mouseup"&&a.markerClick(e,l,c),n.globals.capturedSeriesIndex=l,n.globals.capturedDataPointIndex=c,i=d,s=p+n.globals.translateY-a.tooltipRect.ttHeight*1.4,a.w.config.tooltip.followCursor){const O=a.getElGrid().getBoundingClientRect();s=a.e.clientY+n.globals.translateY-O.top}g<0&&(s=p),a.marker.enlargeCurrentPoint(c,t.paths,i,s)}return{x:i,y:s}}handleBarTooltip({e,opt:t}){const i=this.w,s=this.ttCtx,n=s.getElTooltip();let a=0,l=0,c=0,d=0,p,g=this.getBarTooltipXY({e,opt:t});d=g.i;let b=g.barHeight,O=g.j;i.globals.capturedSeriesIndex=d,i.globals.capturedDataPointIndex=O,i.globals.isBarHorizontal&&s.tooltipUtil.hasBars()||!i.config.tooltip.shared?(l=g.x,c=g.y,p=Array.isArray(i.config.stroke.width)?i.config.stroke.width[d]:i.config.stroke.width,a=l):!i.globals.comboCharts&&!i.config.tooltip.shared&&(a=a/2),isNaN(c)&&(c=i.globals.svgHeight-s.tooltipRect.ttHeight);const r=parseInt(t.paths.parentNode.getAttribute("data:realIndex"),10),h=i.globals.isMultipleYAxis?i.config.yaxis[r]&&i.config.yaxis[r].reversed:i.config.yaxis[0].reversed;if(l+s.tooltipRect.ttWidth>i.globals.gridWidth&&!h?l=l-s.tooltipRect.ttWidth:l<0&&(l=0),s.w.config.tooltip.followCursor){const m=s.getElGrid().getBoundingClientRect();c=s.e.clientY-m.top}s.tooltip===null&&(s.tooltip=i.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),i.config.tooltip.shared||(i.globals.comboBarCount>0?s.tooltipPosition.moveXCrosshairs(a+p/2):s.tooltipPosition.moveXCrosshairs(a)),!s.fixedTooltip&&(!i.config.tooltip.shared||i.globals.isBarHorizontal&&s.tooltipUtil.hasBars())&&(h&&(l=l-s.tooltipRect.ttWidth,l<0&&(l=0)),h&&!(i.globals.isBarHorizontal&&s.tooltipUtil.hasBars())&&(c=c+b-(i.globals.series[d][O]<0?b:0)*2),c=c+i.globals.translateY-s.tooltipRect.ttHeight/2,n.style.left=l+i.globals.translateX+"px",n.style.top=c+"px")}getBarTooltipXY({e,opt:t}){let i=this.w,s=null;const n=this.ttCtx;let a=0,l=0,c=0,d=0,p=0;const g=e.target.classList;if(g.contains("apexcharts-bar-area")||g.contains("apexcharts-candlestick-area")||g.contains("apexcharts-boxPlot-area")||g.contains("apexcharts-rangebar-area")){let b=e.target,O=b.getBoundingClientRect(),r=t.elGrid.getBoundingClientRect(),h=O.height;p=O.height;let u=O.width,m=parseInt(b.getAttribute("cx"),10),y=parseInt(b.getAttribute("cy"),10);d=parseFloat(b.getAttribute("barWidth"));const v=e.type==="touchmove"?e.touches[0].clientX:e.clientX;s=parseInt(b.getAttribute("j"),10),a=parseInt(b.parentNode.getAttribute("rel"),10)-1;let w=b.getAttribute("data-range-y1"),S=b.getAttribute("data-range-y2");i.globals.comboCharts&&(a=parseInt(b.parentNode.getAttribute("data:realIndex"),10));const C=_=>(i.globals.isXNumeric?_=m-u/2:this.isVerticalGroupedRangeBar?_=m+u/2:_=m-n.dataPointsDividedWidth+u/2,_),T=()=>y-n.dataPointsDividedHeight+h/2-n.tooltipRect.ttHeight/2;n.tooltipLabels.drawSeriesTexts({ttItems:t.ttItems,i:a,j:s,y1:w?parseInt(w,10):null,y2:S?parseInt(S,10):null,shared:n.showOnIntersect?!1:i.config.tooltip.shared,e}),i.config.tooltip.followCursor?i.globals.isBarHorizontal?(l=v-r.left+15,c=T()):(l=C(l),c=e.clientY-r.top-n.tooltipRect.ttHeight/2-15):i.globals.isBarHorizontal?(l=m,l<n.xyRatios.baseLineInvertedY&&(l=m-n.tooltipRect.ttWidth),c=T()):(l=C(l),c=y)}return{x:l,y:c,barHeight:p,barWidth:d,i:a,j:s}}}class jP{constructor(e){this.w=e.w,this.ttCtx=e}drawXaxisTooltip(){let e=this.w;const t=this.ttCtx,i=e.config.xaxis.position==="bottom";t.xaxisOffY=i?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;const s=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top";let n=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",s+" apexcharts-theme-"+e.config.tooltip.theme),n.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}drawYaxisTooltip(){let e=this.w;const t=this.ttCtx;for(let i=0;i<e.config.yaxis.length;i++){const s=e.config.yaxis[i].opposite||e.config.yaxis[i].crosshairs.opposite;t.yaxisOffX=s?e.globals.gridWidth+1:1;let n=s?`apexcharts-yaxistooltip apexcharts-yaxistooltip-${i} apexcharts-yaxistooltip-right`:`apexcharts-yaxistooltip apexcharts-yaxistooltip-${i} apexcharts-yaxistooltip-left`,a=e.globals.dom.elWrap;e.globals.dom.baseEl.querySelector(`.apexcharts-yaxistooltip apexcharts-yaxistooltip-${i}`)===null&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+e.config.tooltip.theme),a.appendChild(t.yaxisTooltip),i===0&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[i]=document.createElement("div"),t.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[i]))}}setXCrosshairWidth(){let e=this.w;const t=this.ttCtx,i=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){let s=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(s!==null&&e.config.xaxis.crosshairs.width==="barWidth"){let n=parseFloat(s.getAttribute("barWidth"));t.xcrosshairsWidth=n}else if(e.config.xaxis.crosshairs.width==="tickWidth"){let n=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/n}}else if(e.config.xaxis.crosshairs.width==="tickWidth"){let s=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/s}else if(e.config.xaxis.crosshairs.width==="barWidth"){let s=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(s!==null){let n=parseFloat(s.getAttribute("barWidth"));t.xcrosshairsWidth=n}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),i!==null&&t.xcrosshairsWidth>0&&i.setAttribute("width",t.xcrosshairsWidth)}handleYCrosshair(){let e=this.w;const t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}drawYaxisTooltipText(e,t,i){const s=this.ttCtx,n=this.w;let a=n.globals.yLabelFormatters[e];if(s.yaxisTooltips[e]){const c=s.getElGrid().getBoundingClientRect();let d=n.globals.seriesYAxisMap[anno.yAxisIndex][0];const p=(t-c.top)*i.yRatio[d],g=n.globals.maxYArr[d]-n.globals.minYArr[d],b=n.globals.minYArr[d]+(g-p);s.tooltipPosition.moveYCrosshairs(t-c.top),s.yaxisTooltipText[e].innerHTML=a(b),s.tooltipPosition.moveYAxisTooltip(e)}}}class Tg{constructor(e){this.ctx=e,this.w=e.w;const t=this.w;this.tConfig=t.config.tooltip,this.tooltipUtil=new Cg(this),this.tooltipLabels=new YP(this),this.tooltipPosition=new _g(this),this.marker=new HP(this),this.intersect=new GP(this),this.axesTooltip=new jP(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!t.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}getElTooltip(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}getElXCrosshairs(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}getElGrid(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}drawTooltip(e){let t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map((n,a)=>!!(n.show&&n.tooltip.enabled&&t.globals.axisCharts)),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);const i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&i.classList.add(t.config.tooltip.cssClass),i.classList.add(`apexcharts-theme-${this.tConfig.theme}`),t.globals.dom.elWrap.appendChild(i),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();let n=new kr(this.ctx);this.xAxisTicksPositions=n.getXAxisTicksPositions()}if((t.globals.comboCharts||this.tConfig.intersect||t.config.chart.type==="rangeBar")&&!this.tConfig.shared&&(this.showOnIntersect=!0),(t.config.markers.size===0||t.globals.markers.largestSize===0)&&this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length===t.globals.series.length)return;this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));let s=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(this.showOnIntersect?s=1:s=t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(s),this.addSVGEvents()}createTTElements(e){const t=this.w;let i=[];const s=this.getElTooltip();for(let n=0;n<e;n++){let a=document.createElement("div");a.classList.add("apexcharts-tooltip-series-group"),a.style.order=t.config.tooltip.inverseOrder?e-n:n+1,this.tConfig.shared&&this.tConfig.enabledOnSeries&&Array.isArray(this.tConfig.enabledOnSeries)&&this.tConfig.enabledOnSeries.indexOf(n)<0&&a.classList.add("apexcharts-tooltip-series-group-hidden");let l=document.createElement("span");l.classList.add("apexcharts-tooltip-marker"),l.style.backgroundColor=t.globals.colors[n],a.appendChild(l);const c=document.createElement("div");c.classList.add("apexcharts-tooltip-text"),c.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,c.style.fontSize=this.tConfig.style.fontSize,["y","goals","z"].forEach(d=>{const p=document.createElement("div");p.classList.add(`apexcharts-tooltip-${d}-group`);let g=document.createElement("span");g.classList.add(`apexcharts-tooltip-text-${d}-label`),p.appendChild(g);let b=document.createElement("span");b.classList.add(`apexcharts-tooltip-text-${d}-value`),p.appendChild(b),c.appendChild(p)}),a.appendChild(c),s.appendChild(a),i.push(a)}return i}addSVGEvents(){const e=this.w;let t=e.config.chart.type;const i=this.getElTooltip(),s=t==="bar"||t==="candlestick"||t==="boxPlot"||t==="rangeBar",n=t==="area"||t==="line"||t==="scatter"||t==="bubble"||t==="radar";let a=e.globals.dom.Paper.node;const l=this.getElGrid();l&&(this.seriesBound=l.getBoundingClientRect());let c=[],d=[],p={hoverArea:a,elGrid:l,tooltipEl:i,tooltipY:c,tooltipX:d,ttItems:this.ttItems},g;if(e.globals.axisCharts&&(n?g=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):s?g=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):(t==="heatmap"||t==="treemap")&&(g=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),g&&g.length))for(let O=0;O<g.length;O++)c.push(g[O].getAttribute("cy")),d.push(g[O].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||s&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([a],p);else if(s&&!e.globals.comboCharts||n&&this.showOnIntersect)this.addDatapointEventsListeners(p);else if(!e.globals.axisCharts||t==="heatmap"||t==="treemap"){let O=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(O,p)}if(this.showOnIntersect){let O=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");O.length>0&&this.addPathsEventListeners(O,p),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(p)}}drawFixedTooltipRect(){let e=this.w;const t=this.getElTooltip();let i=t.getBoundingClientRect(),s=i.width+10,n=i.height+10,a=this.tConfig.fixed.offsetX,l=this.tConfig.fixed.offsetY;const c=this.tConfig.fixed.position.toLowerCase();return c.indexOf("right")>-1&&(a=a+e.globals.svgWidth-s+10),c.indexOf("bottom")>-1&&(l=l+e.globals.svgHeight-n-10),t.style.left=a+"px",t.style.top=l+"px",{x:a,y:l,ttWidth:s,ttHeight:n}}addDatapointEventsListeners(e){let i=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(i,e)}addPathsEventListeners(e,t){let i=this;for(let s=0;s<e.length;s++){let n={paths:e[s],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(l=>e[s].addEventListener(l,i.onSeriesHover.bind(i,n),{capture:!1,passive:!0}))}}onSeriesHover(e,t){const s=Date.now()-this.lastHoverTime;s>=100?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(()=>{this.seriesHover(e,t)},100-s))}seriesHover(e,t){this.lastHoverTime=Date.now();let i=[];const s=this.w;s.config.chart.group&&(i=this.ctx.getGroupedCharts()),!(s.globals.axisCharts&&(s.globals.minX===-1/0&&s.globals.maxX===1/0||s.globals.dataPoints===0))&&(i.length?i.forEach(n=>{const a=this.getElTooltip(n),l={paths:e.paths,tooltipEl:a,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:n.w.globals.tooltip.ttItems};n.w.globals.minX===this.w.globals.minX&&n.w.globals.maxX===this.w.globals.maxX&&n.w.globals.tooltip.seriesHoverByContext({chartCtx:n,ttCtx:n.w.globals.tooltip,opt:l,e:t})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}seriesHoverByContext({chartCtx:e,ttCtx:t,opt:i,e:s}){let n=e.w;const a=this.getElTooltip();a&&(t.tooltipRect={x:0,y:0,ttWidth:a.getBoundingClientRect().width,ttHeight:a.getBoundingClientRect().height},t.e=s,t.tooltipUtil.hasBars()&&!n.globals.comboCharts&&!t.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new zt(e).toggleSeriesOnHover(s,s.target.parentNode),t.fixedTooltip&&t.drawFixedTooltipRect(),n.globals.axisCharts?t.axisChartsTooltips({e:s,opt:i,tooltipRect:t.tooltipRect}):t.nonAxisChartsTooltips({e:s,opt:i,tooltipRect:t.tooltipRect}))}axisChartsTooltips({e,opt:t}){let i=this.w,s,n,a=t.elGrid.getBoundingClientRect();const l=e.type==="touchmove"?e.touches[0].clientX:e.clientX,c=e.type==="touchmove"?e.touches[0].clientY:e.clientY;if(this.clientY=c,this.clientX=l,i.globals.capturedSeriesIndex=-1,i.globals.capturedDataPointIndex=-1,c<a.top||c>a.top+a.height){this.handleMouseOut(t);return}if(Array.isArray(this.tConfig.enabledOnSeries)&&!i.config.tooltip.shared){const b=parseInt(t.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(b)<0){this.handleMouseOut(t);return}}const d=this.getElTooltip(),p=this.getElXCrosshairs();let g=i.globals.xyCharts||i.config.chart.type==="bar"&&!i.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||i.globals.comboCharts&&this.tooltipUtil.hasBars();if(e.type==="mousemove"||e.type==="touchmove"||e.type==="mouseup"){if(i.globals.collapsedSeries.length+i.globals.ancillaryCollapsedSeries.length===i.globals.series.length)return;p!==null&&p.classList.add("apexcharts-active");const b=this.yaxisTooltips.filter(O=>O===!0);if(this.ycrosshairs!==null&&b.length&&this.ycrosshairs.classList.add("apexcharts-active"),g&&!this.showOnIntersect)this.handleStickyTooltip(e,l,c,t);else if(i.config.chart.type==="heatmap"||i.config.chart.type==="treemap"){let O=this.intersect.handleHeatTreeTooltip({e,opt:t,x:s,y:n,type:i.config.chart.type});s=O.x,n=O.y,d.style.left=s+"px",d.style.top=n+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e,opt:t}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e,opt:t,x:s,y:n});if(this.yaxisTooltips.length)for(let O=0;O<i.config.yaxis.length;O++)this.axesTooltip.drawYaxisTooltipText(O,c,this.xyRatios);t.tooltipEl.classList.add("apexcharts-active")}else(e.type==="mouseout"||e.type==="touchend")&&this.handleMouseOut(t)}nonAxisChartsTooltips({e,opt:t,tooltipRect:i}){let s=this.w,n=t.paths.getAttribute("rel");const a=this.getElTooltip();let l=s.globals.dom.elWrap.getBoundingClientRect();if(e.type==="mousemove"||e.type==="touchmove"){a.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:t.ttItems,i:parseInt(n,10)-1,shared:!1});let c=s.globals.clientX-l.left-i.ttWidth/2,d=s.globals.clientY-l.top-i.ttHeight-10;if(a.style.left=c+"px",a.style.top=d+"px",s.config.legend.tooltipHoverFormatter){let p=s.config.legend.tooltipHoverFormatter;const g=n-1,b=this.legendLabels[g].getAttribute("data:default-text");let O=p(b,{seriesIndex:g,dataPointIndex:g,w:s});this.legendLabels[g].innerHTML=O}}else(e.type==="mouseout"||e.type==="touchend")&&(a.classList.remove("apexcharts-active"),s.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(c=>{const d=c.getAttribute("data:default-text");c.innerHTML=decodeURIComponent(d)}))}handleStickyTooltip(e,t,i,s){const n=this.w;let a=this.tooltipUtil.getNearestValues({context:this,hoverArea:s.hoverArea,elGrid:s.elGrid,clientX:t,clientY:i}),l=a.j,c=a.capturedSeries;n.globals.collapsedSeriesIndices.includes(c)&&(c=null);const d=s.elGrid.getBoundingClientRect();if(a.hoverX<0||a.hoverX>d.width){this.handleMouseOut(s);return}if(c!==null)this.handleStickyCapturedSeries(e,c,s,l);else if(this.tooltipUtil.isXoverlap(l)||n.globals.isBarHorizontal){const p=n.globals.series.findIndex((g,b)=>!n.globals.collapsedSeriesIndices.includes(b));this.create(e,this,p,l,s.ttItems)}}handleStickyCapturedSeries(e,t,i,s){const n=this.w;if(!this.tConfig.shared&&n.globals.series[t][s]===null){this.handleMouseOut(i);return}if(typeof n.globals.series[t][s]<"u")this.tConfig.shared&&this.tooltipUtil.isXoverlap(s)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,s,i.ttItems):this.create(e,this,t,s,i.ttItems,!1);else if(this.tooltipUtil.isXoverlap(s)){const a=n.globals.series.findIndex((l,c)=>!n.globals.collapsedSeriesIndices.includes(c));this.create(e,this,a,s,i.ttItems)}}deactivateHoverFilter(){let e=this.w,t=new Y(this.ctx),i=e.globals.dom.Paper.select(".apexcharts-bar-area");for(let s=0;s<i.length;s++)t.pathMouseLeave(i[s])}handleMouseOut(e){const t=this.w,i=this.getElXCrosshairs();if(e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),t.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),i!==null&&i.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(let s=0;s<this.yaxisTTEls.length;s++)this.yaxisTTEls[s].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(s=>{const n=s.getAttribute("data:default-text");s.innerHTML=decodeURIComponent(n)})}markerClick(e,t,i){const s=this.w;typeof s.config.chart.events.markerClick=="function"&&s.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:s}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:s}])}create(e,t,i,s,n,a=null){var b,O,r,h,u,m,y,v,w,S,C,T,_,$,N,P;let l=this.w,c=t;e.type==="mouseup"&&this.markerClick(e,i,s),a===null&&(a=this.tConfig.shared);const d=this.tooltipUtil.hasMarkers(i),p=this.tooltipUtil.getElBars();if(l.config.legend.tooltipHoverFormatter){let E=l.config.legend.tooltipHoverFormatter,x=Array.from(this.legendLabels);x.forEach(k=>{const A=k.getAttribute("data:default-text");k.innerHTML=decodeURIComponent(A)});for(let k=0;k<x.length;k++){const A=x[k],L=parseInt(A.getAttribute("i"),10),D=decodeURIComponent(A.getAttribute("data:default-text"));let M=E(D,{seriesIndex:a?L:i,dataPointIndex:s,w:l});if(a)A.innerHTML=l.globals.collapsedSeriesIndices.indexOf(L)<0?M:D;else if(A.innerHTML=L===i?M:D,i===L)break}}const g={ttItems:n,i,j:s,...typeof((h=(r=(O=(b=l.globals.seriesRange)==null?void 0:b[i])==null?void 0:O[s])==null?void 0:r.y[0])==null?void 0:h.y1)<"u"&&{y1:(v=(y=(m=(u=l.globals.seriesRange)==null?void 0:u[i])==null?void 0:m[s])==null?void 0:y.y[0])==null?void 0:v.y1},...typeof((T=(C=(S=(w=l.globals.seriesRange)==null?void 0:w[i])==null?void 0:S[s])==null?void 0:C.y[0])==null?void 0:T.y2)<"u"&&{y2:(P=(N=($=(_=l.globals.seriesRange)==null?void 0:_[i])==null?void 0:$[s])==null?void 0:N.y[0])==null?void 0:P.y2}};if(a){if(c.tooltipLabels.drawSeriesTexts({...g,shared:this.showOnIntersect?!1:this.tConfig.shared}),d)l.globals.markers.largestSize>0?c.marker.enlargePoints(s):c.tooltipPosition.moveDynamicPointsOnHover(s);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(p),this.barSeriesHeight>0)){let E=new Y(this.ctx),x=l.globals.dom.Paper.select(`.apexcharts-bar-area[j='${s}']`);this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(s,i);for(let k=0;k<x.length;k++)E.pathMouseEnter(x[k])}}else c.tooltipLabels.drawSeriesTexts({shared:!1,...g}),this.tooltipUtil.hasBars()&&c.tooltipPosition.moveStickyTooltipOverBars(s,i),d&&c.tooltipPosition.moveMarkers(i,s)}}class UP{constructor(e){this.w=e.w,this.barCtx=e,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}handleBarDataLabels(e){let{x:t,y:i,y1:s,y2:n,i:a,j:l,realIndex:c,groupIndex:d,series:p,barHeight:g,barWidth:b,barXPosition:O,barYPosition:r,visibleSeries:h,renderedPath:u}=e,m=this.w,y=new Y(this.barCtx.ctx),v=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[c]:this.barCtx.strokeWidth,w=t+parseFloat(b*h),S=i+parseFloat(g*h);m.globals.isXNumeric&&!m.globals.isBarHorizontal&&(w=t+parseFloat(b*(h+1)),S=i+parseFloat(g*(h+1))-v);let C=null,T=null,_=t,$=i,N={},P=m.config.dataLabels,E=this.barCtx.barOptions.dataLabels,x=this.barCtx.barOptions.dataLabels.total;typeof r<"u"&&this.barCtx.isRangeBar&&(S=r,$=r),typeof O<"u"&&this.barCtx.isVerticalGroupedRangeBar&&(w=O,_=O);const k=P.offsetX,A=P.offsetY;let L={width:0,height:0};if(m.config.dataLabels.enabled){const M=this.barCtx.series[a][l];L=y.getTextRects(m.globals.yLabelFormatters[0](M),parseFloat(P.style.fontSize))}const D={x:t,y:i,i:a,j:l,realIndex:c,groupIndex:d||-1,renderedPath:u,bcx:w,bcy:S,barHeight:g,barWidth:b,textRects:L,strokeWidth:v,dataLabelsX:_,dataLabelsY:$,dataLabelsConfig:P,barDataLabelsConfig:E,barTotalDataLabelsConfig:x,offX:k,offY:A};return this.barCtx.isHorizontal?N=this.calculateBarsDataLabelsPosition(D):N=this.calculateColumnsDataLabelsPosition(D),u.attr({cy:N.bcy,cx:N.bcx,j:l,val:p[a][l],barHeight:g,barWidth:b}),C=this.drawCalculatedDataLabels({x:N.dataLabelsX,y:N.dataLabelsY,val:this.barCtx.isRangeBar?[s,n]:p[a][l],i:c,j:l,barWidth:b,barHeight:g,textRects:L,dataLabelsConfig:P}),m.config.chart.stacked&&x.enabled&&(T=this.drawTotalDataLabels({x:N.totalDataLabelsX,y:N.totalDataLabelsY,barWidth:b,barHeight:g,realIndex:c,textAnchor:N.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:c,j:l}),dataLabelsConfig:P,barTotalDataLabelsConfig:x})),{dataLabels:C,totalDataLabels:T}}getStackedTotalDataLabel({realIndex:e,j:t}){const i=this.w;let s=this.barCtx.stackedSeriesTotals[t];return this.totalFormatter&&(s=this.totalFormatter(s,{...i,seriesIndex:e,dataPointIndex:t,w:i})),s}calculateColumnsDataLabelsPosition(e){const t=this.w;let{i,j:s,realIndex:n,groupIndex:a,y:l,bcx:c,barWidth:d,barHeight:p,textRects:g,dataLabelsX:b,dataLabelsY:O,dataLabelsConfig:r,barDataLabelsConfig:h,barTotalDataLabelsConfig:u,strokeWidth:m,offX:y,offY:v}=e,w,S,C="middle";p=Math.abs(p);let T=t.config.plotOptions.bar.dataLabels.orientation==="vertical";const{zeroEncounters:_}=this.barCtx.barHelpers.getZeroValueEncounters({i,j:s});c=c-m/2+(a!==-1?a*d:0);let $=t.globals.gridWidth/t.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?b=b+d/2:(t.globals.isXNumeric?b=c-d/2+y:b=c-$+d/2+y,_>0&&t.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(b=b-d*_)),T&&(b=b+g.height/2-m/2-2);let N=this.barCtx.series[i][s]<0,P=l;switch(this.barCtx.isReversed&&(P=l-p+(N?p*2:0),l=l-p),h.position){case"center":T?N?O=P-p/2+v:O=P+p/2-v:N?O=P-p/2+g.height/2+v:O=P+p/2+g.height/2-v;break;case"bottom":T?N?O=P-p+v:O=P+p-v:N?O=P-p+g.height+m+v:O=P+p-g.height/2+m-v;break;case"top":T?N?O=P+v:O=P-v:N?O=P-g.height/2-v:O=P+g.height+v;break}if(this.barCtx.lastActiveBarSerieIndex===n&&u.enabled){const k=new Y(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:n,j:s}),r.fontSize);N?w=P-k.height/2-v-u.offsetY+18:w=P+k.height+v+u.offsetY-18,S=b+u.offsetX}return t.config.chart.stacked||(O<0?O=0+m:O+g.height/3>t.globals.gridHeight&&(O=t.globals.gridHeight-m)),{bcx:c,bcy:l,dataLabelsX:b,dataLabelsY:O,totalDataLabelsX:S,totalDataLabelsY:w,totalDataLabelsAnchor:C}}calculateBarsDataLabelsPosition(e){const t=this.w;let{x:i,i:s,j:n,realIndex:a,groupIndex:l,bcy:c,barHeight:d,barWidth:p,textRects:g,dataLabelsX:b,strokeWidth:O,dataLabelsConfig:r,barDataLabelsConfig:h,barTotalDataLabelsConfig:u,offX:m,offY:y}=e,v=t.globals.gridHeight/t.globals.dataPoints;p=Math.abs(p),c=c+(l!==-1?l*d:0);let w=c-(this.barCtx.isRangeBar?0:v)+d/2+g.height/2+y-3,S,C,T="start",_=this.barCtx.series[s][n]<0,$=i;switch(this.barCtx.isReversed&&($=i+p-(_?p*2:0),i=t.globals.gridWidth-p),h.position){case"center":_?b=$+p/2-m:b=Math.max(g.width/2,$-p/2)+m;break;case"bottom":_?b=$+p-O-Math.round(g.width/2)-m:b=$-p+O+Math.round(g.width/2)+m;break;case"top":_?b=$-O+Math.round(g.width/2)-m:b=$-O-Math.round(g.width/2)+m;break}if(this.barCtx.lastActiveBarSerieIndex===a&&u.enabled){const E=new Y(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:a,j:n}),r.fontSize);_?(S=$-O+Math.round(E.width/2)-m-u.offsetX-15,T="end"):S=$-O-Math.round(E.width/2)+m+u.offsetX+15,C=w+u.offsetY}return t.config.chart.stacked||(b<0?b=b+g.width+O:b+g.width/2>t.globals.gridWidth&&(b=t.globals.gridWidth-g.width-O)),{bcx:i,bcy:c,dataLabelsX:b,dataLabelsY:w,totalDataLabelsX:S,totalDataLabelsY:C,totalDataLabelsAnchor:T}}drawCalculatedDataLabels({x:e,y:t,val:i,i:s,j:n,textRects:a,barHeight:l,barWidth:c,dataLabelsConfig:d}){const p=this.w;let g="rotate(0)";p.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(g=`rotate(-90, ${e}, ${t})`);const b=new un(this.barCtx.ctx),O=new Y(this.barCtx.ctx),r=d.formatter;let h=null;const u=p.globals.collapsedSeriesIndices.indexOf(s)>-1;if(d.enabled&&!u){h=O.group({class:"apexcharts-data-labels",transform:g});let m="";typeof i<"u"&&(m=r(i,{...p,seriesIndex:s,dataPointIndex:n,w:p})),!i&&p.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(m="");let y=p.globals.series[s][n]<0,v=p.config.plotOptions.bar.dataLabels.position;if(p.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(v==="top"&&(y?d.textAnchor="end":d.textAnchor="start"),v==="center"&&(d.textAnchor="middle"),v==="bottom"&&(y?d.textAnchor="end":d.textAnchor="start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels){const S=O.getTextRects(m,parseFloat(d.style.fontSize));c<S.width&&(m="")}p.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?a.width/1.6>Math.abs(c)&&(m=""):a.height/1.6>Math.abs(l)&&(m=""));let w={...d};this.barCtx.isHorizontal&&i<0&&(d.textAnchor==="start"?w.textAnchor="end":d.textAnchor==="end"&&(w.textAnchor="start")),b.plotDataLabelsText({x:e,y:t,text:m,i:s,j:n,parent:h,dataLabelsConfig:w,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return h}drawTotalDataLabels({x:e,y:t,val:i,barWidth:s,barHeight:n,realIndex:a,textAnchor:l,barTotalDataLabelsConfig:c}){const d=this.w,p=new Y(this.barCtx.ctx);let g;return c.enabled&&typeof e<"u"&&typeof t<"u"&&this.barCtx.lastActiveBarSerieIndex===a&&(g=p.drawText({x:e-(!d.globals.isBarHorizontal&&d.globals.seriesGroups.length?s/d.globals.seriesGroups.length:0),y:t-(d.globals.isBarHorizontal&&d.globals.seriesGroups.length?n/d.globals.seriesGroups.length:0),foreColor:c.style.color,text:i,textAnchor:l,fontFamily:c.style.fontFamily,fontSize:c.style.fontSize,fontWeight:c.style.fontWeight})),g}}let ZP=class{constructor(e){this.w=e.w,this.barCtx=e}initVariables(e){const t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(let i=0;i<e.length;i++)if(e[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[i].length),t.globals.isXNumeric)for(let s=0;s<e[i].length;s++)t.globals.seriesX[i][s]>t.globals.minX&&t.globals.seriesX[i][s]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],t.globals.comboCharts||this.checkZeroSeries({series:e})}initialPositions(){let e=this.w,t,i,s,n,a,l,c,d,p=e.globals.dataPoints;this.barCtx.isRangeBar&&(p=e.globals.labels.length);let g=this.barCtx.seriesLen;if(e.config.plotOptions.bar.rangeBarGroupRows&&(g=1),this.barCtx.isHorizontal)s=e.globals.gridHeight/p,a=s/g,e.globals.isXNumeric&&(s=e.globals.gridHeight/this.barCtx.totalItems,a=s/this.barCtx.seriesLen),a=a*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(a=parseInt(this.barCtx.barOptions.barHeight,10)),d=this.barCtx.baseLineInvertedY+e.globals.padHorizontal+(this.barCtx.isReversed?e.globals.gridWidth:0)-(this.barCtx.isReversed?this.barCtx.baseLineInvertedY*2:0),this.barCtx.isFunnel&&(d=e.globals.gridWidth/2),i=(s-a*this.barCtx.seriesLen)/2;else{if(n=e.globals.gridWidth/this.barCtx.visibleItems,e.config.xaxis.convertedCatToNumeric&&(n=e.globals.gridWidth/e.globals.dataPoints),l=n/g*parseInt(this.barCtx.barOptions.columnWidth,10)/100,e.globals.isXNumeric){let b=this.barCtx.xRatio;e.globals.minXDiff&&e.globals.minXDiff!==.5&&e.globals.minXDiff/b>0&&(n=e.globals.minXDiff/b),l=n/g*parseInt(this.barCtx.barOptions.columnWidth,10)/100,l<1&&(l=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(l=parseInt(this.barCtx.barOptions.columnWidth,10)),c=e.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?e.globals.gridHeight:0)+(this.barCtx.isReversed?this.barCtx.baseLineY[this.barCtx.translationsIndex]*2:0),t=e.globals.padHorizontal+(n-l*this.barCtx.seriesLen)/2}return e.globals.barHeight=a,e.globals.barWidth=l,{x:t,y:i,yDivision:s,xDivision:n,barHeight:a,barWidth:l,zeroH:c,zeroW:d}}initializeStackedPrevVars(e){const t=e.w;t.globals.hasSeriesGroups?t.globals.seriesGroups.forEach(i=>{e[i]||(e[i]={}),e[i].prevY=[],e[i].prevX=[],e[i].prevYF=[],e[i].prevXF=[],e[i].prevYVal=[],e[i].prevXVal=[]}):(e.prevY=[],e.prevX=[],e.prevYF=[],e.prevXF=[],e.prevYVal=[],e.prevXVal=[])}initializeStackedXYVars(e){const t=e.w;t.globals.hasSeriesGroups?t.globals.seriesGroups.forEach(i=>{e[i]||(e[i]={}),e[i].xArrj=[],e[i].xArrjF=[],e[i].xArrjVal=[],e[i].yArrj=[],e[i].yArrjF=[],e[i].yArrjVal=[]}):(e.xArrj=[],e.xArrjF=[],e.xArrjVal=[],e.yArrj=[],e.yArrjF=[],e.yArrjVal=[])}getPathFillColor(e,t,i,s){var p,g,b,O;const n=this.w;let a=new ii(this.barCtx.ctx),l=null,c=this.barCtx.barOptions.distributed?i:t;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(h=>{e[t][i]>=h.from&&e[t][i]<=h.to&&(l=h.color)}),n.config.series[t].data[i]&&n.config.series[t].data[i].fillColor&&(l=n.config.series[t].data[i].fillColor),a.fillPath({seriesNumber:this.barCtx.barOptions.distributed?c:s,dataPointIndex:i,color:l,value:e[t][i],fillConfig:(p=n.config.series[t].data[i])==null?void 0:p.fill,fillType:(b=(g=n.config.series[t].data[i])==null?void 0:g.fill)!=null&&b.type?(O=n.config.series[t].data[i])==null?void 0:O.fill.type:Array.isArray(n.config.fill.type)?n.config.fill.type[t]:n.config.fill.type})}getStrokeWidth(e,t,i){let s=0;const n=this.w;return typeof this.barCtx.series[e][t]>"u"||this.barCtx.series[e][t]===null?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,n.config.stroke.show&&(this.barCtx.isNullValue||(s=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),s}shouldApplyRadius(e){const t=this.w;let i=!1;return t.config.plotOptions.bar.borderRadius>0&&(t.config.chart.stacked&&t.config.plotOptions.bar.borderRadiusWhenStacked==="last"?this.barCtx.lastActiveBarSerieIndex===e&&(i=!0):i=!0),i}barBackground({j:e,i:t,x1:i,x2:s,y1:n,y2:a,elSeries:l}){const c=this.w,d=new Y(this.barCtx.ctx);let g=new zt(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&g===t){e>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(e%=this.barCtx.barOptions.colors.backgroundBarColors.length);let b=this.barCtx.barOptions.colors.backgroundBarColors[e],O=d.drawRect(typeof i<"u"?i:0,typeof n<"u"?n:0,typeof s<"u"?s:c.globals.gridWidth,typeof a<"u"?a:c.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,b,this.barCtx.barOptions.colors.backgroundBarOpacity);l.add(O),O.node.classList.add("apexcharts-backgroundBar")}}getColumnPaths({barWidth:e,barXPosition:t,y1:i,y2:s,strokeWidth:n,seriesGroup:a,realIndex:l,i:c,j:d,w:p}){var v;const g=new Y(this.barCtx.ctx);n=Array.isArray(n)?n[l]:n,n||(n=0);let b=e,O=t;(v=p.config.series[l].data[d])!=null&&v.columnWidthOffset&&(O=t-p.config.series[l].data[d].columnWidthOffset/2,b=e+p.config.series[l].data[d].columnWidthOffset);const r=O,h=O+b;i+=.001,s+=.001;let u=g.move(r,i),m=g.move(r,i);const y=g.line(h-n,i);if(p.globals.previousPaths.length>0&&(m=this.barCtx.getPreviousPath(l,d,!1)),u=u+g.line(r,s)+g.line(h-n,s)+g.line(h-n,i)+(p.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),m=m+g.line(r,i)+y+y+y+y+y+g.line(r,i)+(p.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),this.shouldApplyRadius(l)&&(u=g.roundPathCorners(u,p.config.plotOptions.bar.borderRadius)),p.config.chart.stacked){let w=this.barCtx;p.globals.hasSeriesGroups&&a&&(w=this.barCtx[a]),w.yArrj.push(s),w.yArrjF.push(Math.abs(i-s)),w.yArrjVal.push(this.barCtx.series[c][d])}return{pathTo:u,pathFrom:m}}getBarpaths({barYPosition:e,barHeight:t,x1:i,x2:s,strokeWidth:n,seriesGroup:a,realIndex:l,i:c,j:d,w:p}){var v;const g=new Y(this.barCtx.ctx);n=Array.isArray(n)?n[l]:n,n||(n=0);let b=e,O=t;(v=p.config.series[l].data[d])!=null&&v.barHeightOffset&&(b=e-p.config.series[l].data[d].barHeightOffset/2,O=t+p.config.series[l].data[d].barHeightOffset);const r=b,h=b+O;i+=.001,s+=.001;let u=g.move(i,r),m=g.move(i,r);p.globals.previousPaths.length>0&&(m=this.barCtx.getPreviousPath(l,d,!1));const y=g.line(i,h-n);if(u=u+g.line(s,r)+g.line(s,h-n)+y+(p.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),m=m+g.line(i,r)+y+y+y+y+y+g.line(i,r)+(p.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),this.shouldApplyRadius(l)&&(u=g.roundPathCorners(u,p.config.plotOptions.bar.borderRadius)),p.config.chart.stacked){let w=this.barCtx;p.globals.hasSeriesGroups&&a&&(w=this.barCtx[a]),w.xArrj.push(s),w.xArrjF.push(Math.abs(i-s)),w.xArrjVal.push(this.barCtx.series[c][d])}return{pathTo:u,pathFrom:m}}checkZeroSeries({series:e}){let t=this.w;for(let i=0;i<e.length;i++){let s=0;for(let n=0;n<e[t.globals.maxValsInArrayIndex].length;n++)s+=e[i][n];s===0&&this.barCtx.zeroSerieses.push(i)}}getXForValue(e,t,i=!0){let s=i?t:null;return typeof e<"u"&&e!==null&&(s=t+e/this.barCtx.invertedYRatio-(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)*2),s}getYForValue(e,t,i,s=!0){let n=s?t:null;return typeof e<"u"&&e!==null&&(n=t-e/this.barCtx.yRatio[i]+(this.barCtx.isReversed?e/this.barCtx.yRatio[i]:0)*2),n}getGoalValues(e,t,i,s,n,a){const l=this.w;let c=[];const d=(p,g)=>{c.push({[e]:e==="x"?this.getXForValue(p,t,!1):this.getYForValue(p,i,a,!1),attrs:g})};if(l.globals.seriesGoals[s]&&l.globals.seriesGoals[s][n]&&Array.isArray(l.globals.seriesGoals[s][n])&&l.globals.seriesGoals[s][n].forEach(p=>{d(p.value,p)}),this.barCtx.barOptions.isDumbbell&&l.globals.seriesRange.length){let p=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:l.globals.colors;const g={strokeHeight:e==="x"?0:l.globals.markers.size[s],strokeWidth:e==="x"?l.globals.markers.size[s]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(p[s])?p[s][0]:p[s]};d(l.globals.seriesRangeStart[s][n],g),d(l.globals.seriesRangeEnd[s][n],{...g,strokeColor:Array.isArray(p[s])?p[s][1]:p[s]})}return c}drawGoalLine({barXPosition:e,barYPosition:t,goalX:i,goalY:s,barWidth:n,barHeight:a}){let l=new Y(this.barCtx.ctx);const c=l.group({className:"apexcharts-bar-goals-groups"});c.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:c.node}),c.attr("clip-path",`url(#gridRectMarkerMask${this.barCtx.w.globals.cuid})`);let d=null;return this.barCtx.isHorizontal?Array.isArray(i)&&i.forEach(p=>{if(p.x>=-1&&p.x<=l.w.globals.gridWidth+1){let g=typeof p.attrs.strokeHeight<"u"?p.attrs.strokeHeight:a/2,b=t+g+a/2;d=l.drawLine(p.x,b-g*2,p.x,b,p.attrs.strokeColor?p.attrs.strokeColor:void 0,p.attrs.strokeDashArray,p.attrs.strokeWidth?p.attrs.strokeWidth:2,p.attrs.strokeLineCap),c.add(d)}}):Array.isArray(s)&&s.forEach(p=>{if(p.y>=-1&&p.y<=l.w.globals.gridHeight+1){let g=typeof p.attrs.strokeWidth<"u"?p.attrs.strokeWidth:n/2,b=e+g+n/2;d=l.drawLine(b-g*2,p.y,b,p.y,p.attrs.strokeColor?p.attrs.strokeColor:void 0,p.attrs.strokeDashArray,p.attrs.strokeHeight?p.attrs.strokeHeight:2,p.attrs.strokeLineCap),c.add(d)}}),c}drawBarShadow({prevPaths:e,currPaths:t,color:i}){const s=this.w,{x:n,x1:a,barYPosition:l}=e,{x:c,x1:d,barYPosition:p}=t,g=l+t.barHeight,b=new Y(this.barCtx.ctx),O=new R,r=b.move(a,g)+b.line(n,g)+b.line(c,p)+b.line(d,p)+b.line(a,g)+(s.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z");return b.drawPath({d:r,fill:O.shadeColor(.5,R.rgb2hex(i)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}getZeroValueEncounters({i:e,j:t}){const i=this.w;let s=0,n=0;return i.globals.seriesPercent.forEach((a,l)=>{a[t]&&s++,l<e&&a[t]===0&&n++}),{nonZeroColumns:s,zeroEncounters:n}}};class fn{constructor(e,t){this.ctx=e,this.w=e.w;const i=this.w;this.barOptions=i.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=i.config.stroke.width,this.isNullValue=!1,this.isRangeBar=i.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!i.globals.isBarHorizontal&&i.globals.seriesRange.length&&i.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=t,this.xyRatios!==null&&(this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.invertedXRatio=t.invertedXRatio,this.invertedYRatio=t.invertedYRatio,this.baseLineY=t.baseLineY,this.baseLineInvertedY=t.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];const s=new zt(this.ctx);this.lastActiveBarSerieIndex=s.getActiveConfigSeriesIndex("desc",["bar","column"]);const n=s.getBarSeriesIndices(),a=new Je(this.ctx);this.stackedSeriesTotals=a.getStackedSeriesTotals(this.w.config.series.map((l,c)=>n.indexOf(c)===-1?c:-1).filter(l=>l!==-1)),this.barHelpers=new ZP(this)}draw(e,t){let i=this.w,s=new Y(this.ctx);const n=new Je(this.ctx,i);e=n.getLogSeries(e),this.series=e,this.yRatio=n.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);let a=s.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(let l=0,c=0;l<e.length;l++,c++){let d,p,g,b,O,r,h=[],u=[],m=i.globals.comboCharts?t[l]:l,y=s.group({class:"apexcharts-series",rel:l+1,seriesName:R.escapeString(i.globals.seriesNames[m]),"data:realIndex":m});this.ctx.series.addCollapsedClassToSeries(y,m),e[l].length>0&&(this.visibleI=this.visibleI+1);let v=0,w=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[m],this.translationsIndex=m);let S=this.translationsIndex;this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;let C=this.barHelpers.initialPositions();p=C.y,v=C.barHeight,b=C.yDivision,r=C.zeroW,d=C.x,w=C.barWidth,g=C.xDivision,O=C.zeroH,this.horizontal||u.push(d+w/2);let T=s.group({class:"apexcharts-datalabels","data:realIndex":m});i.globals.delayedElements.push({el:T.node}),T.node.classList.add("apexcharts-element-hidden");let _=s.group({class:"apexcharts-bar-goals-markers"}),$=s.group({class:"apexcharts-bar-shadows"});i.globals.delayedElements.push({el:$.node}),$.node.classList.add("apexcharts-element-hidden");for(let N=0;N<e[l].length;N++){const P=this.barHelpers.getStrokeWidth(l,N,m);let E=null;const x={indexes:{i:l,j:N,realIndex:m,translationsIndex:S,bc:c},x:d,y:p,strokeWidth:P,elSeries:y};this.isHorizontal?(E=this.drawBarPaths({...x,barHeight:v,zeroW:r,yDivision:b}),w=this.series[l][N]/this.invertedYRatio):(E=this.drawColumnPaths({...x,xDivision:g,barWidth:w,zeroH:O}),v=this.series[l][N]/this.yRatio[S]);let k=this.barHelpers.getPathFillColor(e,l,N,m);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&N>0){const L=this.barHelpers.drawBarShadow({color:typeof k=="string"&&(k==null?void 0:k.indexOf("url"))===-1?k:R.hexToRgba(i.globals.colors[l]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:E});L&&$.add(L)}this.pathArr.push(E);const A=this.barHelpers.drawGoalLine({barXPosition:E.barXPosition,barYPosition:E.barYPosition,goalX:E.goalX,goalY:E.goalY,barHeight:v,barWidth:w});A&&_.add(A),p=E.y,d=E.x,N>0&&u.push(d+w/2),h.push(p),this.renderSeries({realIndex:m,pathFill:k,j:N,i:l,pathFrom:E.pathFrom,pathTo:E.pathTo,strokeWidth:P,elSeries:y,x:d,y:p,series:e,barHeight:E.barHeight?E.barHeight:v,barWidth:E.barWidth?E.barWidth:w,elDataLabelsWrap:T,elGoalsMarkers:_,elBarShadows:$,visibleSeries:this.visibleI,type:"bar"})}i.globals.seriesXvalues[m]=u,i.globals.seriesYvalues[m]=h,a.add(y)}return a}renderSeries({realIndex:e,pathFill:t,lineFill:i,j:s,i:n,groupIndex:a,pathFrom:l,pathTo:c,strokeWidth:d,elSeries:p,x:g,y:b,y1:O,y2:r,series:h,barHeight:u,barWidth:m,barXPosition:y,barYPosition:v,elDataLabelsWrap:w,elGoalsMarkers:S,elBarShadows:C,visibleSeries:T,type:_}){const $=this.w,N=new Y(this.ctx);i||(i=this.barOptions.distributed?$.globals.stroke.colors[s]:$.globals.stroke.colors[e]),$.config.series[n].data[s]&&$.config.series[n].data[s].strokeColor&&(i=$.config.series[n].data[s].strokeColor),this.isNullValue&&(t="none");let P=s/$.config.chart.animations.animateGradually.delay*($.config.chart.animations.speed/$.globals.dataPoints)/2.4,E=N.renderPaths({i:n,j:s,realIndex:e,pathFrom:l,pathTo:c,stroke:i,strokeWidth:d,strokeLineCap:$.config.stroke.lineCap,fill:t,animationDelay:P,initialSpeed:$.config.chart.animations.speed,dataChangeSpeed:$.config.chart.animations.dynamicAnimation.speed,className:`apexcharts-${_}-area`});E.attr("clip-path",`url(#gridRectMask${$.globals.cuid})`);const x=$.config.forecastDataPoints;x.count>0&&s>=$.globals.dataPoints-x.count&&(E.node.setAttribute("stroke-dasharray",x.dashArray),E.node.setAttribute("stroke-width",x.strokeWidth),E.node.setAttribute("fill-opacity",x.fillOpacity)),typeof O<"u"&&typeof r<"u"&&(E.attr("data-range-y1",O),E.attr("data-range-y2",r)),new pt(this.ctx).setSelectionFilter(E,e,s),p.add(E);let L=new UP(this).handleBarDataLabels({x:g,y:b,y1:O,y2:r,i:n,j:s,series:h,realIndex:e,groupIndex:a,barHeight:u,barWidth:m,barXPosition:y,barYPosition:v,renderedPath:E,visibleSeries:T});return L.dataLabels!==null&&w.add(L.dataLabels),L.totalDataLabels&&w.add(L.totalDataLabels),p.add(w),S&&p.add(S),C&&p.add(C),p}drawBarPaths({indexes:e,barHeight:t,strokeWidth:i,zeroW:s,x:n,y:a,yDivision:l,elSeries:c}){let d=this.w,p=e.i,g=e.j,b;if(d.globals.isXNumeric)a=(d.globals.seriesX[p][g]-d.globals.minX)/this.invertedXRatio-t,b=a+t*this.visibleI;else if(d.config.plotOptions.bar.hideZeroBarsWhenGrouped){let r=0,h=0;d.globals.seriesPercent.forEach((u,m)=>{u[g]&&r++,m<p&&u[g]===0&&h++}),r>0&&(t=this.seriesLen*t/r),b=a+t*this.visibleI,b-=t*h}else b=a+t*this.visibleI;this.isFunnel&&(s=s-(this.barHelpers.getXForValue(this.series[p][g],s)-s)/2),n=this.barHelpers.getXForValue(this.series[p][g],s);const O=this.barHelpers.getBarpaths({barYPosition:b,barHeight:t,x1:s,x2:n,strokeWidth:i,series:this.series,realIndex:e.realIndex,i:p,j:g,w:d});return d.globals.isXNumeric||(a=a+l),this.barHelpers.barBackground({j:g,i:p,y1:b-t*this.visibleI,y2:t*this.seriesLen,elSeries:c}),{pathTo:O.pathTo,pathFrom:O.pathFrom,x1:s,x:n,y:a,goalX:this.barHelpers.getGoalValues("x",s,null,p,g),barYPosition:b,barHeight:t}}drawColumnPaths({indexes:e,x:t,y:i,xDivision:s,barWidth:n,zeroH:a,strokeWidth:l,elSeries:c}){let d=this.w,p=e.realIndex,g=e.translationsIndex,b=e.i,O=e.j,r=e.bc,h;if(d.globals.isXNumeric){const m=this.getBarXForNumericXAxis({x:t,j:O,realIndex:p,barWidth:n});t=m.x,h=m.barXPosition}else if(d.config.plotOptions.bar.hideZeroBarsWhenGrouped){const{nonZeroColumns:m,zeroEncounters:y}=this.barHelpers.getZeroValueEncounters({i:b,j:O});m>0&&(n=this.seriesLen*n/m),h=t+n*this.visibleI,h-=n*y}else h=t+n*this.visibleI;i=this.barHelpers.getYForValue(this.series[b][O],a,g);const u=this.barHelpers.getColumnPaths({barXPosition:h,barWidth:n,y1:a,y2:i,strokeWidth:l,series:this.series,realIndex:p,i:b,j:O,w:d});return d.globals.isXNumeric||(t=t+s),this.barHelpers.barBackground({bc:r,j:O,i:b,x1:h-l/2-n*this.visibleI,x2:n*this.seriesLen+l/2,elSeries:c}),{pathTo:u.pathTo,pathFrom:u.pathFrom,x:t,y:i,goalY:this.barHelpers.getGoalValues("y",null,a,b,O,g),barXPosition:h,barWidth:n}}getBarXForNumericXAxis({x:e,barWidth:t,realIndex:i,j:s}){const n=this.w;let a=i;return n.globals.seriesX[i].length||(a=n.globals.maxValsInArrayIndex),n.globals.seriesX[a][s]&&(e=(n.globals.seriesX[a][s]-n.globals.minX)/this.xRatio-t*this.seriesLen/2),{barXPosition:e+t*this.visibleI,x:e}}getPreviousPath(e,t){let i=this.w,s;for(let n=0;n<i.globals.previousPaths.length;n++){let a=i.globals.previousPaths[n];a.paths&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(e,10)&&typeof i.globals.previousPaths[n].paths[t]<"u"&&(s=i.globals.previousPaths[n].paths[t].d)}return s}}class Ag extends fn{draw(e,t){let i=this.w;this.graphics=new Y(this.ctx),this.bar=new fn(this.ctx,this.xyRatios);const s=new Je(this.ctx,i);e=s.getLogSeries(e),this.yRatio=s.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e),i.config.chart.stackType==="100%"&&(e=i.globals.seriesPercent.slice()),this.series=e,this.barHelpers.initializeStackedPrevVars(this);let n=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),a=0,l=0;for(let c=0,d=0;c<e.length;c++,d++){let p,g,b,O,r=-1;this.groupCtx=this,i.globals.seriesGroups.forEach(($,N)=>{$.indexOf(i.config.series[c].name)>-1&&(r=N)}),r!==-1&&(this.groupCtx=this[i.globals.seriesGroups[r]]);let h=[],u=[],m=i.globals.comboCharts?t[c]:c,y=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[m][0],y=m),this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;let v=this.graphics.group({class:"apexcharts-series",seriesName:R.escapeString(i.globals.seriesNames[m]),rel:c+1,"data:realIndex":m});this.ctx.series.addCollapsedClassToSeries(v,m);let w=this.graphics.group({class:"apexcharts-datalabels","data:realIndex":m}),S=this.graphics.group({class:"apexcharts-bar-goals-markers"}),C=0,T=0,_=this.initialPositions(a,l,p,g,b,O,y);l=_.y,C=_.barHeight,g=_.yDivision,O=_.zeroW,a=_.x,T=_.barWidth,p=_.xDivision,b=_.zeroH,i.globals.barHeight=C,i.globals.barWidth=T,this.barHelpers.initializeStackedXYVars(this),this.groupCtx.prevY.length===1&&this.groupCtx.prevY[0].every($=>isNaN($))&&(this.groupCtx.prevY[0]=this.groupCtx.prevY[0].map($=>b),this.groupCtx.prevYF[0]=this.groupCtx.prevYF[0].map($=>0));for(let $=0;$<i.globals.dataPoints;$++){const N=this.barHelpers.getStrokeWidth(c,$,m),P={indexes:{i:c,j:$,realIndex:m,translationsIndex:y,bc:d},strokeWidth:N,x:a,y:l,elSeries:v,groupIndex:r,seriesGroup:i.globals.seriesGroups[r]};let E=null;this.isHorizontal?(E=this.drawStackedBarPaths({...P,zeroW:O,barHeight:C,yDivision:g}),T=this.series[c][$]/this.invertedYRatio):(E=this.drawStackedColumnPaths({...P,xDivision:p,barWidth:T,zeroH:b}),C=this.series[c][$]/this.yRatio[y]);const x=this.barHelpers.drawGoalLine({barXPosition:E.barXPosition,barYPosition:E.barYPosition,goalX:E.goalX,goalY:E.goalY,barHeight:C,barWidth:T});x&&S.add(x),l=E.y,a=E.x,h.push(a),u.push(l);let k=this.barHelpers.getPathFillColor(e,c,$,m);v=this.renderSeries({realIndex:m,pathFill:k,j:$,i:c,groupIndex:r,pathFrom:E.pathFrom,pathTo:E.pathTo,strokeWidth:N,elSeries:v,x:a,y:l,series:e,barHeight:C,barWidth:T,elDataLabelsWrap:w,elGoalsMarkers:S,type:"bar",visibleSeries:0})}i.globals.seriesXvalues[m]=h,i.globals.seriesYvalues[m]=u,this.groupCtx.prevY.push(this.groupCtx.yArrj),this.groupCtx.prevYF.push(this.groupCtx.yArrjF),this.groupCtx.prevYVal.push(this.groupCtx.yArrjVal),this.groupCtx.prevX.push(this.groupCtx.xArrj),this.groupCtx.prevXF.push(this.groupCtx.xArrjF),this.groupCtx.prevXVal.push(this.groupCtx.xArrjVal),n.add(v)}return n}initialPositions(e,t,i,s,n,a,l){var g,b;let c=this.w,d,p;return this.isHorizontal?(s=c.globals.gridHeight/c.globals.dataPoints,d=s,d=d*parseInt(c.config.plotOptions.bar.barHeight,10)/100,String(c.config.plotOptions.bar.barHeight).indexOf("%")===-1&&(d=parseInt(c.config.plotOptions.bar.barHeight,10)),a=this.baseLineInvertedY+c.globals.padHorizontal+(this.isReversed?c.globals.gridWidth:0)-(this.isReversed?this.baseLineInvertedY*2:0),t=(s-d)/2):(i=c.globals.gridWidth/c.globals.dataPoints,p=i,c.globals.isXNumeric&&c.globals.dataPoints>1?(i=c.globals.minXDiff/this.xRatio,p=i*parseInt(this.barOptions.columnWidth,10)/100):p=p*parseInt(c.config.plotOptions.bar.columnWidth,10)/100,String(c.config.plotOptions.bar.columnWidth).indexOf("%")===-1&&(p=parseInt(c.config.plotOptions.bar.columnWidth,10)),n=c.globals.gridHeight-this.baseLineY[l]-(this.isReversed?c.globals.gridHeight:0)+(this.isReversed?this.baseLineY[l]*2:0),e=c.globals.padHorizontal+(i-p)/2),{x:e,y:t,yDivision:s,xDivision:i,barHeight:(g=c.globals.seriesGroups)!=null&&g.length?d/c.globals.seriesGroups.length:d,barWidth:(b=c.globals.seriesGroups)!=null&&b.length?p/c.globals.seriesGroups.length:p,zeroH:n,zeroW:a}}drawStackedBarPaths({indexes:e,barHeight:t,strokeWidth:i,zeroW:s,x:n,y:a,groupIndex:l,seriesGroup:c,yDivision:d,elSeries:p}){let g=this.w,b=a+(l!==-1?l*t:0),O,r=e.i,h=e.j,u=e.translationsIndex,m=0;for(let w=0;w<this.groupCtx.prevXF.length;w++)m=m+this.groupCtx.prevXF[w][h];let y=r;if(c&&(y=c.indexOf(g.config.series[r].name)),y>0){let w=s;this.groupCtx.prevXVal[y-1][h]<0?w=this.series[r][h]>=0?this.groupCtx.prevX[y-1][h]+m-(this.isReversed?m:0)*2:this.groupCtx.prevX[y-1][h]:this.groupCtx.prevXVal[y-1][h]>=0&&(w=this.series[r][h]>=0?this.groupCtx.prevX[y-1][h]:this.groupCtx.prevX[y-1][h]-m+(this.isReversed?m:0)*2),O=w}else O=s;this.series[r][h]===null?n=O:n=O+this.series[r][h]/this.invertedYRatio-(this.isReversed?this.series[r][h]/this.invertedYRatio:0)*2;const v=this.barHelpers.getBarpaths({barYPosition:b,barHeight:t,x1:O,x2:n,strokeWidth:i,series:this.series,realIndex:e.realIndex,seriesGroup:c,i:r,j:h,w:g});return this.barHelpers.barBackground({j:h,i:r,y1:b,y2:t,elSeries:p}),a=a+d,{pathTo:v.pathTo,pathFrom:v.pathFrom,goalX:this.barHelpers.getGoalValues("x",s,null,r,h,u),barYPosition:b,x:n,y:a}}drawStackedColumnPaths({indexes:e,x:t,y:i,xDivision:s,barWidth:n,zeroH:a,groupIndex:l,seriesGroup:c,elSeries:d}){var w,S,C,T;let p=this.w,g=e.i,b=e.j,O=e.bc,r=e.translationsIndex;if(p.globals.isXNumeric){let _=p.globals.seriesX[g][b];_||(_=0),t=(_-p.globals.minX)/this.xRatio-n/2,p.globals.seriesGroups.length&&(t=(_-p.globals.minX)/this.xRatio-n/2*p.globals.seriesGroups.length)}let h=t+(l!==-1?l*n:0),u,m=0;for(let _=0;_<this.groupCtx.prevYF.length;_++)m=m+(isNaN(this.groupCtx.prevYF[_][b])?0:this.groupCtx.prevYF[_][b]);let y=g;if(c&&(y=c.indexOf(p.config.series[g].name)),y>0&&!p.globals.isXNumeric||y>0&&p.globals.isXNumeric&&p.globals.seriesX[g-1][b]===p.globals.seriesX[g][b]){let _,$;const N=Math.min(this.yRatio.length+1,g+1);if(this.groupCtx.prevY[y-1]!==void 0&&this.groupCtx.prevY[y-1].length){for(let P=1;P<N;P++)if(!isNaN((w=this.groupCtx.prevY[y-P])==null?void 0:w[b])){$=this.groupCtx.prevY[y-P][b];break}}for(let P=1;P<N;P++)if(((S=this.groupCtx.prevYVal[y-P])==null?void 0:S[b])<0){_=this.series[g][b]>=0?$-m+(this.isReversed?m:0)*2:$;break}else if(((C=this.groupCtx.prevYVal[y-P])==null?void 0:C[b])>=0){_=this.series[g][b]>=0?$:$+m-(this.isReversed?m:0)*2;break}typeof _>"u"&&(_=p.globals.gridHeight),(T=this.groupCtx.prevYF[0])!=null&&T.every(P=>P===0)&&this.groupCtx.prevYF.slice(1,y).every(P=>P.every(E=>isNaN(E)))?u=a:u=_}else u=a;this.series[g][b]?i=u-this.series[g][b]/this.yRatio[r]+(this.isReversed?this.series[g][b]/this.yRatio[r]:0)*2:i=u;const v=this.barHelpers.getColumnPaths({barXPosition:h,barWidth:n,y1:u,y2:i,yRatio:this.yRatio[r],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:c,realIndex:e.realIndex,i:g,j:b,w:p});return this.barHelpers.barBackground({bc:O,j:b,i:g,x1:h,x2:n,elSeries:d}),t=t+s,{pathTo:v.pathTo,pathFrom:v.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,a,g,b),barXPosition:h,x:p.globals.isXNumeric?t-s:t,y:i}}}class Ac extends fn{draw(e,t,i){let s=this.w,n=new Y(this.ctx),a=s.globals.comboCharts?t:s.config.chart.type,l=new ii(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=s.config.plotOptions.bar.horizontal;const c=new Je(this.ctx,s);e=c.getLogSeries(e),this.series=e,this.yRatio=c.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);let d=n.group({class:`apexcharts-${a}-series apexcharts-plot-series`});for(let p=0;p<e.length;p++){this.isBoxPlot=s.config.chart.type==="boxPlot"||s.config.series[p].type==="boxPlot";let g,b,O,r,h,u,m=[],y=[],v=s.globals.comboCharts?i[p]:p,w=n.group({class:"apexcharts-series",seriesName:R.escapeString(s.globals.seriesNames[v]),rel:p+1,"data:realIndex":v});this.ctx.series.addCollapsedClassToSeries(w,v),e[p].length>0&&(this.visibleI=this.visibleI+1);let S=0,C=0,T=0;this.yRatio.length>1&&(this.yaxisIndex=s.globals.seriesYAxisReverseMap[v][0],T=v);let _=this.barHelpers.initialPositions();b=_.y,S=_.barHeight,r=_.yDivision,u=_.zeroW,g=_.x,C=_.barWidth,O=_.xDivision,h=_.zeroH,y.push(g+C/2);let $=n.group({class:"apexcharts-datalabels","data:realIndex":v});for(let N=0;N<s.globals.dataPoints;N++){const P=this.barHelpers.getStrokeWidth(p,N,v);let E=null;const x={indexes:{i:p,j:N,realIndex:v,translationsIndex:T},x:g,y:b,strokeWidth:P,elSeries:w};this.isHorizontal?E=this.drawHorizontalBoxPaths({...x,yDivision:r,barHeight:S,zeroW:u}):E=this.drawVerticalBoxPaths({...x,xDivision:O,barWidth:C,zeroH:h}),b=E.y,g=E.x,N>0&&y.push(g+C/2),m.push(b),E.pathTo.forEach((k,A)=>{let L=!this.isBoxPlot&&this.candlestickOptions.wick.useFillColor?E.color[A]:s.globals.stroke.colors[p],D=l.fillPath({seriesNumber:v,dataPointIndex:N,color:E.color[A],value:e[p][N]});this.renderSeries({realIndex:v,pathFill:D,lineFill:L,j:N,i:p,pathFrom:E.pathFrom,pathTo:k,strokeWidth:P,elSeries:w,x:g,y:b,series:e,barHeight:S,barWidth:C,elDataLabelsWrap:$,visibleSeries:this.visibleI,type:s.config.chart.type})})}s.globals.seriesXvalues[v]=y,s.globals.seriesYvalues[v]=m,d.add(w)}return d}drawVerticalBoxPaths({indexes:e,x:t,y:i,xDivision:s,barWidth:n,zeroH:a,strokeWidth:l}){let c=this.w,d=new Y(this.ctx),p=e.i,g=e.j,b=!0,O=c.config.plotOptions.candlestick.colors.upward,r=c.config.plotOptions.candlestick.colors.downward,h="";this.isBoxPlot&&(h=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);const u=this.yRatio[e.translationsIndex];let m=e.realIndex;const y=this.getOHLCValue(m,g);let v=a,w=a;y.o>y.c&&(b=!1);let S=Math.min(y.o,y.c),C=Math.max(y.o,y.c),T=y.m;c.globals.isXNumeric&&(t=(c.globals.seriesX[m][g]-c.globals.minX)/this.xRatio-n/2);let _=t+n*this.visibleI;typeof this.series[p][g]>"u"||this.series[p][g]===null?(S=a,C=a):(S=a-S/u,C=a-C/u,v=a-y.h/u,w=a-y.l/u,T=a-y.m/u);let $=d.move(_,a),N=d.move(_+n/2,S);return c.globals.previousPaths.length>0&&(N=this.getPreviousPath(m,g,!0)),this.isBoxPlot?$=[d.move(_,S)+d.line(_+n/2,S)+d.line(_+n/2,v)+d.line(_+n/4,v)+d.line(_+n-n/4,v)+d.line(_+n/2,v)+d.line(_+n/2,S)+d.line(_+n,S)+d.line(_+n,T)+d.line(_,T)+d.line(_,S+l/2),d.move(_,T)+d.line(_+n,T)+d.line(_+n,C)+d.line(_+n/2,C)+d.line(_+n/2,w)+d.line(_+n-n/4,w)+d.line(_+n/4,w)+d.line(_+n/2,w)+d.line(_+n/2,C)+d.line(_,C)+d.line(_,T)+"z"]:$=[d.move(_,C)+d.line(_+n/2,C)+d.line(_+n/2,v)+d.line(_+n/2,C)+d.line(_+n,C)+d.line(_+n,S)+d.line(_+n/2,S)+d.line(_+n/2,w)+d.line(_+n/2,S)+d.line(_,S)+d.line(_,C-l/2)],N=N+d.move(_,S),c.globals.isXNumeric||(t=t+s),{pathTo:$,pathFrom:N,x:t,y:C,barXPosition:_,color:this.isBoxPlot?h:b?[O]:[r]}}drawHorizontalBoxPaths({indexes:e,x:t,y:i,yDivision:s,barHeight:n,zeroW:a,strokeWidth:l}){let c=this.w,d=new Y(this.ctx),p=e.i,g=e.j,b=this.boxOptions.colors.lower;this.isBoxPlot&&(b=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);const O=this.invertedYRatio;let r=e.realIndex;const h=this.getOHLCValue(r,g);let u=a,m=a,y=Math.min(h.o,h.c),v=Math.max(h.o,h.c),w=h.m;c.globals.isXNumeric&&(i=(c.globals.seriesX[r][g]-c.globals.minX)/this.invertedXRatio-n/2);let S=i+n*this.visibleI;typeof this.series[p][g]>"u"||this.series[p][g]===null?(y=a,v=a):(y=a+y/O,v=a+v/O,u=a+h.h/O,m=a+h.l/O,w=a+h.m/O);let C=d.move(a,S),T=d.move(y,S+n/2);return c.globals.previousPaths.length>0&&(T=this.getPreviousPath(r,g,!0)),C=[d.move(y,S)+d.line(y,S+n/2)+d.line(u,S+n/2)+d.line(u,S+n/2-n/4)+d.line(u,S+n/2+n/4)+d.line(u,S+n/2)+d.line(y,S+n/2)+d.line(y,S+n)+d.line(w,S+n)+d.line(w,S)+d.line(y+l/2,S),d.move(w,S)+d.line(w,S+n)+d.line(v,S+n)+d.line(v,S+n/2)+d.line(m,S+n/2)+d.line(m,S+n-n/4)+d.line(m,S+n/4)+d.line(m,S+n/2)+d.line(v,S+n/2)+d.line(v,S)+d.line(w,S)+"z"],T=T+d.move(y,S),c.globals.isXNumeric||(i=i+s),{pathTo:C,pathFrom:T,x:v,y:i,barYPosition:S,color:b}}getOHLCValue(e,t){const i=this.w;return{o:this.isBoxPlot?i.globals.seriesCandleH[e][t]:i.globals.seriesCandleO[e][t],h:this.isBoxPlot?i.globals.seriesCandleO[e][t]:i.globals.seriesCandleH[e][t],m:i.globals.seriesCandleM[e][t],l:this.isBoxPlot?i.globals.seriesCandleC[e][t]:i.globals.seriesCandleL[e][t],c:this.isBoxPlot?i.globals.seriesCandleL[e][t]:i.globals.seriesCandleC[e][t]}}}class Eg{constructor(e){this.ctx=e,this.w=e.w}checkColorRange(){const e=this.w;let t=!1,i=e.config.plotOptions[e.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map((s,n)=>{s.from<=0&&(t=!0)}),t}getShadeColor(e,t,i,s){const n=this.w;let a=1,l=n.config.plotOptions[e].shadeIntensity;const c=this.determineColor(e,t,i);n.globals.hasNegs||s?n.config.plotOptions[e].reverseNegativeShade?c.percent<0?a=c.percent/100*(l*1.25):a=(1-c.percent/100)*(l*1.25):c.percent<=0?a=1-(1+c.percent/100)*l:a=(1-c.percent/100)*l:(a=1-c.percent/100,e==="treemap"&&(a=(1-c.percent/100)*(l*1.25)));let d=c.color,p=new R;return n.config.plotOptions[e].enableShades&&(this.w.config.theme.mode==="dark"?d=R.hexToRgba(p.shadeColor(a*-1,c.color),n.config.fill.opacity):d=R.hexToRgba(p.shadeColor(a,c.color),n.config.fill.opacity)),{color:d,colorProps:c}}determineColor(e,t,i){const s=this.w;let n=s.globals.series[t][i],a=s.config.plotOptions[e],l=a.colorScale.inverse?i:t;a.distributed&&s.config.chart.type==="treemap"&&(l=i);let c=s.globals.colors[l],d=null,p=Math.min(...s.globals.series[t]),g=Math.max(...s.globals.series[t]);!a.distributed&&e==="heatmap"&&(p=s.globals.minY,g=s.globals.maxY),typeof a.colorScale.min<"u"&&(p=a.colorScale.min<s.globals.minY?a.colorScale.min:s.globals.minY,g=a.colorScale.max>s.globals.maxY?a.colorScale.max:s.globals.maxY);let b=Math.abs(g)+Math.abs(p),O=100*n/(b===0?b-1e-6:b);return a.colorScale.ranges.length>0&&a.colorScale.ranges.map((h,u)=>{if(n>=h.from&&n<=h.to){c=h.color,d=h.foreColor?h.foreColor:null,p=h.from,g=h.to;let m=Math.abs(g)+Math.abs(p);O=100*n/(m===0?m-1e-6:m)}}),{color:c,foreColor:d,percent:O}}calculateDataLabels({text:e,x:t,y:i,i:s,j:n,colorProps:a,fontSize:l}){let d=this.w.config.dataLabels;const p=new Y(this.ctx);let g=new un(this.ctx),b=null;if(d.enabled){b=p.group({class:"apexcharts-data-labels"});const O=d.offsetX,r=d.offsetY;let h=t+O,u=i+parseFloat(d.style.fontSize)/3+r;g.plotDataLabelsText({x:h,y:u,text:e,i:s,j:n,color:a.foreColor,parent:b,fontSize:l,dataLabelsConfig:d})}return b}addListeners(e){const t=new Y(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}class qP{constructor(e,t){this.ctx=e,this.w=e.w,this.xRatio=t.xRatio,this.yRatio=t.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Eg(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}draw(e){let t=this.w;const i=new Y(this.ctx);let s=i.group({class:"apexcharts-heatmap"});s.attr("clip-path",`url(#gridRectMask${t.globals.cuid})`);let n=t.globals.gridWidth/t.globals.dataPoints,a=t.globals.gridHeight/t.globals.series.length,l=0,c=!1;this.negRange=this.helpers.checkColorRange();let d=e.slice();t.config.yaxis[0].reversed&&(c=!0,d.reverse());for(let g=c?0:d.length-1;c?g<d.length:g>=0;c?g++:g--){let b=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:R.escapeString(t.globals.seriesNames[g]),rel:g+1,"data:realIndex":g});if(this.ctx.series.addCollapsedClassToSeries(b,g),t.config.chart.dropShadow.enabled){const h=t.config.chart.dropShadow;new pt(this.ctx).dropShadow(b,h,g)}let O=0,r=t.config.plotOptions.heatmap.shadeIntensity;for(let h=0;h<d[g].length;h++){let u=this.helpers.getShadeColor(t.config.chart.type,g,h,this.negRange),m=u.color,y=u.colorProps;t.config.fill.type==="image"&&(m=new ii(this.ctx).fillPath({seriesNumber:g,dataPointIndex:h,opacity:t.globals.hasNegs?y.percent<0?1-(1+y.percent/100):r+y.percent/100:y.percent/100,patternID:R.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:n,height:t.config.fill.image.height?t.config.fill.image.height:a}));let v=this.rectRadius,w=i.drawRect(O,l,n,a,v);if(w.attr({cx:O,cy:l}),w.node.classList.add("apexcharts-heatmap-rect"),b.add(w),w.attr({fill:m,i:g,index:g,j:h,val:e[g][h],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?m:t.globals.stroke.colors[0],color:m}),this.helpers.addListeners(w),t.config.chart.animations.enabled&&!t.globals.dataChanged){let _=1;t.globals.resized||(_=t.config.chart.animations.speed),this.animateHeatMap(w,O,l,n,a,_)}if(t.globals.dataChanged){let _=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){_=this.dynamicAnim.speed;let $=t.globals.previousPaths[g]&&t.globals.previousPaths[g][h]&&t.globals.previousPaths[g][h].color;$||($="rgba(255, 255, 255, 0)"),this.animateHeatColor(w,R.isColorHex($)?$:R.rgb2hex($),R.isColorHex(m)?m:R.rgb2hex(m),_)}}let S=t.config.dataLabels.formatter,C=S(t.globals.series[g][h],{value:t.globals.series[g][h],seriesIndex:g,dataPointIndex:h,w:t}),T=this.helpers.calculateDataLabels({text:C,x:O+n/2,y:l+a/2,i:g,j:h,colorProps:y,series:d});T!==null&&b.add(T),O=O+n}l=l+a,s.add(b)}let p=t.globals.yAxisScale[0].result.slice();return t.config.yaxis[0].reversed?p.unshift(""):p.push(""),t.globals.yAxisScale[0].result=p,s}animateHeatMap(e,t,i,s,n,a){const l=new dn(this.ctx);l.animateRect(e,{x:t+s/2,y:i+n/2,width:0,height:0},{x:t,y:i,width:s,height:n},a,()=>{l.animationCompleted(e)})}animateHeatColor(e,t,i,s){e.attr({fill:t}).animate(s).attr({fill:i})}}class $g{constructor(e){this.ctx=e,this.w=e.w}drawYAxisTexts(e,t,i,s){const n=this.w,a=n.config.yaxis[0],l=n.globals.yLabelFormatters[0];return new Y(this.ctx).drawText({x:e+a.labels.offsetX,y:t+a.labels.offsetY,text:l(s,i),textAnchor:"middle",fontSize:a.labels.style.fontSize,fontFamily:a.labels.style.fontFamily,foreColor:Array.isArray(a.labels.style.colors)?a.labels.style.colors[i]:a.labels.style.colors})}}class Pg{constructor(e){this.ctx=e,this.w=e.w;const t=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=Math.min(t.globals.gridWidth,t.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=t.globals.gridWidth/2,t.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(t.config.plotOptions.pie.endAngle-t.config.plotOptions.pie.startAngle),this.initialAngle=t.config.plotOptions.pie.startAngle%this.fullAngle,t.globals.radialSize=this.defaultSize/2.05-t.config.stroke.width-(t.config.chart.sparkline.enabled?0:t.config.chart.dropShadow.blur),this.donutSize=t.globals.radialSize*parseInt(t.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}draw(e){let t=this,i=this.w;const s=new Y(this.ctx);if(this.ret=s.group({class:"apexcharts-pie"}),i.globals.noData)return this.ret;let n=0;for(let r=0;r<e.length;r++)n+=R.negToZero(e[r]);let a=[],l=s.group();n===0&&(n=1e-5),e.forEach(r=>{this.maxY=Math.max(this.maxY,r)}),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),i.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(this.ret);for(let r=0;r<e.length;r++){let h=this.fullAngle*R.negToZero(e[r])/n;a.push(h),this.chartType==="polarArea"?(a[r]=this.fullAngle/e.length,this.sliceSizes.push(i.globals.radialSize*e[r]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){let r=0;for(let u=0;u<i.globals.previousPaths.length;u++)r+=R.negToZero(i.globals.previousPaths[u]);let h;for(let u=0;u<i.globals.previousPaths.length;u++)h=this.fullAngle*R.negToZero(i.globals.previousPaths[u])/r,this.prevSectorAngleArr.push(h)}this.donutSize<0&&(this.donutSize=0);let c=i.config.plotOptions.pie.customScale,d=i.globals.gridWidth/2,p=i.globals.gridHeight/2,g=d-i.globals.gridWidth/2*c,b=p-i.globals.gridHeight/2*c;if(this.chartType==="donut"){const r=s.drawCircle(this.donutSize);r.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),l.add(r)}let O=t.drawArcs(a,e);if(this.sliceLabels.forEach(r=>{O.add(r)}),l.attr({transform:`translate(${g}, ${b}) scale(${c})`}),l.add(O),this.ret.add(l),this.donutDataLabels.show){let r=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:g,translateY:b});this.ret.add(r)}return i.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(this.ret),this.ret}drawArcs(e,t){let i=this.w;const s=new pt(this.ctx);let n=new Y(this.ctx),a=new ii(this.ctx),l=n.group({class:"apexcharts-slices"}),c=this.initialAngle,d=this.initialAngle,p=this.initialAngle,g=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(let b=0;b<e.length;b++){let O=n.group({class:"apexcharts-series apexcharts-pie-series",seriesName:R.escapeString(i.globals.seriesNames[b]),rel:b+1,"data:realIndex":b});l.add(O),c=p,d=g,p=c+e[b],g=d+this.prevSectorAngleArr[b];const r=p<c?this.fullAngle+p-c:p-c;let h=a.fillPath({seriesNumber:b,size:this.sliceSizes[b],value:t[b]}),u=this.getChangedPath(d,g),m=n.drawPath({d:u,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[b]:this.lineColorArr,strokeWidth:0,fill:h,fillOpacity:i.config.fill.opacity,classes:`apexcharts-pie-area apexcharts-${this.chartType.toLowerCase()}-slice-${b}`});if(m.attr({index:0,j:b}),s.setSelectionFilter(m,0,b),i.config.chart.dropShadow.enabled){const w=i.config.chart.dropShadow;s.dropShadow(m,w,b)}this.addListeners(m,this.donutDataLabels),Y.setAttrs(m.node,{"data:angle":r,"data:startAngle":c,"data:strokeWidth":this.strokeWidth,"data:value":t[b]});let y={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?y=R.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(c+r/2)%this.fullAngle):this.chartType==="donut"&&(y=R.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(c+r/2)%this.fullAngle)),O.add(m);let v=0;if(this.initialAnim&&!i.globals.resized&&!i.globals.dataChanged?(v=r/this.fullAngle*i.config.chart.animations.speed,v===0&&(v=1),this.animDur=v+this.animDur,this.animBeginArr.push(this.animDur)):this.animBeginArr.push(0),this.dynamicAnim&&i.globals.dataChanged?this.animatePaths(m,{size:this.sliceSizes[b],endAngle:p,startAngle:c,prevStartAngle:d,prevEndAngle:g,animateStartingPos:!0,i:b,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(m,{size:this.sliceSizes[b],endAngle:p,startAngle:c,i:b,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:v}),i.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&m.click(this.pieClicked.bind(this,b)),typeof i.globals.selectedDataPoints[0]<"u"&&i.globals.selectedDataPoints[0].indexOf(b)>-1&&this.pieClicked(b),i.config.dataLabels.enabled){let w=y.x,S=y.y,C=100*r/this.fullAngle+"%";if(r!==0&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[b]){let T=i.config.dataLabels.formatter;T!==void 0&&(C=T(i.globals.seriesPercent[b][0],{seriesIndex:b,w:i}));let _=i.globals.dataLabels.style.colors[b];const $=n.group({class:"apexcharts-datalabels"});let N=n.drawText({x:w,y:S,text:C,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:_});if($.add(N),i.config.dataLabels.dropShadow.enabled){const P=i.config.dataLabels.dropShadow;s.dropShadow(N,P)}N.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&i.globals.resized===!1&&(N.node.classList.add("apexcharts-pie-label-delay"),N.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push($)}}}return l}addListeners(e,t){const i=new Y(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}animatePaths(e,t){let i=this.w,s=this,n=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,a=n,l=t.startAngle,c=t.startAngle;t.prevStartAngle!==void 0&&t.prevEndAngle!==void 0&&(l=t.prevEndAngle,a=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===i.config.series.length-1&&(n+c>this.fullAngle?t.endAngle=t.endAngle-(n+c):n+c<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(n+c)))),n===this.fullAngle&&(n=this.fullAngle-.01),s.animateArc(e,l,c,n,a,t)}animateArc(e,t,i,s,n,a){let l=this;const c=this.w,d=new dn(this.ctx);let p=a.size,g;(isNaN(t)||isNaN(n))&&(t=i,n=s,a.dur=0);let b=s,O=i,r=t<i?this.fullAngle+t-i:t-i;c.globals.dataChanged&&a.shouldSetPrevPaths&&a.prevEndAngle&&(g=l.getPiePath({me:l,startAngle:a.prevStartAngle,angle:a.prevEndAngle<a.prevStartAngle?this.fullAngle+a.prevEndAngle-a.prevStartAngle:a.prevEndAngle-a.prevStartAngle,size:p}),e.attr({d:g})),a.dur!==0?e.animate(a.dur,c.globals.easing,a.animBeginArr[a.i]).afterAll(function(){(l.chartType==="pie"||l.chartType==="donut"||l.chartType==="polarArea")&&this.animate(c.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":l.strokeWidth}),a.i===c.config.series.length-1&&d.animationCompleted(e)}).during(h=>{b=r+(s-r)*h,a.animateStartingPos&&(b=n+(s-n)*h,O=t-n+(i-(t-n))*h),g=l.getPiePath({me:l,startAngle:O,angle:b,size:p}),e.node.setAttribute("data:pathOrig",g),e.attr({d:g})}):(g=l.getPiePath({me:l,startAngle:O,angle:s,size:p}),a.isTrack||(c.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",g),e.attr({d:g,"stroke-width":l.strokeWidth}))}pieClicked(e){let t=this.w,i=this,s,n=i.sliceSizes[e]+(t.config.plotOptions.pie.expandOnClick?4:0),a=t.globals.dom.Paper.select(`.apexcharts-${i.chartType.toLowerCase()}-slice-${e}`).members[0];if(a.attr("data:pieClicked")==="true"){a.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(a.node,this.donutDataLabels);let d=a.attr("data:pathOrig");a.attr({d});return}else{let d=t.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(d,p=>{p.setAttribute("data:pieClicked","false");let g=p.getAttribute("data:pathOrig");g&&p.setAttribute("d",g)}),a.attr("data:pieClicked","true")}let l=parseInt(a.attr("data:startAngle"),10),c=parseInt(a.attr("data:angle"),10);s=i.getPiePath({me:i,startAngle:l,angle:c,size:n}),c!==360&&a.plot(s)}getChangedPath(e,t){let i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),i}getPiePath({me:e,startAngle:t,angle:i,size:s}){let n;const a=new Y(this.ctx);let l=t,c=Math.PI*(l-90)/180,d=i+t;Math.ceil(d)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(d=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(d)>this.fullAngle&&(d-=this.fullAngle);let p=Math.PI*(d-90)/180,g=e.centerX+s*Math.cos(c),b=e.centerY+s*Math.sin(c),O=e.centerX+s*Math.cos(p),r=e.centerY+s*Math.sin(p),h=R.polarToCartesian(e.centerX,e.centerY,e.donutSize,d),u=R.polarToCartesian(e.centerX,e.centerY,e.donutSize,l),m=i>180?1:0;const y=["M",g,b,"A",s,s,0,m,1,O,r];return e.chartType==="donut"?n=[...y,"L",h.x,h.y,"A",e.donutSize,e.donutSize,0,m,0,u.x,u.y,"L",g,b,"z"].join(" "):e.chartType==="pie"||e.chartType==="polarArea"?n=[...y,"L",e.centerX,e.centerY,"L",g,b].join(" "):n=[...y].join(" "),a.roundPathCorners(n,this.strokeWidth*2)}drawPolarElements(e){const t=this.w,i=new wg(this.ctx),s=new Y(this.ctx),n=new $g(this.ctx),a=s.group(),l=s.group(),c=i.niceScale(0,Math.ceil(this.maxY),0),d=c.result.reverse();let p=c.result.length;this.maxY=c.niceMax;let g=t.globals.radialSize,b=g/(p-1);for(let O=0;O<p-1;O++){const r=s.drawCircle(g);if(r.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){const h=n.drawYAxisTexts(this.centerX,this.centerY-g+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,O,d[O]);l.add(h)}a.add(r),g=g-b}this.drawSpokes(e),e.add(a),e.add(l)}renderInnerDataLabels(e,t){let i=this.w;const s=new Y(this.ctx);let n=s.group({class:"apexcharts-datalabels-group",transform:`translate(${t.translateX?t.translateX:0}, ${t.translateY?t.translateY:0}) scale(${i.config.plotOptions.pie.customScale})`});const a=e.total.show;n.node.style.opacity=t.opacity;let l=t.centerX,c=t.centerY,d,p;e.name.color===void 0?d=i.globals.colors[0]:d=e.name.color;let g=e.name.fontSize,b=e.name.fontFamily,O=e.name.fontWeight;e.value.color===void 0?p=i.config.chart.foreColor:p=e.value.color;let r=e.value.formatter,h="",u="";if(a?(d=e.total.color,g=e.total.fontSize,b=e.total.fontFamily,O=e.total.fontWeight,u=e.total.label,h=e.total.formatter(i)):i.globals.series.length===1&&(h=r(i.globals.series[0],i),u=i.globals.seriesNames[0]),u&&(u=e.name.formatter(u,e.total.show,i)),e.name.show){let m=s.drawText({x:l,y:c+parseFloat(e.name.offsetY),text:u,textAnchor:"middle",foreColor:d,fontSize:g,fontWeight:O,fontFamily:b});m.node.classList.add("apexcharts-datalabel-label"),n.add(m)}if(e.value.show){let m=e.name.show?parseFloat(e.value.offsetY)+16:e.value.offsetY,y=s.drawText({x:l,y:c+m,text:h,textAnchor:"middle",foreColor:p,fontWeight:e.value.fontWeight,fontSize:e.value.fontSize,fontFamily:e.value.fontFamily});y.node.classList.add("apexcharts-datalabel-value"),n.add(y)}return n}printInnerLabels(e,t,i,s){const n=this.w;let a;s?e.name.color===void 0?a=n.globals.colors[parseInt(s.parentNode.getAttribute("rel"),10)-1]:a=e.name.color:n.globals.series.length>1&&e.total.show&&(a=e.total.color);let l=n.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),c=n.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value"),d=e.value.formatter;i=d(i,n),!s&&typeof e.total.formatter=="function"&&(i=e.total.formatter(n));const p=t===e.total.label;t=e.name.formatter(t,p,n),l!==null&&(l.textContent=t),c!==null&&(c.textContent=i),l!==null&&(l.style.fill=a)}printDataLabelsInner(e,t){let i=this.w,s=e.getAttribute("data:value"),n=i.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(t,n,s,e);let a=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");a!==null&&(a.style.opacity=1)}drawSpokes(e){const t=this.w,i=new Y(this.ctx),s=t.config.plotOptions.polarArea.spokes;if(s.strokeWidth===0)return;let n=[],a=360/t.globals.series.length;for(let l=0;l<t.globals.series.length;l++)n.push(R.polarToCartesian(this.centerX,this.centerY,t.globals.radialSize,t.config.plotOptions.pie.startAngle+a*l));n.forEach((l,c)=>{const d=i.drawLine(l.x,l.y,this.centerX,this.centerY,Array.isArray(s.connectorColors)?s.connectorColors[c]:s.connectorColors);e.add(d)})}revertDataLabelsInner(e,t,i){let s=this.w,n=s.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),a=!1;const l=s.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),c=({makeSliceOut:d,printLabel:p})=>{Array.prototype.forEach.call(l,g=>{g.getAttribute("data:pieClicked")==="true"&&(d&&(a=!0),p&&this.printDataLabelsInner(g,t))})};if(c({makeSliceOut:!0,printLabel:!1}),t.total.show&&s.globals.series.length>1)a&&!t.total.showAlways?c({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(t,t.total.label,t.total.formatter(s));else if(c({makeSliceOut:!1,printLabel:!0}),!a)if(s.globals.selectedDataPoints.length&&s.globals.series.length>1)if(s.globals.selectedDataPoints[0].length>0){const d=s.globals.selectedDataPoints[0],p=s.globals.dom.baseEl.querySelector(`.apexcharts-${this.chartType.toLowerCase()}-slice-${d}`);this.printDataLabelsInner(p,t)}else n&&s.globals.selectedDataPoints.length&&s.globals.selectedDataPoints[0].length===0&&(n.style.opacity=0);else n&&s.globals.series.length>1&&(n.style.opacity=0)}}class KP{constructor(e){this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;const t=this.w;this.graphics=new Y(this.ctx),this.lineColorArr=t.globals.stroke.colors!==void 0?t.globals.stroke.colors:t.globals.colors,this.defaultSize=t.globals.svgHeight<t.globals.svgWidth?t.globals.gridHeight+t.globals.goldenPadding*1.5:t.globals.gridWidth,this.isLog=t.config.yaxis[0].logarithmic,this.logBase=t.config.yaxis[0].logBase,this.coreUtils=new Je(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,t.globals.maxY,0):t.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):t.globals.minY,this.polygons=t.config.plotOptions.radar.polygons,this.strokeWidth=t.config.stroke.show?t.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-t.config.chart.dropShadow.blur,t.config.xaxis.labels.show&&(this.size=this.size-t.globals.xAxisLabelsWidth/1.75),t.config.plotOptions.radar.size!==void 0&&(this.size=t.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}draw(e){let t=this.w;const i=new ii(this.ctx),s=[],n=new un(this.ctx);e.length&&(this.dataPointsLen=e[t.globals.maxValsInArrayIndex].length),this.disAngle=Math.PI*2/this.dataPointsLen;let a=t.globals.gridWidth/2,l=t.globals.gridHeight/2,c=a+t.config.plotOptions.radar.offsetX,d=l+t.config.plotOptions.radar.offsetY,p=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:`translate(${c||0}, ${d||0})`}),g=[],b=null,O=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach((r,h)=>{let u=r.length===t.globals.dataPoints,m=this.graphics.group().attr({class:"apexcharts-series","data:longestSeries":u,seriesName:R.escapeString(t.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});this.dataRadiusOfPercent[h]=[],this.dataRadius[h]=[],this.angleArr[h]=[],r.forEach((S,C)=>{const T=Math.abs(this.maxValue-this.minValue);S=S+Math.abs(this.minValue),this.isLog&&(S=this.coreUtils.getLogVal(this.logBase,S,0)),this.dataRadiusOfPercent[h][C]=S/T,this.dataRadius[h][C]=this.dataRadiusOfPercent[h][C]*this.size,this.angleArr[h][C]=C*this.disAngle}),g=this.getDataPointsPos(this.dataRadius[h],this.angleArr[h]);const y=this.createPaths(g,{x:0,y:0});b=this.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),O=this.graphics.group({class:"apexcharts-datalabels","data:realIndex":h}),t.globals.delayedElements.push({el:b.node,index:h});const v={i:h,realIndex:h,animationDelay:h,initialSpeed:t.config.chart.animations.speed,dataChangeSpeed:t.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:t.globals.stroke.colors[h],strokeLineCap:t.config.stroke.lineCap};let w=null;t.globals.previousPaths.length>0&&(w=this.getPreviousPath(h));for(let S=0;S<y.linePathsTo.length;S++){let C=this.graphics.renderPaths({...v,pathFrom:w===null?y.linePathsFrom[S]:w,pathTo:y.linePathsTo[S],strokeWidth:Array.isArray(this.strokeWidth)?this.strokeWidth[h]:this.strokeWidth,fill:"none",drawShadow:!1});m.add(C);let T=i.fillPath({seriesNumber:h}),_=this.graphics.renderPaths({...v,pathFrom:w===null?y.areaPathsFrom[S]:w,pathTo:y.areaPathsTo[S],strokeWidth:0,fill:T,drawShadow:!1});if(t.config.chart.dropShadow.enabled){const $=new pt(this.ctx),N=t.config.chart.dropShadow;$.dropShadow(_,Object.assign({},N,{noUserSpaceOnUse:!0}),h)}m.add(_)}r.forEach((S,C)=>{let _=new wr(this.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:h,dataPointIndex:C}),$=this.graphics.drawMarker(g[C].x,g[C].y,_);$.attr("rel",C),$.attr("j",C),$.attr("index",h),$.node.setAttribute("default-marker-size",_.pSize);let N=this.graphics.group({class:"apexcharts-series-markers"});N&&N.add($),b.add(N),m.add(b);const P=t.config.dataLabels;if(P.enabled){let E=P.formatter(t.globals.series[h][C],{seriesIndex:h,dataPointIndex:C,w:t});n.plotDataLabelsText({x:g[C].x,y:g[C].y,text:E,textAnchor:"middle",i:h,j:h,parent:O,offsetCorrection:!1,dataLabelsConfig:{...P}})}m.add(O)}),s.push(m)}),this.drawPolygons({parent:p}),t.config.xaxis.labels.show){const r=this.drawXAxisTexts();p.add(r)}return s.forEach(r=>{p.add(r)}),p.add(this.yaxisLabels),p}drawPolygons(e){const t=this.w,{parent:i}=e,s=new $g(this.ctx),n=t.globals.yAxisScale[0].result.reverse(),a=n.length;let l=[],c=this.size/(a-1);for(let g=0;g<a;g++)l[g]=c*g;l.reverse();let d=[],p=[];l.forEach((g,b)=>{const O=R.getPolygonPos(g,this.dataPointsLen);let r="";O.forEach((h,u)=>{if(b===0){const m=this.graphics.drawLine(h.x,h.y,0,0,Array.isArray(this.polygons.connectorColors)?this.polygons.connectorColors[u]:this.polygons.connectorColors);p.push(m)}u===0&&this.yaxisLabelsTextsPos.push({x:h.x,y:h.y}),r+=h.x+","+h.y+" "}),d.push(r)}),d.forEach((g,b)=>{const O=this.polygons.strokeColors,r=this.polygons.strokeWidth,h=this.graphics.drawPolygon(g,Array.isArray(O)?O[b]:O,Array.isArray(r)?r[b]:r,t.globals.radarPolygons.fill.colors[b]);i.add(h)}),p.forEach(g=>{i.add(g)}),t.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((g,b)=>{const O=s.drawYAxisTexts(g.x,g.y,b,n[b]);this.yaxisLabels.add(O)})}drawXAxisTexts(){const e=this.w,t=e.config.xaxis.labels;let i=this.graphics.group({class:"apexcharts-xaxis"}),s=R.getPolygonPos(this.size,this.dataPointsLen);return e.globals.labels.forEach((n,a)=>{let l=e.config.xaxis.labels.formatter,c=new un(this.ctx);if(s[a]){let d=this.getTextPos(s[a],this.size),p=l(n,{seriesIndex:-1,dataPointIndex:a,w:e});c.plotDataLabelsText({x:d.newX,y:d.newY,text:p,textAnchor:d.textAnchor,i:a,j:a,parent:i,color:Array.isArray(t.style.colors)&&t.style.colors[a]?t.style.colors[a]:"#a8a8a8",dataLabelsConfig:{textAnchor:d.textAnchor,dropShadow:{enabled:!1},...t},offsetCorrection:!1})}}),i}createPaths(e,t){let i=[],s=[],n=[],a=[];if(e.length){s=[this.graphics.move(t.x,t.y)],a=[this.graphics.move(t.x,t.y)];let l=this.graphics.move(e[0].x,e[0].y),c=this.graphics.move(e[0].x,e[0].y);e.forEach((d,p)=>{l+=this.graphics.line(d.x,d.y),c+=this.graphics.line(d.x,d.y),p===e.length-1&&(l+="Z",c+="Z")}),i.push(l),n.push(c)}return{linePathsFrom:s,linePathsTo:i,areaPathsFrom:a,areaPathsTo:n}}getTextPos(e,t){let i=10,s="middle",n=e.x,a=e.y;return Math.abs(e.x)>=i?e.x>0?(s="start",n+=10):e.x<0&&(s="end",n-=10):s="middle",Math.abs(e.y)>=t-i&&(e.y<0?a-=10:e.y>0&&(a+=10)),{textAnchor:s,newX:n,newY:a}}getPreviousPath(e){let t=this.w,i=null;for(let s=0;s<t.globals.previousPaths.length;s++){let n=t.globals.previousPaths[s];n.paths.length>0&&parseInt(n.realIndex,10)===parseInt(e,10)&&typeof t.globals.previousPaths[s].paths[0]<"u"&&(i=t.globals.previousPaths[s].paths[0].d)}return i}getDataPointsPos(e,t,i=this.dataPointsLen){e=e||[],t=t||[];let s=[];for(let n=0;n<i;n++){let a={};a.x=e[n]*Math.sin(t[n]),a.y=-e[n]*Math.cos(t[n]),s.push(a)}return s}}class JP extends Pg{constructor(e){super(e),this.ctx=e,this.w=e.w,this.animBeginArr=[0],this.animDur=0;const t=this.w;this.startAngle=t.config.plotOptions.radialBar.startAngle,this.endAngle=t.config.plotOptions.radialBar.endAngle,this.totalAngle=Math.abs(t.config.plotOptions.radialBar.endAngle-t.config.plotOptions.radialBar.startAngle),this.trackStartAngle=t.config.plotOptions.radialBar.track.startAngle,this.trackEndAngle=t.config.plotOptions.radialBar.track.endAngle,this.barLabels=this.w.config.plotOptions.radialBar.barLabels,this.donutDataLabels=this.w.config.plotOptions.radialBar.dataLabels,this.radialDataLabels=this.donutDataLabels,this.trackStartAngle||(this.trackStartAngle=this.startAngle),this.trackEndAngle||(this.trackEndAngle=this.endAngle),this.endAngle===360&&(this.endAngle=359.99),this.margin=parseInt(t.config.plotOptions.radialBar.track.margin,10),this.onBarLabelClick=this.onBarLabelClick.bind(this)}draw(e){let t=this.w;const i=new Y(this.ctx);let s=i.group({class:"apexcharts-radialbar"});if(t.globals.noData)return s;let n=i.group(),a=this.defaultSize/2,l=t.globals.gridWidth/2,c=this.defaultSize/2.05;t.config.chart.sparkline.enabled||(c=c-t.config.stroke.width-t.config.chart.dropShadow.blur);let d=t.globals.fill.colors;if(t.config.plotOptions.radialBar.track.show){let O=this.drawTracks({size:c,centerX:l,centerY:a,colorArr:d,series:e});n.add(O)}let p=this.drawArcs({size:c,centerX:l,centerY:a,colorArr:d,series:e}),g=360;t.config.plotOptions.radialBar.startAngle<0&&(g=this.totalAngle);let b=(360-g)/360;if(t.globals.radialSize=c-c*b,this.radialDataLabels.value.show){let O=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);t.globals.radialSize+=O*b}return n.add(p.g),t.config.plotOptions.radialBar.hollow.position==="front"&&(p.g.add(p.elHollow),p.dataLabels&&p.g.add(p.dataLabels)),s.add(n),s}drawTracks(e){let t=this.w;const i=new Y(this.ctx);let s=i.group({class:"apexcharts-tracks"}),n=new pt(this.ctx),a=new ii(this.ctx),l=this.getStrokeWidth(e);e.size=e.size-l/2;for(let c=0;c<e.series.length;c++){let d=i.group({class:"apexcharts-radialbar-track apexcharts-track"});s.add(d),d.attr({rel:c+1}),e.size=e.size-l-this.margin;const p=t.config.plotOptions.radialBar.track;let g=a.fillPath({seriesNumber:0,size:e.size,fillColors:Array.isArray(p.background)?p.background[c]:p.background,solid:!0}),b=this.trackStartAngle,O=this.trackEndAngle;Math.abs(O)+Math.abs(b)>=360&&(O=360-Math.abs(this.startAngle)-.1);let r=i.drawPath({d:"",stroke:g,strokeWidth:l*parseInt(p.strokeWidth,10)/100,fill:"none",strokeOpacity:p.opacity,classes:"apexcharts-radialbar-area"});if(p.dropShadow.enabled){const h=p.dropShadow;n.dropShadow(r,h)}d.add(r),r.attr("id","apexcharts-radialbarTrack-"+c),this.animatePaths(r,{centerX:e.centerX,centerY:e.centerY,endAngle:O,startAngle:b,size:e.size,i:c,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:t.globals.easing})}return s}drawArcs(e){let t=this.w,i=new Y(this.ctx),s=new ii(this.ctx),n=new pt(this.ctx),a=i.group(),l=this.getStrokeWidth(e);e.size=e.size-l/2;let c=t.config.plotOptions.radialBar.hollow.background,d=e.size-l*e.series.length-this.margin*e.series.length-l*parseInt(t.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,p=d-t.config.plotOptions.radialBar.hollow.margin;t.config.plotOptions.radialBar.hollow.image!==void 0&&(c=this.drawHollowImage(e,a,d,c));let g=this.drawHollow({size:p,centerX:e.centerX,centerY:e.centerY,fill:c||"transparent"});if(t.config.plotOptions.radialBar.hollow.dropShadow.enabled){const h=t.config.plotOptions.radialBar.hollow.dropShadow;n.dropShadow(g,h)}let b=1;!this.radialDataLabels.total.show&&t.globals.series.length>1&&(b=0);let O=null;this.radialDataLabels.show&&(O=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:d,centerX:e.centerX,centerY:e.centerY,opacity:b})),t.config.plotOptions.radialBar.hollow.position==="back"&&(a.add(g),O&&a.add(O));let r=!1;t.config.plotOptions.radialBar.inverseOrder&&(r=!0);for(let h=r?e.series.length-1:0;r?h>=0:h<e.series.length;r?h--:h++){let u=i.group({class:"apexcharts-series apexcharts-radial-series",seriesName:R.escapeString(t.globals.seriesNames[h])});a.add(u),u.attr({rel:h+1,"data:realIndex":h}),this.ctx.series.addCollapsedClassToSeries(u,h),e.size=e.size-l-this.margin;let m=s.fillPath({seriesNumber:h,size:e.size,value:e.series[h]}),y=this.startAngle,v;const w=R.negToZero(e.series[h]>100?100:e.series[h])/100;let S=Math.round(this.totalAngle*w)+this.startAngle,C;t.globals.dataChanged&&(v=this.startAngle,C=Math.round(this.totalAngle*R.negToZero(t.globals.previousPaths[h])/100)+v),Math.abs(S)+Math.abs(y)>=360&&(S=S-.01),Math.abs(C)+Math.abs(v)>=360&&(C=C-.01);let $=S-y;const N=Array.isArray(t.config.stroke.dashArray)?t.config.stroke.dashArray[h]:t.config.stroke.dashArray;let P=i.drawPath({d:"",stroke:m,strokeWidth:l,fill:"none",fillOpacity:t.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+h,strokeDashArray:N});if(Y.setAttrs(P.node,{"data:angle":$,"data:value":e.series[h]}),t.config.chart.dropShadow.enabled){const x=t.config.chart.dropShadow;n.dropShadow(P,x,h)}if(n.setSelectionFilter(P,0,h),this.addListeners(P,this.radialDataLabels),u.add(P),P.attr({index:0,j:h}),this.barLabels.enabled){let x=R.polarToCartesian(e.centerX,e.centerY,e.size,y),k=this.barLabels.formatter(t.globals.seriesNames[h],{seriesIndex:h,w:t}),A=["apexcharts-radialbar-label"];this.barLabels.onClick||A.push("apexcharts-no-click");let L=this.barLabels.useSeriesColors?t.globals.colors[h]:t.config.chart.foreColor;L||(L=t.config.chart.foreColor);const D=x.x-this.barLabels.margin,M=x.y;let Q=i.drawText({x:D,y:M,text:k,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:L,cssClass:A.join(" ")});Q.on("click",this.onBarLabelClick),Q.attr({rel:h+1}),y!==0&&Q.attr({"transform-origin":`${D} ${M}`,transform:`rotate(${y} 0 0)`}),u.add(Q)}let E=0;this.initialAnim&&!t.globals.resized&&!t.globals.dataChanged&&(E=t.config.chart.animations.speed),t.globals.dataChanged&&(E=t.config.chart.animations.dynamicAnimation.speed),this.animDur=E/(e.series.length*1.2)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(P,{centerX:e.centerX,centerY:e.centerY,endAngle:S,startAngle:y,prevEndAngle:C,prevStartAngle:v,size:e.size,i:h,totalItems:2,animBeginArr:this.animBeginArr,dur:E,shouldSetPrevPaths:!0,easing:t.globals.easing})}return{g:a,elHollow:g,dataLabels:O}}drawHollow(e){let i=new Y(this.ctx).drawCircle(e.size*2);return i.attr({class:"apexcharts-radialbar-hollow",cx:e.centerX,cy:e.centerY,r:e.size,fill:e.fill}),i}drawHollowImage(e,t,i,s){const n=this.w;let a=new ii(this.ctx),l=R.randomId(),c=n.config.plotOptions.radialBar.hollow.image;if(n.config.plotOptions.radialBar.hollow.imageClipped)a.clippedImgArea({width:i,height:i,image:c,patternID:`pattern${n.globals.cuid}${l}`}),s=`url(#pattern${n.globals.cuid}${l})`;else{const d=n.config.plotOptions.radialBar.hollow.imageWidth,p=n.config.plotOptions.radialBar.hollow.imageHeight;if(d===void 0&&p===void 0){let g=n.globals.dom.Paper.image(c).loaded(function(b){this.move(e.centerX-b.width/2+n.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-b.height/2+n.config.plotOptions.radialBar.hollow.imageOffsetY)});t.add(g)}else{let g=n.globals.dom.Paper.image(c).loaded(function(b){this.move(e.centerX-d/2+n.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-p/2+n.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(d,p)});t.add(g)}}return s}getStrokeWidth(e){const t=this.w;return e.size*(100-parseInt(t.config.plotOptions.radialBar.hollow.size,10))/100/(e.series.length+1)-this.margin}onBarLabelClick(e){let t=parseInt(e.target.getAttribute("rel"),10)-1;const i=this.barLabels.onClick,s=this.w;i&&i(s.globals.seriesNames[t],{w:s,seriesIndex:t})}}class eL extends fn{draw(e,t){let i=this.w,s=new Y(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=e,this.seriesRangeStart=i.globals.seriesRangeStart,this.seriesRangeEnd=i.globals.seriesRangeEnd,this.barHelpers.initVariables(e);let n=s.group({class:"apexcharts-rangebar-series apexcharts-plot-series"});for(let a=0;a<e.length;a++){let l,c,d,p,g,b,O=i.globals.comboCharts?t[a]:a,r=s.group({class:"apexcharts-series",seriesName:R.escapeString(i.globals.seriesNames[O]),rel:a+1,"data:realIndex":O});this.ctx.series.addCollapsedClassToSeries(r,O),e[a].length>0&&(this.visibleI=this.visibleI+1);let h=0,u=0,m=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[O][0],m=O);let y=this.barHelpers.initialPositions();c=y.y,b=y.zeroW,l=y.x,u=y.barWidth,h=y.barHeight,d=y.xDivision,p=y.yDivision,g=y.zeroH;let v=s.group({class:"apexcharts-datalabels","data:realIndex":O}),w=s.group({class:"apexcharts-rangebar-goals-markers"});for(let S=0;S<i.globals.dataPoints;S++){const C=this.barHelpers.getStrokeWidth(a,S,O),T=this.seriesRangeStart[a][S],_=this.seriesRangeEnd[a][S];let $=null,N=null,P=null;const E={x:l,y:c,strokeWidth:C,elSeries:r};let x=this.seriesLen;if(i.config.plotOptions.bar.rangeBarGroupRows&&(x=1),typeof i.config.series[a].data[S]>"u")break;if(this.isHorizontal){P=c+h*this.visibleI;let D=(p-h*x)/2;if(i.config.series[a].data[S].x){let M=this.detectOverlappingBars({i:a,j:S,barYPosition:P,srty:D,barHeight:h,yDivision:p,initPositions:y});h=M.barHeight,P=M.barYPosition}$=this.drawRangeBarPaths({indexes:{i:a,j:S,realIndex:O},barHeight:h,barYPosition:P,zeroW:b,yDivision:p,y1:T,y2:_,...E}),u=$.barWidth}else{i.globals.isXNumeric&&(l=(i.globals.seriesX[a][S]-i.globals.minX)/this.xRatio-u/2),N=l+u*this.visibleI;let D=(d-u*x)/2;if(i.config.series[a].data[S].x){let M=this.detectOverlappingBars({i:a,j:S,barXPosition:N,srtx:D,barWidth:u,xDivision:d,initPositions:y});u=M.barWidth,N=M.barXPosition}$=this.drawRangeColumnPaths({indexes:{i:a,j:S,realIndex:O,translationsIndex:m},barWidth:u,barXPosition:N,zeroH:g,xDivision:d,...E}),h=$.barHeight}const k=this.barHelpers.drawGoalLine({barXPosition:$.barXPosition,barYPosition:P,goalX:$.goalX,goalY:$.goalY,barHeight:h,barWidth:u});k&&w.add(k),c=$.y,l=$.x;let A=this.barHelpers.getPathFillColor(e,a,S,O),L=i.globals.stroke.colors[O];this.renderSeries({realIndex:O,pathFill:A,lineFill:L,j:S,i:a,x:l,y:c,y1:T,y2:_,pathFrom:$.pathFrom,pathTo:$.pathTo,strokeWidth:C,elSeries:r,series:e,barHeight:h,barWidth:u,barXPosition:N,barYPosition:P,barWidth:u,elDataLabelsWrap:v,elGoalsMarkers:w,visibleSeries:this.visibleI,type:"rangebar"})}n.add(r)}return n}detectOverlappingBars({i:e,j:t,barYPosition:i,barXPosition:s,srty:n,srtx:a,barHeight:l,barWidth:c,yDivision:d,xDivision:p,initPositions:g}){const b=this.w;let O=[],r=b.config.series[e].data[t].rangeName;const h=b.config.series[e].data[t].x,u=Array.isArray(h)?h.join(" "):h,m=b.globals.labels.map(v=>Array.isArray(v)?v.join(" "):v).indexOf(u),y=b.globals.seriesRange[e].findIndex(v=>v.x===u&&v.overlaps.length>0);return this.isHorizontal?(b.config.plotOptions.bar.rangeBarGroupRows?i=n+d*m:i=n+l*this.visibleI+d*m,y>-1&&!b.config.plotOptions.bar.rangeBarOverlap&&(O=b.globals.seriesRange[e][y].overlaps,O.indexOf(r)>-1&&(l=g.barHeight/O.length,i=l*this.visibleI+d*(100-parseInt(this.barOptions.barHeight,10))/100/2+l*(this.visibleI+O.indexOf(r))+d*m))):(m>-1&&(b.config.plotOptions.bar.rangeBarGroupRows?s=a+p*m:s=a+c*this.visibleI+p*m),y>-1&&!b.config.plotOptions.bar.rangeBarOverlap&&(O=b.globals.seriesRange[e][y].overlaps,O.indexOf(r)>-1&&(c=g.barWidth/O.length,s=c*this.visibleI+p*(100-parseInt(this.barOptions.barWidth,10))/100/2+c*(this.visibleI+O.indexOf(r))+p*m))),{barYPosition:i,barXPosition:s,barHeight:l,barWidth:c}}drawRangeColumnPaths({indexes:e,x:t,xDivision:i,barWidth:s,barXPosition:n,zeroH:a}){let l=this.w,c=e.i,d=e.j;const p=this.yRatio[e.translationsIndex];let g=e.realIndex;const b=this.getRangeValue(g,d);let O=Math.min(b.start,b.end),r=Math.max(b.start,b.end);typeof this.series[c][d]>"u"||this.series[c][d]===null?O=a:(O=a-O/p,r=a-r/p);const h=Math.abs(r-O),u=this.barHelpers.getColumnPaths({barXPosition:n,barWidth:s,y1:O,y2:r,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:e.realIndex,i:g,j:d,w:l});if(!l.globals.isXNumeric)t=t+i;else{const m=this.getBarXForNumericXAxis({x:t,j:d,realIndex:g,barWidth:s});t=m.x,n=m.barXPosition}return{pathTo:u.pathTo,pathFrom:u.pathFrom,barHeight:h,x:t,y:r,goalY:this.barHelpers.getGoalValues("y",null,a,c,d,e.translationsIndex),barXPosition:n}}drawRangeBarPaths({indexes:e,y:t,y1:i,y2:s,yDivision:n,barHeight:a,barYPosition:l,zeroW:c}){let d=this.w;const p=c+i/this.invertedYRatio,g=c+s/this.invertedYRatio,b=Math.abs(g-p),O=this.barHelpers.getBarpaths({barYPosition:l,barHeight:a,x1:p,x2:g,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:e.realIndex,realIndex:e.realIndex,j:e.j,w:d});return d.globals.isXNumeric||(t=t+n),{pathTo:O.pathTo,pathFrom:O.pathFrom,barWidth:b,x:g,goalX:this.barHelpers.getGoalValues("x",c,null,e.realIndex,e.j),y:t}}getRangeValue(e,t){const i=this.w;return{start:i.globals.seriesRangeStart[e][t],end:i.globals.seriesRangeEnd[e][t]}}}class tL{constructor(e){this.w=e.w,this.lineCtx=e}sameValueSeriesFix(e,t){const i=this.w;if((i.config.fill.type==="gradient"||i.config.fill.type[e]==="gradient")&&new Je(this.lineCtx.ctx,i).seriesHaveSameValues(e)){let n=t[e].slice();n[n.length-1]=n[n.length-1]+1e-6,t[e]=n}return t}calculatePoints({series:e,realIndex:t,x:i,y:s,i:n,j:a,prevY:l}){let c=this.w,d=[],p=[];if(a===0){let b=this.lineCtx.categoryAxisCorrection+c.config.markers.offsetX;c.globals.isXNumeric&&(b=(c.globals.seriesX[t][0]-c.globals.minX)/this.lineCtx.xRatio+c.config.markers.offsetX),d.push(b),p.push(R.isNumber(e[n][0])?l+c.config.markers.offsetY:null),d.push(i+c.config.markers.offsetX),p.push(R.isNumber(e[n][a+1])?s+c.config.markers.offsetY:null)}else d.push(i+c.config.markers.offsetX),p.push(R.isNumber(e[n][a+1])?s+c.config.markers.offsetY:null);return{x:d,y:p}}checkPreviousPaths({pathFromLine:e,pathFromArea:t,realIndex:i}){let s=this.w;for(let n=0;n<s.globals.previousPaths.length;n++){let a=s.globals.previousPaths[n];(a.type==="line"||a.type==="area")&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(i,10)&&(a.type==="line"?(this.lineCtx.appendPathFrom=!1,e=s.globals.previousPaths[n].paths[0].d):a.type==="area"&&(this.lineCtx.appendPathFrom=!1,t=s.globals.previousPaths[n].paths[0].d,s.config.stroke.show&&s.globals.previousPaths[n].paths[1]&&(e=s.globals.previousPaths[n].paths[1].d)))}return{pathFromLine:e,pathFromArea:t}}determineFirstPrevY({i:e,series:t,prevY:i,lineYPosition:s,translationsIndex:n}){var c,d;let a=this.w,l=a.config.chart.stacked&&!a.globals.comboCharts||a.config.chart.stacked&&a.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((c=this.w.config.series[e])==null?void 0:c.type)==="bar");if(typeof((d=t[e])==null?void 0:d[0])<"u")l?e>0?s=this.lineCtx.prevSeriesY[e-1][0]:s=this.lineCtx.zeroY:s=this.lineCtx.zeroY,i=s-t[e][0]/this.lineCtx.yRatio[n]+(this.lineCtx.isReversed?t[e][0]/this.lineCtx.yRatio[n]:0)*2;else if(l&&e>0&&typeof t[e][0]>"u"){for(let p=e-1;p>=0;p--)if(t[p][0]!==null&&typeof t[p][0]<"u"){s=this.lineCtx.prevSeriesY[p][0],i=s;break}}return{prevY:i,lineYPosition:s}}}const iL=o=>{const e=sL(o),t=o.length-1,i=1e-6,s=[];let n,a,l,c;for(let d=0;d<t;d++)l=$c(o[d],o[d+1]),Math.abs(l)<i?e[d]=e[d+1]=0:(n=e[d]/l,a=e[d+1]/l,c=n*n+a*a,c>9&&(c=l*3/Math.sqrt(c),e[d]=c*n,e[d+1]=c*a));for(let d=0;d<=t;d++)c=(o[Math.min(t,d+1)][0]-o[Math.max(0,d-1)][0])/(6*(1+e[d]*e[d])),s.push([c||0,e[d]*c||0]);return s},Ec=o=>{let e="";for(let t=0;t<o.length;t++){const i=o[t],s=i.length;s>4?(e+=`C${i[0]}, ${i[1]}`,e+=`, ${i[2]}, ${i[3]}`,e+=`, ${i[4]}, ${i[5]}`):s>2&&(e+=`S${i[0]}, ${i[1]}`,e+=`, ${i[2]}, ${i[3]}`)}return e},Lg={points(o){const e=iL(o),t=o[1],i=o[0],s=[],n=e[1],a=e[0];s.push(i,[i[0]+a[0],i[1]+a[1],t[0]-n[0],t[1]-n[1],t[0],t[1]]);for(let l=2,c=e.length;l<c;l++){const d=o[l],p=e[l];s.push([d[0]-p[0],d[1]-p[1],d[0],d[1]])}return s},slice(o,e,t){const i=o.slice(e,t);if(e){if(i[1].length<6){const s=i[0].length;i[1]=[i[0][s-2]*2-i[0][s-4],i[0][s-1]*2-i[0][s-3]].concat(i[1])}i[0]=i[0].slice(-2)}return i}};function $c(o,e){return(e[1]-o[1])/(e[0]-o[0])}function sL(o){const e=[];let t=o[0],i=o[1],s=e[0]=$c(t,i),n=1;for(let a=o.length-1;n<a;n++)t=i,i=o[n+1],e[n]=(s+(s=$c(t,i)))*.5;return e[n]=s,e}let Pc=class{constructor(e,t,i){this.ctx=e,this.w=e.w,this.xyRatios=t,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||i,this.scatter=new Og(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new tL(this),this.markers=new wr(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}draw(e,t,i,s){var g;let n=this.w,a=new Y(this.ctx),l=n.globals.comboCharts?t:n.config.chart.type,c=a.group({class:`apexcharts-${l}-series apexcharts-plot-series`});const d=new Je(this.ctx,n);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=d.getLogSeries(e),this.yRatio=d.getLogYRatios(this.yRatio);let p=[];for(let b=0;b<e.length;b++){e=this.lineHelpers.sameValueSeriesFix(b,e);let O=n.globals.comboCharts?i[b]:b,r=this.yRatio.length>1?O:0;this._initSerieVariables(e,b,O);let h=[],u=[],m=[],y=n.globals.padHorizontal+this.categoryAxisCorrection,v=1,w=[],S=[];this.ctx.series.addCollapsedClassToSeries(this.elSeries,O),n.globals.isXNumeric&&n.globals.seriesX.length>0&&(y=(n.globals.seriesX[O][0]-n.globals.minX)/this.xRatio),m.push(y);let C=y,T,_,$=C,N=this.zeroY,P=this.zeroY,E=0;N=this.lineHelpers.determineFirstPrevY({i:b,series:e,prevY:N,lineYPosition:E,translationsIndex:r}).prevY,n.config.stroke.curve==="monotonCubic"&&e[b][0]===null?h.push(null):h.push(N),T=N;let k;l==="rangeArea"&&(k=this.lineHelpers.determineFirstPrevY({i:b,series:s,prevY:P,lineYPosition:E,translationsIndex:r}),P=k.prevY,_=P,u.push(P));let A=this._calculatePathsFrom({type:l,series:e,i:b,realIndex:O,prevX:$,prevY:N,prevY2:P});const L={type:l,series:e,realIndex:O,translationsIndex:r,i:b,x:y,y:v,pX:C,pY:T,pathsFrom:A,linePaths:w,areaPaths:S,seriesIndex:i,lineYPosition:E,xArrj:m,yArrj:h,y2Arrj:u,seriesRangeEnd:s};let D=this._iterateOverDataPoints({...L,iterations:l==="rangeArea"?e[b].length-1:void 0,isRangeStart:!0});if(l==="rangeArea"){let M=this._calculatePathsFrom({series:s,i:b,realIndex:O,prevX:$,prevY:P}),Q=this._iterateOverDataPoints({...L,series:s,pY:_,pathsFrom:M,iterations:s[b].length-1,isRangeStart:!1});D.linePaths[0]=Q.linePath+D.linePath,D.pathFromLine=Q.pathFromLine+D.pathFromLine}this._handlePaths({type:l,realIndex:O,i:b,paths:D}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),p.push(this.elSeries)}if(typeof((g=n.config.series[0])==null?void 0:g.zIndex)<"u"&&p.sort((b,O)=>Number(b.node.getAttribute("zIndex"))-Number(O.node.getAttribute("zIndex"))),n.config.chart.stacked)for(let b=p.length;b>0;b--)c.add(p[b-1]);else for(let b=0;b<p.length;b++)c.add(p[b]);return c}_initSerieVariables(e,t,i){const s=this.w,n=new Y(this.ctx);this.xDivision=s.globals.gridWidth/(s.globals.dataPoints-(s.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(s.config.stroke.width)?s.config.stroke.width[i]:s.config.stroke.width;let a=0;this.yRatio.length>1&&(this.yaxisIndex=s.globals.seriesYAxisReverseMap[i],a=i),this.isReversed=s.config.yaxis[this.yaxisIndex]&&s.config.yaxis[this.yaxisIndex].reversed,this.zeroY=s.globals.gridHeight-this.baseLineY[a]-(this.isReversed?s.globals.gridHeight:0)+(this.isReversed?this.baseLineY[a]*2:0),this.areaBottomY=this.zeroY,(this.zeroY>s.globals.gridHeight||s.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=s.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=n.group({class:"apexcharts-series",zIndex:typeof s.config.series[i].zIndex<"u"?s.config.series[i].zIndex:i,seriesName:R.escapeString(s.globals.seriesNames[i])}),this.elPointsMain=n.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),this.elDataLabelsWrap=n.group({class:"apexcharts-datalabels","data:realIndex":i});let l=e[t].length===s.globals.dataPoints;this.elSeries.attr({"data:longestSeries":l,rel:t+1,"data:realIndex":i}),this.appendPathFrom=!0}_calculatePathsFrom({type:e,series:t,i,realIndex:s,prevX:n,prevY:a,prevY2:l}){const c=this.w,d=new Y(this.ctx);let p,g,b,O;if(t[i][0]===null){for(let r=0;r<t[i].length;r++)if(t[i][r]!==null){n=this.xDivision*r,a=this.zeroY-t[i][r]/this.yRatio[s],p=d.move(n,a),g=d.move(n,this.areaBottomY);break}}else p=d.move(n,a),e==="rangeArea"&&(p=d.move(n,l)+d.line(n,a)),g=d.move(n,this.areaBottomY)+d.line(n,a);if(b=d.move(-1,this.zeroY)+d.line(-1,this.zeroY),O=d.move(-1,this.zeroY)+d.line(-1,this.zeroY),c.globals.previousPaths.length>0){const r=this.lineHelpers.checkPreviousPaths({pathFromLine:b,pathFromArea:O,realIndex:s});b=r.pathFromLine,O=r.pathFromArea}return{prevX:n,prevY:a,linePath:p,areaPath:g,pathFromLine:b,pathFromArea:O}}_handlePaths({type:e,realIndex:t,i,paths:s}){const n=this.w,a=new Y(this.ctx),l=new ii(this.ctx);this.prevSeriesY.push(s.yArrj),n.globals.seriesXvalues[t]=s.xArrj,n.globals.seriesYvalues[t]=s.yArrj;const c=n.config.forecastDataPoints;if(c.count>0&&e!=="rangeArea"){const p=n.globals.seriesXvalues[t][n.globals.seriesXvalues[t].length-c.count-1],g=a.drawRect(p,0,n.globals.gridWidth,n.globals.gridHeight,0);n.globals.dom.elForecastMask.appendChild(g.node);const b=a.drawRect(0,0,p,n.globals.gridHeight,0);n.globals.dom.elNonForecastMask.appendChild(b.node)}this.pointsChart||n.globals.delayedElements.push({el:this.elPointsMain.node,index:t});const d={i,realIndex:t,animationDelay:i,initialSpeed:n.config.chart.animations.speed,dataChangeSpeed:n.config.chart.animations.dynamicAnimation.speed,className:`apexcharts-${e}`};if(e==="area"){let p=l.fillPath({seriesNumber:t});for(let g=0;g<s.areaPaths.length;g++){let b=a.renderPaths({...d,pathFrom:s.pathFromArea,pathTo:s.areaPaths[g],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:p});this.elSeries.add(b)}}if(n.config.stroke.show&&!this.pointsChart){let p=null;if(e==="line")p=l.fillPath({seriesNumber:t,i});else if(n.config.stroke.fill.type==="solid")p=n.globals.stroke.colors[t];else{const g=n.config.fill;n.config.fill=n.config.stroke.fill,p=l.fillPath({seriesNumber:t,i}),n.config.fill=g}for(let g=0;g<s.linePaths.length;g++){let b=p;e==="rangeArea"&&(b=l.fillPath({seriesNumber:t}));const O={...d,pathFrom:s.pathFromLine,pathTo:s.linePaths[g],stroke:p,strokeWidth:this.strokeWidth,strokeLineCap:n.config.stroke.lineCap,fill:e==="rangeArea"?b:"none"};let r=a.renderPaths(O);if(this.elSeries.add(r),r.attr("fill-rule","evenodd"),c.count>0&&e!=="rangeArea"){let h=a.renderPaths(O);h.node.setAttribute("stroke-dasharray",c.dashArray),c.strokeWidth&&h.node.setAttribute("stroke-width",c.strokeWidth),this.elSeries.add(h),h.attr("clip-path",`url(#forecastMask${n.globals.cuid})`),r.attr("clip-path",`url(#nonForecastMask${n.globals.cuid})`)}}}}_iterateOverDataPoints({type:e,series:t,iterations:i,realIndex:s,translationsIndex:n,i:a,x:l,y:c,pX:d,pY:p,pathsFrom:g,linePaths:b,areaPaths:O,seriesIndex:r,lineYPosition:h,xArrj:u,yArrj:m,y2Arrj:y,isRangeStart:v,seriesRangeEnd:w}){var D;const S=this.w;let C=new Y(this.ctx),T=this.yRatio,{prevY:_,linePath:$,areaPath:N,pathFromLine:P,pathFromArea:E}=g;const x=R.isNumber(S.globals.minYArr[s])?S.globals.minYArr[s]:S.globals.minY;i||(i=S.globals.dataPoints>1?S.globals.dataPoints-1:S.globals.dataPoints);const k=(M,Q)=>Q-M/T[n]+(this.isReversed?M/T[n]:0)*2;let A=c,L=S.config.chart.stacked&&!S.globals.comboCharts||S.config.chart.stacked&&S.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((D=this.w.config.series[s])==null?void 0:D.type)==="bar");for(let M=0;M<i;M++){const Q=typeof t[a][M+1]>"u"||t[a][M+1]===null;if(S.globals.isXNumeric){let te=S.globals.seriesX[s][M+1];typeof S.globals.seriesX[s][M+1]>"u"&&(te=S.globals.seriesX[s][i-1]),l=(te-S.globals.minX)/this.xRatio}else l=l+this.xDivision;if(L)if(a>0&&S.globals.collapsedSeries.length<S.config.series.length-1){const te=he=>{let j=he;for(let se=0;se<S.globals.series.length;se++)if(S.globals.collapsedSeriesIndices.indexOf(he)>-1){j--;break}return j>=0?j:0};h=this.prevSeriesY[te(a-1)][M+1]}else h=this.zeroY;else h=this.zeroY;Q?c=k(x,h):(c=k(t[a][M+1],h),e==="rangeArea"&&(A=k(w[a][M+1],h))),u.push(l),Q&&S.config.stroke.curve==="smooth"?m.push(null):m.push(c),y.push(A);let B=this.lineHelpers.calculatePoints({series:t,x:l,y:c,realIndex:s,i:a,j:M,prevY:_}),X=this._createPaths({type:e,series:t,i:a,realIndex:s,j:M,x:l,y:c,y2:A,xArrj:u,yArrj:m,y2Arrj:y,pX:d,pY:p,linePath:$,areaPath:N,linePaths:b,areaPaths:O,seriesIndex:r,isRangeStart:v});O=X.areaPaths,b=X.linePaths,d=X.pX,p=X.pY,N=X.areaPath,$=X.linePath,this.appendPathFrom&&!(S.config.stroke.curve==="monotoneCubic"&&e==="rangeArea")&&(P=P+C.line(l,this.zeroY),E=E+C.line(l,this.zeroY)),this.handleNullDataPoints(t,B,a,M,s),this._handleMarkersAndLabels({type:e,pointsPos:B,i:a,j:M,realIndex:s,isRangeStart:v})}return{yArrj:m,xArrj:u,pathFromArea:E,areaPaths:O,pathFromLine:P,linePaths:b,linePath:$,areaPath:N}}_handleMarkersAndLabels({type:e,pointsPos:t,isRangeStart:i,i:s,j:n,realIndex:a}){const l=this.w;let c=new un(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,n,{realIndex:a,pointsPos:t,zRatio:this.zRatio,elParent:this.elPointsMain});else{l.globals.series[s].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");let p=this.markers.plotChartMarkers(t,a,n+1);p!==null&&this.elPointsMain.add(p)}let d=c.drawDataLabel({type:e,isRangeStart:i,pos:t,i:a,j:n+1});d!==null&&this.elDataLabelsWrap.add(d)}_createPaths({type:e,series:t,i,realIndex:s,j:n,x:a,y:l,xArrj:c,yArrj:d,y2:p,y2Arrj:g,pX:b,pY:O,linePath:r,areaPath:h,linePaths:u,areaPaths:m,seriesIndex:y,isRangeStart:v}){let w=this.w,S=new Y(this.ctx),C=w.config.stroke.curve;const T=this.areaBottomY;if(Array.isArray(w.config.stroke.curve)&&(Array.isArray(y)?C=w.config.stroke.curve[y[i]]:C=w.config.stroke.curve[i]),e==="rangeArea"&&(w.globals.hasNullValues||w.config.forecastDataPoints.count>0)&&C==="monotoneCubic"&&(C="straight"),C==="monotoneCubic"){const _=e==="rangeArea"?c.length===w.globals.dataPoints:n===t[i].length-2,$=c.map((N,P)=>[c[P],d[P]]).filter(N=>N[1]!==null);if(_&&$.length>1){const N=Lg.points($);if(r+=Ec(N),t[i][0]===null?h=r:h+=Ec(N),e==="rangeArea"&&v){r+=S.line(c[c.length-1],g[g.length-1]);const P=c.slice().reverse(),E=g.slice().reverse(),x=P.map((A,L)=>[P[L],E[L]]),k=Lg.points(x);r+=Ec(k),h=r}else h+=S.line($[$.length-1][0],T)+S.line($[0][0],T)+S.move($[0][0],$[0][1])+"z";u.push(r),m.push(h)}}else if(C==="smooth"){let _=(a-b)*.35;w.globals.hasNullValues?(t[i][n]!==null&&(t[i][n+1]!==null?(r=S.move(b,O)+S.curve(b+_,O,a-_,l,a+1,l),h=S.move(b+1,O)+S.curve(b+_,O,a-_,l,a+1,l)+S.line(a,T)+S.line(b,T)+"z"):(r=S.move(b,O),h=S.move(b,O)+"z")),u.push(r),m.push(h)):(r=r+S.curve(b+_,O,a-_,l,a,l),h=h+S.curve(b+_,O,a-_,l,a,l)),b=a,O=l,n===t[i].length-2&&(h=h+S.curve(b,O,a,l,a,T)+S.move(a,l)+"z",e==="rangeArea"&&v?r=r+S.curve(b,O,a,l,a,p)+S.move(a,p)+"z":w.globals.hasNullValues||(u.push(r),m.push(h)))}else{if(t[i][n+1]===null){r=r+S.move(a,l);const _=w.globals.isXNumeric?(w.globals.seriesX[s][n]-w.globals.minX)/this.xRatio:a-this.xDivision;h=h+S.line(_,T)+S.move(a,l)+"z"}t[i][n]===null&&(r=r+S.move(a,l),h=h+S.move(a,T)),C==="stepline"?(r=r+S.line(a,null,"H")+S.line(null,l,"V"),h=h+S.line(a,null,"H")+S.line(null,l,"V")):C==="linestep"?(r=r+S.line(null,l,"V")+S.line(a,null,"H"),h=h+S.line(null,l,"V")+S.line(a,null,"H")):C==="straight"&&(r=r+S.line(a,l),h=h+S.line(a,l)),n===t[i].length-2&&(h=h+S.line(a,T)+S.move(a,l)+"z",e==="rangeArea"&&v?r=r+S.line(a,p)+S.move(a,p)+"z":(u.push(r),m.push(h)))}return{linePaths:u,areaPaths:m,pX:b,pY:O,linePath:r,areaPath:h}}handleNullDataPoints(e,t,i,s,n){const a=this.w;if(e[i][s]===null&&a.config.markers.showNullDataPoints||e[i].length===1){let l=this.markers.plotChartMarkers(t,n,s+1,this.strokeWidth-a.config.markers.strokeWidth/2,!0);l!==null&&this.elPointsMain.add(l)}}};window.TreemapSquared={},function(){window.TreemapSquared.generate=function(){function o(g,b,O,r){this.xoffset=g,this.yoffset=b,this.height=r,this.width=O,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(h){let u=[],m=this.xoffset,y=this.yoffset,v=d(h)/this.height,w=d(h)/this.width,S;if(this.width>=this.height)for(S=0;S<h.length;S++)u.push([m,y,m+v,y+h[S]/v]),y=y+h[S]/v;else for(S=0;S<h.length;S++)u.push([m,y,m+h[S]/w,y+w]),m=m+h[S]/w;return u},this.cutArea=function(h){let u;if(this.width>=this.height){let m=h/this.height,y=this.width-m;u=new o(this.xoffset+m,this.yoffset,y,this.height)}else{let m=h/this.width,y=this.height-m;u=new o(this.xoffset,this.yoffset+m,this.width,y)}return u}}function e(g,b){let O=[],r=d(g),h=b/r,u;for(u=0;u<g.length;u++)O[u]=g[u]*h;return O}function t(g,b,O,r,h){r=typeof r>"u"?0:r,h=typeof h>"u"?0:h;let u=[],m,y=[],v;if(c(g[0])){for(v=0;v<g.length;v++)u[v]=p(g[v]);for(m=i(u,b,O,r,h),v=0;v<g.length;v++)y.push(t(g[v],m[v][2]-m[v][0],m[v][3]-m[v][1],m[v][0],m[v][1]))}else y=i(g,b,O,r,h);return y}function i(g,b,O,r,h){r=typeof r>"u"?0:r,h=typeof h>"u"?0:h;let u=n(e(g,b*O),[],new o(r,h,b,O),[]);return s(u)}function s(g){let b=[],O,r;for(O=0;O<g.length;O++)for(r=0;r<g[O].length;r++)b.push(g[O][r]);return b}function n(g,b,O,r){let h,u,m;if(g.length===0){r.push(O.getCoordinates(b));return}return h=O.shortestEdge(),u=g[0],a(b,u,h)?(b.push(u),n(g.slice(1),b,O,r)):(m=O.cutArea(d(b),r),r.push(O.getCoordinates(b)),n(g,[],m,r)),r}function a(g,b,O){let r;if(g.length===0)return!0;r=g.slice(),r.push(b);let h=l(g,O),u=l(r,O);return h>=u}function l(g,b){let O=Math.min.apply(Math,g),r=Math.max.apply(Math,g),h=d(g);return Math.max(Math.pow(b,2)*r/Math.pow(h,2),Math.pow(h,2)/(Math.pow(b,2)*O))}function c(g){return g&&g.constructor===Array}function d(g){let b=0,O;for(O=0;O<g.length;O++)b+=g[O];return b}function p(g){let b,O=0;if(c(g[0]))for(b=0;b<g.length;b++)O+=p(g[b]);else O=d(g);return O}return t}()}();class nL{constructor(e,t){this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Eg(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}draw(e){let t=this.w;const i=new Y(this.ctx),s=new ii(this.ctx);let n=i.group({class:"apexcharts-treemap"});if(t.globals.noData)return n;let a=[];return e.forEach(c=>{let d=c.map(p=>Math.abs(p));a.push(d)}),this.negRange=this.helpers.checkColorRange(),t.config.series.forEach((c,d)=>{c.data.forEach(p=>{Array.isArray(this.labels[d])||(this.labels[d]=[]),this.labels[d].push(p.x)})}),window.TreemapSquared.generate(a,t.globals.gridWidth,t.globals.gridHeight).forEach((c,d)=>{let p=i.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:R.escapeString(t.globals.seriesNames[d]),rel:d+1,"data:realIndex":d});if(t.config.chart.dropShadow.enabled){const b=t.config.chart.dropShadow;new pt(this.ctx).dropShadow(n,b,d)}let g=i.group({class:"apexcharts-data-labels"});c.forEach((b,O)=>{const r=b[0],h=b[1],u=b[2],m=b[3];let y=i.drawRect(r,h,u-r,m-h,t.config.plotOptions.treemap.borderRadius,"#fff",1,this.strokeWidth,t.config.plotOptions.treemap.useFillColorAsStroke?w:t.globals.stroke.colors[d]);y.attr({cx:r,cy:h,index:d,i:d,j:O,width:u-r,height:m-h});let v=this.helpers.getShadeColor(t.config.chart.type,d,O,this.negRange),w=v.color;typeof t.config.series[d].data[O]<"u"&&t.config.series[d].data[O].fillColor&&(w=t.config.series[d].data[O].fillColor);let S=s.fillPath({color:w,seriesNumber:d,dataPointIndex:O});y.node.classList.add("apexcharts-treemap-rect"),y.attr({fill:S}),this.helpers.addListeners(y);let C={x:r+(u-r)/2,y:h+(m-h)/2,width:0,height:0},T={x:r,y:h,width:u-r,height:m-h};if(t.config.chart.animations.enabled&&!t.globals.dataChanged){let P=1;t.globals.resized||(P=t.config.chart.animations.speed),this.animateTreemap(y,C,T,P)}if(t.globals.dataChanged){let P=1;this.dynamicAnim.enabled&&t.globals.shouldAnimate&&(P=this.dynamicAnim.speed,t.globals.previousPaths[d]&&t.globals.previousPaths[d][O]&&t.globals.previousPaths[d][O].rect&&(C=t.globals.previousPaths[d][O].rect),this.animateTreemap(y,C,T,P))}let _=this.getFontSize(b),$=t.config.dataLabels.formatter(this.labels[d][O],{value:t.globals.series[d][O],seriesIndex:d,dataPointIndex:O,w:t});t.config.plotOptions.treemap.dataLabels.format==="truncate"&&(_=parseInt(t.config.dataLabels.style.fontSize,10),$=this.truncateLabels($,_,r,h,u,m));let N=this.helpers.calculateDataLabels({text:$,x:(r+u)/2,y:(h+m)/2+this.strokeWidth/2+_/3,i:d,j:O,colorProps:v,fontSize:_,series:e});t.config.dataLabels.enabled&&N&&this.rotateToFitLabel(N,_,$,r,h,u,m),p.add(y),N!==null&&p.add(N)}),p.add(g),n.add(p)}),n}getFontSize(e){const t=this.w;function i(l){let c,d=0;if(Array.isArray(l[0]))for(c=0;c<l.length;c++)d+=i(l[c]);else for(c=0;c<l.length;c++)d+=l[c].length;return d}function s(l){let c,d=0;if(Array.isArray(l[0]))for(c=0;c<l.length;c++)d+=s(l[c]);else for(c=0;c<l.length;c++)d+=1;return d}let n=i(this.labels)/s(this.labels);function a(l,c){let d=l*c,p=Math.pow(d,.5);return Math.min(p/n,parseInt(t.config.dataLabels.style.fontSize,10))}return a(e[2]-e[0],e[3]-e[1])}rotateToFitLabel(e,t,i,s,n,a,l){const c=new Y(this.ctx),d=c.getTextRects(i,t);if(d.width+this.w.config.stroke.width+5>a-s&&d.width<=l-n){let p=c.rotateAroundCenter(e.node);e.node.setAttribute("transform",`rotate(-90 ${p.x} ${p.y}) translate(${d.height/3})`)}}truncateLabels(e,t,i,s,n,a){const l=new Y(this.ctx),d=l.getTextRects(e,t).width+this.w.config.stroke.width+5>n-i&&a-s>n-i?a-s:n-i,p=l.getTextBasedOnMaxWidth({text:e,maxWidth:d,fontSize:t});return e.length!==p.length&&d/t<5?"":p}animateTreemap(e,t,i,s){const n=new dn(this.ctx);n.animateRect(e,{x:t.x,y:t.y,width:t.width,height:t.height},{x:i.x,y:i.y,width:i.width,height:i.height},s,()=>{n.animationCompleted(e)})}}const Ng=24*60,Lc=Ng*60,rL=10/Lc;class oL{constructor(e){this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}calculateTimeScaleTicks(e,t){let i=this.w;if(i.globals.allSeriesCollapsed)return i.globals.labels=[],i.globals.timescaleLabels=[],[];let s=new at(this.ctx);const n=(t-e)/(1e3*Lc);this.determineInterval(n),i.globals.disableZoomIn=!1,i.globals.disableZoomOut=!1,n<rL?i.globals.disableZoomIn=!0:n>5e4&&(i.globals.disableZoomOut=!0);const a=s.getTimeUnitsfromTimestamp(e,t,this.utc),l=i.globals.gridWidth/n,c=l/24,d=c/60,p=d/60;let g=Math.floor(n*24),b=Math.floor(n*Ng),O=Math.floor(n*Lc),r=Math.floor(n),h=Math.floor(n/30),u=Math.floor(n/365);const m={minMillisecond:a.minMillisecond,minSecond:a.minSecond,minMinute:a.minMinute,minHour:a.minHour,minDate:a.minDate,minMonth:a.minMonth,minYear:a.minYear};let y=m.minMillisecond,v=m.minSecond,w=m.minMinute,S=m.minHour,C=m.minDate,T=m.minDate,_=m.minMonth,$=m.minYear;const N={firstVal:m,currentMillisecond:y,currentSecond:v,currentMinute:w,currentHour:S,currentMonthDate:C,currentDate:T,currentMonth:_,currentYear:$,daysWidthOnXAxis:l,hoursWidthOnXAxis:c,minutesWidthOnXAxis:d,secondsWidthOnXAxis:p,numberOfSeconds:O,numberOfMinutes:b,numberOfHours:g,numberOfDays:r,numberOfMonths:h,numberOfYears:u};switch(this.tickInterval){case"years":{this.generateYearScale(N);break}case"months":case"half_year":{this.generateMonthScale(N);break}case"months_days":case"months_fortnight":case"days":case"week_days":{this.generateDayScale(N);break}case"hours":{this.generateHourScale(N);break}case"minutes_fives":case"minutes":this.generateMinuteScale(N);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(N);break}const P=this.timeScaleArray.map(x=>{let k={position:x.position,unit:x.unit,year:x.year,day:x.day?x.day:1,hour:x.hour?x.hour:0,month:x.month+1};return x.unit==="month"?{...k,day:1,value:x.value+1}:x.unit==="day"||x.unit==="hour"?{...k,value:x.value}:x.unit==="minute"?{...k,value:x.value,minute:x.value}:x.unit==="second"?{...k,value:x.value,minute:x.minute,second:x.second}:x});return P.filter(x=>{let k=1,A=Math.ceil(i.globals.gridWidth/120),L=x.value;i.config.xaxis.tickAmount!==void 0&&(A=i.config.xaxis.tickAmount),P.length>A&&(k=Math.floor(P.length/A));let D=!1,M=!1;switch(this.tickInterval){case"years":x.unit==="year"&&(D=!0);break;case"half_year":k=7,x.unit==="year"&&(D=!0);break;case"months":k=1,x.unit==="year"&&(D=!0);break;case"months_fortnight":k=15,(x.unit==="year"||x.unit==="month")&&(D=!0),L===30&&(M=!0);break;case"months_days":k=10,x.unit==="month"&&(D=!0),L===30&&(M=!0);break;case"week_days":k=8,x.unit==="month"&&(D=!0);break;case"days":k=1,x.unit==="month"&&(D=!0);break;case"hours":x.unit==="day"&&(D=!0);break;case"minutes_fives":L%5!==0&&(M=!0);break;case"seconds_tens":L%10!==0&&(M=!0);break;case"seconds_fives":L%5!==0&&(M=!0);break}if(this.tickInterval==="hours"||this.tickInterval==="minutes_fives"||this.tickInterval==="seconds_tens"||this.tickInterval==="seconds_fives"){if(!M)return!0}else if((L%k===0||D)&&!M)return!0})}recalcDimensionsBasedOnFormat(e,t){const i=this.w,s=this.formatDates(e),n=this.removeOverlappingTS(s);i.globals.timescaleLabels=n.slice(),new Ho(this.ctx).plotCoords()}determineInterval(e){const t=e/365,i=e*24,s=i*60,n=s*60;switch(!0){case t>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case i>2.4:this.tickInterval="hours";break;case s>15:this.tickInterval="minutes_fives";break;case s>5:this.tickInterval="minutes";break;case s>1:this.tickInterval="seconds_tens";break;case n>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds";break}}generateYearScale({firstVal:e,currentMonth:t,currentYear:i,daysWidthOnXAxis:s,numberOfYears:n}){let a=e.minYear,l=0;const c=new at(this.ctx);let d="year";if(e.minDate>1||e.minMonth>0){let b=c.determineRemainingDaysOfYear(e.minYear,e.minMonth,e.minDate);l=(c.determineDaysOfYear(e.minYear)-b+1)*s,a=e.minYear+1,this.timeScaleArray.push({position:l,value:a,unit:d,year:a,month:R.monthMod(t+1)})}else e.minDate===1&&e.minMonth===0&&this.timeScaleArray.push({position:l,value:a,unit:d,year:i,month:R.monthMod(t+1)});let p=a,g=l;for(let b=0;b<n;b++)p++,g=c.determineDaysOfYear(p-1)*s+g,this.timeScaleArray.push({position:g,value:p,unit:d,year:p,month:1})}generateMonthScale({firstVal:e,currentMonthDate:t,currentMonth:i,currentYear:s,daysWidthOnXAxis:n,numberOfMonths:a}){let l=i,c=0;const d=new at(this.ctx);let p="month",g=0;if(e.minDate>1){c=(d.determineDaysOfMonths(i+1,e.minYear)-t+1)*n,l=R.monthMod(i+1);let h=s+g,u=R.monthMod(l),m=l;l===0&&(p="year",m=h,u=1,g+=1,h=h+g),this.timeScaleArray.push({position:c,value:m,unit:p,year:h,month:u})}else this.timeScaleArray.push({position:c,value:l,unit:p,year:s,month:R.monthMod(i)});let b=l+1,O=c;for(let r=0,h=1;r<a;r++,h++){b=R.monthMod(b),b===0?(p="year",g+=1):p="month";let u=this._getYear(s,b,g);O=d.determineDaysOfMonths(b,u)*n+O;let m=b===0?u:b;this.timeScaleArray.push({position:O,value:m,unit:p,year:u,month:b===0?1:b}),b++}}generateDayScale({firstVal:e,currentMonth:t,currentYear:i,hoursWidthOnXAxis:s,numberOfDays:n}){const a=new at(this.ctx);let l="day",c=e.minDate+1,d=c;const p=(m,y,v)=>{let w=a.determineDaysOfMonths(y+1,v);return m>w&&(y=y+1,d=1,l="month",r=y),y};let g=24-e.minHour,b=0,O=g*s,r=c,h=p(d,t,i);e.minHour===0&&e.minDate===1?(O=0,r=R.monthMod(e.minMonth),l="month",d=e.minDate):e.minDate!==1&&e.minHour===0&&e.minMinute===0&&(O=0,c=e.minDate,d=c,r=c,h=p(d,t,i)),this.timeScaleArray.push({position:O,value:r,unit:l,year:this._getYear(i,h,b),month:R.monthMod(h),day:d});let u=O;for(let m=0;m<n;m++){d+=1,l="day",h=p(d,h,this._getYear(i,h,b));let y=this._getYear(i,h,b);u=24*s+u;let v=d===1?R.monthMod(h):d;this.timeScaleArray.push({position:u,value:v,unit:l,year:y,month:R.monthMod(h),day:v})}}generateHourScale({firstVal:e,currentDate:t,currentMonth:i,currentYear:s,minutesWidthOnXAxis:n,numberOfHours:a}){const l=new at(this.ctx);let c=0,d="hour";const p=(w,S)=>{let C=l.determineDaysOfMonths(S+1,s);return w>C&&(u=1,S=S+1),{month:S,date:u}},g=(w,S)=>{let C=l.determineDaysOfMonths(S+1,s);return w>C&&(S=S+1),S};let b=60-(e.minMinute+e.minSecond/60),O=b*n,r=e.minHour+1,h=r;b===60&&(O=0,r=e.minHour,h=r);let u=t;h>=24&&(h=0,u+=1,d="day");let y=p(u,i).month;y=g(u,y),this.timeScaleArray.push({position:O,value:r,unit:d,day:u,hour:h,year:s,month:R.monthMod(y)}),h++;let v=O;for(let w=0;w<a;w++){d="hour",h>=24&&(h=0,u+=1,d="day",y=p(u,y).month,y=g(u,y));let S=this._getYear(s,y,c);v=60*n+v;let C=h===0?u:h;this.timeScaleArray.push({position:v,value:C,unit:d,hour:h,day:u,year:S,month:R.monthMod(y)}),h++}}generateMinuteScale({currentMillisecond:e,currentSecond:t,currentMinute:i,currentHour:s,currentDate:n,currentMonth:a,currentYear:l,minutesWidthOnXAxis:c,secondsWidthOnXAxis:d,numberOfMinutes:p}){let g=0,b="minute",r=(60-t-e/1e3)*d,h=i+1,u=n,m=a,y=l,v=s,w=r;for(let S=0;S<p;S++)h>=60&&(h=0,v+=1,v===24&&(v=0)),this.timeScaleArray.push({position:w,value:h,unit:b,hour:v,minute:h,day:u,year:this._getYear(y,m,g),month:R.monthMod(m)}),w+=c,h++}generateSecondScale({currentMillisecond:e,currentSecond:t,currentMinute:i,currentHour:s,currentDate:n,currentMonth:a,currentYear:l,secondsWidthOnXAxis:c,numberOfSeconds:d}){let p=0,g="second",O=(1e3-e)/1e3*c,r=t+1,h=i,u=n,m=a,y=l,v=s,w=O;for(let S=0;S<d;S++)r>=60&&(h++,r=0,h>=60&&(v++,h=0,v===24&&(v=0))),this.timeScaleArray.push({position:w,value:r,unit:g,hour:v,minute:h,second:r,day:u,year:this._getYear(y,m,p),month:R.monthMod(m)}),w+=c,r++}createRawDateString(e,t){let i=e.year;return e.month===0&&(e.month=1),i+="-"+("0"+e.month.toString()).slice(-2),e.unit==="day"?i+=e.unit==="day"?"-"+("0"+t).slice(-2):"-01":i+="-"+("0"+(e.day?e.day:"1")).slice(-2),e.unit==="hour"?i+=e.unit==="hour"?"T"+("0"+t).slice(-2):"T00":i+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),e.unit==="minute"?i+=":"+("0"+t).slice(-2):i+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),e.unit==="second"?i+=":"+("0"+t).slice(-2):i+=":00",this.utc&&(i+=".000Z"),i}formatDates(e){const t=this.w;return e.map(s=>{let n=s.value.toString(),a=new at(this.ctx);const l=this.createRawDateString(s,n);let c=a.getDate(a.parseDate(l));if(this.utc||(c=a.getDate(a.parseDateWithTimezone(l))),t.config.xaxis.labels.format===void 0){let d="dd MMM";const p=t.config.xaxis.labels.datetimeFormatter;s.unit==="year"&&(d=p.year),s.unit==="month"&&(d=p.month),s.unit==="day"&&(d=p.day),s.unit==="hour"&&(d=p.hour),s.unit==="minute"&&(d=p.minute),s.unit==="second"&&(d=p.second),n=a.formatDate(c,d)}else n=a.formatDate(c,t.config.xaxis.labels.format);return{dateString:l,position:s.position,value:n,unit:s.unit,year:s.year,month:s.month}})}removeOverlappingTS(e){const t=new Y(this.ctx);let i=!1,s;e.length>0&&e[0].value&&e.every(l=>l.value.length===e[0].value.length)&&(i=!0,s=t.getTextRects(e[0].value).width);let n=0,a=e.map((l,c)=>{if(c>0&&this.w.config.xaxis.labels.hideOverlappingLabels){const d=i?s:t.getTextRects(e[n].value).width,p=e[n].position;return l.position>p+d+10?(n=c,l):null}else return l});return a=a.filter(l=>l!==null),a}_getYear(e,t,i){return e+Math.floor(t/12)+i}}class aL{constructor(e,t){this.ctx=t,this.w=t.w,this.el=e}setupElements(){let e=this.w.globals,t=this.w.config,i=t.chart.type,s=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"],n=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"];e.axisCharts=s.indexOf(i)>-1,e.xyCharts=n.indexOf(i)>-1,e.isBarHorizontal=(t.chart.type==="bar"||t.chart.type==="rangeBar"||t.chart.type==="boxPlot")&&t.plotOptions.bar.horizontal,e.chartClass=".apexcharts"+e.chartID,e.dom.baseEl=this.el,e.dom.elWrap=document.createElement("div"),Y.setAttrs(e.dom.elWrap,{id:e.chartClass.substring(1),class:"apexcharts-canvas "+e.chartClass.substring(1)}),this.el.appendChild(e.dom.elWrap),e.dom.Paper=new window.SVG.Doc(e.dom.elWrap),e.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:`translate(${t.chart.offsetX}, ${t.chart.offsetY})`}),e.dom.Paper.node.style.background=t.theme.mode==="dark"&&!t.chart.background?"rgba(0, 0, 0, 0.8)":t.chart.background,this.setSVGDimensions(),e.dom.elLegendForeign=document.createElementNS(e.SVGNS,"foreignObject"),Y.setAttrs(e.dom.elLegendForeign,{x:0,y:0,width:e.svgWidth,height:e.svgHeight}),e.dom.elLegendWrap=document.createElement("div"),e.dom.elLegendWrap.classList.add("apexcharts-legend"),e.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.dom.elLegendForeign.appendChild(e.dom.elLegendWrap),e.dom.Paper.node.appendChild(e.dom.elLegendForeign),e.dom.elGraphical=e.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),e.dom.elDefs=e.dom.Paper.defs(),e.dom.Paper.add(e.dom.elGraphical),e.dom.elGraphical.add(e.dom.elDefs)}plotChartType(e,t){const i=this.w,s=i.config,n=i.globals;let a={series:[],i:[]},l={series:[],i:[]},c={series:[],i:[]},d={series:[],i:[]},p={series:[],i:[]},g={series:[],i:[]},b={series:[],i:[]},O={series:[],i:[]},r={series:[],seriesRangeEnd:[],i:[]},h=s.chart.type!==void 0?s.chart.type:"line",u=0;n.series.map((C,T)=>{typeof e[T].type<"u"?e[T].type==="column"||e[T].type==="bar"?(n.series.length>1&&s.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),p.series.push(C),p.i.push(T),h!=="bar"&&u++,i.globals.columnSeries=p.series):e[T].type==="area"?(l.series.push(C),l.i.push(T),h!==e[T].type&&u++):e[T].type==="line"?(a.series.push(C),a.i.push(T),h!==e[T].type&&u++):e[T].type==="scatter"?(c.series.push(C),c.i.push(T)):e[T].type==="bubble"?(d.series.push(C),d.i.push(T),h!==e[T].type&&u++):e[T].type==="candlestick"?(g.series.push(C),g.i.push(T),h!==e[T].type&&u++):e[T].type==="boxPlot"?(b.series.push(C),b.i.push(T),h!==e[T].type&&u++):e[T].type==="rangeBar"?(O.series.push(C),O.i.push(T),h!==e[T].type&&u++):e[T].type==="rangeArea"?(r.series.push(n.seriesRangeStart[T]),r.seriesRangeEnd.push(n.seriesRangeEnd[T]),r.i.push(T),h!==e[T].type&&u++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble/candlestick/boxPlot/rangeBar/rangeArea"):(a.series.push(C),a.i.push(T))}),n.comboCharts||(n.comboCharts=u>0);let m=new Pc(this.ctx,t),y=new Ac(this.ctx,t);this.ctx.pie=new Pg(this.ctx);let v=new JP(this.ctx);this.ctx.rangeBar=new eL(this.ctx,t);let w=new KP(this.ctx),S=[];if(n.comboCharts){if(l.series.length>0&&S.push(m.draw(l.series,"area",l.i)),p.series.length>0)if(i.config.chart.stacked){let C=new Ag(this.ctx,t);S.push(C.draw(p.series,p.i))}else this.ctx.bar=new fn(this.ctx,t),S.push(this.ctx.bar.draw(p.series,p.i));if(r.series.length>0&&S.push(m.draw(r.series,"rangeArea",r.i,r.seriesRangeEnd)),a.series.length>0&&S.push(m.draw(a.series,"line",a.i)),g.series.length>0&&S.push(y.draw(g.series,"candlestick",g.i)),b.series.length>0&&S.push(y.draw(b.series,"boxPlot",b.i)),O.series.length>0&&S.push(this.ctx.rangeBar.draw(O.series,O.i)),c.series.length>0){const C=new Pc(this.ctx,t,!0);S.push(C.draw(c.series,"scatter",c.i))}if(d.series.length>0){const C=new Pc(this.ctx,t,!0);S.push(C.draw(d.series,"bubble",d.i))}}else switch(s.chart.type){case"line":S=m.draw(n.series,"line");break;case"area":S=m.draw(n.series,"area");break;case"bar":s.chart.stacked?S=new Ag(this.ctx,t).draw(n.series):(this.ctx.bar=new fn(this.ctx,t),S=this.ctx.bar.draw(n.series));break;case"candlestick":S=new Ac(this.ctx,t).draw(n.series,"candlestick");break;case"boxPlot":S=new Ac(this.ctx,t).draw(n.series,s.chart.type);break;case"rangeBar":S=this.ctx.rangeBar.draw(n.series);break;case"rangeArea":S=m.draw(n.seriesRangeStart,"rangeArea",void 0,n.seriesRangeEnd);break;case"heatmap":S=new qP(this.ctx,t).draw(n.series);break;case"treemap":S=new nL(this.ctx,t).draw(n.series);break;case"pie":case"donut":case"polarArea":S=this.ctx.pie.draw(n.series);break;case"radialBar":S=v.draw(n.series);break;case"radar":S=w.draw(n.series);break;default:S=m.draw(n.series)}return S}setSVGDimensions(){let e=this.w.globals,t=this.w.config;e.svgWidth=t.chart.width,e.svgHeight=t.chart.height;let i=R.getDimensions(this.el),s=t.chart.width.toString().split(/[0-9]+/g).pop();s==="%"?R.isNumber(i[0])&&(i[0].width===0&&(i=R.getDimensions(this.el.parentNode)),e.svgWidth=i[0]*parseInt(t.chart.width,10)/100):(s==="px"||s==="")&&(e.svgWidth=parseInt(t.chart.width,10));let n=t.chart.height.toString().split(/[0-9]+/g).pop();if(e.svgHeight!=="auto"&&e.svgHeight!=="")if(n==="%"){let a=R.getDimensions(this.el.parentNode);e.svgHeight=a[1]*parseInt(t.chart.height,10)/100}else e.svgHeight=parseInt(t.chart.height,10);else e.axisCharts?e.svgHeight=e.svgWidth/1.61:e.svgHeight=e.svgWidth/1.2;if(e.svgWidth<0&&(e.svgWidth=0),e.svgHeight<0&&(e.svgHeight=0),Y.setAttrs(e.dom.Paper.node,{width:e.svgWidth,height:e.svgHeight}),n!=="%"){let a=t.chart.sparkline.enabled?0:e.axisCharts?t.chart.parentHeightOffset:0;e.dom.Paper.node.parentNode.parentNode.style.minHeight=e.svgHeight+a+"px"}e.dom.elWrap.style.width=e.svgWidth+"px",e.dom.elWrap.style.height=e.svgHeight+"px"}shiftGraphPosition(){let e=this.w.globals,t=e.translateY,s={transform:"translate("+e.translateX+", "+t+")"};Y.setAttrs(e.dom.elGraphical.node,s)}resizeNonAxisCharts(){const e=this.w,t=e.globals;let i=0,s=e.config.chart.sparkline.enabled?1:15;s=s+e.config.grid.padding.bottom,(e.config.legend.position==="top"||e.config.legend.position==="bottom")&&e.config.legend.show&&!e.config.legend.floating&&(i=new kg(this.ctx).legendHelpers.getLegendBBox().clwh+10);let n=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),a=e.globals.radialSize*2.05;if(n&&!e.config.chart.sparkline.enabled&&e.config.plotOptions.radialBar.startAngle!==0){let c=R.getBoundingClientRect(n);a=c.bottom;let d=c.bottom-c.top;a=Math.max(e.globals.radialSize*2.05,d)}let l=a+t.translateY+i+s;t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",l),!(e.config.chart.height&&String(e.config.chart.height).indexOf("%")>0)&&(t.dom.elWrap.style.height=l+"px",Y.setAttrs(t.dom.Paper.node,{height:l}),t.dom.Paper.node.parentNode.parentNode.style.minHeight=l+"px")}coreCalculations(){new Cc(this.ctx).init()}resetGlobals(){const e=()=>this.w.config.series.map(s=>[]),t=new yg;let i=this.w.globals;t.initGlobalVars(i),i.seriesXvalues=e(),i.seriesYvalues=e()}isMultipleY(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}xySettings(){let e=null;const t=this.w;if(t.globals.axisCharts){if(t.config.xaxis.crosshairs.position==="back"&&new Tc(this.ctx).drawXCrosshairs(),t.config.yaxis[0].crosshairs.position==="back"&&new Tc(this.ctx).drawYCrosshairs(),t.config.xaxis.type==="datetime"&&t.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new oL(this.ctx);let s=[];isFinite(t.globals.minX)&&isFinite(t.globals.maxX)&&!t.globals.isBarHorizontal?s=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minX,t.globals.maxX):t.globals.isBarHorizontal&&(s=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minY,t.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(s)}e=new Je(this.ctx).getCalculatedRatios()}return e}updateSourceChart(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}setupBrushHandler(){const e=this.w;if(e.config.chart.brush.enabled&&typeof e.config.chart.events.selection!="function"){let t=Array.isArray(e.config.chart.brush.targets)?e.config.chart.brush.targets:[e.config.chart.brush.target];t.forEach(i=>{let s=ApexCharts.getChartByID(i);s.w.globals.brushSource=this.ctx,typeof s.w.config.chart.events.zoomed!="function"&&(s.w.config.chart.events.zoomed=()=>{this.updateSourceChart(s)}),typeof s.w.config.chart.events.scrolled!="function"&&(s.w.config.chart.events.scrolled=()=>{this.updateSourceChart(s)})}),e.config.chart.events.selection=(i,s)=>{t.forEach(n=>{ApexCharts.getChartByID(n).ctx.updateHelpers._updateOptions({xaxis:{min:s.xaxis.min,max:s.xaxis.max}},!1,!1,!1,!1)})}}}}class lL{constructor(e){this.ctx=e,this.w=e.w}_updateOptions(e,t=!1,i=!0,s=!0,n=!1){return new Promise(a=>{let l=[this.ctx];s&&(l=this.ctx.getSyncedCharts()),this.ctx.w.globals.isExecCalled&&(l=[this.ctx],this.ctx.w.globals.isExecCalled=!1),l.forEach((c,d)=>{let p=c.w;if(p.globals.shouldAnimate=i,t||(p.globals.resized=!0,p.globals.dataChanged=!0,i&&c.series.getPreviousPaths()),e&&typeof e=="object"&&(c.config=new vr(e),e=Je.extendArrayProps(c.config,e,p),c.w.globals.chartID!==this.ctx.w.globals.chartID&&delete e.series,p.config=R.extend(p.config,e),n&&(p.globals.lastXAxis=e.xaxis?R.clone(e.xaxis):[],p.globals.lastYAxis=e.yaxis?R.clone(e.yaxis):[],p.globals.initialConfig=R.extend({},p.config),p.globals.initialSeries=R.clone(p.config.series),e.series))){for(let g=0;g<p.globals.collapsedSeriesIndices.length;g++){let b=p.config.series[p.globals.collapsedSeriesIndices[g]];p.globals.collapsedSeries[g].data=p.globals.axisCharts?b.data.slice():b}for(let g=0;g<p.globals.ancillaryCollapsedSeriesIndices.length;g++){let b=p.config.series[p.globals.ancillaryCollapsedSeriesIndices[g]];p.globals.ancillaryCollapsedSeries[g].data=p.globals.axisCharts?b.data.slice():b}c.series.emptyCollapsedSeries(p.config.series)}return c.update(e).then(()=>{d===l.length-1&&a(c)})})})}_updateSeries(e,t,i=!1){return new Promise(s=>{const n=this.w;n.globals.shouldAnimate=t,n.globals.dataChanged=!0,t&&this.ctx.series.getPreviousPaths();let a;return n.globals.axisCharts?(a=e.map((l,c)=>this._extendSeries(l,c)),a.length===0&&(a=[{data:[]}]),n.config.series=a):n.config.series=e.slice(),i&&(n.globals.initialConfig.series=R.clone(n.config.series),n.globals.initialSeries=R.clone(n.config.series)),this.ctx.update().then(()=>{s(this.ctx)})})}_extendSeries(e,t){const i=this.w,s=i.config.series[t];return{...i.config.series[t],name:e.name?e.name:s==null?void 0:s.name,color:e.color?e.color:s==null?void 0:s.color,type:e.type?e.type:s==null?void 0:s.type,group:e.group?e.group:s==null?void 0:s.group,data:e.data?e.data:s==null?void 0:s.data,zIndex:typeof e.zIndex<"u"?e.zIndex:t}}toggleDataPointSelection(e,t){const i=this.w;let s=null;const n=`.apexcharts-series[data\\:realIndex='${e}']`;if(i.globals.axisCharts?s=i.globals.dom.Paper.select(`${n} path[j='${t}'], ${n} circle[j='${t}'], ${n} rect[j='${t}']`).members[0]:typeof t>"u"&&(s=i.globals.dom.Paper.select(`${n} path[j='${e}']`).members[0],(i.config.chart.type==="pie"||i.config.chart.type==="polarArea"||i.config.chart.type==="donut")&&this.ctx.pie.pieClicked(e)),s)new Y(this.ctx).pathMouseDown(s,null);else return console.warn("toggleDataPointSelection: Element not found"),null;return s.node?s.node:null}forceXAxisUpdate(e){const t=this.w;return["min","max"].forEach(s=>{typeof e.xaxis[s]<"u"&&(t.config.xaxis[s]=e.xaxis[s],t.globals.lastXAxis[s]=e.xaxis[s])}),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric&&(e=new xr(e).convertCatToNumericXaxis(e,this.ctx)),e}forceYAxisUpdate(e){return e.chart&&e.chart.stacked&&e.chart.stackType==="100%"&&(Array.isArray(e.yaxis)?e.yaxis.forEach((t,i)=>{e.yaxis[i].min=0,e.yaxis[i].max=100}):(e.yaxis.min=0,e.yaxis.max=100)),e}revertDefaultAxisMinMax(e){const t=this.w;let i=t.globals.lastXAxis,s=t.globals.lastYAxis;e&&e.xaxis&&(i=e.xaxis),e&&e.yaxis&&(s=e.yaxis),t.config.xaxis.min=i.min,t.config.xaxis.max=i.max;const n=a=>{typeof s[a]<"u"&&(t.config.yaxis[a].min=s[a].min,t.config.yaxis[a].max=s[a].max)};t.config.yaxis.map((a,l)=>{t.globals.zoomed||typeof s[l]<"u"?n(l):typeof this.ctx.opts.yaxis[l]<"u"&&(a.min=this.ctx.opts.yaxis[l].min,a.max=this.ctx.opts.yaxis[l].max)})}}var cL={exports:{}};/*!
* svg.js - A lightweight library for manipulating and animating SVG.
* @version 2.6.6
* https://svgdotjs.github.io/
*/(function(o,e){(function(t,i){o.exports=t.document?i(t,t.document):function(s){return i(s,s.document)}})(typeof window<"u"?window:FT,function(t,i){var s=typeof this<"u"?this:t,n=s.SVG=function(x){if(n.supported)return x=new n.Doc(x),n.parser.draw||n.prepare(),x};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.dev",n.supported=function(){return!0}(),!n.supported)return!1;n.did=1e3,n.eid=function(x){return"Svgjs"+h(x)+n.did++},n.create=function(x){var k=i.createElementNS(this.ns,x);return k.setAttribute("id",this.eid(x)),k},n.extend=function(){var x,k;x=[].slice.call(arguments),k=x.pop();for(var A=x.length-1;A>=0;A--)if(x[A])for(var L in k)x[A].prototype[L]=k[L];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(x){var k=typeof x.create=="function"?x.create:function(){this.constructor.call(this,n.create(x.create))};return x.inherit&&(k.prototype=new x.inherit),x.extend&&n.extend(k,x.extend),x.construct&&n.extend(x.parent||n.Container,x.construct),k},n.adopt=function(x){if(!x)return null;if(x.instance)return x.instance;var k;return x.nodeName=="svg"?k=x.parentNode instanceof t.SVGElement?new n.Nested:new n.Doc:x.nodeName=="linearGradient"?k=new n.Gradient("linear"):x.nodeName=="radialGradient"?k=new n.Gradient("radial"):n[h(x.nodeName)]?k=new n[h(x.nodeName)]:k=new n.Element(x),k.type=x.nodeName,k.node=x,x.instance=k,k instanceof n.Doc&&k.namespace().defs(),k.setData(JSON.parse(x.getAttribute("svgjs:data"))||{}),k},n.prepare=function(){var x=i.getElementsByTagName("body")[0],k=(x?new n.Doc(x):n.adopt(i.documentElement).nested()).size(2,0);n.parser={body:x||i.documentElement,draw:k.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:k.polyline().node,path:k.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},i.addEventListener("DOMContentLoaded",function(){n.parser.draw||n.prepare()},!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},n.utils={map:function(x,k){for(var A=x.length,L=[],D=0;D<A;D++)L.push(k(x[D]));return L},filter:function(x,k){for(var A=x.length,L=[],D=0;D<A;D++)k(x[D])&&L.push(x[D]);return L},filterSVGElements:function(x){return this.filter(x,function(k){return k instanceof t.SVGElement})}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(x){var k;this.r=0,this.g=0,this.b=0,x&&(typeof x=="string"?n.regex.isRgb.test(x)?(k=n.regex.rgb.exec(x.replace(n.regex.whitespace,"")),this.r=parseInt(k[1]),this.g=parseInt(k[2]),this.b=parseInt(k[3])):n.regex.isHex.test(x)&&(k=n.regex.hex.exec(u(x)),this.r=parseInt(k[1],16),this.g=parseInt(k[2],16),this.b=parseInt(k[3],16)):typeof x=="object"&&(this.r=x.r,this.g=x.g,this.b=x.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+m(this.r)+m(this.g)+m(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(x){return this.destination=new n.Color(x),this},at:function(x){return this.destination?(x=x<0?0:x>1?1:x,new n.Color({r:~~(this.r+(this.destination.r-this.r)*x),g:~~(this.g+(this.destination.g-this.g)*x),b:~~(this.b+(this.destination.b-this.b)*x)})):this}}),n.Color.test=function(x){return x+="",n.regex.isHex.test(x)||n.regex.isRgb.test(x)},n.Color.isRgb=function(x){return x&&typeof x.r=="number"&&typeof x.g=="number"&&typeof x.b=="number"},n.Color.isColor=function(x){return n.Color.isRgb(x)||n.Color.test(x)},n.Array=function(x,k){x=(x||[]).valueOf(),x.length==0&&k&&(x=k.valueOf()),this.value=this.parse(x)},n.extend(n.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(x){return x=x.valueOf(),Array.isArray(x)?x:this.split(x)}}),n.PointArray=function(x,k){n.Array.call(this,x,k||[[0,0]])},n.PointArray.prototype=new n.Array,n.PointArray.prototype.constructor=n.PointArray;for(var a={M:function(x,k,A){return k.x=A.x=x[0],k.y=A.y=x[1],["M",k.x,k.y]},L:function(x,k){return k.x=x[0],k.y=x[1],["L",x[0],x[1]]},H:function(x,k){return k.x=x[0],["H",x[0]]},V:function(x,k){return k.y=x[0],["V",x[0]]},C:function(x,k){return k.x=x[4],k.y=x[5],["C",x[0],x[1],x[2],x[3],x[4],x[5]]},Q:function(x,k){return k.x=x[2],k.y=x[3],["Q",x[0],x[1],x[2],x[3]]},S:function(x,k){return k.x=x[2],k.y=x[3],["S",x[0],x[1],x[2],x[3]]},Z:function(x,k,A){return k.x=A.x,k.y=A.y,["Z"]}},l="mlhvqtcsaz".split(""),c=0,d=l.length;c<d;++c)a[l[c]]=function(x){return function(k,A,L){if(x=="H")k[0]=k[0]+A.x;else if(x=="V")k[0]=k[0]+A.y;else if(x=="A")k[5]=k[5]+A.x,k[6]=k[6]+A.y;else for(var D=0,M=k.length;D<M;++D)k[D]=k[D]+(D%2?A.y:A.x);if(a&&typeof a[x]=="function")return a[x](k,A,L)}}(l[c].toUpperCase());n.PathArray=function(x,k){n.Array.call(this,x,k||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.PathArray.prototype.constructor=n.PathArray,n.extend(n.PathArray,{toString:function(){return C(this.value)},move:function(x,k){var A=this.bbox();return x-=A.x,k-=A.y,this},at:function(x){if(!this.destination)return this;for(var k=this.value,A=this.destination.value,L=[],D=new n.PathArray,M,Q,B=0,M=k.length;B<M;B++){L[B]=[k[B][0]];for(var X=1,Q=k[B].length;X<Q;X++)L[B][X]=k[B][X]+(A[B][X]-k[B][X])*x;L[B][0]==="A"&&(L[B][4]=+(L[B][4]!=0),L[B][5]=+(L[B][5]!=0))}return D.value=L,D},parse:function(x){if(x instanceof n.PathArray)return x.valueOf();var k,L,A={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};typeof x=="string"?x=x.replace(n.regex.numbersWithDots,g).replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen,"$1 -").trim().split(n.regex.delimiter):x=x.reduce(function(X,te){return[].concat.call(X,te)},[]);var L=[],D=new n.Point,M=new n.Point,Q=0,B=x.length;do n.regex.isPathLetter.test(x[Q])?(k=x[Q],++Q):k=="M"?k="L":k=="m"&&(k="l"),L.push(a[k].call(null,x.slice(Q,Q=Q+A[k.toUpperCase()]).map(parseFloat),D,M));while(B>Q);return L},bbox:function(){return n.parser.draw||n.prepare(),n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(x,k){this.value=0,this.unit=k||"",typeof x=="number"?this.value=isNaN(x)?0:isFinite(x)?x:x<0?-34e37:34e37:typeof x=="string"?(k=x.match(n.regex.numberAndUnit),k&&(this.value=parseFloat(k[1]),k[5]=="%"?this.value/=100:k[5]=="s"&&(this.value*=1e3),this.unit=k[5])):x instanceof n.Number&&(this.value=x.valueOf(),this.unit=x.unit)},extend:{toString:function(){return(this.unit=="%"?~~(this.value*1e8)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(x){return x=new n.Number(x),new n.Number(this+x,this.unit||x.unit)},minus:function(x){return x=new n.Number(x),new n.Number(this-x,this.unit||x.unit)},times:function(x){return x=new n.Number(x),new n.Number(this*x,this.unit||x.unit)},divide:function(x){return x=new n.Number(x),new n.Number(this/x,this.unit||x.unit)},to:function(x){var k=new n.Number(this);return typeof x=="string"&&(k.unit=x),k},morph:function(x){return this.destination=new n.Number(x),x.relative&&(this.destination.value+=this.value),this},at:function(x){return this.destination?new n.Number(this.destination).minus(this).times(x).plus(this):this}}}),n.Element=n.invent({create:function(x){this._stroke=n.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=x)&&(this.type=x.nodeName,this.node.instance=this,this._stroke=x.getAttribute("stroke")||this._stroke)},extend:{x:function(x){return this.attr("x",x)},y:function(x){return this.attr("y",x)},cx:function(x){return x==null?this.x()+this.width()/2:this.x(x-this.width()/2)},cy:function(x){return x==null?this.y()+this.height()/2:this.y(x-this.height()/2)},move:function(x,k){return this.x(x).y(k)},center:function(x,k){return this.cx(x).cy(k)},width:function(x){return this.attr("width",x)},height:function(x){return this.attr("height",x)},size:function(x,k){var A=y(this,x,k);return this.width(new n.Number(A.width)).height(new n.Number(A.height))},clone:function(x){this.writeDataToDom();var k=T(this.node.cloneNode(!0));return x?x.add(k):this.after(k),k},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(x){return this.after(x).remove(),x},addTo:function(x){return x.put(this)},putIn:function(x){return x.add(this)},id:function(x){return this.attr("id",x)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var x=this.attr("class");return x==null?[]:x.trim().split(n.regex.delimiter)},hasClass:function(x){return this.classes().indexOf(x)!=-1},addClass:function(x){if(!this.hasClass(x)){var k=this.classes();k.push(x),this.attr("class",k.join(" "))}return this},removeClass:function(x){return this.hasClass(x)&&this.attr("class",this.classes().filter(function(k){return k!=x}).join(" ")),this},toggleClass:function(x){return this.hasClass(x)?this.removeClass(x):this.addClass(x)},reference:function(x){return n.get(this.attr(x))},parent:function(x){var k=this;if(!k.node.parentNode)return null;if(k=n.adopt(k.node.parentNode),!x)return k;for(;k&&k.node instanceof t.SVGElement;){if(typeof x=="string"?k.matches(x):k instanceof x)return k;if(!k.node.parentNode||k.node.parentNode.nodeName=="#document")return null;k=n.adopt(k.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(x){var k=[],A=this;do{if(A=A.parent(x),!A||!A.node)break;k.push(A)}while(A.parent);return k},matches:function(x){return O(this.node,x)},native:function(){return this.node},svg:function(x){var k=i.createElement("svg");if(x&&this instanceof n.Parent){k.innerHTML="<svg>"+x.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var A=0,L=k.firstChild.childNodes.length;A<L;A++)this.node.appendChild(k.firstChild.firstChild)}else return k.appendChild(x=i.createElement("svg")),this.writeDataToDom(),x.appendChild(this.node.cloneNode(!0)),k.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");return this},writeDataToDom:function(){if(this.each||this.lines){var x=this.each?this:this.lines();x.each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(x){return this.dom=x,this},is:function(x){return b(this,x)}}}),n.easing={"-":function(x){return x},"<>":function(x){return-Math.cos(x*Math.PI)/2+.5},">":function(x){return Math.sin(x*Math.PI/2)},"<":function(x){return-Math.cos(x*Math.PI/2)+1}},n.morph=function(x){return function(k,A){return new n.MorphObj(k,A).at(x)}},n.Situation=n.invent({create:function(x){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(x.duration).valueOf(),this.delay=new n.Number(x.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=x.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.FX=n.invent({create:function(x){this._target=x,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(x,k,A){typeof x=="object"&&(k=x.ease,A=x.delay,x=x.duration);var L=new n.Situation({duration:x||1e3,delay:A||0,ease:n.easing[k||"-"]||k});return this.queue(L),this},target:function(x){return x&&x instanceof n.Element?(this._target=x,this):this._target},timeToAbsPos:function(x){return(x-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(x){return this.situation.duration/this._speed*x+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame((function(){this.step()}).bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(x){return(typeof x=="function"||x instanceof n.Situation)&&this.situations.push(x),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof n.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var x,k=this.situation;if(k.init)return this;for(var A in k.animations){x=this.target()[A](),Array.isArray(x)||(x=[x]),Array.isArray(k.animations[A])||(k.animations[A]=[k.animations[A]]);for(var L=x.length;L--;)k.animations[A][L]instanceof n.Number&&(x[L]=new n.Number(x[L])),k.animations[A][L]=x[L].morph(k.animations[A][L])}for(var A in k.attrs)k.attrs[A]=new n.MorphObj(this.target().attr(A),k.attrs[A]);for(var A in k.styles)k.styles[A]=new n.MorphObj(this.target().style(A),k.styles[A]);return k.initialTransformation=this.target().matrixify(),k.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(x,k){var A=this.active;return this.active=!1,k&&this.clearQueue(),x&&this.situation&&(!A&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(x){var k=this.last(),A=function L(D){D.detail.situation==k&&(x.call(this,k),this.off("finished.fx",L))};return this.target().on("finished.fx",A),this._callStart()},during:function(x){var k=this.last(),A=function(L){L.detail.situation==k&&x.call(this,L.detail.pos,n.morph(L.detail.pos),L.detail.eased,k)};return this.target().off("during.fx",A).on("during.fx",A),this.after(function(){this.off("during.fx",A)}),this._callStart()},afterAll:function(x){var k=function A(L){x.call(this),this.off("allfinished.fx",A)};return this.target().off("allfinished.fx",k).on("allfinished.fx",k),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(x,k,A){return this.last()[A||"animations"][x]=k,this._callStart()},step:function(x){if(x||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1){var k,A,L;k=Math.max(this.absPos,0),A=Math.floor(k),this.situation.loops===!0||A<this.situation.loops?(this.pos=k-A,L=this.situation.loop,this.situation.loop=A):(this.absPos=this.situation.loops,this.pos=1,L=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-L)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var D=this.situation.ease(this.pos);for(var M in this.situation.once)M>this.lastPos&&M<=D&&(this.situation.once[M].call(this.target(),this.pos,D),delete this.situation.once[M]);return this.active&&this.target().fire("during",{pos:this.pos,eased:D,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=D,this):this},eachAt:function(){var x,k,A=this,L=this.target(),D=this.situation;for(var M in D.animations)k=[].concat(D.animations[M]).map(function(B){return typeof B!="string"&&B.at?B.at(D.ease(A.pos),A.pos):B}),L[M].apply(L,k);for(var M in D.attrs)k=[M].concat(D.attrs[M]).map(function(X){return typeof X!="string"&&X.at?X.at(D.ease(A.pos),A.pos):X}),L.attr.apply(L,k);for(var M in D.styles)k=[M].concat(D.styles[M]).map(function(X){return typeof X!="string"&&X.at?X.at(D.ease(A.pos),A.pos):X}),L.style.apply(L,k);if(D.transforms.length){k=D.initialTransformation;for(var M=0,x=D.transforms.length;M<x;M++){var Q=D.transforms[M];if(Q instanceof n.Matrix){Q.relative?k=k.multiply(new n.Matrix().morph(Q).at(D.ease(this.pos))):k=k.morph(Q).at(D.ease(this.pos));continue}Q.relative||Q.undo(k.extract()),k=k.multiply(Q.at(D.ease(this.pos)))}L.matrix(k)}return this},once:function(x,k,A){var L=this.last();return A||(x=L.ease(x)),L.once[x]=k,this},_callStart:function(){return setTimeout((function(){this.start()}).bind(this),0),this}},parent:n.Element,construct:{animate:function(x,k,A){return(this.fx||(this.fx=new n.FX(this))).animate(x,k,A)},delay:function(x){return(this.fx||(this.fx=new n.FX(this))).delay(x)},stop:function(x,k){return this.fx&&this.fx.stop(x,k),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),n.MorphObj=n.invent({create:function(x,k){if(n.Color.isColor(k))return new n.Color(x).morph(k);if(n.regex.delimiter.test(x))return n.regex.pathLetters.test(x)?new n.PathArray(x).morph(k):new n.Array(x).morph(k);if(n.regex.numberAndUnit.test(k))return new n.Number(x).morph(k);this.value=x,this.destination=k},extend:{at:function(x,k){return k<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(x,k,A){if(typeof x=="object")for(var L in x)this.attr(L,x[L]);else this.add(x,k,"attrs");return this},plot:function(x,k,A,L){return arguments.length==4?this.plot([x,k,A,L]):this.add("plot",new(this.target()).morphArray(x))}}),n.Box=n.invent({create:function(x,k,A,L){if(typeof x=="object"&&!(x instanceof n.Element))return n.Box.call(this,x.left!=null?x.left:x.x,x.top!=null?x.top:x.y,x.width,x.height);arguments.length==4&&(this.x=x,this.y=k,this.width=A,this.height=L),_(this)}}),n.BBox=n.invent({create:function(x){if(n.Box.apply(this,[].slice.call(arguments)),x instanceof n.Element){var k;try{if(!i.documentElement.contains){for(var A=x.node;A.parentNode;)A=A.parentNode;if(A!=i)throw new Error("Element not in the dom")}k=x.node.getBBox()}catch{if(x instanceof n.Shape){n.parser.draw||n.prepare();var L=x.clone(n.parser.draw.instance).show();L&&L.node&&typeof L.node.getBBox=="function"&&(k=L.node.getBBox()),L&&typeof L.remove=="function"&&L.remove()}else k={x:x.node.clientLeft,y:x.node.clientTop,width:x.node.clientWidth,height:x.node.clientHeight}}n.Box.call(this,k)}},inherit:n.Box,parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.BBox.prototype.constructor=n.BBox,n.Matrix=n.invent({create:function(x){var k=w([1,0,0,1,0,0]);x=x===null?k:x instanceof n.Element?x.matrixify():typeof x=="string"?w(x.split(n.regex.delimiter).map(parseFloat)):arguments.length==6?w([].slice.call(arguments)):Array.isArray(x)?w(x):x&&typeof x=="object"?x:k;for(var A=P.length-1;A>=0;--A)this[P[A]]=x[P[A]]!=null?x[P[A]]:k[P[A]]},extend:{extract:function(){var x=v(this,0,1);v(this,1,0);var k=180/Math.PI*Math.atan2(x.y,x.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(k*Math.PI/180)+this.f*Math.sin(k*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(k*Math.PI/180)+this.e*Math.sin(-k*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:k,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(x){return this.destination=new n.Matrix(x),this},multiply:function(x){return new n.Matrix(this.native().multiply(S(x).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(x,k){return new n.Matrix(this.native().translate(x||0,k||0))},native:function(){for(var x=n.parser.native.createSVGMatrix(),k=P.length-1;k>=0;k--)x[P[k]]=this[P[k]];return x},toString:function(){return"matrix("+N(this.a)+","+N(this.b)+","+N(this.c)+","+N(this.d)+","+N(this.e)+","+N(this.f)+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof n.Nested){var x=this.rect(1,1),k=x.node.getScreenCTM();return x.remove(),new n.Matrix(k)}return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(x,k){var A,L={x:0,y:0};A=Array.isArray(x)?{x:x[0],y:x[1]}:typeof x=="object"?{x:x.x,y:x.y}:x!=null?{x,y:k??x}:L,this.x=A.x,this.y=A.y},extend:{clone:function(){return new n.Point(this)},morph:function(x,k){return this.destination=new n.Point(x,k),this}}}),n.extend(n.Element,{point:function(x,k){return new n.Point(x,k).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(x,k,A){if(x==null){x={},k=this.node.attributes;for(var A=k.length-1;A>=0;A--)x[k[A].nodeName]=n.regex.isNumber.test(k[A].nodeValue)?parseFloat(k[A].nodeValue):k[A].nodeValue;return x}else if(typeof x=="object")for(var L in x)this.attr(L,x[L]);else if(k===null)this.node.removeAttribute(x);else{if(k==null)return k=this.node.getAttribute(x),k==null?n.defaults.attrs[x]:n.regex.isNumber.test(k)?parseFloat(k):k;x=="stroke-width"?this.attr("stroke",parseFloat(k)>0?this._stroke:null):x=="stroke"&&(this._stroke=k),(x=="fill"||x=="stroke")&&(n.regex.isImage.test(k)&&(k=this.doc().defs().image(k,0,0)),k instanceof n.Image&&(k=this.doc().defs().pattern(0,0,function(){this.add(k)}))),typeof k=="number"?k=new n.Number(k):n.Color.isColor(k)?k=new n.Color(k):Array.isArray(k)&&(k=new n.Array(k)),x=="leading"?this.leading&&this.leading(k):typeof A=="string"?this.node.setAttributeNS(A,x,k.toString()):this.node.setAttribute(x,k.toString()),this.rebuild&&(x=="font-size"||x=="x")&&this.rebuild(x,k)}return this}}),n.extend(n.Element,{transform:function(x,k){var A=this,L;return typeof x!="object"?(L=new n.Matrix(A).extract(),typeof x=="string"?L[x]:L):(L=new n.Matrix(A),k=!!k||!!x.relative,x.a!=null&&(L=k?L.multiply(new n.Matrix(x)):new n.Matrix(x)),this.attr("transform",L))}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var x=(this.attr("transform")||"").split(n.regex.transforms).slice(0,-1).map(function(k){var A=k.trim().split("(");return[A[0],A[1].split(n.regex.delimiter).map(function(L){return parseFloat(L)})]}).reduce(function(k,A){return A[0]=="matrix"?k.multiply(w(A[1])):k[A[0]].apply(k,A[1])},new n.Matrix);return x},toParent:function(x){if(this==x)return this;var k=this.screenCTM(),A=x.screenCTM().inverse();return this.addTo(x).untransform().transform(A.multiply(k)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(x,k){if(arguments.length>1&&typeof k!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(x))for(var A=0,L=this.arguments.length;A<L;++A)this[this.arguments[A]]=x[A];else if(x&&typeof x=="object")for(var A=0,L=this.arguments.length;A<L;++A)this[this.arguments[A]]=x[this.arguments[A]];this.inversed=!1,k===!0&&(this.inversed=!0)}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(x,k){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.extend(n.Element,{style:function(x,k){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(typeof x=="object")for(var A in x)this.style(A,x[A]);else if(n.regex.isCss.test(x))for(x=x.split(/\s*;\s*/).filter(function(L){return!!L}).map(function(L){return L.split(/\s*:\s*/)});k=x.pop();)this.style(k[0],k[1]);else return this.node.style[r(x)];else this.node.style[r(x)]=k===null||n.regex.isBlank.test(k)?"":k;return this}}),n.Parent=n.invent({create:function(x){this.constructor.call(this,x)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),function(x){return n.adopt(x)})},add:function(x,k){return k==null?this.node.appendChild(x.node):x.node!=this.node.childNodes[k]&&this.node.insertBefore(x.node,this.node.childNodes[k]),this},put:function(x,k){return this.add(x,k),x},has:function(x){return this.index(x)>=0},index:function(x){return[].slice.call(this.node.childNodes).indexOf(x.node)},get:function(x){return n.adopt(this.node.childNodes[x])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(x,k){for(var A,L=this.children(),D=0,A=L.length;D<A;D++)L[D]instanceof n.Element&&x.apply(L[D],[D,L]),k&&L[D]instanceof n.Container&&L[D].each(x,k);return this},removeElement:function(x){return this.node.removeChild(x.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(x,k){return k===0||this instanceof n.Defs||this.node==n.parser.draw?this:(x=x||(this instanceof n.Doc?this:this.parent(n.Parent)),k=k||1/0,this.each(function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(x,k-1):this.toParent(x)}),this.node.firstChild||this.remove(),this)},flatten:function(x,k){return this.ungroup(x,k)}}),n.Container=n.invent({create:function(x){this.constructor.call(this,x)},inherit:n.Parent}),n.ViewBox=n.invent({parent:n.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(x){n.Element.prototype[x]=function(k){return n.on(this.node,x,k),this}}),n.listeners=[],n.handlerMap=[],n.listenerId=0,n.on=function(x,k,A,L,D){var M=A.bind(L||x.instance||x),Q=(n.handlerMap.indexOf(x)+1||n.handlerMap.push(x))-1,B=k.split(".")[0],X=k.split(".")[1]||"*";n.listeners[Q]=n.listeners[Q]||{},n.listeners[Q][B]=n.listeners[Q][B]||{},n.listeners[Q][B][X]=n.listeners[Q][B][X]||{},A._svgjsListenerId||(A._svgjsListenerId=++n.listenerId),n.listeners[Q][B][X][A._svgjsListenerId]=M,x.addEventListener(B,M,D||{passive:!1})},n.off=function(x,k,A){var L=n.handlerMap.indexOf(x),D=k&&k.split(".")[0],M=k&&k.split(".")[1],Q="";if(L!=-1)if(A){if(typeof A=="function"&&(A=A._svgjsListenerId),!A)return;n.listeners[L][D]&&n.listeners[L][D][M||"*"]&&(x.removeEventListener(D,n.listeners[L][D][M||"*"][A],!1),delete n.listeners[L][D][M||"*"][A])}else if(M&&D){if(n.listeners[L][D]&&n.listeners[L][D][M]){for(var B in n.listeners[L][D][M])n.off(x,[D,M].join("."),B);delete n.listeners[L][D][M]}}else if(M)for(var X in n.listeners[L])for(var Q in n.listeners[L][X])M===Q&&n.off(x,[X,M].join("."));else if(D){if(n.listeners[L][D]){for(var Q in n.listeners[L][D])n.off(x,[D,Q].join("."));delete n.listeners[L][D]}}else{for(var X in n.listeners[L])n.off(x,X);delete n.listeners[L],delete n.handlerMap[L]}},n.extend(n.Element,{on:function(x,k,A,L){return n.on(this.node,x,k,A,L),this},off:function(x,k){return n.off(this.node,x,k),this},fire:function(x,k){return x instanceof t.Event?this.node.dispatchEvent(x):this.node.dispatchEvent(x=new n.CustomEvent(x,{detail:k,cancelable:!0})),this._event=x,this},event:function(){return this._event}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(x){return x==null?this.transform("x"):this.transform({x:x-this.x()},!0)}},construct:{group:function(){return this.put(new n.G)}}}),n.Doc=n.invent({create:function(x){x&&(x=typeof x=="string"?i.getElementById(x):x,x.nodeName=="svg"?this.constructor.call(this,x):(this.constructor.call(this,n.create("svg")),x.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){if(!this._defs){var x;(x=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(x):this._defs=new n.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return!this.node.parentNode||this.node.parentNode.nodeName=="#document"?null:this.node.parentNode},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,n.parser.draw&&!n.parser.draw.parentNode&&this.node.appendChild(n.parser.draw),this},clone:function(x){this.writeDataToDom();var k=this.node,A=T(k.cloneNode(!0));return x?(x.node||x).appendChild(A.node):k.parentNode.insertBefore(A.node,k.nextSibling),A}}}),n.extend(n.Element,{}),n.Gradient=n.invent({create:function(x){this.constructor.call(this,n.create(x+"Gradient")),this.type=x},inherit:n.Container,extend:{at:function(x,k,A){return this.put(new n.Stop).update(x,k,A)},update:function(x){return this.clear(),typeof x=="function"&&x.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(x,k,A){return x=="transform"&&(x="gradientTransform"),n.Container.prototype.attr.call(this,x,k,A)}},construct:{gradient:function(x,k){return this.defs().gradient(x,k)}}}),n.extend(n.Gradient,n.FX,{from:function(x,k){return(this._target||this).type=="radial"?this.attr({fx:new n.Number(x),fy:new n.Number(k)}):this.attr({x1:new n.Number(x),y1:new n.Number(k)})},to:function(x,k){return(this._target||this).type=="radial"?this.attr({cx:new n.Number(x),cy:new n.Number(k)}):this.attr({x2:new n.Number(x),y2:new n.Number(k)})}}),n.extend(n.Defs,{gradient:function(x,k){return this.put(new n.Gradient(x)).update(k)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(x){return(typeof x=="number"||x instanceof n.Number)&&(x={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),x.opacity!=null&&this.attr("stop-opacity",x.opacity),x.color!=null&&this.attr("stop-color",x.color),x.offset!=null&&this.attr("offset",new n.Number(x.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(x){return this.clear(),typeof x=="function"&&x.call(this,this),this},toString:function(){return this.fill()},attr:function(x,k,A){return x=="transform"&&(x="patternTransform"),n.Container.prototype.attr.call(this,x,k,A)}},construct:{pattern:function(x,k,A){return this.defs().pattern(x,k,A)}}}),n.extend(n.Defs,{pattern:function(x,k,A){return this.put(new n.Pattern).update(A).attr({x:0,y:0,width:x,height:k,patternUnits:"userSpaceOnUse"})}}),n.Shape=n.invent({create:function(x){this.constructor.call(this,x)},inherit:n.Element}),n.Symbol=n.invent({create:"symbol",inherit:n.Container,construct:{symbol:function(){return this.put(new n.Symbol)}}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(x,k){return this.attr("href",(k||"")+"#"+x,n.xlink)}},construct:{use:function(x,k){return this.put(new n.Use).element(x,k)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(x,k){return this.put(new n.Rect).size(x,k)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(x){return this.put(new n.Circle).rx(new n.Number(x).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(x){return this.attr("r",x)},ry:function(x){return this.rx(x)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(x,k){return this.put(new n.Ellipse).size(x,k).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(x){return this.attr("rx",x)},ry:function(x){return this.attr("ry",x)}}),n.extend(n.Circle,n.Ellipse,{x:function(x){return x==null?this.cx()-this.rx():this.cx(x+this.rx())},y:function(x){return x==null?this.cy()-this.ry():this.cy(x+this.ry())},cx:function(x){return x==null?this.attr("cx"):this.attr("cx",x)},cy:function(x){return x==null?this.attr("cy"):this.attr("cy",x)},width:function(x){return x==null?this.rx()*2:this.rx(new n.Number(x).divide(2))},height:function(x){return x==null?this.ry()*2:this.ry(new n.Number(x).divide(2))},size:function(x,k){var A=y(this,x,k);return this.rx(new n.Number(A.width).divide(2)).ry(new n.Number(A.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(x,k,A,L){return x==null?this.array():(typeof k<"u"?x={x1:x,y1:k,x2:A,y2:L}:x=new n.PointArray(x).toLine(),this.attr(x))},move:function(x,k){return this.attr(this.array().move(x,k).toLine())},size:function(x,k){var A=y(this,x,k);return this.attr(this.array().size(A.width,A.height).toLine())}},construct:{line:function(x,k,A,L){return n.Line.prototype.plot.apply(this.put(new n.Line),x!=null?[x,k,A,L]:[0,0,0,0])}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(x){return this.put(new n.Polyline).plot(x||new n.PointArray)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(x){return this.put(new n.Polygon).plot(x||new n.PointArray)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(x){return x==null?this.array():this.clear().attr("points",typeof x=="string"?x:this._array=new n.PointArray(x))},clear:function(){return delete this._array,this},move:function(x,k){return this.attr("points",this.array().move(x,k))},size:function(x,k){var A=y(this,x,k);return this.attr("points",this.array().size(A.width,A.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(x){return x==null?this.bbox().x:this.move(x,this.bbox().y)},y:function(x){return x==null?this.bbox().y:this.move(this.bbox().x,x)},width:function(x){var k=this.bbox();return x==null?k.width:this.size(x,k.height)},height:function(x){var k=this.bbox();return x==null?k.height:this.size(k.width,x)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(x){return x==null?this.array():this.clear().attr("d",typeof x=="string"?x:this._array=new n.PathArray(x))},clear:function(){return delete this._array,this}},construct:{path:function(x){return this.put(new n.Path).plot(x||new n.PathArray)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(x){if(!x)return this;var k=this,A=new t.Image;return n.on(A,"load",function(){n.off(A);var L=k.parent(n.Pattern);L!==null&&(k.width()==0&&k.height()==0&&k.size(A.width,A.height),L&&L.width()==0&&L.height()==0&&L.size(k.width(),k.height()),typeof k._loaded=="function"&&k._loaded.call(k,{width:A.width,height:A.height,ratio:A.width/A.height,url:x}))}),n.on(A,"error",function(L){n.off(A),typeof k._error=="function"&&k._error.call(k,L)}),this.attr("href",A.src=this.src=x,n.xlink)},loaded:function(x){return this._loaded=x,this},error:function(x){return this._error=x,this}},construct:{image:function(x,k,A){return this.put(new n.Image).load(x).size(k||0,A||k||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{x:function(x){return x==null?this.attr("x"):this.attr("x",x)},text:function(x){if(typeof x>"u"){for(var x="",k=this.node.childNodes,A=0,L=k.length;A<L;++A)A!=0&&k[A].nodeType!=3&&n.adopt(k[A]).dom.newLined==!0&&(x+=`
`),x+=k[A].textContent;return x}if(this.clear().build(!0),typeof x=="function")x.call(this,this);else{x=x.split(`
`);for(var A=0,D=x.length;A<D;A++)this.tspan(x[A]).newLine()}return this.build(!1).rebuild()},size:function(x){return this.attr("font-size",x).rebuild()},leading:function(x){return x==null?this.dom.leading:(this.dom.leading=new n.Number(x),this.rebuild())},lines:function(){var x=(this.textPath&&this.textPath()||this).node,k=n.utils.map(n.utils.filterSVGElements(x.childNodes),function(A){return n.adopt(A)});return new n.Set(k)},rebuild:function(x){if(typeof x=="boolean"&&(this._rebuild=x),this._rebuild){var k=this,A=0,L=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(k.textPath()||this.attr("x",k.attr("x")),this.text()==`
`?A+=L:(this.attr("dy",L+A),A=0))}),this.fire("rebuild")}return this},build:function(x){return this._build=!!x,this},setData:function(x){return this.dom=x,this.dom.leading=new n.Number(x.leading||1.3),this}},construct:{text:function(x){return this.put(new n.Text).text(x)},plain:function(x){return this.put(new n.Text).plain(x)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(x){return x==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof x=="function"?x.call(this,this):this.plain(x),this)},dx:function(x){return this.attr("dx",x)},dy:function(x){return this.attr("dy",x)},newLine:function(){var x=this.parent(n.Text);return this.dom.newLined=!0,this.dy(x.dom.leading*x.attr("font-size")).attr("x",x.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(x){return this._build===!1&&this.clear(),this.node.appendChild(i.createTextNode(x)),this},tspan:function(x){var k=(this.textPath&&this.textPath()||this).node,A=new n.Tspan;return this._build===!1&&this.clear(),k.appendChild(A.node),A.text(x)},clear:function(){for(var x=(this.textPath&&this.textPath()||this).node;x.hasChildNodes();)x.removeChild(x.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{morphArray:n.PathArray,array:function(){var x=this.track();return x?x.array():null},plot:function(x){var k=this.track(),A=null;return k&&(A=k.plot(x)),x==null?A:this},track:function(){var x=this.textPath();if(x)return x.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}});var p={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(x,k){return k=="color"?x:x+"-"+k}};["fill","stroke"].forEach(function(x){var k={};k[x]=function(A){if(typeof A>"u")return this;if(typeof A=="string"||n.Color.isRgb(A)||A&&typeof A.fill=="function")this.attr(x,A);else for(var L=p[x].length-1;L>=0;L--)A[p[x][L]]!=null&&this.attr(p.prefix(x,p[x][L]),A[p[x][L]]);return this},n.extend(n.Element,n.FX,k)}),n.extend(n.Element,n.FX,{translate:function(x,k){return this.transform({x,y:k})},matrix:function(x){return this.attr("transform",new n.Matrix(arguments.length==6?[].slice.call(arguments):x))},opacity:function(x){return this.attr("opacity",x)},dx:function(x){return this.x(new n.Number(x).plus(this instanceof n.FX?0:this.x()),!0)},dy:function(x){return this.y(new n.Number(x).plus(this instanceof n.FX?0:this.y()),!0)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(x){return this.node.getPointAtLength(x)}}),n.Set=n.invent({create:function(x){Array.isArray(x)?this.members=x:this.clear()},extend:{add:function(){for(var x,k=[].slice.call(arguments),A=0,x=k.length;A<x;A++)this.members.push(k[A]);return this},remove:function(x){var k=this.index(x);return k>-1&&this.members.splice(k,1),this},each:function(x){for(var k=0,A=this.members.length;k<A;k++)x.apply(this.members[k],[k,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(x){return this.index(x)>=0},index:function(x){return this.members.indexOf(x)},get:function(x){return this.members[x]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(x){return new n.Set(x)}}}),n.FX.Set=n.invent({create:function(x){this.set=x}}),n.Set.inherit=function(){var x=[];for(var k in n.Shape.prototype)typeof n.Shape.prototype[k]=="function"&&typeof n.Set.prototype[k]!="function"&&x.push(k);x.forEach(function(A){n.Set.prototype[A]=function(){for(var L=0,D=this.members.length;L<D;L++)this.members[L]&&typeof this.members[L][A]=="function"&&this.members[L][A].apply(this.members[L],arguments);return A=="animate"?this.fx||(this.fx=new n.FX.Set(this)):this}}),x=[];for(var k in n.FX.prototype)typeof n.FX.prototype[k]=="function"&&typeof n.FX.Set.prototype[k]!="function"&&x.push(k);x.forEach(function(A){n.FX.Set.prototype[A]=function(){for(var L=0,D=this.set.members.length;L<D;L++)this.set.members[L].fx[A].apply(this.set.members[L].fx,arguments);return this}})},n.extend(n.Element,{}),n.extend(n.Element,{remember:function(x,k){if(typeof arguments[0]=="object")for(var A in x)this.remember(A,x[A]);else{if(arguments.length==1)return this.memory()[x];this.memory()[x]=k}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var x=arguments.length-1;x>=0;x--)delete this.memory()[arguments[x]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(x){var k=i.getElementById($(x)||x);return n.adopt(k)},n.select=function(x,k){return new n.Set(n.utils.map((k||i).querySelectorAll(x),function(A){return n.adopt(A)}))},n.extend(n.Parent,{select:function(x){return n.select(x,this.node)}});function g(x,k,A,L){return A+L.replace(n.regex.dots," .")}function b(x,k){return x instanceof k}function O(x,k){return(x.matches||x.matchesSelector||x.msMatchesSelector||x.mozMatchesSelector||x.webkitMatchesSelector||x.oMatchesSelector).call(x,k)}function r(x){return x.toLowerCase().replace(/-(.)/g,function(k,A){return A.toUpperCase()})}function h(x){return x.charAt(0).toUpperCase()+x.slice(1)}function u(x){return x.length==4?["#",x.substring(1,2),x.substring(1,2),x.substring(2,3),x.substring(2,3),x.substring(3,4),x.substring(3,4)].join(""):x}function m(x){var k=x.toString(16);return k.length==1?"0"+k:k}function y(x,k,A){if(k==null||A==null){var L=x.bbox();k==null?k=L.width/L.height*A:A==null&&(A=L.height/L.width*k)}return{width:k,height:A}}function v(x,k,A){return{x:k*x.a+A*x.c+0,y:k*x.b+A*x.d+0}}function w(x){return{a:x[0],b:x[1],c:x[2],d:x[3],e:x[4],f:x[5]}}function S(x){return x instanceof n.Matrix||(x=new n.Matrix(x)),x}function C(x){for(var k=0,A=x.length,L="";k<A;k++)L+=x[k][0],x[k][1]!=null&&(L+=x[k][1],x[k][2]!=null&&(L+=" ",L+=x[k][2],x[k][3]!=null&&(L+=" ",L+=x[k][3],L+=" ",L+=x[k][4],x[k][5]!=null&&(L+=" ",L+=x[k][5],L+=" ",L+=x[k][6],x[k][7]!=null&&(L+=" ",L+=x[k][7])))));return L+" "}function T(x){for(var k=x.childNodes.length-1;k>=0;k--)x.childNodes[k]instanceof t.SVGElement&&T(x.childNodes[k]);return n.adopt(x).id(n.eid(x.nodeName))}function _(x){return x.x==null&&(x.x=0,x.y=0,x.width=0,x.height=0),x.w=x.width,x.h=x.height,x.x2=x.x+x.width,x.y2=x.y+x.height,x.cx=x.x+x.width/2,x.cy=x.y+x.height/2,x}function $(x){var k=(x||"").toString().match(n.regex.reference);if(k)return k[1]}function N(x){return Math.abs(x)>1e-37?x:0}var P="abcdef".split("");if(typeof t.CustomEvent!="function"){var E=function(x,k){k=k||{bubbles:!1,cancelable:!1,detail:void 0};var A=i.createEvent("CustomEvent");return A.initCustomEvent(x,k.bubbles,k.cancelable,k.detail),A};E.prototype=t.Event.prototype,n.CustomEvent=E}else n.CustomEvent=t.CustomEvent;return n})})(cL);/*! svg.filter.js - v2.0.2 - 2016-02-24
* https://github.com/wout/svg.filter.js
* Copyright (c) 2016 Wout Fierens; Licensed MIT */(function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(l,c){return this.add(l,c),!l.attr("in")&&this.autoSetIn&&l.attr("in",this.source),l.attr("result")||l.attr("result",l),l},blend:function(l,c,d){return this.put(new SVG.BlendEffect(l,c,d))},colorMatrix:function(l,c){return this.put(new SVG.ColorMatrixEffect(l,c))},convolveMatrix:function(l){return this.put(new SVG.ConvolveMatrixEffect(l))},componentTransfer:function(l){return this.put(new SVG.ComponentTransferEffect(l))},composite:function(l,c,d){return this.put(new SVG.CompositeEffect(l,c,d))},flood:function(l,c){return this.put(new SVG.FloodEffect(l,c))},offset:function(l,c){return this.put(new SVG.OffsetEffect(l,c))},image:function(l){return this.put(new SVG.ImageEffect(l))},merge:function(){var l=[void 0];for(var c in arguments)l.push(arguments[c]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,l)))},gaussianBlur:function(l,c){return this.put(new SVG.GaussianBlurEffect(l,c))},morphology:function(l,c){return this.put(new SVG.MorphologyEffect(l,c))},diffuseLighting:function(l,c,d){return this.put(new SVG.DiffuseLightingEffect(l,c,d))},displacementMap:function(l,c,d,p,g){return this.put(new SVG.DisplacementMapEffect(l,c,d,p,g))},specularLighting:function(l,c,d,p){return this.put(new SVG.SpecularLightingEffect(l,c,d,p))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(l,c,d,p,g){return this.put(new SVG.TurbulenceEffect(l,c,d,p,g))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(l){var c=this.put(new SVG.Filter);return typeof l=="function"&&l.call(c,c),c}}),SVG.extend(SVG.Container,{filter:function(l){return this.defs().filter(l)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(l){return this.filterer=l instanceof SVG.Element?l:this.doc().filter(l),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(l){return this.filterer&&l===!0&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(l){return l==null?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",l)},result:function(l){return l==null?this.attr("result"):this.attr("result",l)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(l){return l==null?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",l)},result:function(l){return l==null?this.attr("result"):this.attr("result",l)},toString:function(){return this.result()}}});var o={blend:function(l,c){return this.parent()&&this.parent().blend(this,l,c)},colorMatrix:function(l,c){return this.parent()&&this.parent().colorMatrix(l,c).in(this)},convolveMatrix:function(l){return this.parent()&&this.parent().convolveMatrix(l).in(this)},componentTransfer:function(l){return this.parent()&&this.parent().componentTransfer(l).in(this)},composite:function(l,c){return this.parent()&&this.parent().composite(this,l,c)},flood:function(l,c){return this.parent()&&this.parent().flood(l,c)},offset:function(l,c){return this.parent()&&this.parent().offset(l,c).in(this)},image:function(l){return this.parent()&&this.parent().image(l)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(l,c){return this.parent()&&this.parent().gaussianBlur(l,c).in(this)},morphology:function(l,c){return this.parent()&&this.parent().morphology(l,c).in(this)},diffuseLighting:function(l,c,d){return this.parent()&&this.parent().diffuseLighting(l,c,d).in(this)},displacementMap:function(l,c,d,p){return this.parent()&&this.parent().displacementMap(this,l,c,d,p)},specularLighting:function(l,c,d,p){return this.parent()&&this.parent().specularLighting(l,c,d,p).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(l,c,d,p,g){return this.parent()&&this.parent().turbulence(l,c,d,p,g).in(this)}};SVG.extend(SVG.Effect,o),SVG.extend(SVG.ParentEffect,o),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(l){this.attr("in",l)}}});var e={blend:function(l,c,d){this.attr({in:l,in2:c,mode:d||"normal"})},colorMatrix:function(l,c){l=="matrix"&&(c=s(c)),this.attr({type:l,values:typeof c>"u"?null:c})},convolveMatrix:function(l){l=s(l),this.attr({order:Math.sqrt(l.split(" ").length),kernelMatrix:l})},composite:function(l,c,d){this.attr({in:l,in2:c,operator:d})},flood:function(l,c){this.attr("flood-color",l),c!=null&&this.attr("flood-opacity",c)},offset:function(l,c){this.attr({dx:l,dy:c})},image:function(l){this.attr("href",l,SVG.xlink)},displacementMap:function(l,c,d,p,g){this.attr({in:l,in2:c,scale:d,xChannelSelector:p,yChannelSelector:g})},gaussianBlur:function(l,c){l!=null||c!=null?this.attr("stdDeviation",n(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(l,c){this.attr({operator:l,radius:c})},tile:function(){},turbulence:function(l,c,d,p,g){this.attr({numOctaves:c,seed:d,stitchTiles:p,baseFrequency:l,type:g})}},t={merge:function(){var l;if(arguments[0]instanceof SVG.Set){var c=this;arguments[0].each(function(p){this instanceof SVG.MergeNode?c.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&c.put(new SVG.MergeNode(this))})}else{Array.isArray(arguments[0])?l=arguments[0]:l=arguments;for(var d=0;d<l.length;d++)l[d]instanceof SVG.MergeNode?this.put(l[d]):this.put(new SVG.MergeNode(l[d]))}},componentTransfer:function(l){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach((function(d){this[d]=new SVG["Func"+d.toUpperCase()]("identity"),this.rgb.add(this[d]),this.node.appendChild(this[d].node)}).bind(this)),l){l.rgb&&(["r","g","b"].forEach((function(d){this[d].attr(l.rgb)}).bind(this)),delete l.rgb);for(var c in l)this[c].attr(l[c])}},diffuseLighting:function(l,c,d){this.attr({surfaceScale:l,diffuseConstant:c,kernelUnitLength:d})},specularLighting:function(l,c,d,p){this.attr({surfaceScale:l,diffuseConstant:c,specularExponent:d,kernelUnitLength:p})}},i={distantLight:function(l,c){this.attr({azimuth:l,elevation:c})},pointLight:function(l,c,d){this.attr({x:l,y:c,z:d})},spotLight:function(l,c,d,p,g,b){this.attr({x:l,y:c,z:d,pointsAtX:p,pointsAtY:g,pointsAtZ:b})},mergeNode:function(l){this.attr("in",l)}};["r","g","b","a"].forEach(function(l){i["Func"+l.toUpperCase()]=function(c){switch(this.attr("type",c),c){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2]);break}}}),a(e,function(l,c){var d=c.charAt(0).toUpperCase()+c.slice(1),p={};SVG[d+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+d)),l.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:p})}),a(t,function(l,c){var d=c.charAt(0).toUpperCase()+c.slice(1),p={};SVG[d+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+d)),l.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:p})}),a(i,function(l,c){var d=c.charAt(0).toUpperCase()+c.slice(1),p={};SVG[d]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+d)),l.apply(this,arguments)},inherit:SVG.ChildEffect,extend:p})}),SVG.extend(SVG.MergeEffect,{in:function(l){return l instanceof SVG.MergeNode?this.add(l,0):this.add(new SVG.MergeNode(l),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(l){return l==null?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",l)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]};function s(l){return Array.isArray(l)&&(l=new SVG.Array(l)),l.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function n(l){if(!Array.isArray(l))return l;for(var c=0,d=l.length,p=[];c<d;c++)p.push(l[c]);return p.join(" ")}function a(){var l=function(){};typeof arguments[arguments.length-1]=="function"&&(l=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1));for(var c in arguments)for(var d in arguments[c])l(arguments[c][d],d,arguments[c])}}).call(globalThis),function(){SVG.extend(SVG.PathArray,{morph:function(a){for(var l=this.value,c=this.parse(a),d=0,p=0,g=!1,b=!1;!(d===!1&&p===!1);){if(g=s(l,d===!1?!1:d+1),b=s(c,p===!1?!1:p+1),d===!1){var O=new SVG.PathArray(r.start).bbox();O.height==0||O.width==0?d=l.push(l[0])-1:d=l.push(["M",O.x+O.width/2,O.y+O.height/2])-1}if(p===!1){var O=new SVG.PathArray(r.dest).bbox();O.height==0||O.width==0?p=c.push(c[0])-1:p=c.push(["M",O.x+O.width/2,O.y+O.height/2])-1}var r=o(l,d,g,c,p,b);l=l.slice(0,d).concat(r.start,g===!1?[]:l.slice(g)),c=c.slice(0,p).concat(r.dest,b===!1?[]:c.slice(b)),d=g===!1?!1:d+r.start.length,p=b===!1?!1:p+r.dest.length}return this.value=l,this.destination=new SVG.PathArray,this.destination.value=c,this}});function o(a,l,c,d,p,g,b){var O=a.slice(l,c||b),r=d.slice(p,g||b),h=0,u={pos:[0,0],start:[0,0]},m={pos:[0,0],start:[0,0]};do{if(O[h]=e.call(u,O[h]),r[h]=e.call(m,r[h]),O[h][0]!=r[h][0]||O[h][0]=="M"||O[h][0]=="A"&&(O[h][4]!=r[h][4]||O[h][5]!=r[h][5])?(Array.prototype.splice.apply(O,[h,1].concat(i.call(u,O[h]))),Array.prototype.splice.apply(r,[h,1].concat(i.call(m,r[h])))):(O[h]=t.call(u,O[h]),r[h]=t.call(m,r[h])),++h==O.length&&h==r.length)break;h==O.length&&O.push(["C",u.pos[0],u.pos[1],u.pos[0],u.pos[1],u.pos[0],u.pos[1]]),h==r.length&&r.push(["C",m.pos[0],m.pos[1],m.pos[0],m.pos[1],m.pos[0],m.pos[1]])}while(!0);return{start:O,dest:r}}function e(a){switch(a[0]){case"z":case"Z":a[0]="L",a[1]=this.start[0],a[2]=this.start[1];break;case"H":a[0]="L",a[2]=this.pos[1];break;case"V":a[0]="L",a[2]=a[1],a[1]=this.pos[0];break;case"T":a[0]="Q",a[3]=a[1],a[4]=a[2],a[1]=this.reflection[1],a[2]=this.reflection[0];break;case"S":a[0]="C",a[6]=a[4],a[5]=a[3],a[4]=a[2],a[3]=a[1],a[2]=this.reflection[1],a[1]=this.reflection[0];break}return a}function t(a){var l=a.length;return this.pos=[a[l-2],a[l-1]],"SCQT".indexOf(a[0])!=-1&&(this.reflection=[2*this.pos[0]-a[l-4],2*this.pos[1]-a[l-3]]),a}function i(a){var l=[a];switch(a[0]){case"M":return this.pos=this.start=[a[1],a[2]],l;case"L":a[5]=a[3]=a[1],a[6]=a[4]=a[2],a[1]=this.pos[0],a[2]=this.pos[1];break;case"Q":a[6]=a[4],a[5]=a[3],a[4]=a[4]*1/3+a[2]*2/3,a[3]=a[3]*1/3+a[1]*2/3,a[2]=this.pos[1]*1/3+a[2]*2/3,a[1]=this.pos[0]*1/3+a[1]*2/3;break;case"A":l=n(this.pos,a),a=l[0];break}return a[0]="C",this.pos=[a[5],a[6]],this.reflection=[2*a[5]-a[3],2*a[6]-a[4]],l}function s(a,l){if(l===!1)return!1;for(var c=l,d=a.length;c<d;++c)if(a[c][0]=="M")return c;return!1}function n(a,l){var c=Math.abs(l[1]),d=Math.abs(l[2]),p=l[3]%360,g=l[4],b=l[5],O=l[6],r=l[7],h=new SVG.Point(a),u=new SVG.Point(O,r),m,y,v,w,S,C,T,_,$,N,P,E,x,k,A,L,D,M,Q,B,X,te,he=[],j,se,me,Oe;if(c===0||d===0||h.x===u.x&&h.y===u.y)return[["C",h.x,h.y,u.x,u.y,u.x,u.y]];for(m=new SVG.Point((h.x-u.x)/2,(h.y-u.y)/2).transform(new SVG.Matrix().rotate(p)),y=m.x*m.x/(c*c)+m.y*m.y/(d*d),y>1&&(y=Math.sqrt(y),c=y*c,d=y*d),v=new SVG.Matrix().rotate(p).scale(1/c,1/d).rotate(-p),h=h.transform(v),u=u.transform(v),w=[u.x-h.x,u.y-h.y],C=w[0]*w[0]+w[1]*w[1],S=Math.sqrt(C),w[0]/=S,w[1]/=S,T=C<4?Math.sqrt(1-C/4):0,g===b&&(T*=-1),_=new SVG.Point((u.x+h.x)/2+T*-w[1],(u.y+h.y)/2+T*w[0]),$=new SVG.Point(h.x-_.x,h.y-_.y),N=new SVG.Point(u.x-_.x,u.y-_.y),P=Math.acos($.x/Math.sqrt($.x*$.x+$.y*$.y)),$.y<0&&(P*=-1),E=Math.acos(N.x/Math.sqrt(N.x*N.x+N.y*N.y)),N.y<0&&(E*=-1),b&&P>E&&(E+=2*Math.PI),!b&&P<E&&(E-=2*Math.PI),k=Math.ceil(Math.abs(P-E)*2/Math.PI),L=[],D=P,x=(E-P)/k,A=4*Math.tan(x/4)/3,X=0;X<=k;X++)Q=Math.cos(D),M=Math.sin(D),B=new SVG.Point(_.x+Q,_.y+M),L[X]=[new SVG.Point(B.x+A*M,B.y-A*Q),B,new SVG.Point(B.x-A*M,B.y+A*Q)],D+=x;for(L[0][0]=L[0][1].clone(),L[L.length-1][2]=L[L.length-1][1].clone(),v=new SVG.Matrix().rotate(p).scale(c,d).rotate(-p),X=0,te=L.length;X<te;X++)L[X][0]=L[X][0].transform(v),L[X][1]=L[X][1].transform(v),L[X][2]=L[X][2].transform(v);for(X=1,te=L.length;X<te;X++)B=L[X-1][2],j=B.x,se=B.y,B=L[X][0],me=B.x,Oe=B.y,B=L[X][1],O=B.x,r=B.y,he.push(["C",j,se,me,Oe,O,r]);return he}}();/*! svg.draggable.js - v2.2.2 - 2019-01-08
* https://github.com/svgdotjs/svg.draggable.js
* Copyright (c) 2019 Wout Fierens; Licensed MIT */(function(){function o(e){e.remember("_draggable",this),this.el=e}o.prototype.init=function(e,t){var i=this;this.constraint=e,this.value=t,this.el.on("mousedown.drag",function(s){i.start(s)}),this.el.on("touchstart.drag",function(s){i.start(s)})},o.prototype.transformPoint=function(e,t){e=e||window.event;var i=e.changedTouches&&e.changedTouches[0]||e;return this.p.x=i.clientX-(t||0),this.p.y=i.clientY,this.p.matrixTransform(this.m)},o.prototype.getBBox=function(){var e=this.el.bbox();return this.el instanceof SVG.Nested&&(e=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(e.x=this.el.x(),e.y=this.el.y()),e},o.prototype.start=function(e){if(!((e.type=="click"||e.type=="mousedown"||e.type=="mousemove")&&(e.which||e.buttons)!=1)){var t=this;if(this.el.fire("beforedrag",{event:e,handler:this}),!this.el.event().defaultPrevented){e.preventDefault(),e.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var i=this.getBBox(),s;if(this.el instanceof SVG.Text)switch(s=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":s/=2;break;case"start":s=0;break}this.startPoints={point:this.transformPoint(e,s),box:i,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(n){t.drag(n)}),SVG.on(window,"touchmove.drag",function(n){t.drag(n)}),SVG.on(window,"mouseup.drag",function(n){t.end(n)}),SVG.on(window,"touchend.drag",function(n){t.end(n)}),this.el.fire("dragstart",{event:e,p:this.startPoints.point,m:this.m,handler:this})}}},o.prototype.drag=function(e){var t=this.getBBox(),i=this.transformPoint(e),s=this.startPoints.box.x+i.x-this.startPoints.point.x,n=this.startPoints.box.y+i.y-this.startPoints.point.y,a=this.constraint,l=i.x-this.startPoints.point.x,c=i.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:e,p:i,m:this.m,handler:this}),this.el.event().defaultPrevented)return i;if(typeof a=="function"){var d=a.call(this.el,s,n,this.m);typeof d=="boolean"&&(d={x:d,y:d}),d.x===!0?this.el.x(s):d.x!==!1&&this.el.x(d.x),d.y===!0?this.el.y(n):d.y!==!1&&this.el.y(d.y)}else typeof a=="object"&&(a.minX!=null&&s<a.minX?(s=a.minX,l=s-this.startPoints.box.x):a.maxX!=null&&s>a.maxX-t.width&&(s=a.maxX-t.width,l=s-this.startPoints.box.x),a.minY!=null&&n<a.minY?(n=a.minY,c=n-this.startPoints.box.y):a.maxY!=null&&n>a.maxY-t.height&&(n=a.maxY-t.height,c=n-this.startPoints.box.y),a.snapToGrid!=null&&(s=s-s%a.snapToGrid,n=n-n%a.snapToGrid,l=l-l%a.snapToGrid,c=c-c%a.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:l,y:c},!0):this.el.move(s,n));return i},o.prototype.end=function(e){var t=this.drag(e);this.el.fire("dragend",{event:e,p:t,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(e,t){(typeof e=="function"||typeof e=="object")&&(t=e,e=!0);var i=this.remember("_draggable")||new o(this);return e=typeof e>"u"?!0:e,e?i.init(t||{},e):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}).call(globalThis),function(){function o(e){this.el=e,e.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(t,i,s){var n=typeof t!="string"?t:i[t];return s?n/2:n},this.pointCoords=function(t,i){var s=this.pointsList[t];return{x:this.pointCoord(s[0],i,t==="t"||t==="b"),y:this.pointCoord(s[1],i,t==="r"||t==="l")}}}o.prototype.init=function(e,t){var i=this.el.bbox();this.options={};var s=this.el.selectize.defaults.points;for(var n in this.el.selectize.defaults)this.options[n]=this.el.selectize.defaults[n],t[n]!==void 0&&(this.options[n]=t[n]);var a=["points","pointsExclude"];for(var n in a){var l=this.options[a[n]];typeof l=="string"?l.length>0?l=l.split(/\s*,\s*/i):l=[]:typeof l=="boolean"&&a[n]==="points"&&(l=l?s:[]),this.options[a[n]]=l}this.options.points=[s,this.options.points].reduce(function(c,d){return c.filter(function(p){return d.indexOf(p)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(c,d){return c.filter(function(p){return d.indexOf(p)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(i.x,i.y)),this.options.deepSelect&&["line","polyline","polygon"].indexOf(this.el.type)!==-1?this.selectPoints(e):this.selectRect(e),this.observe(),this.cleanup()},o.prototype.selectPoints=function(e){return this.pointSelection.isSelected=e,this.pointSelection.set?this:(this.pointSelection.set=this.parent.set(),this.drawPoints(),this)},o.prototype.getPointArray=function(){var e=this.el.bbox();return this.el.array().valueOf().map(function(t){return[t[0]-e.x,t[1]-e.y]})},o.prototype.drawPoints=function(){for(var e=this,t=this.getPointArray(),i=0,s=t.length;i<s;++i){var n=function(l){return function(c){c=c||window.event,c.preventDefault?c.preventDefault():c.returnValue=!1,c.stopPropagation();var d=c.pageX||c.touches[0].pageX,p=c.pageY||c.touches[0].pageY;e.el.fire("point",{x:d,y:p,i:l,event:c})}}(i),a=this.drawPoint(t[i][0],t[i][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",n).on("mousedown",n);this.pointSelection.set.add(a)}},o.prototype.drawPoint=function(e,t){var i=this.options.pointType;switch(i){case"circle":return this.drawCircle(e,t);case"rect":return this.drawRect(e,t);default:if(typeof i=="function")return i.call(this,e,t);throw new Error("Unknown "+i+" point type!")}},o.prototype.drawCircle=function(e,t){return this.nested.circle(this.options.pointSize).center(e,t)},o.prototype.drawRect=function(e,t){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(e,t)},o.prototype.updatePointSelection=function(){var e=this.getPointArray();this.pointSelection.set.each(function(t){this.cx()===e[t][0]&&this.cy()===e[t][1]||this.center(e[t][0],e[t][1])})},o.prototype.updateRectSelection=function(){var e=this,t=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:t.width,height:t.height}),this.options.points.length&&this.options.points.map(function(s,n){var a=e.pointCoords(s,t);e.rectSelection.set.get(n+1).center(a.x,a.y)}),this.options.rotationPoint){var i=this.rectSelection.set.length();this.rectSelection.set.get(i-1).center(t.width/2,20)}},o.prototype.selectRect=function(e){var t=this,i=this.el.bbox();this.rectSelection.isSelected=e,this.rectSelection.set=this.rectSelection.set||this.parent.set();function s(d){return function(p){p=p||window.event,p.preventDefault?p.preventDefault():p.returnValue=!1,p.stopPropagation();var g=p.pageX||p.touches[0].pageX,b=p.pageY||p.touches[0].pageY;t.el.fire(d,{x:g,y:b,event:p})}}if(this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(i.width,i.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2){var n="touchstart",a="mousedown";this.options.points.map(function(d,p){var g=t.pointCoords(d,i),b=t.drawPoint(g.x,g.y).attr("class",t.options.classPoints+"_"+d).on(a,s(d)).on(n,s(d));t.rectSelection.set.add(b)}),this.rectSelection.set.each(function(){this.addClass(t.options.classPoints)})}if(this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var l=function(d){d=d||window.event,d.preventDefault?d.preventDefault():d.returnValue=!1,d.stopPropagation();var p=d.pageX||d.touches[0].pageX,g=d.pageY||d.touches[0].pageY;t.el.fire("rot",{x:p,y:g,event:d})},c=this.drawPoint(i.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",l).on("mousedown",l);this.rectSelection.set.add(c)}},o.prototype.handler=function(){var e=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(e.x,e.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},o.prototype.observe=function(){var e=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){e.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){e.handler()})},o.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),!this.pointSelection.isSelected&&!this.rectSelection.isSelected&&(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(e,t){typeof e=="object"&&(t=e,e=!0);var i=this.remember("_selectHandler")||new o(this);return i.init(e===void 0?!0:e,t||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function o(e){e.remember("_resizeHandler",this),this.el=e,this.parameters={},this.lastUpdateCall=null,this.p=e.doc().node.createSVGPoint()}o.prototype.transformPoint=function(e,t,i){return this.p.x=e-(this.offset.x-window.pageXOffset),this.p.y=t-(this.offset.y-window.pageYOffset),this.p.matrixTransform(i||this.m)},o.prototype._extractPosition=function(e){return{x:e.clientX!=null?e.clientX:e.touches[0].clientX,y:e.clientY!=null?e.clientY:e.touches[0].clientY}},o.prototype.init=function(e){var t=this;if(this.stop(),e!=="stop"){this.options={};for(var i in this.el.resize.defaults)this.options[i]=this.el.resize.defaults[i],typeof e[i]<"u"&&(this.options[i]=e[i]);this.el.on("lt.resize",function(s){t.resize(s||window.event)}),this.el.on("rt.resize",function(s){t.resize(s||window.event)}),this.el.on("rb.resize",function(s){t.resize(s||window.event)}),this.el.on("lb.resize",function(s){t.resize(s||window.event)}),this.el.on("t.resize",function(s){t.resize(s||window.event)}),this.el.on("r.resize",function(s){t.resize(s||window.event)}),this.el.on("b.resize",function(s){t.resize(s||window.event)}),this.el.on("l.resize",function(s){t.resize(s||window.event)}),this.el.on("rot.resize",function(s){t.resize(s||window.event)}),this.el.on("point.resize",function(s){t.resize(s||window.event)}),this.update()}},o.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},o.prototype.resize=function(e){var t=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var i=this._extractPosition(e.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(i.x,i.y),x:e.detail.x,y:e.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},this.el.type==="text"&&(this.parameters.fontSize=this.el.attr()["font-size"]),e.detail.i!==void 0){var s=this.el.array().valueOf();this.parameters.i=e.detail.i,this.parameters.pointCoords=[s[e.detail.i][0],s[e.detail.i][1]]}switch(e.type){case"lt":this.calc=function(n,a){var l=this.snapToGrid(n,a);if(this.parameters.box.width-l[0]>0&&this.parameters.box.height-l[1]>0){if(this.parameters.type==="text"){this.el.move(this.parameters.box.x+l[0],this.parameters.box.y),this.el.attr("font-size",this.parameters.fontSize-l[0]);return}l=this.checkAspectRatio(l),this.el.move(this.parameters.box.x+l[0],this.parameters.box.y+l[1]).size(this.parameters.box.width-l[0],this.parameters.box.height-l[1])}};break;case"rt":this.calc=function(n,a){var l=this.snapToGrid(n,a,2);if(this.parameters.box.width+l[0]>0&&this.parameters.box.height-l[1]>0){if(this.parameters.type==="text"){this.el.move(this.parameters.box.x-l[0],this.parameters.box.y),this.el.attr("font-size",this.parameters.fontSize+l[0]);return}l=this.checkAspectRatio(l,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+l[1]).size(this.parameters.box.width+l[0],this.parameters.box.height-l[1])}};break;case"rb":this.calc=function(n,a){var l=this.snapToGrid(n,a,0);if(this.parameters.box.width+l[0]>0&&this.parameters.box.height+l[1]>0){if(this.parameters.type==="text"){this.el.move(this.parameters.box.x-l[0],this.parameters.box.y),this.el.attr("font-size",this.parameters.fontSize+l[0]);return}l=this.checkAspectRatio(l),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+l[0],this.parameters.box.height+l[1])}};break;case"lb":this.calc=function(n,a){var l=this.snapToGrid(n,a,1);if(this.parameters.box.width-l[0]>0&&this.parameters.box.height+l[1]>0){if(this.parameters.type==="text"){this.el.move(this.parameters.box.x+l[0],this.parameters.box.y),this.el.attr("font-size",this.parameters.fontSize-l[0]);return}l=this.checkAspectRatio(l,!0),this.el.move(this.parameters.box.x+l[0],this.parameters.box.y).size(this.parameters.box.width-l[0],this.parameters.box.height+l[1])}};break;case"t":this.calc=function(n,a){var l=this.snapToGrid(n,a,2);if(this.parameters.box.height-l[1]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y+l[1]).height(this.parameters.box.height-l[1])}};break;case"r":this.calc=function(n,a){var l=this.snapToGrid(n,a,0);if(this.parameters.box.width+l[0]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+l[0])}};break;case"b":this.calc=function(n,a){var l=this.snapToGrid(n,a,0);if(this.parameters.box.height+l[1]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+l[1])}};break;case"l":this.calc=function(n,a){var l=this.snapToGrid(n,a,1);if(this.parameters.box.width-l[0]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x+l[0],this.parameters.box.y).width(this.parameters.box.width-l[0])}};break;case"rot":this.calc=function(n,a){var l={x:n+this.parameters.p.x,y:a+this.parameters.p.y},c=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),d=Math.atan2(l.y-this.parameters.box.y-this.parameters.box.height/2,l.x-this.parameters.box.x-this.parameters.box.width/2),p=this.parameters.rotation+(d-c)*180/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(p-p%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(n,a){var l=this.snapToGrid(n,a,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),c=this.el.array().valueOf();c[this.parameters.i][0]=this.parameters.pointCoords[0]+l[0],c[this.parameters.i][1]=this.parameters.pointCoords[1]+l[1],this.el.plot(c)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:e}),SVG.on(window,"touchmove.resize",function(n){t.update(n||window.event)}),SVG.on(window,"touchend.resize",function(){t.done()}),SVG.on(window,"mousemove.resize",function(n){t.update(n||window.event)}),SVG.on(window,"mouseup.resize",function(){t.done()})},o.prototype.update=function(e){if(!e){this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1]);return}var t=this._extractPosition(e),i=this.transformPoint(t.x,t.y),s=i.x-this.parameters.p.x,n=i.y-this.parameters.p.y;this.lastUpdateCall=[s,n],this.calc(s,n),this.el.fire("resizing",{dx:s,dy:n,event:e})},o.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},o.prototype.snapToGrid=function(e,t,i,s){var n;return typeof s<"u"?n=[(i+e)%this.options.snapToGrid,(s+t)%this.options.snapToGrid]:(i=i??3,n=[(this.parameters.box.x+e+(i&1?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+t+(i&2?0:this.parameters.box.height))%this.options.snapToGrid]),e<0&&(n[0]-=this.options.snapToGrid),t<0&&(n[1]-=this.options.snapToGrid),e-=Math.abs(n[0])<this.options.snapToGrid/2?n[0]:n[0]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),t-=Math.abs(n[1])<this.options.snapToGrid/2?n[1]:n[1]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(e,t,i,s)},o.prototype.constraintToBox=function(e,t,i,s){var n=this.options.constraint||{},a,l;return typeof s<"u"?(a=i,l=s):(a=this.parameters.box.x+(i&1?0:this.parameters.box.width),l=this.parameters.box.y+(i&2?0:this.parameters.box.height)),typeof n.minX<"u"&&a+e<n.minX&&(e=n.minX-a),typeof n.maxX<"u"&&a+e>n.maxX&&(e=n.maxX-a),typeof n.minY<"u"&&l+t<n.minY&&(t=n.minY-l),typeof n.maxY<"u"&&l+t>n.maxY&&(t=n.maxY-l),[e,t]},o.prototype.checkAspectRatio=function(e,t){if(!this.options.saveAspectRatio)return e;var i=e.slice(),s=this.parameters.box.width/this.parameters.box.height,n=this.parameters.box.width+e[0],a=this.parameters.box.height-e[1],l=n/a;return l<s?(i[1]=n/s-this.parameters.box.height,t&&(i[1]=-i[1])):l>s&&(i[0]=this.parameters.box.width-a*s,t&&(i[0]=-i[0])),i},SVG.extend(SVG.Element,{resize:function(e){return(this.remember("_resizeHandler")||new o(this)).init(e||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),typeof window.Apex>"u"&&(window.Apex={});class Dg{constructor(e){this.ctx=e,this.w=e.w}initModules(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new dn(this.ctx),this.ctx.axes=new AP(this.ctx),this.ctx.core=new aL(this.ctx.el,this.ctx),this.ctx.config=new vr({}),this.ctx.data=new xg(this.ctx),this.ctx.grid=new vg(this.ctx),this.ctx.graphics=new Y(this.ctx),this.ctx.coreUtils=new Je(this.ctx),this.ctx.crosshairs=new Tc(this.ctx),this.ctx.events=new _P(this.ctx),this.ctx.exports=new Yo(this.ctx),this.ctx.localization=new TP(this.ctx),this.ctx.options=new Es,this.ctx.responsive=new EP(this.ctx),this.ctx.series=new zt(this.ctx),this.ctx.theme=new $P(this.ctx),this.ctx.formatters=new Or(this.ctx),this.ctx.titleSubtitle=new PP(this.ctx),this.ctx.legend=new kg(this.ctx),this.ctx.toolbar=new Sg(this.ctx),this.ctx.tooltip=new Tg(this.ctx),this.ctx.dimensions=new Ho(this.ctx),this.ctx.updateHelpers=new lL(this.ctx),this.ctx.zoomPanSelection=new XP(this.ctx),this.ctx.w.globals.tooltip=new Tg(this.ctx)}}class Mg{constructor(e){this.ctx=e,this.w=e.w}clear({isUpdating:e}){this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:e})}killSVG(e){e.each(function(t,i){this.removeClass("*"),this.off(),this.stop()},!0),e.ungroup(),e.clear()}clearDomElements({isUpdating:e}){const t=this.w.globals.dom.Paper.node;t.parentNode&&t.parentNode.parentNode&&!e&&(t.parentNode.parentNode.style.minHeight="unset");const i=this.w.globals.dom.baseEl;i&&this.ctx.eventList.forEach(n=>{i.removeEventListener(n,this.ctx.events.documentEvent)});const s=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(s.Paper),s.Paper.remove(),s.elWrap=null,s.elGraphical=null,s.elLegendWrap=null,s.elLegendForeign=null,s.baseEl=null,s.elGridRect=null,s.elGridRectMask=null,s.elGridRectMarkerMask=null,s.elForecastMask=null,s.elNonForecastMask=null,s.elDefs=null}}let Nc=new WeakMap;function hL(o,e){let t=!1;if(o.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){const s=o.getBoundingClientRect();(o.style.display==="none"||s.width===0)&&(t=!0)}let i=new ResizeObserver(s=>{t&&e.call(o,s),t=!0});o.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(o.children).forEach(s=>i.observe(s)):i.observe(o),Nc.set(e,i)}function dL(o,e){let t=Nc.get(e);t&&(t.disconnect(),Nc.delete(e))}const uL="";let fL=class G0{constructor(e,t){this.opts=t,this.ctx=this,this.w=new CP(t).init(),this.el=e,this.w.globals.cuid=R.randomId(),this.w.globals.chartID=this.w.config.chart.id?R.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Dg(this).initModules(),this.create=R.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}render(){return new Promise((e,t)=>{var i;if(this.el!==null){typeof Apex._chartInstances>"u"&&(Apex._chartInstances=[]),this.w.config.chart.id&&Apex._chartInstances.push({id:this.w.globals.chartID,group:this.w.config.chart.group,chart:this}),this.setLocale(this.w.config.chart.defaultLocale);const s=this.w.config.chart.events.beforeMount;typeof s=="function"&&s(this,this.w),this.events.fireEvent("beforeMount",[this,this.w]),window.addEventListener("resize",this.windowResizeHandler),hL(this.el.parentNode,this.parentResizeHandler);let n=this.el.getRootNode&&this.el.getRootNode(),a=R.is("ShadowRoot",n),l=this.el.ownerDocument,c=a?n.getElementById("apexcharts-css"):l.getElementById("apexcharts-css");if(!c){c=document.createElement("style"),c.id="apexcharts-css",c.textContent=uL;const p=((i=this.opts.chart)==null?void 0:i.nonce)||this.w.config.chart.nonce;p&&c.setAttribute("nonce",p),a?n.prepend(c):l.head.appendChild(c)}let d=this.create(this.w.config.series,{});if(!d)return e(this);this.mount(d).then(()=>{typeof this.w.config.chart.events.mounted=="function"&&this.w.config.chart.events.mounted(this,this.w),this.events.fireEvent("mounted",[this,this.w]),e(d)}).catch(p=>{t(p)})}else t(new Error("Element not found"))})}create(e,t){let i=this.w;new Dg(this).initModules();let n=this.w.globals;if(n.noData=!1,n.animationEnded=!1,this.responsive.checkResponsiveConfig(t),i.config.xaxis.convertedCatToNumeric&&new xr(i.config).convertCatToNumericXaxis(i.config,this.ctx),this.el===null||(this.core.setupElements(),i.config.chart.type==="treemap"&&(i.config.grid.show=!1,i.config.yaxis[0].show=!1),n.svgWidth===0))return n.animationEnded=!0,null;const a=Je.checkComboSeries(e,i.config.chart.type);n.comboCharts=a.comboCharts,n.comboBarCount=a.comboBarCount;const l=e.every(r=>r.data&&r.data.length===0);(e.length===0||l)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(e),this.theme.init(),new wr(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),(!n.noData||n.collapsedSeries.length===n.series.length||i.config.legend.showForSingleSeries)&&this.legend.init(),this.series.hasAllSeriesEqualX(),n.axisCharts&&(this.core.coreCalculations(),i.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=i.globals.minX,this.ctx.toolbar.maxX=i.globals.maxX),this.formatters.heatmapLabelFormatters(),new Je(this).getLargestMarkerSize(),this.dimensions.plotCoords();const p=this.core.xySettings();this.grid.createGridMask();const g=this.core.plotChartType(e,p),b=new un(this);b.bringForward(),i.config.dataLabels.background.enabled&&b.dataLabelsBackground(),this.core.shiftGraphPosition();const O={plot:{left:i.globals.translateX,top:i.globals.translateY,width:i.globals.gridWidth,height:i.globals.gridHeight}};return{elGraph:g,xyRatios:p,dimensions:O}}mount(e=null){let t=this,i=t.w;return new Promise((s,n)=>{var d,p;if(t.el===null)return n(new Error("Not enough data to display or target element not found"));(e===null||i.globals.allSeriesCollapsed)&&t.series.handleNoData(),t.grid=new vg(t);let a=t.grid.drawGrid();if(t.annotations=new SP(t),t.annotations.drawImageAnnos(),t.annotations.drawTextAnnos(),i.config.grid.position==="back"&&(a&&i.globals.dom.elGraphical.add(a.el),(d=a==null?void 0:a.elGridBorders)!=null&&d.node&&i.globals.dom.elGraphical.add(a.elGridBorders)),Array.isArray(e.elGraph))for(let g=0;g<e.elGraph.length;g++)i.globals.dom.elGraphical.add(e.elGraph[g]);else i.globals.dom.elGraphical.add(e.elGraph);i.config.grid.position==="front"&&(a&&i.globals.dom.elGraphical.add(a.el),(p=a==null?void 0:a.elGridBorders)!=null&&p.node&&i.globals.dom.elGraphical.add(a.elGridBorders)),i.config.xaxis.crosshairs.position==="front"&&t.crosshairs.drawXCrosshairs(),i.config.yaxis[0].crosshairs.position==="front"&&t.crosshairs.drawYCrosshairs(),i.config.chart.type!=="treemap"&&t.axes.drawAxis(i.config.chart.type,a);let l=new kr(this.ctx,a),c=new _c(this.ctx,a);if(a!==null&&(l.xAxisLabelCorrections(a.xAxisTickWidth),c.setYAxisTextAlignments(),i.config.yaxis.map((g,b)=>{i.globals.ignoreYAxisIndexes.indexOf(b)===-1&&c.yAxisTitleRotate(b,g.opposite)})),t.annotations.drawAxesAnnotations(),!i.globals.noData){if(i.config.tooltip.enabled&&!i.globals.noData&&t.w.globals.tooltip.drawTooltip(e.xyRatios),i.globals.axisCharts&&(i.globals.isXNumeric||i.config.xaxis.convertedCatToNumeric||i.globals.isRangeBar))(i.config.chart.zoom.enabled||i.config.chart.selection&&i.config.chart.selection.enabled||i.config.chart.pan&&i.config.chart.pan.enabled)&&t.zoomPanSelection.init({xyRatios:e.xyRatios});else{const g=i.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(O=>{g[O]=!1})}i.config.chart.toolbar.show&&!i.globals.allSeriesCollapsed&&t.toolbar.createToolbar()}i.globals.memory.methodsToExec.length>0&&i.globals.memory.methodsToExec.forEach(g=>{g.method(g.params,!1,g.context)}),!i.globals.axisCharts&&!i.globals.noData&&t.core.resizeNonAxisCharts(),s(t)})}destroy(){window.removeEventListener("resize",this.windowResizeHandler),dL(this.el.parentNode,this.parentResizeHandler);const e=this.w.config.chart.id;e&&Apex._chartInstances.forEach((t,i)=>{t.id===R.escapeString(e)&&Apex._chartInstances.splice(i,1)}),new Mg(this.ctx).clear({isUpdating:!1})}updateOptions(e,t=!1,i=!0,s=!0,n=!0){const a=this.w;return a.globals.selection=void 0,e.series&&(this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map((l,c)=>this.updateHelpers._extendSeries(l,c))),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),a.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,t,i,s,n)}updateSeries(e=[],t=!0,i=!0){return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,i)}appendSeries(e,t=!0,i=!0){const s=this.w.config.series.slice();return s.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(s,t,i)}appendData(e,t=!0){let i=this;i.w.globals.dataChanged=!0,i.series.getPreviousPaths();let s=i.w.config.series.slice();for(let n=0;n<s.length;n++)if(e[n]!==null&&typeof e[n]<"u")for(let a=0;a<e[n].data.length;a++)s[n].data.push(e[n].data[a]);return i.w.config.series=s,t&&(i.w.globals.initialSeries=R.clone(i.w.config.series)),this.update()}update(e){return new Promise((t,i)=>{new Mg(this.ctx).clear({isUpdating:!0});const s=this.create(this.w.config.series,e);if(!s)return t(this);this.mount(s).then(()=>{typeof this.w.config.chart.events.updated=="function"&&this.w.config.chart.events.updated(this,this.w),this.events.fireEvent("updated",[this,this.w]),this.w.globals.isDirty=!0,t(this)}).catch(n=>{i(n)})})}getSyncedCharts(){const e=this.getGroupedCharts();let t=[this];return e.length&&(t=[],e.forEach(i=>{t.push(i)})),t}getGroupedCharts(){return Apex._chartInstances.filter(e=>{if(e.group)return!0}).map(e=>this.w.config.chart.group===e.group?e.chart:this)}static getChartByID(e){const t=R.escapeString(e);if(!Apex._chartInstances)return;const i=Apex._chartInstances.filter(s=>s.id===t)[0];return i&&i.chart}static initOnLoad(){const e=document.querySelectorAll("[data-apexcharts]");for(let t=0;t<e.length;t++){const i=e[t],s=JSON.parse(e[t].getAttribute("data-options"));new G0(i,s).render()}}static exec(e,t,...i){const s=this.getChartByID(e);if(!s)return;s.w.globals.isExecCalled=!0;let n=null;return s.publicMethods.indexOf(t)!==-1&&(n=s[t](...i)),n}static merge(e,t){return R.extend(e,t)}toggleSeries(e){return this.series.toggleSeries(e)}highlightSeriesOnLegendHover(e,t){return this.series.toggleSeriesOnHover(e,t)}showSeries(e){this.series.showSeries(e)}hideSeries(e){this.series.hideSeries(e)}isSeriesHidden(e){this.series.isSeriesHidden(e)}resetSeries(e=!0,t=!0){this.series.resetSeries(e,t)}addEventListener(e,t){this.events.addEventListener(e,t)}removeEventListener(e,t){this.events.removeEventListener(e,t)}addXaxisAnnotation(e,t=!0,i=void 0){let s=this;i&&(s=i),s.annotations.addXaxisAnnotationExternal(e,t,s)}addYaxisAnnotation(e,t=!0,i=void 0){let s=this;i&&(s=i),s.annotations.addYaxisAnnotationExternal(e,t,s)}addPointAnnotation(e,t=!0,i=void 0){let s=this;i&&(s=i),s.annotations.addPointAnnotationExternal(e,t,s)}clearAnnotations(e=void 0){let t=this;e&&(t=e),t.annotations.clearAnnotations(t)}removeAnnotation(e,t=void 0){let i=this;t&&(i=t),i.annotations.removeAnnotation(i,e)}getChartArea(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}getSeriesTotalXRange(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}getHighestValueInSeries(e=0){return new Cc(this.ctx).getMinYMaxY(e).highestY}getLowestValueInSeries(e=0){return new Cc(this.ctx).getMinYMaxY(e).lowestY}getSeriesTotal(){return this.w.globals.seriesTotals}toggleDataPointSelection(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}zoomX(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}setLocale(e){this.localization.setCurrentLocaleValues(e)}dataURI(e){return new Yo(this.ctx).dataURI(e)}exportToCSV(e={}){return new Yo(this.ctx).exportToCSV(e)}paper(){return this.w.globals.dom.Paper}_parentResizeCallback(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}_windowResize(){clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(()=>{this.w.globals.resized=!0,this.w.globals.dataChanged=!1,this.ctx.update()},150)}_windowResizeHandler(){let{redrawOnWindowResize:e}=this.w.config.chart;typeof e=="function"&&(e=e()),e&&this._windowResize()}};const XH="",pL=f.defineComponent({__name:"Apexchart",props:{options:{},series:{},height:{default:"auto"},type:{}},setup(o){var n;const e=o,t=`apex-${(n=f.getCurrentInstance())==null?void 0:n.uid}`,i=f.ref({chart:{type:e.type},series:[{data:[]}],...e.options}),s=f.shallowRef();return f.watchEffect(()=>{i.value.chart&&(i.value.chart.type=e.type,i.value.chart.height=e.height),s.value&&s.value.updateSeries(e.series)}),f.onMounted(()=>{s.value=new fL(document.querySelector(`#${t}`),i.value),s.value.render()}),(a,l)=>(f.openBlock(),f.createElementBlock("div",{id:t}))}}),YH="",pn=f.defineComponent({__name:"Dropdown",props:{dropUp:{type:Boolean},right:{type:Boolean},left:{type:Boolean},closeOn:{type:Boolean},noCloseOnClickTag:{},disabled:{type:Boolean}},emits:["show","hide"],setup(o,{expose:e,emit:t}){var u,m;f.useCssVars(y=>({"1b45c305":p.value}));const i=o,s=t,n=f.ref(!1),a=`ui-dropdown-${(u=f.getCurrentInstance())==null?void 0:u.uid}`,l=`ui-dropdown-${(m=f.getCurrentInstance())==null?void 0:m.uid}-menu`,c=f.ref({});let d=0;const p=f.computed(()=>i.dropUp?"-480px":"unset"),g=y=>{var v,w;y instanceof KeyboardEvent&&y.key!="Escape"||i.closeOn&&((v=y.target)==null?void 0:v.tagName)==i.noCloseOnClickTag||((w=y.target)==null?void 0:w.tagName)!="INPUT"&&h()},b=y=>{n.value=y,y?(s("show"),f.nextTick(O)):s("hide")},O=()=>{const y=document.getElementById(l),v=y==null?void 0:y.getBoundingClientRect(),w=document.documentElement.clientHeight;d||(d=v==null?void 0:v.height);const S=w-(v==null?void 0:v.top)-10,C=d<S?d:S;c.value.height=`${C}px`},r=y=>{if(i.disabled){y.preventDefault(),y.stopPropagation();return}n.value||(window.addEventListener("mouseup",g,!1),window.addEventListener("keydown",g,!1),window.addEventListener("wheel",O,!1)),b(!n.value)},h=()=>{setTimeout(()=>{window.removeEventListener("wheel",O,!1),window.removeEventListener("keydown",g,!1),window.removeEventListener("mouseup",g,!1),b(!1)},100)};return e({hide:h}),(y,v)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-dropdown",{"-open":n.value,"-left":y.left,"-right":y.right}]),id:a},[f.createElementVNode("div",{class:"ui-dropdown-button",onClick:r},[f.renderSlot(y.$slots,"button-content",{class:"ui-dropdown-menu"})]),f.createElementVNode("div",{class:"ui-dropdown-menu",id:l,style:f.normalizeStyle(c.value)},[f.renderSlot(y.$slots,"default")],4)],2))}}),HH="",gL={class:"ui-dropdown-item-wrapper"},mL=["data-close"],bL={class:"ui-dropdown-item-label"},yL=f.defineComponent({__name:"DropdownItemButton",props:{label:{},close:{type:Boolean},class:{},leadingIcon:{}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",gL,[f.createElementVNode("button",{class:f.normalizeClass(["ui-dropdown-item -button",e.class]),type:"button","data-close":e.close},[f.renderSlot(e.$slots,"default",{},()=>[f.createElementVNode("p",bL,f.toDisplayString(e.label),1)],!0),e.leadingIcon?(f.openBlock(),f.createBlock(ge,{key:0,class:"leading-icon",name:e.leadingIcon,filled:""},null,8,["name"])):f.createCommentVNode("",!0)],10,mL)]))}}),Sr=je(yL,[["__scopeId","data-v-38d8b38c"]]),GH="",OL={class:"titlebar"},xL={class:"titlebar-content"},vL={class:"titlebar-content-title"},wL={class:"titlebar-content-title-text"},kL={key:0,class:"titlebar-subtitle"},SL={class:"titlebar-actions"},CL={key:0,class:"titlebar-actions-secondary"},_L={key:1,class:"titlebar-actions-primary"},Rg="more_vert",Ig=f.defineComponent({__name:"Titlebar",props:{title:{},to:{},backlink:{},primaryAction:{},secondaryActions:{},groupActions:{}},setup(o){const e=()=>window.innerWidth>768,t=f.shallowRef(e()),i=f.computed(()=>(s,n)=>t.value||!n?s:void 0);return f.onMounted(()=>{window.onresize=()=>{t.value=e()}}),f.onUnmounted(()=>{window.onresize=null}),(s,n)=>{var a,l;return f.openBlock(),f.createElementBlock("div",OL,[f.createElementVNode("div",xL,[s.backlink?(f.openBlock(),f.createBlock(Rt,{key:0,to:{name:s.backlink.to},icon:"arrow_back",size:"lg"},null,8,["to"])):f.createCommentVNode("",!0),f.createElementVNode("div",vL,[f.createElementVNode("h2",wL,f.toDisplayString(s.title),1),s.$slots["titlebar-subtitle"]?(f.openBlock(),f.createElementBlock("div",kL,[f.renderSlot(s.$slots,"titlebar-subtitle")])):f.createCommentVNode("",!0)])]),f.createElementVNode("div",SL,[(a=s.secondaryActions)!=null&&a.length?(f.openBlock(),f.createElementBlock("div",CL,[((l=s.secondaryActions)==null?void 0:l.length)==1?(f.openBlock(!0),f.createElementBlock(f.Fragment,{key:0},f.renderList(s.secondaryActions,(c,d)=>(f.openBlock(),f.createBlock(ye,{key:d,class:f.normalizeClass(c.class),variant:"plain",label:i.value(c.label,c.leadingIcon),to:c.to,"leading-icon":c.leadingIcon,onClick:c.onAction},null,8,["class","label","to","leading-icon","onClick"]))),128)):(f.openBlock(),f.createBlock(pn,{key:1},{"button-content":f.withCtx(()=>[f.createVNode(ye,{label:i.value("Mais ações",Rg),trailingIcon:t.value?"expand_more":Rg,size:t.value?"md":"lg"},null,8,["label","trailingIcon","size"])]),default:f.withCtx(()=>[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(s.secondaryActions,(c,d)=>(f.openBlock(),f.createBlock(Sr,{key:d,label:c.label,onClick:c.onAction,"leading-icon":c.leadingIcon,class:f.normalizeClass(c.class)},null,8,["label","onClick","leading-icon","class"]))),128))]),_:1}))])):f.createCommentVNode("",!0),s.primaryAction?(f.openBlock(),f.createElementBlock("div",_L,[f.createVNode(ye,{variant:"primary",to:s.primaryAction.to,label:i.value(s.primaryAction.label,s.primaryAction.leadingIcon),onClick:s.primaryAction.onAction,class:f.normalizeClass(s.primaryAction.class),"leading-icon":s.primaryAction.leadingIcon,size:t.value?"md":"lg"},null,8,["to","label","onClick","class","leading-icon","size"])])):f.createCommentVNode("",!0)])])}}}),jH="",TL={class:"ui-empty-data-content"},AL={class:"ui-empty-data-text"},EL={key:0,class:"ui-empty-data-caption"},$L={key:1,class:"ui-empty-data-actions"},PL=f.defineComponent({__name:"EmptyData",props:{label:{},icon:{},caption:{},iconType:{},link:{type:Boolean},actions:{},noBorder:{type:Boolean}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-empty-data",{"ui-empty-data-link":e.link,"-border":!e.noBorder}])},[f.createElementVNode("div",TL,[e.icon?f.withDirectives((f.openBlock(),f.createBlock(ge,{key:0,name:e.icon,type:e.iconType,class:"ui-empty-data-icon",size:"24"},null,8,["name","type"])),[[f.vShow,e.icon]]):f.createCommentVNode("",!0),f.createElementVNode("p",AL,[f.renderSlot(e.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(e.label),1)])])]),e.caption?(f.openBlock(),f.createElementBlock("div",EL,[f.renderSlot(e.$slots,"caption",{},()=>[f.createTextVNode(f.toDisplayString(e.caption),1)])])):f.createCommentVNode("",!0),e.actions?(f.openBlock(),f.createElementBlock("div",$L,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(e.actions,i=>(f.openBlock(),f.createBlock(ye,{size:"sm",label:i.label,onClick:i.onAction},null,8,["label","onClick"]))),256))])):f.createCommentVNode("",!0)],2))}}),UH="",Bg=f.defineComponent({__name:"Container",setup(o){const e=f.shallowRef(["container"]);return(t,i)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(e.value)},[f.renderSlot(t.$slots,"default")],2))}}),ZH="",LL=f.createElementVNode("div",{class:"ui-savebar-text"},"Alterações feitas",-1),NL={class:"ui-savebar-actions"},DL=f.createElementVNode("div",null,"Descartar alterações",-1),Qg=f.defineComponent({__name:"Savebar",props:{loading:{type:Boolean},editing:{type:Boolean}},emits:["discard","save"],setup(o,{emit:e}){const t=f.inject("register")||{},i=e,s=o,n=f.computed(()=>{const c=t.editing||s.editing||!1;return c?document.body.classList.add("is-editing"):document.body.classList.remove("is-editing"),c}),a=()=>{i("discard"),qn(t.discard)&&t.discard()},l=()=>i("save");return(c,d)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-savebar",{"-show":n.value}])},[f.createVNode(Bg,{class:"ui-savebar-container"},{default:f.withCtx(()=>[LL,f.createElementVNode("div",NL,[f.createVNode(ye,{onClick:a,class:"ui-savebar-restore",disabled:c.loading},{default:f.withCtx(()=>[DL]),_:1},8,["disabled"]),f.createVNode(ye,{variant:"success",type:"submit",leadingIcon:"check",label:"Salvar",loading:c.loading,onClick:l},null,8,["loading"])])]),_:1})],2))}}),ML=f.defineComponent({__name:"FormRegister",props:{resource:{},validate:{},editing:{type:Boolean}},emits:["save"],setup(o,{emit:e}){const t=e,i=o,s=f.ref(),n=f.ref(null),a=f.ref(),l=async()=>{if(!(!i.editing||!i.resource)&&!s.value){s.value=!0;try{t("save")}catch(c){n.value=c}setTimeout(()=>{s.value=!1},1e3)}};return(c,d)=>(f.openBlock(),f.createElementBlock("form",{onSubmit:f.withModifiers(l,["prevent"]),id:"form-register",class:"ui-form-register"},[f.createVNode(Qg,{editing:c.editing},null,8,["editing"]),f.createVNode(Ul,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=p=>n.value=p),translate:c.validate},null,8,["modelValue","translate"]),f.renderSlot(c.$slots,"default"),f.createElementVNode("button",{ref_key:"buttonSubmitRef",ref:a,tabindex:"-1",type:"submit",style:{opacity:"0",width:"0",height:"0",border:"none",padding:"0",position:"absolute"}},null,512)],32))}}),qH="",RL={key:1,class:"new-indicator"},Vg=f.defineComponent({__name:"NewsIndicator",props:{label:{}},setup(o){return(e,t)=>e.label?(f.openBlock(),f.createBlock(cu,{key:0,label:e.label,variant:"highlight",size:"sm"},null,8,["label"])):(f.openBlock(),f.createElementBlock("div",RL))}}),KH="",IL={class:"ui-sidebar-mobile"},BL=["onClick"],QL={class:"action-title"},VL=f.defineComponent({__name:"SidebarMobile",props:{mobileMenus:{}},emits:["onClickAction"],setup(o,{emit:e}){const t=e;return(i,s)=>(f.openBlock(),f.createElementBlock("div",IL,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(i.mobileMenus,n=>(f.openBlock(),f.createElementBlock("div",{key:n.title,class:"ui-sidebar-mobile-action",onClick:a=>t("onClickAction",n)},[f.createVNode(ge,{name:n.icon,size:"20",filled:""},null,8,["name"]),f.createElementVNode("p",QL,f.toDisplayString(n.title),1)],8,BL))),128))]))}}),FL=je(VL,[["__scopeId","data-v-ca6183b4"]]),JH="",WL={class:"ui-sidebar",id:"ui-sidebar"},zL={class:"ui-sidebar-wrapper"},XL={class:"ui-sidebar-container"},YL={class:"ui-sidebar-content"},HL={class:"ui-sidebar-nav"},GL={class:"ui-sidebar-list"},jL={class:"ui-sidebar-list -primary"},UL={key:0,class:"ui-sidebar-link-caption"},ZL={class:"d-flex"},qL={class:"ui-sidebar-link-icon"},KL={class:"ui-sidebar-link-text -title"},JL={class:"ui-sidebar-link-right-icons"},eN={key:0,class:"news-indicator"},tN={key:1,class:"ui-sidebar-sublist"},iN={class:"ui-sidebar-link-icon"},sN={class:"ui-sidebar-link-content"},nN={class:"ui-sidebar-link-text"},rN={class:"ui-sidebar-footer"},oN=f.defineComponent({__name:"Sidebar",props:{isActive:{type:Function},menuOpen:{type:Boolean},menus:{},mobileNavigationBar:{}},emits:["onClickItem"],setup(o,{emit:e}){const t=f.inject("menu"),i=e,s=c=>{t&&(t==null||t.toggle(),i("onClickItem","sub",c))},n=(c,d)=>{var p;i("onClickItem",c,d),(p=d==null?void 0:d.nodes)!=null&&p.length||t==null||t.toggle()},a=c=>{if(c.type==="action"){t==null||t.toggle();return}i("onClickItem","node",c),t.close()},l=c=>c.to?"router-link":"div";return(c,d)=>(f.openBlock(),f.createElementBlock(f.Fragment,null,[f.createElementVNode("div",WL,[f.createElementVNode("div",zL,[f.createElementVNode("div",XL,[f.createElementVNode("div",YL,[f.createElementVNode("div",HL,[f.createElementVNode("div",{class:"ui-sidebar-logo",onClick:d[0]||(d[0]=p=>n("logo"))},[f.renderSlot(c.$slots,"logo")]),f.renderSlot(c.$slots,"select-button")]),f.createElementVNode("div",GL,[f.createElementVNode("ul",jL,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(c.menus,(p,g)=>(f.openBlock(),f.createElementBlock("li",{class:f.normalizeClass(["ui-sidebar-item",[{"-disabled":p.disabled,"-spacer":p.spacer,"-spacer-last":p.last},p.to]]),redirectLink:"",key:g},[p.caption?(f.openBlock(),f.createElementBlock("small",UL,f.toDisplayString(p.caption),1)):f.createCommentVNode("",!0),(f.openBlock(),f.createBlock(f.resolveDynamicComponent(l(p)),{class:f.normalizeClass(["ui-sidebar-link",{"-node-active":p.active,"-active":p.active}]),to:{name:p.to},activeClass:"-active",onClick:b=>n("node",p)},{default:f.withCtx(()=>{var b;return[f.createElementVNode("div",ZL,[f.createElementVNode("span",qL,[f.createVNode(ge,{size:"16",name:p.icon,filled:""},null,8,["name"])]),f.createElementVNode("span",KL,f.toDisplayString(p.name),1)]),f.createElementVNode("div",JL,[p.isNew?(f.openBlock(),f.createElementBlock("div",eN,[f.createVNode(Vg)])):f.createCommentVNode("",!0),(b=p.nodes)!=null&&b.length?(f.openBlock(),f.createBlock(ge,{key:1,class:"icon-arrow",name:"expand_more"})):f.createCommentVNode("",!0)])]}),_:2},1032,["to","class","onClick"])),p.nodes&&p.dropdown!==!1?(f.openBlock(),f.createElementBlock("ul",tN,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(p.nodes,(b,O)=>(f.openBlock(),f.createElementBlock("li",{class:"ui-sidebar-item",key:O},[(f.openBlock(),f.createBlock(f.resolveDynamicComponent(l(b)),{to:{name:b.to},class:f.normalizeClass(["ui-sidebar-link -sub",{"-active":c.isActive(b),"-disabled":b.disabled}]),onClick:r=>s(b)},{default:f.withCtx(()=>[f.createElementVNode("span",iN,[f.createVNode(ge,{size:"16",name:"subdirectory_arrow_right"})]),f.createElementVNode("div",sN,[f.createElementVNode("span",nN,f.toDisplayString(b.name),1),b.isNew?(f.openBlock(),f.createBlock(Vg,{key:0,label:"Novo"})):f.createCommentVNode("",!0)])]),_:2},1032,["to","onClick","class"]))]))),128))])):f.createCommentVNode("",!0)],2))),128))])]),f.createElementVNode("div",rN,[f.renderSlot(c.$slots,"footer",{class:"ui-sidebar-footer",onClick:d[1]||(d[1]=p=>n("footer"))})])])])]),f.createElementVNode("div",{class:"ui-sidebar-overlay",onClick:s})]),f.createVNode(FL,{"mobile-menus":c.mobileNavigationBar,onOnClickAction:a},null,8,["mobile-menus"])],64))}});/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */var Fg;(function(o){o.pop="pop",o.push="push"})(Fg||(Fg={}));var Wg;(function(o){o.back="back",o.forward="forward",o.unknown=""})(Wg||(Wg={})),Symbol(process.env.NODE_ENV!=="production"?"navigation failure":"");var zg;(function(o){o[o.aborted=4]="aborted",o[o.cancelled=8]="cancelled",o[o.duplicated=16]="duplicated"})(zg||(zg={})),Symbol(process.env.NODE_ENV!=="production"?"router view location matched":""),Symbol(process.env.NODE_ENV!=="production"?"router view depth":""),Symbol(process.env.NODE_ENV!=="production"?"router":"");const aN=Symbol(process.env.NODE_ENV!=="production"?"route location":"");Symbol(process.env.NODE_ENV!=="production"?"router view location":"");function Xg(){return f.inject(aN)}const lN=(o,e=[])=>{const t=or(o,e),i=[];Object.keys(t).map(n=>{t[n]!=""&&t[n]!=null&&i.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]))});let s="";i.length&&(s=`?${i.join("&")}`),history.replaceState({},"",`${window.location.pathname}${s}`)},Yg={setObj:(o,e)=>{(Array.isArray(e)||typeof e=="object")&&(e=JSON.stringify(e)),localStorage.setItem(o,e)},getObj:o=>{const e=localStorage.getItem(o);return e?JSON.parse(e):null},set:(o,e)=>{localStorage.setItem(o,e)},get:o=>localStorage.getItem(o),remove:o=>{localStorage.removeItem(o)}},e5="",cN={key:0,class:"ui-card-loading"},hN={class:"ui-card-header-content"},dN={class:"ui-header-content-title"},uN={key:0,class:"ui-card-title"},fN=["innerHTML"],pN=["innerHTML"],gN={key:1,class:"ui-card-caption"},mN={class:"ui-card-header-content-button"},bN={key:2,type:"button",class:"btn-collapse"},yN={key:0},ON={key:1},xN={key:0,class:"ui-card-caption"},vN={key:1,class:"ui-card-caption"},wN={key:2,class:"ui-card-caption"},kN={class:"ui-card-body"},SN={key:2,class:"ui-card-footer"},gn=f.defineComponent({__name:"Card",props:{title:{},titleMuted:{},caption:{},dropdown:{type:Boolean},dropdownLabel:{},dropdownClosed:{type:Boolean,default:!1},fullHeight:{type:Boolean},fullWidth:{type:Boolean},noBorder:{type:Boolean},noPadding:{type:Boolean},closeCaption:{},gray:{type:Boolean},last:{type:Boolean},loading:{type:Boolean},transparent:{type:Boolean},plain:{type:Boolean},actions:{}},emits:["toggleShowBody","open","close"],setup(o,{emit:e}){var p;const t=e,i=o,s=f.ref(i.dropdown),n=f.ref(!i.dropdownClosed),a=`ui-card-${(p=f.getCurrentInstance())==null?void 0:p.uid}`,l=f.useSlots(),c=(g="default")=>!!l[g],d=()=>{t("toggleShowBody"),n.value||t("open"),n.value&&t("close"),n.value=!n.value};return f.watchEffect(()=>n.value=!i.dropdownClosed),(g,b)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-card",{"-hide":!n.value,"-collapse":s.value,"-gray":g.gray,"-last":g.last,"-full-height":g.fullHeight,"-full-width":g.fullWidth,"-loading":g.loading,"-transparent":g.transparent,"-no-padding":g.noPadding,"-plain":g.plain}]),id:a},[g.loading?(f.openBlock(),f.createElementBlock("div",cN,[f.createVNode(Fi,{size:"50"})])):f.createCommentVNode("",!0),g.title||c("header-title")?(f.openBlock(),f.createElementBlock("div",{key:1,class:"ui-card-header",onClick:b[0]||(b[0]=O=>s.value?d():null)},[f.createElementVNode("div",hN,[f.createElementVNode("div",dN,[f.renderSlot(g.$slots,"header-title",{},()=>[g.title?(f.openBlock(),f.createElementBlock("h4",uN,[f.createElementVNode("span",null,f.toDisplayString(g.title),1),g.titleMuted?(f.openBlock(),f.createElementBlock("span",{key:0,class:"muted",innerHTML:g.titleMuted},null,8,fN)):f.createCommentVNode("",!0)])):f.createCommentVNode("",!0)]),g.caption?(f.openBlock(),f.createElementBlock("div",{key:0,class:"ui-card-caption",innerHTML:g.caption},null,8,pN)):f.createCommentVNode("",!0),c("caption")?(f.openBlock(),f.createElementBlock("span",gN,[f.renderSlot(g.$slots,"caption")])):f.createCommentVNode("",!0)]),f.createElementVNode("div",mN,[g.actions?(f.openBlock(!0),f.createElementBlock(f.Fragment,{key:0},f.renderList(g.actions,O=>(f.openBlock(),f.createBlock(It,{key:O.label,onClick:O.onAction},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(O.label),1)]),_:2},1032,["onClick"]))),128)):f.createCommentVNode("",!0),c("header-button")?f.renderSlot(g.$slots,"header-button",{key:1}):f.createCommentVNode("",!0),s.value?(f.openBlock(),f.createElementBlock("button",bN,[n.value?(f.openBlock(),f.createElementBlock("div",yN,[f.createVNode(ge,{class:"btn-collapse-icon",name:"expand_less",size:24})])):f.createCommentVNode("",!0),n.value?f.createCommentVNode("",!0):(f.openBlock(),f.createElementBlock("div",ON,[g.dropdownLabel?(f.openBlock(),f.createBlock(It,{key:0},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(g.dropdownLabel),1)]),_:1})):(f.openBlock(),f.createBlock(ge,{key:1,class:"btn-collapse-icon",name:"expand_more",size:24}))]))])):f.createCommentVNode("",!0)])]),g.closeCaption&&!n.value?(f.openBlock(),f.createElementBlock("div",xN,f.toDisplayString(g.closeCaption),1)):f.createCommentVNode("",!0),c("close-caption")&&!n.value?(f.openBlock(),f.createElementBlock("div",vN,[f.renderSlot(g.$slots,"close-caption")])):f.createCommentVNode("",!0),c("header-caption")?(f.openBlock(),f.createElementBlock("div",wN,[f.renderSlot(g.$slots,"header-caption")])):f.createCommentVNode("",!0)])):f.createCommentVNode("",!0),f.withDirectives(f.createElementVNode("div",kN,[f.renderSlot(g.$slots,"default")],512),[[f.vShow,n.value]]),c("footer")?f.withDirectives((f.openBlock(),f.createElementBlock("div",SN,[f.renderSlot(g.$slots,"footer")],512)),[[f.vShow,n.value]]):f.createCommentVNode("",!0)],2))}}),t5="",CN=f.createElementVNode("span",null,"Carregando dados da tabela",-1),_N=f.defineComponent({__name:"TableListNavLoader",props:{loading:{type:Boolean}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["table-list-loader",{"-show":e.loading}])},[f.createVNode(Fi,{class:"table-list-loader-spinner",size:"24"}),CN],2))}}),i5="",TN={class:"table-list-nav"},AN={class:"table-list-nav-wrapper"},EN={class:"table-list-nav-content"},$N=f.defineComponent({__name:"TableListNav",props:{loading:{type:Boolean}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",TN,[f.createElementVNode("div",AN,[f.createElementVNode("div",EN,[f.renderSlot(e.$slots,"default")]),f.createVNode(_N,{loading:e.loading},null,8,["loading"])])]))}}),s5="",PN=f.defineComponent({__name:"TableListTags",props:{state:{}},setup(o){const e=o,t=e.state.removeFilter,i=l=>{let c=l;return Qt(e.state.config.filters,(d,p)=>{l==p&&(c=d.name)}),c},s=l=>{let c=l.split("--");const d=Re.fromSQL(c[0]).toFormat("dd/MM/yyyy");if(c.length>1){const p=Re.fromSQL(c[1]).toFormat("dd/MM/yyyy");c=`${d} ~ ${p}`}else c=d;return c},n=(l,c)=>{const d=[];let p=[];return!e.state.config.filters||!e.state.config.filters[c]?l:c=="created_at"?s(l):c=="q"||c=="category_ids"||["text","number"].indexOf(e.state.config.filters[c].type)>=0?l:(isNaN(l)?p=l.split(","):p=[l],Qt(e.state.config.filters,(g,b)=>{b==c&&(qn(g.filters)&&(g.filters=g.filters()),Qt(p,O=>{isNaN(O)||(O=Number(O));const r=rr(g.filters,{value:O});r&&d.push(r.name)}))}),d.join(", "))},a=f.computed(()=>{const l=or(e.state.omitFilters,["q"]);return Object.keys(l).length>0});return(l,c)=>a.value?(f.openBlock(),f.createBlock(Pf,{key:0,class:"table-list-tags"},{default:f.withCtx(()=>[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(l.state.omitFilters,(d,p)=>f.withDirectives((f.openBlock(),f.createBlock($f,{variant:"primary",onRemove:g=>f.unref(t)(String(p)),key:d},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(i(String(p)))+": "+f.toDisplayString(n(d,String(p))),1)]),_:2},1032,["onRemove"])),[[f.vShow,String(p)!="q"]])),128))]),_:1})):f.createCommentVNode("",!0)}});/*!
 * perfect-scrollbar v1.5.3
 * Copyright 2021 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function li(o){return getComputedStyle(o)}function wt(o,e){for(var t in e){var i=e[t];typeof i=="number"&&(i=i+"px"),o.style[t]=i}return o}function Go(o){var e=document.createElement("div");return e.className=o,e}var Hg=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function qi(o,e){if(!Hg)throw new Error("No element matching method supported");return Hg.call(o,e)}function mn(o){o.remove?o.remove():o.parentNode&&o.parentNode.removeChild(o)}function Gg(o,e){return Array.prototype.filter.call(o.children,function(t){return qi(t,e)})}var Ze={main:"ps",rtl:"ps__rtl",element:{thumb:function(o){return"ps__thumb-"+o},rail:function(o){return"ps__rail-"+o},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(o){return"ps--active-"+o},scrolling:function(o){return"ps--scrolling-"+o}}},jg={x:null,y:null};function Ug(o,e){var t=o.element.classList,i=Ze.state.scrolling(e);t.contains(i)?clearTimeout(jg[e]):t.add(i)}function Zg(o,e){jg[e]=setTimeout(function(){return o.isAlive&&o.element.classList.remove(Ze.state.scrolling(e))},o.settings.scrollingThreshold)}function LN(o,e){Ug(o,e),Zg(o,e)}var Cr=function(e){this.element=e,this.handlers={}},qg={isEmpty:{configurable:!0}};Cr.prototype.bind=function(e,t){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(t),this.element.addEventListener(e,t,!1)},Cr.prototype.unbind=function(e,t){var i=this;this.handlers[e]=this.handlers[e].filter(function(s){return t&&s!==t?!0:(i.element.removeEventListener(e,s,!1),!1)})},Cr.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)},qg.isEmpty.get=function(){var o=this;return Object.keys(this.handlers).every(function(e){return o.handlers[e].length===0})},Object.defineProperties(Cr.prototype,qg);var bn=function(){this.eventElements=[]};bn.prototype.eventElement=function(e){var t=this.eventElements.filter(function(i){return i.element===e})[0];return t||(t=new Cr(e),this.eventElements.push(t)),t},bn.prototype.bind=function(e,t,i){this.eventElement(e).bind(t,i)},bn.prototype.unbind=function(e,t,i){var s=this.eventElement(e);s.unbind(t,i),s.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(s),1)},bn.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]},bn.prototype.once=function(e,t,i){var s=this.eventElement(e),n=function(a){s.unbind(t,n),i(a)};s.bind(t,n)};function jo(o){if(typeof window.CustomEvent=="function")return new CustomEvent(o);var e=document.createEvent("CustomEvent");return e.initCustomEvent(o,!1,!1,void 0),e}function Uo(o,e,t,i,s){i===void 0&&(i=!0),s===void 0&&(s=!1);var n;if(e==="top")n=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")n=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");NN(o,t,n,i,s)}function NN(o,e,t,i,s){var n=t[0],a=t[1],l=t[2],c=t[3],d=t[4],p=t[5];i===void 0&&(i=!0),s===void 0&&(s=!1);var g=o.element;o.reach[c]=null,g[l]<1&&(o.reach[c]="start"),g[l]>o[n]-o[a]-1&&(o.reach[c]="end"),e&&(g.dispatchEvent(jo("ps-scroll-"+c)),e<0?g.dispatchEvent(jo("ps-scroll-"+d)):e>0&&g.dispatchEvent(jo("ps-scroll-"+p)),i&&LN(o,c)),o.reach[c]&&(e||s)&&g.dispatchEvent(jo("ps-"+c+"-reach-"+o.reach[c]))}function Ie(o){return parseInt(o,10)||0}function DN(o){return qi(o,"input,[contenteditable]")||qi(o,"select,[contenteditable]")||qi(o,"textarea,[contenteditable]")||qi(o,"button,[contenteditable]")}function MN(o){var e=li(o);return Ie(e.width)+Ie(e.paddingLeft)+Ie(e.paddingRight)+Ie(e.borderLeftWidth)+Ie(e.borderRightWidth)}var yn={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function Ai(o){var e=o.element,t=Math.floor(e.scrollTop),i=e.getBoundingClientRect();o.containerWidth=Math.round(i.width),o.containerHeight=Math.round(i.height),o.contentWidth=e.scrollWidth,o.contentHeight=e.scrollHeight,e.contains(o.scrollbarXRail)||(Gg(e,Ze.element.rail("x")).forEach(function(s){return mn(s)}),e.appendChild(o.scrollbarXRail)),e.contains(o.scrollbarYRail)||(Gg(e,Ze.element.rail("y")).forEach(function(s){return mn(s)}),e.appendChild(o.scrollbarYRail)),!o.settings.suppressScrollX&&o.containerWidth+o.settings.scrollXMarginOffset<o.contentWidth?(o.scrollbarXActive=!0,o.railXWidth=o.containerWidth-o.railXMarginWidth,o.railXRatio=o.containerWidth/o.railXWidth,o.scrollbarXWidth=Kg(o,Ie(o.railXWidth*o.containerWidth/o.contentWidth)),o.scrollbarXLeft=Ie((o.negativeScrollAdjustment+e.scrollLeft)*(o.railXWidth-o.scrollbarXWidth)/(o.contentWidth-o.containerWidth))):o.scrollbarXActive=!1,!o.settings.suppressScrollY&&o.containerHeight+o.settings.scrollYMarginOffset<o.contentHeight?(o.scrollbarYActive=!0,o.railYHeight=o.containerHeight-o.railYMarginHeight,o.railYRatio=o.containerHeight/o.railYHeight,o.scrollbarYHeight=Kg(o,Ie(o.railYHeight*o.containerHeight/o.contentHeight)),o.scrollbarYTop=Ie(t*(o.railYHeight-o.scrollbarYHeight)/(o.contentHeight-o.containerHeight))):o.scrollbarYActive=!1,o.scrollbarXLeft>=o.railXWidth-o.scrollbarXWidth&&(o.scrollbarXLeft=o.railXWidth-o.scrollbarXWidth),o.scrollbarYTop>=o.railYHeight-o.scrollbarYHeight&&(o.scrollbarYTop=o.railYHeight-o.scrollbarYHeight),RN(e,o),o.scrollbarXActive?e.classList.add(Ze.state.active("x")):(e.classList.remove(Ze.state.active("x")),o.scrollbarXWidth=0,o.scrollbarXLeft=0,e.scrollLeft=o.isRtl===!0?o.contentWidth:0),o.scrollbarYActive?e.classList.add(Ze.state.active("y")):(e.classList.remove(Ze.state.active("y")),o.scrollbarYHeight=0,o.scrollbarYTop=0,e.scrollTop=0)}function Kg(o,e){return o.settings.minScrollbarLength&&(e=Math.max(e,o.settings.minScrollbarLength)),o.settings.maxScrollbarLength&&(e=Math.min(e,o.settings.maxScrollbarLength)),e}function RN(o,e){var t={width:e.railXWidth},i=Math.floor(o.scrollTop);e.isRtl?t.left=e.negativeScrollAdjustment+o.scrollLeft+e.containerWidth-e.contentWidth:t.left=o.scrollLeft,e.isScrollbarXUsingBottom?t.bottom=e.scrollbarXBottom-i:t.top=e.scrollbarXTop+i,wt(e.scrollbarXRail,t);var s={top:i,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?s.right=e.contentWidth-(e.negativeScrollAdjustment+o.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:s.right=e.scrollbarYRight-o.scrollLeft:e.isRtl?s.left=e.negativeScrollAdjustment+o.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:s.left=e.scrollbarYLeft+o.scrollLeft,wt(e.scrollbarYRail,s),wt(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),wt(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function IN(o){o.element,o.event.bind(o.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),o.event.bind(o.scrollbarYRail,"mousedown",function(e){var t=e.pageY-window.pageYOffset-o.scrollbarYRail.getBoundingClientRect().top,i=t>o.scrollbarYTop?1:-1;o.element.scrollTop+=i*o.containerHeight,Ai(o),e.stopPropagation()}),o.event.bind(o.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),o.event.bind(o.scrollbarXRail,"mousedown",function(e){var t=e.pageX-window.pageXOffset-o.scrollbarXRail.getBoundingClientRect().left,i=t>o.scrollbarXLeft?1:-1;o.element.scrollLeft+=i*o.containerWidth,Ai(o),e.stopPropagation()})}function BN(o){Jg(o,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),Jg(o,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function Jg(o,e){var t=e[0],i=e[1],s=e[2],n=e[3],a=e[4],l=e[5],c=e[6],d=e[7],p=e[8],g=o.element,b=null,O=null,r=null;function h(y){y.touches&&y.touches[0]&&(y[s]=y.touches[0].pageY),g[c]=b+r*(y[s]-O),Ug(o,d),Ai(o),y.stopPropagation(),y.type.startsWith("touch")&&y.changedTouches.length>1&&y.preventDefault()}function u(){Zg(o,d),o[p].classList.remove(Ze.state.clicking),o.event.unbind(o.ownerDocument,"mousemove",h)}function m(y,v){b=g[c],v&&y.touches&&(y[s]=y.touches[0].pageY),O=y[s],r=(o[i]-o[t])/(o[n]-o[l]),v?o.event.bind(o.ownerDocument,"touchmove",h):(o.event.bind(o.ownerDocument,"mousemove",h),o.event.once(o.ownerDocument,"mouseup",u),y.preventDefault()),o[p].classList.add(Ze.state.clicking),y.stopPropagation()}o.event.bind(o[a],"mousedown",function(y){m(y)}),o.event.bind(o[a],"touchstart",function(y){m(y,!0)})}function QN(o){var e=o.element,t=function(){return qi(e,":hover")},i=function(){return qi(o.scrollbarX,":focus")||qi(o.scrollbarY,":focus")};function s(n,a){var l=Math.floor(e.scrollTop);if(n===0){if(!o.scrollbarYActive)return!1;if(l===0&&a>0||l>=o.contentHeight-o.containerHeight&&a<0)return!o.settings.wheelPropagation}var c=e.scrollLeft;if(a===0){if(!o.scrollbarXActive)return!1;if(c===0&&n<0||c>=o.contentWidth-o.containerWidth&&n>0)return!o.settings.wheelPropagation}return!0}o.event.bind(o.ownerDocument,"keydown",function(n){if(!(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&!(!t()&&!i())){var a=document.activeElement?document.activeElement:o.ownerDocument.activeElement;if(a){if(a.tagName==="IFRAME")a=a.contentDocument.activeElement;else for(;a.shadowRoot;)a=a.shadowRoot.activeElement;if(DN(a))return}var l=0,c=0;switch(n.which){case 37:n.metaKey?l=-o.contentWidth:n.altKey?l=-o.containerWidth:l=-30;break;case 38:n.metaKey?c=o.contentHeight:n.altKey?c=o.containerHeight:c=30;break;case 39:n.metaKey?l=o.contentWidth:n.altKey?l=o.containerWidth:l=30;break;case 40:n.metaKey?c=-o.contentHeight:n.altKey?c=-o.containerHeight:c=-30;break;case 32:n.shiftKey?c=o.containerHeight:c=-o.containerHeight;break;case 33:c=o.containerHeight;break;case 34:c=-o.containerHeight;break;case 36:c=o.contentHeight;break;case 35:c=-o.contentHeight;break;default:return}o.settings.suppressScrollX&&l!==0||o.settings.suppressScrollY&&c!==0||(e.scrollTop-=c,e.scrollLeft+=l,Ai(o),s(l,c)&&n.preventDefault())}})}function VN(o){var e=o.element;function t(a,l){var c=Math.floor(e.scrollTop),d=e.scrollTop===0,p=c+e.offsetHeight===e.scrollHeight,g=e.scrollLeft===0,b=e.scrollLeft+e.offsetWidth===e.scrollWidth,O;return Math.abs(l)>Math.abs(a)?O=d||p:O=g||b,O?!o.settings.wheelPropagation:!0}function i(a){var l=a.deltaX,c=-1*a.deltaY;return(typeof l>"u"||typeof c>"u")&&(l=-1*a.wheelDeltaX/6,c=a.wheelDeltaY/6),a.deltaMode&&a.deltaMode===1&&(l*=10,c*=10),l!==l&&c!==c&&(l=0,c=a.wheelDelta),a.shiftKey?[-c,-l]:[l,c]}function s(a,l,c){if(!yn.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(a))return!1;for(var d=a;d&&d!==e;){if(d.classList.contains(Ze.element.consuming))return!0;var p=li(d);if(c&&p.overflowY.match(/(scroll|auto)/)){var g=d.scrollHeight-d.clientHeight;if(g>0&&(d.scrollTop>0&&c<0||d.scrollTop<g&&c>0))return!0}if(l&&p.overflowX.match(/(scroll|auto)/)){var b=d.scrollWidth-d.clientWidth;if(b>0&&(d.scrollLeft>0&&l<0||d.scrollLeft<b&&l>0))return!0}d=d.parentNode}return!1}function n(a){var l=i(a),c=l[0],d=l[1];if(!s(a.target,c,d)){var p=!1;o.settings.useBothWheelAxes?o.scrollbarYActive&&!o.scrollbarXActive?(d?e.scrollTop-=d*o.settings.wheelSpeed:e.scrollTop+=c*o.settings.wheelSpeed,p=!0):o.scrollbarXActive&&!o.scrollbarYActive&&(c?e.scrollLeft+=c*o.settings.wheelSpeed:e.scrollLeft-=d*o.settings.wheelSpeed,p=!0):(e.scrollTop-=d*o.settings.wheelSpeed,e.scrollLeft+=c*o.settings.wheelSpeed),Ai(o),p=p||t(c,d),p&&!a.ctrlKey&&(a.stopPropagation(),a.preventDefault())}}typeof window.onwheel<"u"?o.event.bind(e,"wheel",n):typeof window.onmousewheel<"u"&&o.event.bind(e,"mousewheel",n)}function FN(o){if(!yn.supportsTouch&&!yn.supportsIePointer)return;var e=o.element;function t(r,h){var u=Math.floor(e.scrollTop),m=e.scrollLeft,y=Math.abs(r),v=Math.abs(h);if(v>y){if(h<0&&u===o.contentHeight-o.containerHeight||h>0&&u===0)return window.scrollY===0&&h>0&&yn.isChrome}else if(y>v&&(r<0&&m===o.contentWidth-o.containerWidth||r>0&&m===0))return!0;return!0}function i(r,h){e.scrollTop-=h,e.scrollLeft-=r,Ai(o)}var s={},n=0,a={},l=null;function c(r){return r.targetTouches?r.targetTouches[0]:r}function d(r){return r.pointerType&&r.pointerType==="pen"&&r.buttons===0?!1:!!(r.targetTouches&&r.targetTouches.length===1||r.pointerType&&r.pointerType!=="mouse"&&r.pointerType!==r.MSPOINTER_TYPE_MOUSE)}function p(r){if(d(r)){var h=c(r);s.pageX=h.pageX,s.pageY=h.pageY,n=new Date().getTime(),l!==null&&clearInterval(l)}}function g(r,h,u){if(!e.contains(r))return!1;for(var m=r;m&&m!==e;){if(m.classList.contains(Ze.element.consuming))return!0;var y=li(m);if(u&&y.overflowY.match(/(scroll|auto)/)){var v=m.scrollHeight-m.clientHeight;if(v>0&&(m.scrollTop>0&&u<0||m.scrollTop<v&&u>0))return!0}if(h&&y.overflowX.match(/(scroll|auto)/)){var w=m.scrollWidth-m.clientWidth;if(w>0&&(m.scrollLeft>0&&h<0||m.scrollLeft<w&&h>0))return!0}m=m.parentNode}return!1}function b(r){if(d(r)){var h=c(r),u={pageX:h.pageX,pageY:h.pageY},m=u.pageX-s.pageX,y=u.pageY-s.pageY;if(g(r.target,m,y))return;i(m,y),s=u;var v=new Date().getTime(),w=v-n;w>0&&(a.x=m/w,a.y=y/w,n=v),t(m,y)&&r.preventDefault()}}function O(){o.settings.swipeEasing&&(clearInterval(l),l=setInterval(function(){if(o.isInitialized){clearInterval(l);return}if(!a.x&&!a.y){clearInterval(l);return}if(Math.abs(a.x)<.01&&Math.abs(a.y)<.01){clearInterval(l);return}if(!o.element){clearInterval(l);return}i(a.x*30,a.y*30),a.x*=.8,a.y*=.8},10))}yn.supportsTouch?(o.event.bind(e,"touchstart",p),o.event.bind(e,"touchmove",b),o.event.bind(e,"touchend",O)):yn.supportsIePointer&&(window.PointerEvent?(o.event.bind(e,"pointerdown",p),o.event.bind(e,"pointermove",b),o.event.bind(e,"pointerup",O)):window.MSPointerEvent&&(o.event.bind(e,"MSPointerDown",p),o.event.bind(e,"MSPointerMove",b),o.event.bind(e,"MSPointerUp",O)))}var WN=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},zN={"click-rail":IN,"drag-thumb":BN,keyboard:QN,wheel:VN,touch:FN},_r=function(e,t){var i=this;if(t===void 0&&(t={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(Ze.main),this.settings=WN();for(var s in t)this.settings[s]=t[s];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var n=function(){return e.classList.add(Ze.state.focus)},a=function(){return e.classList.remove(Ze.state.focus)};this.isRtl=li(e).direction==="rtl",this.isRtl===!0&&e.classList.add(Ze.rtl),this.isNegativeScroll=function(){var d=e.scrollLeft,p=null;return e.scrollLeft=-1,p=e.scrollLeft<0,e.scrollLeft=d,p}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new bn,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=Go(Ze.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=Go(Ze.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",n),this.event.bind(this.scrollbarX,"blur",a),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var l=li(this.scrollbarXRail);this.scrollbarXBottom=parseInt(l.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=Ie(l.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=Ie(l.borderLeftWidth)+Ie(l.borderRightWidth),wt(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=Ie(l.marginLeft)+Ie(l.marginRight),wt(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=Go(Ze.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=Go(Ze.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",n),this.event.bind(this.scrollbarY,"blur",a),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var c=li(this.scrollbarYRail);this.scrollbarYRight=parseInt(c.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=Ie(c.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?MN(this.scrollbarY):null,this.railBorderYWidth=Ie(c.borderTopWidth)+Ie(c.borderBottomWidth),wt(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=Ie(c.marginTop)+Ie(c.marginBottom),wt(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(d){return zN[d](i)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(d){return i.onScroll(d)}),Ai(this)};_r.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,wt(this.scrollbarXRail,{display:"block"}),wt(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=Ie(li(this.scrollbarXRail).marginLeft)+Ie(li(this.scrollbarXRail).marginRight),this.railYMarginHeight=Ie(li(this.scrollbarYRail).marginTop)+Ie(li(this.scrollbarYRail).marginBottom),wt(this.scrollbarXRail,{display:"none"}),wt(this.scrollbarYRail,{display:"none"}),Ai(this),Uo(this,"top",0,!1,!0),Uo(this,"left",0,!1,!0),wt(this.scrollbarXRail,{display:""}),wt(this.scrollbarYRail,{display:""}))},_r.prototype.onScroll=function(e){this.isAlive&&(Ai(this),Uo(this,"top",this.element.scrollTop-this.lastScrollTop),Uo(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},_r.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),mn(this.scrollbarX),mn(this.scrollbarY),mn(this.scrollbarXRail),mn(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},_r.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};const n5="",r5="",em=f.defineComponent({__name:"CustomScroll",props:{settings:{}},setup(o){var s;const e=o,t=`perfect-scroll-${(s=f.getCurrentInstance())==null?void 0:s.uid}`,i={...e.settings};return f.onMounted(()=>{new _r(`#${t}`,i)}),(n,a)=>(f.openBlock(),f.createElementBlock("div",{class:"perfect-scroll",id:t},[f.renderSlot(n.$slots,"default")]))}}),o5="",tm=f.defineComponent({__name:"Tab",props:{modelValue:{}},emits:["update:modelValue"],setup(o,{emit:e}){var a;const t=o,i=e,s=`ui-tab-${(a=f.getCurrentInstance())==null?void 0:a.uid}`,n=f.reactive({tabs:[],activeTabIndex:t.modelValue,active:(l,c)=>{i("update:modelValue",l);const d=document.getElementById(s);if(d&&d.offsetWidth+d.scrollLeft>c.clientX-c.offsetX){const p=c.clientX-c.offsetX;d.scrollTo({left:p,behavior:"smooth"})}}});return f.provide("tabs",n),f.watchEffect(()=>{n.activeTabIndex=t.modelValue}),(l,c)=>(f.openBlock(),f.createElementBlock("div",{class:"ui-tab",id:s},[f.renderSlot(l.$slots,"default")]))}}),a5="",XN={class:"ui-tab-item-content"},YN={key:0,class:"ui-tab-item-badge"},Dc=f.defineComponent({__name:"TabItem",props:{label:{},index:{},badge:{}},setup(o){const e=o,t=f.ref(!1),i=f.inject("tabs");let s=0;i&&(s=e.index||i.tabs.length,i.tabs.push(s));const n=a=>{i&&i.active(s,a)};return f.watchEffect(()=>{(i==null?void 0:i.activeTabIndex)==s?t.value=!0:t.value=!1}),(a,l)=>(f.openBlock(),f.createElementBlock("button",{type:"button",class:f.normalizeClass(["ui-tab-item",{"-active":t.value}]),onClick:n},[f.createElementVNode("span",XN,[f.renderSlot(a.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(a.label),1)]),a.badge?(f.openBlock(),f.createElementBlock("span",YN,f.toDisplayString(a.badge),1)):f.createCommentVNode("",!0)])],2))}}),l5="",HN=f.defineComponent({__name:"TableListTabs",props:{queryParams:{},state:{}},setup(o){const e=o,t=(s,n)=>{n.preventDefault(),n.stopPropagation();const a=s.filter;(s.id||s.view)&&(a.selectedView=s.view),e.state.resetQueryParams(a),e.state.currentTab=s},i=()=>{e.state.resetQueryParams({selectedView:"all"})};return f.watch(()=>e.state.queryParams,s=>{e.state.currentTab=s.selectedView||"all"},{deep:!0,immediate:!0}),(s,n)=>(f.openBlock(),f.createBlock(em,{class:"table-list-tabs scroll-area",settings:{maxScrollbarLength:80,useBothWheelAxes:!0,suppressScrollY:!0}},{default:f.withCtx(()=>[f.createVNode(tm,{modelValue:s.state.currentTab,"onUpdate:modelValue":n[0]||(n[0]=a=>s.state.currentTab=a),class:"table-list-tabs-content"},{default:f.withCtx(()=>[f.createVNode(Dc,{label:"Todos",onClick:i,index:"all"}),(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(s.state.tabs,(a,l)=>(f.openBlock(),f.createBlock(Dc,{key:l,onClick:c=>t(a,c),index:a.view},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(a.name),1)]),_:2},1032,["onClick","index"]))),128))]),_:1},8,["modelValue"])]),_:1}))}}),Tr=f.defineComponent({__name:"TableListItem",props:{auto:{type:Boolean},nowrap:{type:Boolean}},setup(o){const e=o,t=f.ref([]);return e.auto&&t.value.push("-auto"),e.nowrap&&t.value.push("-nowrap"),(i,s)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["table-list-item",t.value])},[f.renderSlot(i.$slots,"default")],2))}}),c5="",GN={key:0,class:"table-list-header"},im=f.defineComponent({__name:"TableListTable",props:{state:{},rows:{},selected:{},to:{}},emits:["update:selected"],setup(o,{emit:e}){const t=o,i=e,s=(l,c)=>{l.target.getAttribute("class")=="custom-control-label"||l.target.href||t.state.clickRow(c)},n=l=>{l.active=!l.active,t.state.activeOne(l,l.active)},a=(l,c)=>{if(t.selected.includes(c.id)){c.__checked=!1;const d=t.selected.filter(p=>p!=c.id);i("update:selected",d)}else c.__checked=!0,t.selected.push(c.id)};return(l,c)=>l.rows.length?f.withMemo([l.rows],()=>(f.openBlock(),f.createElementBlock("div",{key:0,class:"table table-flex table-hover"},[l.$slots.head?(f.openBlock(),f.createElementBlock("div",GN,[l.state.config.hideCheckbox?f.createCommentVNode("",!0):(f.openBlock(),f.createBlock(Tr,{key:0,auto:"",class:"-checkbox"})),f.renderSlot(l.$slots,"head"),l.state.config.actions.length?(f.openBlock(),f.createBlock(Tr,{key:1})):f.createCommentVNode("",!0)])):f.createCommentVNode("",!0),(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(l.rows,(d,p)=>(f.openBlock(),f.createBlock(f.resolveDynamicComponent(l.to?"router-link":"div"),{onClick:g=>s(g,d),class:f.normalizeClass(["table-list-row",{"-selected":l.selected.includes(d.id),"-inactive":d.active==!1}]),to:{name:l.to,params:{id:d.id}},key:d.id},{default:f.withCtx(()=>{var g;return[l.state.config.hideCheckbox?f.createCommentVNode("",!0):(f.openBlock(),f.createBlock(Tr,{key:0,onClick:f.withModifiers(b=>a(b,d),["stop","prevent"]),auto:""},{default:f.withCtx(()=>[f.createVNode(ms,{modelValue:l.selected,value:d.id,noEvents:""},null,8,["modelValue","value"])]),_:2},1032,["onClick"])),f.renderSlot(l.$slots,"default",{item:d}),(g=l.state.config.actions)!=null&&g.length?(f.openBlock(),f.createBlock(Tr,{key:1,auto:""},{default:f.withCtx(()=>[l.state.config.actions&&l.state.config.actions.includes("active")?(f.openBlock(),f.createBlock(ye,{key:0,onClick:f.withModifiers(b=>n(d),["stop","prevent"]),variant:"plain"},{default:f.withCtx(()=>[d.active?(f.openBlock(),f.createBlock(Js,{key:0,variant:"success",label:"Ativo"})):(f.openBlock(),f.createBlock(Js,{key:1,variant:"danger",label:"Inativo"}))]),_:2},1032,["onClick"])):f.createCommentVNode("",!0)]),_:2},1024)):f.createCommentVNode("",!0)]}),_:2},1032,["onClick","to","class"]))),128))])),c,0):f.createCommentVNode("",!0)}}),h5="",jN={class:"table-list-nav-item table-search"},UN={class:"table-search-input"},ZN=f.defineComponent({__name:"TableListNavSearch",props:{state:{},placeholder:{default:"Procurar registros"}},setup(o){const e=o,t=()=>{e.state.setQueryParams({q:e.state.term,page:1})};let i;const s=(a=null)=>{clearTimeout(i),i=setTimeout(()=>{e.state.setQueryParams({q:e.state.term,page:1})},a?750:0)},n=()=>{e.state.term=null,s()};return(a,l)=>(f.openBlock(),f.createElementBlock("span",jN,[f.createElementVNode("form",{autocomplete:"off",onSubmit:f.withModifiers(t,["prevent"])},[f.createElementVNode("div",UN,[f.createVNode(Tt,{size:"sm",leadingIcon:"search",clearable:"",onClear:n,modelValue:a.state.term,"onUpdate:modelValue":l[0]||(l[0]=c=>a.state.term=c),id:"term",placeholder:a.placeholder,last:""},null,8,["modelValue","placeholder"])])],32)]))}}),sm=o=>{if(o){o=o.trim();let e=o[0];const t=o.split(/\s{1,3}/);return t.length>1&&(e+=t[t.length-1][0]),e}},nm=(o,e=2)=>{if(o==0)return 0;if(o!=null)return("000000"+o).slice(-e)};function Zo(o){if(o){o=o.replace(/^\s+|\s+$/g,""),o=o.toLowerCase();const e="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",t="aaaaaeeeeeiiiiooooouuuunc------";for(let i=0,s=e.length;i<s;i++)o=o.replace(new RegExp(e.charAt(i),"g"),t.charAt(i));o=o.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}else o="";return o}function qN(o,e,t=""){return o&&(e==null&&(e=100),t==null&&(t="..."),o.length>e?o.substring(0,e-t.length)+t:o)}function KN(o,e,t,i="",s=!0){let n="";const a=parseFloat(String(o));return a>1?n=t:a==1?n=e:n=i||t,s&&(n=`${a} ${n}`),n}const d5="",JN={class:"table-list-nav-item"},eD=f.defineComponent({__name:"TableListNavBulk",props:{rows:{default:()=>[]},selected:{default:()=>[]},config:{},state:{}},setup(o){const e=o,t=f.ref([]),i=f.ref(!1),s=f.ref(!1),n=f.ref(!1),a=()=>e.state.checkAll(!n.value),l=()=>{var r,h,u;const g=nm(e.selected.length,2),b=`Você confirma a exclusão de <b>${g}</b> ${KN(g,"registro selecionado","registros selecionados","",!1)}?`;function O(){var m;return(m=e.config.dialogDelete)!=null&&m.message?e.config.dialogDelete.message.concatMessage?`${b} ${e.config.dialogDelete.message.text}`:e.config.dialogDelete.message.text:b}lo.open({title:((r=e.config.dialogDelete)==null?void 0:r.title)??"Excluir registros",destructIcon:((h=e.config.dialogDelete)==null?void 0:h.destructIcon)??"delete",destructLabel:((u=e.config.dialogDelete)==null?void 0:u.destructLabel)??"Deletar registros",message:O(),onCallback:c})},c=()=>e.state.removeSelected(),d=()=>e.state.toggleActiveSelected(!0),p=()=>e.state.toggleActiveSelected(!1);return f.watchEffect(()=>{e.rows.length&&e.selected.length==e.rows.length?(s.value=!0,i.value=!1):e.selected.length?(s.value=!1,i.value=!0):(s.value=!1,i.value=!1),n.value=s.value}),f.onMounted(()=>{Qt(e.config.actions,g=>{g=="active"&&(t.value.push({label:"Ativar registros",onAction:d}),t.value.push({label:"Inativar registros",onAction:p})),g=="remove"&&t.value.push({label:"Remover registros",variant:"danger",onAction:l})}),e.config.bulk&&t.value.push(...e.config.bulk)}),(g,b)=>{var O;return f.withDirectives((f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["table-list-nav-bulk",{"-active":g.selected.length}])},[f.createElementVNode("div",{onClick:a,class:"-checkbox"},[f.createVNode(ms,{indeterminate:i.value,value:s.value,modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=r=>n.value=r),noEvents:""},null,8,["indeterminate","value","modelValue"])]),f.withDirectives(f.createElementVNode("span",JN,[f.createVNode(ye,{size:"sm",leadingIcon:"delete",onClick:l,label:"Deletar"})],512),[[f.vShow,g.selected.length&&((O=g.config.actions)==null?void 0:O.includes("remove"))]]),f.withDirectives(f.createVNode(pn,{right:""},{"button-content":f.withCtx(()=>[f.createVNode(ye,{size:"sm","leading-icon":"unfold_more",label:"Ação em massa"})]),default:f.withCtx(()=>[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(t.value,r=>(f.openBlock(),f.createBlock(Sr,{onClick:f.withModifiers(h=>r.onAction(g.selected),["stop"]),key:r.label,variant:r.variant,label:r.label},null,8,["onClick","variant","label"]))),128))]),_:1},512),[[f.vShow,g.selected.length&&t.value&&t.value.length>0]])],2)),[[f.vShow,!g.config.hideCheckbox]])}}}),tD=f.defineComponent({__name:"TableListNavRefresh",props:{state:{}},setup(o){const e=o;let t;const i=()=>{t||(t=setTimeout(()=>t=0,2e3),e.state.fetchData())};return(s,n)=>(f.openBlock(),f.createElementBlock("span",{class:"table-list-nav-item",onClick:i},[f.createVNode(Rt,{size:"md",class:"table-list-nav-btn",icon:"refresh"})]))}}),iD=o=>window.innerWidth<=o,Ei=(o=600)=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||iD(o),sD={class:"table-list-nav-item"},nD={class:"table-list-nav-btn"},rD=f.defineComponent({__name:"TableListNavSortable",props:{setQueryParams:{},sortable:{default:()=>[]},queryParams:{}},setup(o){const e=o,t=f.ref(),i=f.ref([]),s=n=>{t.value.hide(),e.setQueryParams({sort:n.sort,page:1})};return f.onMounted(()=>{e.sortable.map(n=>{switch(typeof n=="object"&&i.value.push(n),n){case"created_at":i.value.push({name:"Criado em (antigos primeiro)",sort:"id"}),i.value.push({name:"Criado em (novos primeiro)",sort:"-id"});break;case"updated_at":i.value.push({name:"Atualizado (antigos primeiro)",sort:"updated_at"}),i.value.push({name:"Atualizado (novos primeiro)",sort:"-updated_at"});break;case"name":i.value.push({name:"Nome (A-Z)",sort:"name"}),i.value.push({name:"Nome (Z-A)",sort:"-name"});break;case"balance":i.value.push({name:"Quantidade em estoque (menores primeiro)",sort:"balance"}),i.value.push({name:"Quantidade em estoque (maiores primeiro)",sort:"-balance"});break}})}),(n,a)=>f.withDirectives((f.openBlock(),f.createElementBlock("span",sD,[f.createVNode(pn,{ref_key:"dropdownRef",ref:t},{"button-content":f.withCtx(()=>[f.createElementVNode("span",nD,[f.createVNode(ye,{label:f.unref(Ei)()?"":"Ordenar",size:f.unref(Ei)()?"md":"sm",leadingIcon:"swap_vert"},null,8,["label","size"])])]),default:f.withCtx(()=>[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(i.value,l=>(f.openBlock(),f.createBlock(Sr,{"data-close":"true",key:l.sort,onClick:c=>s(l),active:n.queryParams.sort==l.sort},{default:f.withCtx(()=>[f.createVNode(Sl,{modelValue:n.queryParams.sort,"onUpdate:modelValue":a[0]||(a[0]=c=>n.queryParams.sort=c),value:l.sort,label:l.name,noEvents:""},null,8,["modelValue","value","label"])]),_:2},1032,["onClick","active"]))),128))]),_:1},512)],512)),[[f.vShow,i.value.length]])}}),u5="",rm=f.defineComponent({__name:"ButtonAction",props:{type:{},active:{type:Boolean},size:{},deleteName:{},noEvents:{type:Boolean}},emits:["delete","inactive","active","close","update:active","toggleActive"],setup(o,{emit:e}){const t=o,i=e,s=f.useAttrs(),n=f.ref(),a=s.click,l=p=>{n.value=p?"toggle_on":"toggle_off"},c=f.ref(["-btn-"+t.type]);t.size&&c.value.push(`-${t.size}`),f.onMounted(()=>{switch(t.type){case"remove":n.value="close";break;case"active":l(t.active);break;default:n.value=t.type;break}}),t.type=="active"&&f.watchEffect(()=>{l(t.active)});const d=p=>{if(t.type!="edit"){if(t.noEvents||p.stopPropagation(),t.type=="delete"&&!a){let g="Você confirma a exclusão do registro";t.deleteName&&(g+=` ${t.deleteName}`),g+="?",lo.delete({title:"Excluir registro",message:g,onCallback:b=>{i("delete",b)}})}t.type=="active"&&(i("update:active",!t.active),i("toggleActive"),t.active?i("inactive"):i("active"))}};return(p,g)=>(f.openBlock(),f.createElementBlock("div",null,[p.type=="remove"?(f.openBlock(),f.createBlock(Rt,{key:0,class:"ui-button-action",icon:"close",size:"sm"})):f.createCommentVNode("",!0),p.type=="active"?(f.openBlock(),f.createBlock(ye,{key:1,variant:"plain",size:"sm",onClick:d},{default:f.withCtx(()=>[p.active?(f.openBlock(),f.createBlock(Js,{key:0,variant:"success",label:"Ativo"})):(f.openBlock(),f.createBlock(Js,{key:1,variant:"danger",label:"Inativo"}))]),_:1})):f.createCommentVNode("",!0)]))}}),oD=f.defineComponent({__name:"BrowserSelectCell",props:{auto:{type:Boolean}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["browser-list-cell",{"-auto":e.auto}])},[f.renderSlot(e.$slots,"default")],2))}}),aD=f.defineComponent({__name:"BrowserSelectDefault",props:{item:{}},setup(o){return(e,t)=>(f.openBlock(),f.createBlock(oD,null,{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(e.item.name),1)]),_:1}))}}),f5="",lD={className:"ui-infinite-loading-content"},cD={key:0,className:"ui-infinite-loading-no-more"},hD={key:1,className:"ui-infinite-loading-spinner"},om=f.defineComponent({__name:"InfiniteScroll",props:{load:{},spinnerSize:{},scrollableElementId:{}},setup(o,{expose:e}){var g;const t=o,i=`ui-infinite-loading-${(g=f.getCurrentInstance())==null?void 0:g.uid}`,s=f.ref(),n=f.ref(!0),a=f.ref(),l={noMore:()=>{a.value=!0,d()},loaded:()=>{n.value=!0}};f.onMounted(()=>{const b=document.getElementById(i),O=document.getElementById(t.scrollableElementId);b&&(s.value=O??b.parentElement,p())});function c(){var r;if(!s.value)return;const b=s.value.getBoundingClientRect();s.value.scrollTop+b.height>((r=s.value)==null?void 0:r.scrollHeight)-1&&n.value&&(n.value=!1,t.load(l))}function d(){s.value&&(s.value.removeEventListener("scroll",c,!1),n.value=!1)}function p(){s.value&&(s.value.scrollTo({top:0}),a.value=!1,s.value.addEventListener("scroll",c,!1),n.value=!0,t.load(l))}return e({reset:()=>{f.nextTick(()=>p())}}),(b,O)=>(f.openBlock(),f.createElementBlock("div",{className:"ui-infinite-loading",id:i},[f.createElementVNode("div",lD,[a.value?(f.openBlock(),f.createElementBlock("div",cD,[f.createVNode(Js,{variant:"muted",label:"Sem mais resultados"})])):f.createCommentVNode("",!0),n.value?(f.openBlock(),f.createElementBlock("div",hD,[f.createVNode(Fi,{border:"2",size:b.spinnerSize||25},null,8,["size"])])):f.createCommentVNode("",!0)])]))}}),p5="",dD={class:"ui-browser"},uD={class:"ui-browser-search"},fD={class:"ui-browser-search-input"},pD={class:"box-icon"},gD={class:"ui-browser-search-list"},mD=["onClick","onKeyup","onKeypress"],bD={class:"ui-browser-list-cell"},yD=500,OD=f.defineComponent({__name:"BrowserSelectModal",props:{selectOne:{type:Boolean},baseParams:{},searchBy:{},identifier:{default:"id"},limit:{default:0},title:{default:"Buscar"},modelValue:{},templateCustom:{},service:{}},emits:["update"],setup(o,{expose:e,emit:t}){const i={default:aD},s=t,n=o,a=f.ref(),l=f.ref({q:null,page:1}),c=f.ref(),d=f.ref([]),p=f.ref(),g=f.ref(!0),b=f.ref(!1),O=f.ref(!1),r=f.ref([]);let h;const u=()=>{a.value="",d.value=[]},m=()=>{s("update",{ids:p.value,memoryList:r.value}),O.value=!1},y=(_,$)=>{$.preventDefault(),v(_)},v=_=>{r.value.push(Ks(_)),n.selectOne?(p.value=[_[n.identifier]],m()):p.value.includes(_[n.identifier])?p.value=p.value.filter($=>$!=_[n.identifier]):p.value.push(_[n.identifier])},w=async _=>{const $=Ks(l.value);$.q=a.value;const N=await n.service.get($);l.value.page++,d.value=d.value.concat(N.data),g.value=!1,N.meta.current_page>=N.meta.last_page?_.noMore():_.loaded()};f.watch(()=>a.value,(_,$)=>{clearTimeout(h),!(_==null||$==null)&&_!=$&&(b.value=!0,h=setTimeout(()=>{b.value=!1,g.value=!0,l.value=Object.assign(l.value,{q:_,page:1}),d.value=[],c.value.reset()},yD))});const S=()=>n.templateCustom?n.templateCustom:i.default,C=()=>{l.value={q:null,page:1},d.value=[]};return e({open:({searchBy:_,selectedIds:$})=>{C(),O.value=!0,p.value=qs($),a.value=_}}),(_,$)=>(f.openBlock(),f.createBlock(Un,{modelValue:O.value,"onUpdate:modelValue":$[2]||($[2]=N=>O.value=N),title:_.title,scrollable:"",noCloseOnBackdrop:"","scrollable-content-id":"browser-select-scrollable"},{footer:f.withCtx(()=>[f.createVNode(ye,{variant:"primary",onClick:m},{default:f.withCtx(()=>[f.createTextVNode(" Aplicar ("+f.toDisplayString(f.unref(nm)(p.value.length))+" selecionados) ",1)]),_:1})]),default:f.withCtx(()=>[f.createElementVNode("div",dD,[f.createElementVNode("div",uD,[f.createVNode(yr,{alignV:"center"},{default:f.withCtx(()=>[f.createVNode(Ui,null,{default:f.withCtx(()=>[f.createElementVNode("div",fD,[f.createVNode(Tt,{modelValue:a.value,"onUpdate:modelValue":$[0]||($[0]=N=>a.value=N),placeholder:"Procurar",autofocus:"",last:"",size:"sm",autocomplete:"off"},{before:f.withCtx(()=>[f.createElementVNode("div",pD,[f.withDirectives(f.createVNode(Fi,{class:"icon",size:"15",border:"2",variant:"primary"},null,512),[[f.vShow,b.value]]),f.withDirectives(f.createVNode(ge,{class:"icon",name:"search"},null,512),[[f.vShow,!b.value]])])]),after:f.withCtx(()=>[f.withDirectives(f.createVNode(ge,{name:"close",onClick:u},null,512),[[f.vShow,a.value]])]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),f.createElementVNode("div",gD,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(d.value,N=>(f.openBlock(),f.createElementBlock("div",{key:String(N[_.identifier]),class:f.normalizeClass([{disabled:_.limit>=1&&_.limit==p.value.length&&!p.value.includes(N[_.identifier])},"ui-browser-list-row"]),tabindex:0,onClick:f.withModifiers(P=>y(N,P),["stop"]),onKeyup:f.withKeys(P=>y(N,P),["enter"]),onKeypress:f.withKeys(P=>y(N,P),["space"])},[f.createElementVNode("div",bD,[f.createVNode(ms,{value:N[_.identifier],modelValue:p.value,"onUpdate:modelValue":$[1]||($[1]=P=>p.value=P),"no-events":""},null,8,["value","modelValue"])]),(f.openBlock(),f.createBlock(f.resolveDynamicComponent(S()),{item:N,modal:""},null,8,["item"]))],42,mD))),128)),f.createVNode(om,{load:w,ref_key:"InfiniteScrollRef",ref:c,"scrollable-element-id":"browser-select-scrollable"},null,512)])])]),_:1},8,["modelValue","title"]))}}),g5="",xD={class:"ui-browser-select"},vD={key:0,class:"ui-browser-select-button"},wD={key:1},kD={class:"ui-browser-select-input"},SD={key:0,class:"ui-browser-list"},CD={key:1,class:"browser-list-cell"},_D={key:2,class:"ui-browser-list-cell -auto"},TD={key:0,class:"ui-browser-list-more"},am=f.defineComponent({__name:"BrowserSelect",props:{modelValue:{},templateCustom:{},id:{},service:{},selectOne:{type:Boolean},title:{},hideList:{type:Boolean},hideExcludeButton:{type:Boolean},searchDisabled:{type:Boolean},noFetch:{type:Boolean},hideBtn:{type:Boolean},size:{},thumbSize:{default:50},selectType:{},list:{},limit:{default:0},identifier:{default:"id"},placeholder:{default:"Selecione"}},emits:["remove","change","update:modelValue","update"],setup(o,{expose:e,emit:t}){const i=t,s=o,n=f.ref(null),a=f.ref(null),l=f.ref([]),c=f.ref([]),d=f.ref([]),p=f.ref(5),g=f.ref(),b=()=>{g.value.open({selectedIds:l.value,searchBy:n.value})},O=()=>{a.value&&a.value.length>1&&(n.value=String(a.value),a.value=null,b())},r=()=>{p.value+=5},h=T=>{i("remove",T),rr(c.value,{[s.identifier]:T[s.identifier]})?c.value=c.value.filter(_=>_[s.identifier]!=T[s.identifier]):c.value.push(T[s.identifier]),l.value=c.value.map(_=>_[s.identifier]),u(l.value)},u=T=>{const _=m(T);i("update:modelValue",_),i("update",_)},m=T=>s.selectOne?bT(T)||null:T,y=T=>{Qt(l.value,_=>{const $=rr(d.value,{[s.identifier]:_});$&&T.push($)})},v=async()=>{let T=[];if(l.value.length&&(y(T),T.length!=l.value.length))if(s.selectOne){const _=l.value[0];T=await s.service.first(_),T=[T]}else T=(await s.service.get({ids:l.value.join(",")})).data;c.value=T},w=T=>{T&&(rt(T)||(T=[T]),S(T))},S=T=>{T.map(_=>{_.id&&!rr(d.value,{[s.identifier]:_[s.identifier]})&&d.value.push(Ks(_))})},C=({memoryList:T,ids:_})=>{n.value=null,S(T),_&&u(_)};return f.watch(()=>s.list,T=>{w(T),c.value=s.list||[]},{deep:!0,immediate:!0}),f.watch(()=>c.value,T=>{i("change",T)}),f.watch(()=>s.modelValue,T=>{T!=l.value&&(T?l.value=rt(T)?T:[T]:l.value=[],d.value.length||w(s.list),s.noFetch===!1&&v())},{deep:!0,immediate:!0}),e({onClickSearch:b}),(T,_)=>(f.openBlock(),f.createElementBlock(f.Fragment,null,[f.createElementVNode("div",xD,[T.selectType=="btn"&&!T.hideBtn?(f.openBlock(),f.createElementBlock("div",vD,[f.renderSlot(T.$slots,"button",{},()=>[f.createElementVNode("div",{class:f.normalizeClass(["area-select",{disabled:Number(T.limit)>0&&c.value.length==T.limit}]),onClick:b},[f.createElementVNode("span",null,f.toDisplayString(T.placeholder),1)],2)])])):(f.openBlock(),f.createElementBlock("div",wD,[f.createElementVNode("div",kD,[f.createVNode(Tt,{modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=$=>a.value=$),placeholder:"Procurar...",onKeyup:O,autocomplete:"off",disabled:T.searchDisabled},null,8,["modelValue","disabled"]),f.createVNode(ye,{variant:"primary",onClick:b,disabled:T.searchDisabled},{default:f.withCtx(()=>[f.createTextVNode("Pesquisar")]),_:1},8,["disabled"])]),!T.hideList&&c.value.length?(f.openBlock(),f.createElementBlock("div",SD,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(c.value.slice(0,p.value),$=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-browser-list-row",{"-no-button":T.hideExcludeButton}]),key:$[T.identifier]},[T.templateCustom?(f.openBlock(),f.createBlock(f.resolveDynamicComponent(T.templateCustom),{key:0,item:$},null,8,["item"])):(f.openBlock(),f.createElementBlock("div",CD,f.toDisplayString($.name),1)),T.hideExcludeButton?f.createCommentVNode("",!0):(f.openBlock(),f.createElementBlock("div",_D,[f.createVNode(rm,{size:"sm",type:"remove",onClick:N=>h($)},null,8,["onClick"])]))],2))),128)),c.value.length>p.value?(f.openBlock(),f.createElementBlock("div",TD,[f.createVNode(It,{onClick:r,label:"Exibir mais"})])):f.createCommentVNode("",!0)])):f.createCommentVNode("",!0)]))]),f.createVNode(OD,{ref_key:"browserSelectModalRef",ref:g,onUpdate:C,templateCustom:T.templateCustom,service:T.service,searchBy:n.value,selectOne:T.selectOne,identifier:T.identifier,limit:T.limit,title:T.title},null,8,["templateCustom","service","searchBy","selectOne","identifier","limit","title"])],64))}}),m5="",AD={class:"filter-list"},ED=["onClick"],$D={key:0,class:"filter-list-accordion"},PD={key:0},LD={key:1},ND={key:2},DD={key:0,class:"d-block mb-2"},MD={key:1,class:"d-block mb-2"},RD={class:"mt-4"},ID={class:"filter-list-actions"},BD=f.defineComponent({__name:"TableListNavFilterSidebar",props:{filters:{},currentFilters:{}},emits:["close"],setup(o,{expose:e,emit:t}){const i=o,s=t,n=f.ref({}),a=f.ref(!1),l=f.ref({});let c=null;const d=f.ref([]),p=()=>{const w={};Qt(i.filters,(S,C)=>{u(),S.type=="checkbox"?w[C]=[]:w[C]=null}),n.value=Object.assign({},w),c=Object.assign({},qs(w))},g=w=>{l.value[w]||qn(i.filters[w].filters)&&(i.filters[w].filters=i.filters[w].filters()),l.value[w]=!l.value[w]},b=p,O=()=>{s("close",n.value),a.value=!1},r=()=>JSON.stringify(n.value)!=JSON.stringify(c),h=(w,S)=>{switch(w.type){case"checkbox":n.value[S]=[];break;case"date_range":u();break;default:n.value[S]=null;break}},u=()=>{d.value[0]&&d.value[0].clearDate()},m=(w,S)=>w.type=="checkbox"?!!n.value[S].length:n.value[S]!==null&&n.value[S]!==void 0,y=()=>{const w={};if(Qt(i.currentFilters,(S,C)=>{i.filters[C]!==void 0&&["checkbox","browser"].indexOf(i.filters[C].type)>=0&&(S=S.split(",")),w[C]=S}),n.value=Object.assign(n.value,w),Object.keys(i.filters).length==1){const S=Xi(i.filters)[0];g(S)}};return e({open:()=>{p(),y(),a.value=!0}}),(w,S)=>(f.openBlock(),f.createBlock(Un,{modelValue:a.value,"onUpdate:modelValue":S[0]||(S[0]=C=>a.value=C),title:"Filtros",scrollable:""},{footer:f.withCtx(()=>[f.createElementVNode("div",ID,[f.createVNode(ye,{size:"md",type:"submit",form:"form-filter",variant:"primary",leadingIcon:"check"},{default:f.withCtx(()=>[f.createTextVNode("Aplicar")]),_:1}),f.createVNode(ye,{size:"md",onClick:f.unref(b),disabled:!r()},{default:f.withCtx(()=>[f.createTextVNode("Limpar os filtros")]),_:1},8,["onClick","disabled"])])]),default:f.withCtx(()=>[f.createElementVNode("form",{onSubmit:f.withModifiers(O,["prevent"]),id:"form-filter"},[f.createElementVNode("div",AD,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(w.filters,(C,T)=>(f.openBlock(),f.createElementBlock("div",{key:C.name,class:f.normalizeClass(["filter-list-item",{"-active":l.value[T],"-checked":m(C,T)}])},[f.createElementVNode("div",{class:"filter-list-title",onClick:_=>g(String(T))},[f.createElementVNode("span",null,f.toDisplayString(C.name),1),f.createVNode(ge,{name:"expand_more"})],8,ED),l.value[T]?f.withDirectives((f.openBlock(),f.createElementBlock("div",$D,[C.type=="browser"?(f.openBlock(),f.createElementBlock("div",PD,[f.createVNode(am,{modelValue:n.value[T],"onUpdate:modelValue":_=>n.value[T]=_,name:`check_${T}`,type:C.model,service:C.service,placeholder:"selecione",title:"Selecione","select-type":"input"},null,8,["modelValue","onUpdate:modelValue","name","type","service"])])):f.createCommentVNode("",!0),C.type=="date_range"?(f.openBlock(),f.createElementBlock("div",LD,[f.createVNode(pg,{ref_for:!0,ref_key:"datePickerRef",ref:d,modelValue:n.value[T],"onUpdate:modelValue":_=>n.value[T]=_,range:""},null,8,["modelValue","onUpdate:modelValue"])])):["text","number"].indexOf(C.type)>=0?(f.openBlock(),f.createElementBlock("div",ND,[f.createVNode(Tt,{modelValue:n.value[T],"onUpdate:modelValue":_=>n.value[T]=_,class:"d-block mb-2",name:`check_${T}`,placeholder:C.placeholder,type:C.type},null,8,["modelValue","onUpdate:modelValue","name","placeholder","type"])])):(f.openBlock(!0),f.createElementBlock(f.Fragment,{key:3},f.renderList(C.filters,_=>(f.openBlock(),f.createElementBlock("div",{key:_.key},[C.type=="radio"?(f.openBlock(),f.createElementBlock("div",DD,[f.createVNode(Sl,{modelValue:n.value[T],"onUpdate:modelValue":$=>n.value[T]=$,name:`radio_${T}`,value:_.value,tabindex:"1",label:_.name},null,8,["modelValue","onUpdate:modelValue","name","value","label"])])):f.createCommentVNode("",!0),C.type=="checkbox"?(f.openBlock(),f.createElementBlock("div",MD,[f.createVNode(ms,{modelValue:n.value[T],"onUpdate:modelValue":$=>n.value[T]=$,name:`check_${T}`,value:_.value,tabindex:"1",label:_.name},null,8,["modelValue","onUpdate:modelValue","name","value","label"])])):f.createCommentVNode("",!0)]))),128)),f.createElementVNode("div",RD,[f.createVNode(ye,{size:"md",variant:"link",onClick:_=>h(C,T),disabled:!m(C,T),label:"Limpar"},null,8,["onClick","disabled"])])],512)),[[f.vShow,l.value[T]]]):f.createCommentVNode("",!0)],2))),128))])],32)]),_:1},8,["modelValue"]))}}),QD={key:0,class:"table-list-nav-item"},VD=f.defineComponent({__name:"TableListNavFilter",props:{state:{}},setup(o,{expose:e}){const t=o,i=f.ref(),s=n=>{const a={};Qt(n,(l,c)=>{l==null||Array.isArray(l)&&l.length==0||(Array.isArray(l)?a[c]=l.join(","):a[c]=l)}),t.state.resetQueryParams(a),i.value.open()};return e({openFilterSidebar:()=>i.value.open()}),(n,a)=>t.state.config.filters?(f.openBlock(),f.createElementBlock("span",QD,[f.createVNode(ye,{size:f.unref(Ei)()?"md":"sm",label:f.unref(Ei)()?"":"Filtros",leadingIcon:"filter_list",onClick:a[0]||(a[0]=l=>i.value.open()),class:"table-list-nav-btn"},null,8,["size","label"]),f.createVNode(BD,{ref_key:"filterSidebarRef",ref:i,onClose:s,filters:t.state.config.filters,currentFilters:n.state.omitFilters},null,8,["filters","currentFilters"])])):f.createCommentVNode("",!0)}}),FD={},WD={class:"ui-dropdown-section"};function zD(o,e){return f.openBlock(),f.createElementBlock("div",WD,[f.renderSlot(o.$slots,"default")])}const lm=je(FD,[["render",zD]]),XD={key:0,class:"table-list-nav-item -custom-filter"},YD={class:"dropdown-section"},HD=f.createElementVNode("h6",null,"Salvar filtro",-1),GD=f.createElementVNode("div",{class:"mt-2"},"Os filtros são salvos como uma nova aba no topo desta lista.",-1),jD={class:"dropdown-section-buttons"},UD=f.defineComponent({__name:"TableListNavCustomFilter",props:{state:{},service:{}},setup(o){const e=o,t=[],i=f.ref(),s=f.ref(),n=f.ref({name:null}),a=g=>{g.view=g.id||Zo(g.name),t.push(g)};f.onMounted(async()=>{const g=await e.service.get({resource:e.state.config.customFilterResource});Qt(e.state.config.customFilterPresets,b=>{At(b)&&a(b),b=="active"&&(a({name:"Ativo",filter:{active:1}}),a({name:"Inativo",filter:{active:0}}))}),Qt(g.data,b=>{a(b)}),e.state.tabs=t});const l=f.computed(()=>!(wT(e.state.queryParams.selectedView)||Xi(e.state.omitFilters).length&&e.state.queryParams.selectedView=="all")),c=async()=>{e.state.currentTab&&(await e.service.delete(e.state.currentTab),s.value.hide(),e.state.tabs=e.state.tabs.filter(g=>g.id!=e.state.currentTab),e.state.resetQueryParams({selectedView:"all"}),tu.open("Filtro deletado com sucesso"))},d=async()=>{let g;n.value.id?(g=await e.service.update(n.value.id,NT(n.value,["name","filter"])),i.value.name=n.value.name):(g=await e.service.create({name:n.value.name,filter:or(e.state.queryParams,e.state.omitFiltersValues),resource:e.state.config.customFilterResource}),g.view=g.id||Zo(g.name),e.state.tabs.push(g),e.state.setQueryParams({selectedView:g.id})),s.value.hide()},p=()=>{i.value=rr(e.state.tabs,{view:Number(e.state.currentTab)}),i.value?n.value=Ks(i.value):n.value={name:null}};return(g,b)=>f.unref(Ei)()?f.createCommentVNode("",!0):(f.openBlock(),f.createElementBlock("span",XD,[f.createVNode(pn,{ref_key:"dropdownRef",ref:s,onShow:p,disabled:l.value,right:""},{"button-content":f.withCtx(()=>[Number(g.state.currentTab)>=1?(f.openBlock(),f.createBlock(ye,{key:0,label:"Editar filtro",leadingIcon:"star",size:"sm",variant:"primary",disabled:l.value},null,8,["disabled"])):(f.openBlock(),f.createBlock(ye,{key:1,label:"Salvar filtro",size:"sm",leadingIcon:"star",disabled:l.value},null,8,["disabled"]))]),default:f.withCtx(()=>[f.createElementVNode("div",YD,[f.createVNode(lm,null,{default:f.withCtx(()=>[f.createElementVNode("form",{onSubmit:f.withModifiers(d,["prevent"]),id:"form-custom-filter",autocomplete:"off"},[HD,f.createVNode(Tt,{size:"sm",modelValue:n.value.name,"onUpdate:modelValue":b[0]||(b[0]=O=>n.value.name=O),placeholder:"Nome do filtro","data-close":"none",required:"",tabindex:"1"},null,8,["modelValue"]),GD],32)]),_:1}),f.createElementVNode("div",jD,[n.value.id?(f.openBlock(),f.createBlock(ye,{key:0,size:"sm",tabindex:"-1",label:"Remover",variant:"danger",outline:"",onClick:c})):f.createCommentVNode("",!0),f.createVNode(ye,{size:"sm",label:"Salvar",tabindex:"2",type:"submit",form:"form-custom-filter"})])])]),_:1},8,["disabled"])]))}}),b5="",ZD={class:"table-list-pagination"},qD={class:"table-list-pagination-list"},KD={class:"table-list-pagination-item prev"},JD={class:"table-list-pagination-item next"},cm=f.defineComponent({__name:"TableListNavPagination",props:{meta:{},state:{}},setup(o){const e=o,t=()=>{let s=e.state.queryParams.page;s>1&&e.state.setQueryParams({page:--s})},i=()=>{let s=e.state.queryParams.page??1;e.meta.last_page>s&&e.state.setQueryParams({page:++s})};return(s,n)=>(f.openBlock(),f.createElementBlock("div",ZD,[f.createElementVNode("div",qD,[f.withDirectives(f.createElementVNode("div",{class:"table-list-pagination-item meta"},f.toDisplayString(s.meta.from)+" – "+f.toDisplayString(s.meta.to)+" "+f.toDisplayString(s.meta.total?"de "+s.meta.total:""),513),[[f.vShow,s.meta.from]]),f.createElementVNode("div",KD,[f.createVNode(Rt,{size:"md",onClick:t,icon:"arrow_back",disabled:s.meta.current_page==1,class:"table-list-nav-btn prev"},null,8,["disabled"])]),f.createElementVNode("div",JD,[f.createVNode(Rt,{size:"md",onClick:i,icon:"arrow_forward",disabled:s.meta.last_page==s.meta.current_page||!s.meta.total,class:"table-list-nav-btn next"},null,8,["disabled"])])])]))}}),y5="",e2={class:"table-list-empty-search"},t2={class:"table-list-empty-search-content"},i2={class:"table-list-empty-search-icon"},s2=f.createElementVNode("div",{class:"table-list-empty-search-title"},"Sua pesquisa não retornou nenhum resultado",-1),n2={class:"table-list-empty-search-text"},r2=f.defineComponent({__name:"TableListEmptySearch",emits:["resetQueryParams"],setup(o,{emit:e}){const t=e;return(i,s)=>(f.openBlock(),f.createElementBlock("div",e2,[f.createElementVNode("div",t2,[f.createElementVNode("div",i2,[f.createVNode(ge,{name:"search",size:"40"})]),s2,f.createElementVNode("div",n2,[f.createTextVNode(" Essa opção não existe na sua loja, tente "),f.createElementVNode("a",{onClick:s[0]||(s[0]=n=>t("resetQueryParams"))},"outra opção de filtro")])])]))}}),O5="",o2={class:"table-list-empty-message"},a2=f.createElementVNode("h4",{class:"table-list-empty-message-title"},"Esta seção não possui registros",-1),l2=["innerHTML"],hm=f.defineComponent({__name:"TableListEmptyMessage",props:{msg:String},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",o2,[a2,o.msg?(f.openBlock(),f.createElementBlock("div",{key:0,innerHTML:o.msg,class:"table-list-empty-message-text"},null,8,l2)):f.createCommentVNode("",!0)]))}}),x5="",c2={key:2,class:"table-list"},h2=f.defineComponent({__name:"TableList",props:{config:{},filters:{},placeholder:{},to:{}},emits:["clickRow","emptyData","deletedItem"],setup(o,{expose:e,emit:t}){const i=o,s=t,n=f.ref(),a=f.ref([]),l=f.ref(!1),c=f.ref([]),d=f.ref(!1),p=f.ref(!1),g=f.ref({}),b=f.ref({}),O=Xg(),r=f.ref(!1),h=f.ref({}),u=Object.assign({actions:["remove","active"],hideCheckbox:!1},i.config),m=`adm_table_filters_${String(O.name)}`,y=f.ref(null),v=f.ref(),w=Object.assign({sort:"-id",page:"1",limit:25,selectedView:"all"},i.config.queryParams);let S=p_(["page","sort","_","limit","selectedView","customFilterId","version"],i.config.omitFiltersValues);const C=j=>{delete b.value[j],delete b.value.customFilterId,b.value.selectedView="all",_(b.value)},T=j=>lN(j,["_","limit"]),_=j=>{const se=Object.assign({},b.value,{selectedView:"all"},j);b.value=se},$=(j={})=>{he.term=null,b.value=Object.assign(qs(w),j)},N=()=>s("emptyData"),P=async()=>{const j=qs(b.value);c.value=[],r.value=!0,g.value=or(j,S),T(j),Yg.setObj(m,j);const se=await i.config.service.get(j);!se.data.length&&xT(w,or(j,"_"))&&N(),h.value=se.meta,a.value=se.data,p.value=Object.keys(g.value).length===0&&!j.q&&!se.data.length,r.value=!1,A(se.data)},E=j=>{if(j&&a.value){const se=[];a.value.forEach(me=>{se.push(Number(me.id))}),c.value=se}else c.value=[]},x=async j=>{i.config.remove?await i.config.remove(j):await i.config.service.delete(Number(j.id)),P()},k=(j,se)=>i.config.service.update(Number(j.id),{active:se}),A=j=>{d.value=!0,i.config.onGet&&typeof i.config.onGet=="function"&&i.config.onGet(j)},L=j=>s("clickRow",j),D=j=>{const se=j.target;return l.value=se.scrollLeft>10},M=j=>{a.value&&a.value.unshift(j)},Q=async j=>{for(const se of c.value)await k({id:se},j);P()},B=async()=>{const j=[],se=[];for(const me of c.value)se.push(me),j.push(x({id:me}));try{await Promise.all(j),s("deletedItem",se)}catch(me){y.value={erro:[me.data.error]}}P()},X=()=>Object.assign(qs(w),qs(Xg().query));f.onBeforeMount(()=>{v.value=O.query.sort}),f.onMounted(()=>{S=VT(S,i.config.omitFilters);const j=Yg.getObj(m),se=O.query;!v.value&&j?b.value=Object.assign(j,se??{}):b.value=X()});let te;f.watch(()=>b.value,(j,se)=>{clearTimeout(te),j!=se&&(te=setTimeout(()=>{j.q&&(he.term=j.q),!j.selectedView&&!j.customFilterId&&(j.selectedView="all"),P()},100))},{deep:!0}),f.watch(()=>O.query,j=>{j.q&&_({q:String(j.q),page:1})});const he=f.reactive({queryParams:b,omitFilters:g,config:u,tabs:[],currentTab:{},term:null,omitFiltersValues:S,fetchData:P,checkAll:E,setQueryParams:_,resetQueryParams:$,removeFilter:C,removeSelected:B,toggleActiveSelected:Q,activeOne:k,deleteOne:x,clickRow:L});return e({unshiftItem:M,refresh:P,openFilterSidebar:()=>n.value.openFilterSidebar()}),(j,se)=>(f.openBlock(),f.createElementBlock(f.Fragment,null,[f.createVNode(Ul,{modelValue:y.value,"onUpdate:modelValue":se[0]||(se[0]=me=>y.value=me)},null,8,["modelValue"]),r.value&&!d.value?(f.openBlock(),f.createBlock(gn,{key:0,class:"table-list-skeleton",noPadding:""},{default:f.withCtx(()=>[f.createVNode(Ef,{cols:"3",rows:"6",withAction:"1"})]),_:1})):f.createCommentVNode("",!0),!r.value&&p.value?(f.openBlock(),f.createBlock(hm,{key:1,msg:j.config.empty},null,8,["msg"])):f.withDirectives((f.openBlock(),f.createElementBlock("div",c2,[f.createVNode(HN,{state:he},null,8,["state"]),f.createVNode($N,{loading:r.value},{default:f.withCtx(()=>[f.createVNode(eD,{state:he,selected:c.value,config:f.unref(u),rows:a.value},null,8,["state","selected","config","rows"]),f.unref(Ei)()?f.createCommentVNode("",!0):(f.openBlock(),f.createBlock(tD,{key:0,state:he},null,8,["state"])),f.createVNode(ZN,{onRefresh:P,placeholder:f.unref(u).placeholder,state:he},null,8,["placeholder","state"]),j.config.customFilterService?(f.openBlock(),f.createBlock(UD,{key:1,service:j.config.customFilterService,state:he},null,8,["service","state"])):f.createCommentVNode("",!0),f.createVNode(rD,{sortable:f.unref(u).sortable,queryParams:b.value,setQueryParams:_},null,8,["sortable","queryParams"]),f.createVNode(VD,{ref_key:"tableListNavFilterRef",ref:n,state:he},null,8,["state"]),f.unref(Ei)()?f.createCommentVNode("",!0):(f.openBlock(),f.createBlock(cm,{key:2,meta:h.value,state:he},null,8,["meta","state"]))]),_:1},8,["loading"]),f.createVNode(PN,{state:he},null,8,["state"]),f.createElementVNode("div",{class:f.normalizeClass(["table-list-wrapper",{"-scroll":l.value}]),onScroll:D},[f.withDirectives(f.createVNode(r2,{onResetQueryParams:$},null,512),[[f.vShow,!a.value.length&&!r.value]]),f.createVNode(im,{selected:c.value,"onUpdate:selected":se[1]||(se[1]=me=>c.value=me),rows:a.value,state:he,to:j.to},f.createSlots({default:f.withCtx(({item:me})=>[f.renderSlot(j.$slots,"default",{item:me})]),_:2},[j.$slots.head?{name:"head",fn:f.withCtx(()=>[f.renderSlot(j.$slots,"head")]),key:"0"}:void 0]),1032,["selected","rows","state","to"])],34),f.unref(Ei)()?(f.openBlock(),f.createBlock(cm,{key:0,meta:h.value,state:he},null,8,["meta","state"])):f.createCommentVNode("",!0)],512)),[[f.vShow,d.value]])],64))}}),d2={id:"player"},u2=f.defineComponent({__name:"YoutubePlayer",props:{videoId:{},width:{},height:{}},setup(o){const e=o,t=f.ref();window.onYouTubeIframeAPIReady=i;function i(){t.value=new YT.Player("player",{height:e.height||"360",width:e.width||"640",videoId:e.videoId,events:{onReady:s}})}function s(n){n.target.playVideo()}return f.onMounted(()=>{if(window.onYTReady)i();else{const n=document.createElement("script");n.src="https://www.youtube.com/iframe_api";const a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a)}}),(n,a)=>(f.openBlock(),f.createElementBlock("div",d2))}}),v5="",f2={class:"page-helper-video-modal"},p2={class:"videoWrapper"},g2={class:"page-helper-video-title"},m2={class:"page-helper-video-default"},b2={class:"page-helper-video-default-title"},y2={class:"page-helper-video-default-support"},O2={class:"page-helper-video-modal-list"},x2=f.defineComponent({__name:"PageHelperVideoModal",props:{title:{default:"Base de conhecimento"},supportTitle:{default:"Para encontrar ainda mais informações, explore nossos artigos disponíveis na base de conhecimento."}},setup(o,{expose:e}){const t=f.ref({}),i=f.ref(!1);return e({open:n=>{t.value=n,i.value=!0}}),(n,a)=>(f.openBlock(),f.createBlock(Un,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=l=>i.value=l),title:"Ajuda",size:"sm"},{default:f.withCtx(()=>[f.createElementVNode("div",f2,[f.createVNode(kl,null,{default:f.withCtx(()=>[f.createElementVNode("div",p2,[f.createVNode(u2,{"video-id":t.value.video_id,width:480,height:320,style:{width:"100%"}},null,8,["video-id"])])]),_:1}),f.createVNode(kl,null,{default:f.withCtx(()=>[f.createElementVNode("div",g2,[f.createElementVNode("div",m2,[f.createElementVNode("h3",b2,f.toDisplayString(n.title),1),f.createElementVNode("p",y2,f.toDisplayString(n.supportTitle),1)])]),f.createElementVNode("ul",O2,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(t.value.articles,l=>(f.openBlock(),f.createElementBlock("li",{key:l.url},[f.createVNode(It,{href:l.url,target:"_blank"},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(l.name),1)]),_:2},1032,["href"])]))),128))])]),_:1})])]),_:1},8,["modelValue"]))}}),w5="",v2={class:"ui-page-helper-video-message"},w2=f.createElementVNode("b",null,"Precisa de ajuda?",-1),k2={class:"text-lowercase"},dm=f.defineComponent({__name:"PageHelperVideo",props:{video:{}},setup(o){const e=o,t=f.ref(),i=()=>{t.value.open(e.video)};return(s,n)=>(f.openBlock(),f.createElementBlock(f.Fragment,null,[s.video.video_id?(f.openBlock(),f.createElementBlock("div",{key:0,class:"ui-page-helper-video",onClick:i},[f.createElementVNode("div",v2,[f.createVNode(ge,{class:"ui-page-helper-video-icon",name:"play_circle",filled:"",size:"24"}),f.createElementVNode("span",null,[w2,f.createTextVNode(" Assista o vídeo sobre "),f.createElementVNode("b",k2,f.toDisplayString(s.video.name),1)])])])):f.createCommentVNode("",!0),f.createVNode(x2,{ref_key:"pageHelperVideoModalRef",ref:t},null,512)],64))}}),k5="",S2={class:"page-message-support"},C2={class:"page-message-support-text"},_2={class:"page-message-support-link"},um=f.defineComponent({__name:"PageMessageSupport",props:{name:{},link:{}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",S2,[f.createVNode(ge,{class:"icon",name:"info"}),f.createElementVNode("span",C2,[f.createTextVNode(" Saiba mais sobre "),f.createElementVNode("span",_2,[f.createVNode(It,{href:e.link,external:"",label:e.name},null,8,["href","label"])]),f.createTextVNode(" na base de conhecimento. ")])]))}}),S5="",T2=f.createElementVNode("b",null,"Precisa de ajuda?",-1),A2={class:"ui-page-helper-name"},fm=f.defineComponent({__name:"PageHelper",props:{helperName:{},helperLink:{}},emits:["onClickLink"],setup(o,{emit:e}){const t=o,i=e;function s(){i("onClickLink"),t.helperLink&&window.open(t.helperLink,"blank")}return(n,a)=>(f.openBlock(),f.createElementBlock("div",{class:"ui-page-helper",onClick:s},[f.createVNode(ge,{name:"info",filled:"",size:"24"}),f.createElementVNode("span",null,[T2,f.createTextVNode(" Acesse o material sobre "),f.createElementVNode("b",A2,f.toDisplayString(n.helperName),1)])]))}}),C5="",E2={class:"page-helper-articles"},$2=f.createElementVNode("p",{class:"page-helper-articles-support"}," Para encontrar ainda mais informações, explore nossos artigos disponíveis na base de conhecimento. ",-1),P2={class:"page-helper-articles-list"},L2=f.defineComponent({__name:"PageHelperArticlesModal",setup(o,{expose:e}){const t=f.ref(!1),i=f.ref("Ajuda"),s=f.ref();return e({open:a=>{s.value=a.articles,a.title&&(i.value=a.title),t.value=!0}}),(a,l)=>(f.openBlock(),f.createBlock(Un,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=c=>t.value=c),title:"Ajuda",size:"sm"},{default:f.withCtx(()=>[f.createElementVNode("div",E2,[$2,f.createElementVNode("ul",P2,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(s.value,c=>(f.openBlock(),f.createElementBlock("li",{class:"page-helper-articles-item",key:c.url},[f.createVNode(It,{href:c.url,target:"_blank"},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(c.name),1)]),_:2},1032,["href"])]))),128))])])]),_:1},8,["modelValue"]))}}),N2=f.defineComponent({__name:"PageHelperArticles",props:{title:{},articles:{}},setup(o){const e=o,t=f.ref(),i=()=>{t.value.open({title:e.title,articles:e.articles})};return(s,n)=>(f.openBlock(),f.createElementBlock(f.Fragment,null,[f.createVNode(fm,{"helper-name":s.title||"esse item",onOnClickLink:i},null,8,["helper-name"]),f.createVNode(L2,{ref_key:"pageHelperArticleModalRef",ref:t},null,512)],64))}}),_5="",D2={key:1,class:"ui-page-help"},M2=f.defineComponent({__name:"Page",props:{hideTitle:{type:Boolean},primaryAction:{},secondaryActions:{},to:{},backlink:{},size:{},videoHelp:{},articlesHelp:{},footerHelp:{},title:{},groupActions:{}},setup(o){const e=o,t=f.ref([]),i=f.computed(()=>{var n,a;const s={title:e==null?void 0:e.title,articles:[]};return(n=e==null?void 0:e.articlesHelp)!=null&&n.length&&(s.articles=e.articlesHelp),s.articles=((a=e.videoHelp)==null?void 0:a.articles)||[],s});return e.size&&t.value.push(`-${e.size}`),(s,n)=>{var a,l,c,d;return f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-page",t.value])},[e.hideTitle?f.createCommentVNode("",!0):(f.openBlock(),f.createBlock(Ig,{key:0,title:s.title,to:s.to,backlink:s.backlink,groupActions:s.groupActions,"primary-action":s.primaryAction,"secondary-actions":s.secondaryActions},{"titlebar-subtitle":f.withCtx(()=>[f.renderSlot(s.$slots,"titlebar-subtitle")]),_:3},8,["title","to","backlink","groupActions","primary-action","secondary-actions"])),(a=s.videoHelp)!=null&&a.video_id?(f.openBlock(),f.createElementBlock("div",D2,[f.createVNode(dm,{video:s.videoHelp},null,8,["video"]),!((l=s.videoHelp)!=null&&l.video_id)&&((d=(c=i.value)==null?void 0:c.articles)!=null&&d.length)?(f.openBlock(),f.createBlock(N2,{key:0,articles:i.value.articles,title:i.value.title},null,8,["articles","title"])):f.createCommentVNode("",!0)])):f.createCommentVNode("",!0),f.renderSlot(s.$slots,"default"),s.footerHelp?(f.openBlock(),f.createBlock(um,{key:2,name:s.footerHelp.name,link:s.footerHelp.link},null,8,["name","link"])):f.createCommentVNode("",!0)],2)}}}),T5="",R2={class:"selectable-list"},I2=["onClick"],B2={class:"selectable-list-item-text"},Q2=f.defineComponent({__name:"RowExclude",props:{rows:{},modelValue:{}},emits:["update:modelValue","update"],setup(o,{emit:e}){const t=e,i=o,s=f.ref([]),n=c=>{Gl(s.value,c.id)!=-1?s.value=s.value.filter(d=>d!=c.id):s.value.push(c.id),a()},a=()=>{if(i.rows){const c=[];i.rows.map(d=>{Gl(s.value,d.id)==-1&&c.push(d.id)}),t("update",c),t("update:modelValue",c)}},l=()=>{i.rows&&(s.value=[],i.rows.map(c=>{Gl(i.modelValue,c.id)==-1&&s.value.push(c.id)}))};return f.watch([()=>i.modelValue,()=>i.rows],()=>l(),{immediate:!0}),(c,d)=>(f.openBlock(),f.createElementBlock("div",R2,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(c.rows,p=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["selectable-list-item",{"-selected":s.value.includes(p.id)}]),key:p.id,onClick:f.withModifiers(g=>n(p),["stop"])},[f.createVNode(ms,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=g=>s.value=g),value:p.id},null,8,["modelValue","value"]),f.createElementVNode("span",B2,f.toDisplayString(p.name),1)],10,I2))),128))]))}}),V2=f.defineComponent({__name:"CardActive",props:{modelValue:{default:()=>({active:!0})},hideDelete:{type:Boolean},preventActive:{},delete:{}},emits:["delete","toggleActive","update:modelValue"],setup(o,{emit:e}){const t=e,i=o,s=async()=>{lo.delete({title:"Remover o registro",message:`A ação removerá o registro ${i.modelValue.name}.`,onCallback:async()=>{i.delete&&i.modelValue.id&&await i.delete(i.modelValue.id),t("delete",{id:i.modelValue.id})}})},n=l=>{i.preventActive&&(i.preventActive(),l.preventDefault())},a=()=>{t("toggleActive",i.modelValue.active)};return(l,c)=>(f.openBlock(),f.createBlock(gn,{class:"ui-card-active"},{default:f.withCtx(()=>[f.createVNode(yr,{alignV:"center"},{default:f.withCtx(()=>[f.createVNode(Ui,null,{default:f.withCtx(()=>[f.createVNode(ms,{modelValue:l.modelValue.active,"onUpdate:modelValue":c[0]||(c[0]=d=>l.modelValue.active=d),switch:"",onChange:a,onClick:f.withModifiers(n,["stop"])},{default:f.withCtx(()=>[f.withDirectives(f.createElementVNode("span",null,"Ativo",512),[[f.vShow,l.modelValue.active]]),f.withDirectives(f.createElementVNode("span",null,"Inativo",512),[[f.vShow,!l.modelValue.active]])]),_:1},8,["modelValue"])]),_:1}),f.createVNode(Ui,{auto:""},{default:f.withCtx(()=>[!l.hideDelete&&l.modelValue.id?(f.openBlock(),f.createBlock(Rt,{key:0,icon:"delete",onClick:s})):f.createCommentVNode("",!0)]),_:1})]),_:1})]),_:1}))}}),A5="",F2={class:"ui-stats-item"},W2={class:"ui-stats-item-label"},z2={class:"ui-stats-item-value"},X2=["textContent"],pm=f.defineComponent({__name:"StatsItem",props:{label:{},value:{},perc:{},info:{},primaryAction:{},text:{}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",F2,[f.createElementVNode("small",W2,[f.createTextVNode(f.toDisplayString(e.label)+" ",1),e.info?f.withDirectives((f.openBlock(),f.createBlock(ge,{key:0,name:"info"},null,512)),[[f.unref(ou),e.info,"top"]]):f.createCommentVNode("",!0)]),f.createElementVNode("span",z2,f.toDisplayString(e.value),1),e.perc!=null?(f.openBlock(),f.createElementBlock("div",{key:0,class:f.normalizeClass(["stats-perc",{positive:Number(e.perc)>0}])},[f.createVNode(ge,{name:"south"}),f.createVNode(ge,{name:"north"}),f.createElementVNode("span",null,f.toDisplayString(e.perc)+"%",1)],2)):f.createCommentVNode("",!0),e.text?(f.openBlock(),f.createElementBlock("small",{key:1,textContent:f.toDisplayString(e.text)},null,8,X2)):f.createCommentVNode("",!0),e.primaryAction?(f.openBlock(!0),f.createElementBlock(f.Fragment,{key:2},f.renderList(e.primaryAction,i=>(f.openBlock(),f.createElementBlock("small",{class:"stats-action",key:i.text},[i.button==!0?(f.openBlock(),f.createBlock(ye,{key:0,label:i.text,href:i.href,to:i.to,size:"sm",variant:"primary"},null,8,["label","href","to"])):(f.openBlock(),f.createBlock(It,{key:1,label:i.text,href:i.href,to:i.to},null,8,["label","href","to"]))]))),128)):f.createCommentVNode("",!0),f.renderSlot(e.$slots,"default")]))}}),E5="",Y2={class:"stats-group"},H2={key:0,class:"stats-group-wrapper"},G2={key:1,class:"stats-group-wrapper"},j2=f.defineComponent({__name:"StatsGroup",props:{infos:{}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",Y2,[e.infos?(f.openBlock(),f.createElementBlock("div",H2,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(e.infos,i=>(f.openBlock(),f.createBlock(pm,{key:i.label,value:i.value,label:i.label,primaryAction:i.primaryAction,text:i.text},null,8,["value","label","primaryAction","text"]))),128)),f.renderSlot(e.$slots,"default")])):(f.openBlock(),f.createElementBlock("div",G2,[f.renderSlot(e.$slots,"default")]))]))}});let On="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(o=>o?parseInt(o,36):1);for(let o=1;o<On.length;o++)On[o]+=On[o-1];function U2(o){for(let e=1;e<On.length;e+=2)if(On[e]>o)return On[e-1]<=o;return!1}function gm(o){return o>=127462&&o<=127487}const mm=8205;function $t(o,e,t=!0,i=!0){return(t?bm:Z2)(o,e,i)}function bm(o,e,t){if(e==o.length)return e;e&&ym(o.charCodeAt(e))&&Om(o.charCodeAt(e-1))&&e--;let i=gt(o,e);for(e+=Xt(i);e<o.length;){let s=gt(o,e);if(i==mm||s==mm||t&&U2(s))e+=Xt(s),i=s;else if(gm(s)){let n=0,a=e-2;for(;a>=0&&gm(gt(o,a));)n++,a-=2;if(n%2==0)break;e+=2}else break}return e}function Z2(o,e,t){for(;e>0;){let i=bm(o,e-2,t);if(i<e)return i;e--}return 0}function ym(o){return o>=56320&&o<57344}function Om(o){return o>=55296&&o<56320}function gt(o,e){let t=o.charCodeAt(e);if(!Om(t)||e+1==o.length)return t;let i=o.charCodeAt(e+1);return ym(i)?(t-55296<<10)+(i-56320)+65536:t}function Mc(o){return o<=65535?String.fromCharCode(o):(o-=65536,String.fromCharCode((o>>10)+55296,(o&1023)+56320))}function Xt(o){return o<65536?1:2}function Ar(o,e,t=o.length){let i=0;for(let s=0;s<t;)o.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=$t(o,s));return i}function Rc(o,e,t,i){for(let s=0,n=0;;){if(n>=e)return s;if(s==o.length)break;n+=o.charCodeAt(s)==9?t-n%t:1,s=$t(o,s)}return i===!0?-1:o.length}class _e{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),ci.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),ci.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new Er(this),n=new Er(e);for(let a=t,l=t;;){if(s.next(a),n.next(a),a=0,s.lineBreak!=n.lineBreak||s.done!=n.done||s.value!=n.value)return!1;if(l+=s.value.length,s.done||l>=i)return!0}}iter(e=1){return new Er(this,e)}iterRange(e,t=this.length){return new vm(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new wm(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?_e.empty:e.length<=32?new He(e):ci.from(He.split(e,[]))}}class He extends _e{constructor(e,t=q2(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let n=0;;n++){let a=this.text[n],l=s+a.length;if((t?i:l)>=e)return new K2(s,l,i,a);s=l+1,i++}}decompose(e,t,i,s){let n=e<=0&&t>=this.length?this:new He(xm(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let a=i.pop(),l=qo(n.text,a.text.slice(),0,n.length);if(l.length<=32)i.push(new He(l,a.length+n.length));else{let c=l.length>>1;i.push(new He(l.slice(0,c)),new He(l.slice(c)))}}else i.push(n)}replace(e,t,i){if(!(i instanceof He))return super.replace(e,t,i);let s=qo(this.text,qo(i.text,xm(this.text,0,e)),t),n=this.length+i.length-(t-e);return s.length<=32?new He(s,n):ci.from(He.split(s,[]),n)}sliceString(e,t=this.length,i=`
`){let s="";for(let n=0,a=0;n<=t&&a<this.text.length;a++){let l=this.text[a],c=n+l.length;n>e&&a&&(s+=i),e<c&&t>n&&(s+=l.slice(Math.max(0,e-n),t-n)),n=c+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let n of e)i.push(n),s+=n.length+1,i.length==32&&(t.push(new He(i,s)),i=[],s=-1);return s>-1&&t.push(new He(i,s)),t}}class ci extends _e{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,s){for(let n=0;;n++){let a=this.children[n],l=s+a.length,c=i+a.lines-1;if((t?c:l)>=e)return a.lineInner(e,t,i,s);s=l+1,i=c+1}}decompose(e,t,i,s){for(let n=0,a=0;a<=t&&n<this.children.length;n++){let l=this.children[n],c=a+l.length;if(e<=c&&t>=a){let d=s&((a<=e?1:0)|(c>=t?2:0));a>=e&&c<=t&&!d?i.push(l):l.decompose(e-a,t-a,i,d)}a=c+1}}replace(e,t,i){if(i.lines<this.lines)for(let s=0,n=0;s<this.children.length;s++){let a=this.children[s],l=n+a.length;if(e>=n&&t<=l){let c=a.replace(e-n,t-n,i),d=this.lines-a.lines+c.lines;if(c.lines<d>>5-1&&c.lines>d>>5+1){let p=this.children.slice();return p[s]=c,new ci(p,this.length-(t-e)+i.length)}return super.replace(n,l,c)}n=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let s="";for(let n=0,a=0;n<this.children.length&&a<=t;n++){let l=this.children[n],c=a+l.length;a>e&&n&&(s+=i),e<c&&t>a&&(s+=l.sliceString(e-a,t-a,i)),a=c+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ci))return 0;let i=0,[s,n,a,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,n+=t){if(s==a||n==l)return i;let c=this.children[s],d=e.children[n];if(c!=d)return i+c.scanIdentical(d,t);i+=c.length+1}}static from(e,t=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let O of e)i+=O.lines;if(i<32){let O=[];for(let r of e)r.flatten(O);return new He(O,t)}let s=Math.max(32,i>>5),n=s<<1,a=s>>1,l=[],c=0,d=-1,p=[];function g(O){let r;if(O.lines>n&&O instanceof ci)for(let h of O.children)g(h);else O.lines>a&&(c>a||!c)?(b(),l.push(O)):O instanceof He&&c&&(r=p[p.length-1])instanceof He&&O.lines+r.lines<=32?(c+=O.lines,d+=O.length+1,p[p.length-1]=new He(r.text.concat(O.text),r.length+1+O.length)):(c+O.lines>s&&b(),c+=O.lines,d+=O.length+1,p.push(O))}function b(){c!=0&&(l.push(p.length==1?p[0]:ci.from(p,d)),d=-1,c=p.length=0)}for(let O of e)g(O);return b(),l.length==1?l[0]:new ci(l,t)}}_e.empty=new He([""],0);function q2(o){let e=-1;for(let t of o)e+=t.length+1;return e}function qo(o,e,t=0,i=1e9){for(let s=0,n=0,a=!0;n<o.length&&s<=i;n++){let l=o[n],c=s+l.length;c>=t&&(c>i&&(l=l.slice(0,i-s)),s<t&&(l=l.slice(t-s)),a?(e[e.length-1]+=l,a=!1):e.push(l)),s=c+1}return e}function xm(o,e,t){return qo(o,[""],e,t)}class Er{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof He?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],n=this.offsets[i],a=n>>1,l=s instanceof He?s.text.length:s.children.length;if(a==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((n&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof He){let c=s.text[a+(t<0?-1:0)];if(this.offsets[i]+=t,c.length>Math.max(0,e))return this.value=e==0?c:t>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=s.children[a+(t<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(t>0?1:(c instanceof He?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class vm{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Er(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class wm{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(_e.prototype[Symbol.iterator]=function(){return this.iter()},Er.prototype[Symbol.iterator]=vm.prototype[Symbol.iterator]=wm.prototype[Symbol.iterator]=function(){return this});class K2{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}}const Ic=/\r\n?|\n/;var lt=function(o){return o[o.Simple=0]="Simple",o[o.TrackDel=1]="TrackDel",o[o.TrackBefore=2]="TrackBefore",o[o.TrackAfter=3]="TrackAfter",o}(lt||(lt={}));class $i{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let n=this.sections[t++],a=this.sections[t++];a<0?(e(i,s,n),s+=n):s+=a,i+=n}}iterChangedRanges(e,t=!1){Bc(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new $i(e)}composeDesc(e){return this.empty?e:e.empty?this:km(this,e)}mapDesc(e,t=!1){return e.empty?this:Qc(this,e,t)}mapPos(e,t=-1,i=lt.Simple){let s=0,n=0;for(let a=0;a<this.sections.length;){let l=this.sections[a++],c=this.sections[a++],d=s+l;if(c<0){if(d>e)return n+(e-s);n+=l}else{if(i!=lt.Simple&&d>=e&&(i==lt.TrackDel&&s<e&&d>e||i==lt.TrackBefore&&s<e||i==lt.TrackAfter&&d>e))return null;if(d>e||d==e&&t<0&&!l)return e==s||t<0?n:n+c;n+=c}s=d}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return n}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let n=this.sections[i++],a=this.sections[i++],l=s+n;if(a>=0&&s<=t&&l>=e)return s<e&&l>t?"cover":!0;s=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new $i(e)}}class it extends $i{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Bc(this,(t,i,s,n,a)=>e=e.replace(s,s+(i-t),a),!1),e}mapDesc(e,t=!1){return Qc(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,n=0;s<t.length;s+=2){let a=t[s],l=t[s+1];if(l>=0){t[s]=l,t[s+1]=a;let c=s>>1;for(;i.length<c;)i.push(_e.empty);i.push(a?e.slice(n,n+a):_e.empty)}n+=a}return new it(t,i)}compose(e){return this.empty?e:e.empty?this:km(this,e,!0)}map(e,t=!1){return e.empty?this:Qc(this,e,t,!0)}iterChanges(e,t=!1){Bc(this,e,t)}get desc(){return new $i(this.sections)}filter(e){let t=[],i=[],s=[],n=new $r(this);e:for(let a=0,l=0;;){let c=a==e.length?1e9:e[a++];for(;l<c||l==c&&n.len==0;){if(n.done)break e;let p=Math.min(n.len,c-l);yt(s,p,-1);let g=n.ins==-1?-1:n.off==0?n.ins:0;yt(t,p,g),g>0&&$s(i,t,n.text),n.forward(p),l+=p}let d=e[a++];for(;l<d;){if(n.done)break e;let p=Math.min(n.len,d-l);yt(t,p,-1),yt(s,p,n.ins==-1?-1:n.off==0?n.ins:0),n.forward(p),l+=p}}return{changes:new it(t,i),filtered:new $i(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],n=[],a=0,l=null;function c(p=!1){if(!p&&!s.length)return;a<t&&yt(s,t-a,-1);let g=new it(s,n);l=l?l.compose(g.map(l)):g,s=[],n=[],a=0}function d(p){if(Array.isArray(p))for(let g of p)d(g);else if(p instanceof it){if(p.length!=t)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${t})`);c(),l=l?l.compose(p.map(l)):p}else{let{from:g,to:b=g,insert:O}=p;if(g>b||g<0||b>t)throw new RangeError(`Invalid change range ${g} to ${b} (in doc of length ${t})`);let r=O?typeof O=="string"?_e.of(O.split(i||Ic)):O:_e.empty,h=r.length;if(g==b&&h==0)return;g<a&&c(),g>a&&yt(s,g-a,-1),yt(s,b-g,h),$s(n,s,r),a=b}}return d(e),c(!l),l}static empty(e){return new it(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let n=e[s];if(typeof n=="number")t.push(n,-1);else{if(!Array.isArray(n)||typeof n[0]!="number"||n.some((a,l)=>l&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(n.length==1)t.push(n[0],0);else{for(;i.length<s;)i.push(_e.empty);i[s]=_e.of(n.slice(1)),t.push(n[0],i[s].length)}}}return new it(t,i)}}function yt(o,e,t,i=!1){if(e==0&&t<=0)return;let s=o.length-2;s>=0&&t<=0&&t==o[s+1]?o[s]+=e:e==0&&o[s]==0?o[s+1]+=t:i?(o[s]+=e,o[s+1]+=t):o.push(e,t)}function $s(o,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<o.length)o[o.length-1]=o[o.length-1].append(t);else{for(;o.length<i;)o.push(_e.empty);o.push(t)}}function Bc(o,e,t){let i=o.inserted;for(let s=0,n=0,a=0;a<o.sections.length;){let l=o.sections[a++],c=o.sections[a++];if(c<0)s+=l,n+=l;else{let d=s,p=n,g=_e.empty;for(;d+=l,p+=c,c&&i&&(g=g.append(i[a-2>>1])),!(t||a==o.sections.length||o.sections[a+1]<0);)l=o.sections[a++],c=o.sections[a++];e(s,d,n,p,g),s=d,n=p}}}function Qc(o,e,t,i=!1){let s=[],n=i?[]:null,a=new $r(o),l=new $r(e);for(let c=0,d=0;;)if(a.ins==-1)c+=a.len,a.next();else if(l.ins==-1&&d<c){let p=Math.min(l.len,c-d);l.forward(p),yt(s,p,-1),d+=p}else if(l.ins>=0&&(a.done||d<c||d==c&&(l.len<a.len||l.len==a.len&&!t))){for(yt(s,l.ins,-1);c>d&&!a.done&&c+a.len<d+l.len;)c+=a.len,a.next();d+=l.len,l.next()}else if(a.ins>=0){let p=0,g=c+a.len;for(;;)if(l.ins>=0&&d>c&&d+l.len<g)p+=l.ins,d+=l.len,l.next();else if(l.ins==-1&&d<g){let b=Math.min(l.len,g-d);p+=b,l.forward(b),d+=b}else break;yt(s,p,a.ins),n&&$s(n,s,a.text),c=g,a.next()}else{if(a.done&&l.done)return n?new it(s,n):new $i(s);throw new Error("Mismatched change set lengths")}}function km(o,e,t=!1){let i=[],s=t?[]:null,n=new $r(o),a=new $r(e);for(let l=!1;;){if(n.done&&a.done)return s?new it(i,s):new $i(i);if(n.ins==0)yt(i,n.len,0,l),n.next();else if(a.len==0&&!a.done)yt(i,0,a.ins,l),s&&$s(s,i,a.text),a.next();else{if(n.done||a.done)throw new Error("Mismatched change set lengths");{let c=Math.min(n.len2,a.len),d=i.length;if(n.ins==-1){let p=a.ins==-1?-1:a.off?0:a.ins;yt(i,c,p,l),s&&p&&$s(s,i,a.text)}else a.ins==-1?(yt(i,n.off?0:n.len,c,l),s&&$s(s,i,n.textBit(c))):(yt(i,n.off?0:n.len,a.off?0:a.ins,l),s&&!a.off&&$s(s,i,a.text));l=(n.ins>c||a.ins>=0&&a.len>c)&&(l||i.length>d),n.forward2(c),a.forward(c)}}}}class $r{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?_e.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?_e.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class xn{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new xn(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return G.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return G.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return G.range(e.anchor,e.head)}}class G{constructor(e,t=0){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:G.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new G([this.main])}addRange(e,t=!0){return G.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,G.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new G(e.ranges.map(t=>xn.fromJSON(t)),e.main)}static single(e,t=e){return new G([G.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let n=e[s];if(n.empty?n.from<=i:n.from<i)return J2(e.slice(),t);i=n.to}return new G(e,t)}static cursor(e,t=0,i,s){return new xn(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(s??33554431)<<5)}static range(e,t,i){let s=(i??33554431)<<5;return t<e?new xn(t,e,16|s|8):new xn(e,t,s|(t>e?4:0))}}function J2(o,e=0){let t=o[e];o.sort((i,s)=>i.from-s.from),e=o.indexOf(t);for(let i=1;i<o.length;i++){let s=o[i],n=o[i-1];if(s.empty?s.from<=n.to:s.from<n.to){let a=n.from,l=Math.max(s.to,n.to);i<=e&&e--,o.splice(--i,2,s.anchor>s.head?G.range(l,a):G.range(a,l))}}return new G(o,e)}function Sm(o,e){for(let t of o.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Vc=0;class re{constructor(e,t,i,s,n){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.extensions=n,this.id=Vc++,this.default=e([])}static define(e={}){return new re(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Fc),!!e.static,e.enables)}of(e){return new Ko([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ko(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ko(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Fc(o,e){return o==e||o.length==e.length&&o.every((t,i)=>t===e[i])}class Ko{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=Vc++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,n=this.id,a=e[n]>>1,l=this.type==2,c=!1,d=!1,p=[];for(let g of this.dependencies)g=="doc"?c=!0:g=="selection"?d=!0:((t=e[g.id])!==null&&t!==void 0?t:1)&1||p.push(e[g.id]);return{create(g){return g.values[a]=i(g),1},update(g,b){if(c&&b.docChanged||d&&(b.docChanged||b.selection)||p.some(O=>(Ps(g,O)&1)>0)){let O=i(g);if(l?!Cm(O,g.values[a],s):!s(O,g.values[a]))return g.values[a]=O,1}return 0},reconfigure(g,b){let O=i(g),r=b.config.address[n];if(r!=null){let h=ea(b,r);if(l?Cm(O,h,s):s(O,h))return g.values[a]=h,0}return g.values[a]=O,1}}}}function Cm(o,e,t){if(o.length!=e.length)return!1;for(let i=0;i<o.length;i++)if(!t(o[i],e[i]))return!1;return!0}function eM(o,e,t){let i=t.map(c=>o[c.id]),s=t.map(c=>c.type),n=i.filter(c=>!(c&1)),a=o[e.id]>>1;function l(c){let d=[];for(let p=0;p<i.length;p++){let g=ea(c,i[p]);if(s[p]==2)for(let b of g)d.push(b);else d.push(g)}return e.combine(d)}return{create(c){for(let d of i)Ps(c,d);return c.values[a]=l(c),1},update(c,d){if(!n.some(g=>Ps(c,g)&1))return 0;let p=l(c);return e.compare(p,c.values[a])?0:(c.values[a]=p,1)},reconfigure(c,d){let p=i.some(r=>Ps(c,r)&1),g=d.config.facets[e.id],b=d.facet(e);if(g&&!p&&Fc(t,g))return c.values[a]=b,0;let O=l(c);return e.compare(O,b)?(c.values[a]=b,0):(c.values[a]=O,1)}}}const _m=re.define({static:!0});class ct{constructor(e,t,i,s,n){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=n,this.provides=void 0}static define(e){let t=new ct(Vc++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(_m).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,s)=>{let n=i.values[t],a=this.updateF(n,s);return this.compareF(n,a)?0:(i.values[t]=a,1)},reconfigure:(i,s)=>s.config.address[this.id]!=null?(i.values[t]=s.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,_m.of({field:this,create:e})]}get extension(){return this}}const Pi={lowest:4,low:3,default:2,high:1,highest:0};function Ki(o){return e=>new Tm(e,o)}const vn={lowest:Ki(Pi.lowest),low:Ki(Pi.low),default:Ki(Pi.default),high:Ki(Pi.high),highest:Ki(Pi.highest),fallback:Ki(Pi.lowest),extend:Ki(Pi.high),override:Ki(Pi.highest)};class Tm{constructor(e,t){this.inner=e,this.prec=t}}class Pr{of(e){return new Wc(this,e)}reconfigure(e){return Pr.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Wc{constructor(e,t){this.compartment=e,this.inner=t}}class Jo{constructor(e,t,i,s,n,a){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=n,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],n=Object.create(null),a=new Map;for(let b of tM(e,t,a))b instanceof ct?s.push(b):(n[b.facet.id]||(n[b.facet.id]=[])).push(b);let l=Object.create(null),c=[],d=[];for(let b of s)l[b.id]=d.length<<1,d.push(O=>b.slot(O));let p=i==null?void 0:i.config.facets;for(let b in n){let O=n[b],r=O[0].facet,h=p&&p[b]||[];if(O.every(u=>u.type==0))if(l[r.id]=c.length<<1|1,Fc(h,O))c.push(i.facet(r));else{let u=r.combine(O.map(m=>m.value));c.push(i&&r.compare(u,i.facet(r))?i.facet(r):u)}else{for(let u of O)u.type==0?(l[u.id]=c.length<<1|1,c.push(u.value)):(l[u.id]=d.length<<1,d.push(m=>u.dynamicSlot(m)));l[r.id]=d.length<<1,d.push(u=>eM(u,r,O))}}let g=d.map(b=>b(l));return new Jo(e,a,g,l,c,n)}}function tM(o,e,t){let i=[[],[],[],[],[]],s=new Map;function n(a,l){let c=s.get(a);if(c!=null){if(c>=l)return;let d=i[c].indexOf(a);d>-1&&i[c].splice(d,1),a instanceof Wc&&t.delete(a.compartment)}if(s.set(a,l),Array.isArray(a))for(let d of a)n(d,l);else if(a instanceof Wc){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(a.compartment)||a.inner;t.set(a.compartment,d),n(d,l)}else if(a instanceof Tm)n(a.inner,a.prec);else if(a instanceof ct)i[l].push(a),a.provides&&n(a.provides,l);else if(a instanceof Ko)i[l].push(a),a.facet.extensions&&n(a.facet.extensions,l);else{let d=a.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);n(d,l)}}return n(o,Pi.default),i.reduce((a,l)=>a.concat(l))}function Ps(o,e){if(e&1)return 2;let t=e>>1,i=o.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;o.status[t]=4;let s=o.computeSlot(o,o.config.dynamicSlots[t]);return o.status[t]=2|s}function ea(o,e){return e&1?o.config.staticValues[e>>1]:o.values[e>>1]}const Am=re.define(),Em=re.define({combine:o=>o.some(e=>e),static:!0}),$m=re.define({combine:o=>o.length?o[0]:void 0,static:!0}),Pm=re.define(),Lm=re.define(),Nm=re.define(),Dm=re.define({combine:o=>o.length?o[0]:!1});class Ji{constructor(e,t){this.type=e,this.value=t}static define(){return new iM}}class iM{of(e){return new Ji(this,e)}}class sM{constructor(e){this.map=e}of(e){return new ue(this,e)}}class ue{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ue(this.type,t)}is(e){return this.type==e}static define(e={}){return new sM(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let s of e){let n=s.map(t);n&&i.push(n)}return i}}ue.reconfigure=ue.define(),ue.appendConfig=ue.define();class st{constructor(e,t,i,s,n,a){this.startState=e,this.changes=t,this.selection=i,this.effects=s,this.annotations=n,this.scrollIntoView=a,this._doc=null,this._state=null,i&&Sm(i,t.newLength),n.some(l=>l.type==st.time)||(this.annotations=n.concat(st.time.of(Date.now())))}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(st.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}st.time=Ji.define(),st.userEvent=Ji.define(),st.addToHistory=Ji.define(),st.remote=Ji.define();function nM(o,e){let t=[];for(let i=0,s=0;;){let n,a;if(i<o.length&&(s==e.length||e[s]>=o[i]))n=o[i++],a=o[i++];else if(s<e.length)n=e[s++],a=e[s++];else return t;!t.length||t[t.length-1]<n?t.push(n,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function Mm(o,e,t){var i;let s,n,a;return t?(s=e.changes,n=it.empty(e.changes.length),a=o.changes.compose(e.changes)):(s=e.changes.map(o.changes),n=o.changes.mapDesc(e.changes,!0),a=o.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(n):(i=o.selection)===null||i===void 0?void 0:i.map(s),effects:ue.mapEffects(o.effects,s).concat(ue.mapEffects(e.effects,n)),annotations:o.annotations.length?o.annotations.concat(e.annotations):e.annotations,scrollIntoView:o.scrollIntoView||e.scrollIntoView}}function zc(o,e,t){let i=e.selection,s=wn(e.annotations);return e.userEvent&&(s=s.concat(st.userEvent.of(e.userEvent))),{changes:e.changes instanceof it?e.changes:it.of(e.changes||[],t,o.facet($m)),selection:i&&(i instanceof G?i:G.single(i.anchor,i.head)),effects:wn(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function Rm(o,e,t){let i=zc(o,e.length?e[0]:{},o.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let n=1;n<e.length;n++){e[n].filter===!1&&(t=!1);let a=!!e[n].sequential;i=Mm(i,zc(o,e[n],a?i.changes.newLength:o.doc.length),a)}let s=new st(o,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return oM(t?rM(s):s)}function rM(o){let e=o.startState,t=!0;for(let s of e.facet(Pm)){let n=s(o);if(n===!1){t=!1;break}Array.isArray(n)&&(t=t===!0?n:nM(t,n))}if(t!==!0){let s,n;if(t===!1)n=o.changes.invertedDesc,s=it.empty(e.doc.length);else{let a=o.changes.filter(t);s=a.changes,n=a.filtered.invertedDesc}o=new st(e,s,o.selection&&o.selection.map(n),ue.mapEffects(o.effects,n),o.annotations,o.scrollIntoView)}let i=e.facet(Lm);for(let s=i.length-1;s>=0;s--){let n=i[s](o);n instanceof st?o=n:Array.isArray(n)&&n.length==1&&n[0]instanceof st?o=n[0]:o=Rm(e,wn(n),!1)}return o}function oM(o){let e=o.startState,t=e.facet(Nm),i=o;for(let s=t.length-1;s>=0;s--){let n=t[s](o);n&&Object.keys(n).length&&(i=Mm(o,zc(e,n,o.changes.newLength),!0))}return i==o?o:new st(e,o.changes,o.selection,i.effects,i.annotations,i.scrollIntoView)}const aM=[];function wn(o){return o==null?aM:Array.isArray(o)?o:[o]}var Ot=function(o){return o[o.Word=0]="Word",o[o.Space=1]="Space",o[o.Other=2]="Other",o}(Ot||(Ot={}));const lM=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Xc;try{Xc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function cM(o){if(Xc)return Xc.test(o);for(let e=0;e<o.length;e++){let t=o[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||lM.test(t)))return!0}return!1}function hM(o){return e=>{if(!/\S/.test(e))return Ot.Space;if(cM(e))return Ot.Word;for(let t=0;t<o.length;t++)if(e.indexOf(o[t])>-1)return Ot.Word;return Ot.Other}}class ve{constructor(e,t,i,s,n,a){this.config=e,this.doc=t,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=n,a&&(a._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Ps(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Ps(this,i),ea(this,i)}update(...e){return Rm(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:s}=t;for(let a of e.effects)a.is(Pr.reconfigure)?(t&&(s=new Map,t.compartments.forEach((l,c)=>s.set(c,l)),t=null),s.set(a.value.compartment,a.value.extension)):a.is(ue.reconfigure)?(t=null,i=a.value):a.is(ue.appendConfig)&&(t=null,i=wn(i).concat(a.value));let n;t?n=e.startState.values.slice():(t=Jo.resolve(i,s,this),n=new ve(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values),new ve(t,e.newDoc,e.newSelection,n,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:G.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),s=this.changes(i.changes),n=[i.range],a=wn(i.effects);for(let l=1;l<t.ranges.length;l++){let c=e(t.ranges[l]),d=this.changes(c.changes),p=d.map(s);for(let b=0;b<l;b++)n[b]=n[b].map(p);let g=s.mapDesc(d,!0);n.push(c.range.map(g)),s=s.compose(p),a=ue.mapEffects(a,p).concat(ue.mapEffects(wn(c.effects),g))}return{changes:s,selection:G.create(n,t.mainIndex),effects:a}}changes(e=[]){return e instanceof it?e:it.of(e,this.doc.length,this.facet(ve.lineSeparator))}toText(e){return _e.of(e.split(this.facet(ve.lineSeparator)||Ic))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Ps(this,t),ea(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof ct&&(t[i]=s.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i)for(let n in i){let a=i[n],l=e[n];s.push(a.init(c=>a.spec.fromJSON(l,c)))}return ve.create({doc:e.doc,selection:G.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=Jo.resolve(e.extensions||[],new Map),i=e.doc instanceof _e?e.doc:_e.of((e.doc||"").split(t.staticFacet(ve.lineSeparator)||Ic)),s=e.selection?e.selection instanceof G?e.selection:G.single(e.selection.anchor,e.selection.head):G.single(0);return Sm(s,i.length),t.staticFacet(Em)||(s=s.asSingle()),new ve(t,i,s,t.dynamicSlots.map(()=>null),(n,a)=>a.create(n),null)}get tabSize(){return this.facet(ve.tabSize)}get lineBreak(){return this.facet(ve.lineSeparator)||`
`}get readOnly(){return this.facet(Dm)}phrase(e){for(let t of this.facet(ve.phrases))if(Object.prototype.hasOwnProperty.call(t,e))return t[e];return e}languageDataAt(e,t,i=-1){let s=[];for(let n of this.facet(Am))for(let a of n(this,t,i))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return hM(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:s}=this.doc.lineAt(e),n=this.charCategorizer(e),a=e-i,l=e-i;for(;a>0;){let c=$t(t,a,!1);if(n(t.slice(c,a))!=Ot.Word)break;a=c}for(;l<s;){let c=$t(t,l);if(n(t.slice(l,c))!=Ot.Word)break;l=c}return a==l?null:G.range(a+i,l+i)}}ve.allowMultipleSelections=Em,ve.tabSize=re.define({combine:o=>o.length?o[0]:4}),ve.lineSeparator=$m,ve.readOnly=Dm,ve.phrases=re.define(),ve.languageData=Am,ve.changeFilter=Pm,ve.transactionFilter=Lm,ve.transactionExtender=Nm,Pr.reconfigure=ue.define();function es(o,e,t={}){let i={};for(let s of o)for(let n of Object.keys(s)){let a=s[n],l=i[n];if(l===void 0)i[n]=a;else if(!(l===a||a===void 0))if(Object.hasOwnProperty.call(t,n))i[n]=t[n](l,a);else throw new Error("Config merge conflict for field "+n)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}const Yc="ͼ",Im=typeof Symbol>"u"?"__"+Yc:Symbol.for(Yc),Hc=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ts{constructor(e,t){this.rules=[];let{finish:i}=t||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function n(a,l,c,d){let p=[],g=/^@(\w+)\b/.exec(a[0]),b=g&&g[1]=="keyframes";if(g&&l==null)return c.push(a[0]+";");for(let O in l){let r=l[O];if(/&/.test(O))n(O.split(/,\s*/).map(h=>a.map(u=>h.replace(/&/,u))).reduce((h,u)=>h.concat(u)),r,c);else if(r&&typeof r=="object"){if(!g)throw new RangeError("The value of a property ("+O+") should be a primitive value.");n(s(O),r,p,b)}else r!=null&&p.push(O.replace(/_.*/,"").replace(/[A-Z]/g,h=>"-"+h.toLowerCase())+": "+r+";")}(p.length||b)&&c.push((i&&!g&&!d?a.map(i):a).join(", ")+" {"+p.join(" ")+"}")}for(let a in e)n(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Bm[Im]||1;return Bm[Im]=e+1,Yc+e.toString(36)}static mount(e,t,i){let s=e[Hc],n=i&&i.nonce;s?n&&s.setNonce(n):s=new dM(e,n),s.mount(Array.isArray(t)?t:[t],e)}}let Qm=new Map;class dM{constructor(e,t){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let n=Qm.get(i);if(n)return e[Hc]=n;this.sheet=new s.CSSStyleSheet,Qm.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Hc]=this}mount(e,t){let i=this.sheet,s=0,n=0;for(let a=0;a<e.length;a++){let l=e[a],c=this.modules.indexOf(l);if(c<n&&c>-1&&(this.modules.splice(c,1),n--,c=-1),c==-1){if(this.modules.splice(n++,0,l),i)for(let d=0;d<l.rules.length;d++)i.insertRule(l.rules[d],s++)}else{for(;n<c;)s+=this.modules[n++].rules.length;s+=l.rules.length,n++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let c=0;c<this.modules.length;c++)a+=this.modules[c].getRules()+`
`;this.styleTag.textContent=a;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}class Ls{eq(e){return this==e}range(e,t=e){return new Gc(e,t,this)}}Ls.prototype.startSide=Ls.prototype.endSide=0,Ls.prototype.point=!1,Ls.prototype.mapMode=lt.TrackDel;let Gc=class{constructor(e,t,i){this.from=e,this.to=t,this.value=i}};function jc(o,e){return o.from-e.from||o.value.startSide-e.value.startSide}class Uc{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let n=i?this.to:this.from;for(let a=s,l=n.length;;){if(a==l)return a;let c=a+l>>1,d=n[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-t;if(c==a)return d>=0?a:l;d>=0?l=c:a=c+1}}between(e,t,i,s){for(let n=this.findIndex(t,-1e9,!0),a=this.findIndex(i,1e9,!1,n);n<a;n++)if(s(this.from[n]+e,this.to[n]+e,this.value[n])===!1)return!1}map(e,t){let i=[],s=[],n=[],a=-1,l=-1;for(let c=0;c<this.value.length;c++){let d=this.value[c],p=this.from[c]+e,g=this.to[c]+e,b,O;if(p==g){let r=t.mapPos(p,d.startSide,d.mapMode);if(r==null||(b=O=r,d.startSide!=d.endSide&&(O=t.mapPos(p,d.endSide),O<b)))continue}else if(b=t.mapPos(p,d.startSide),O=t.mapPos(g,d.endSide),b>O||b==O&&d.startSide>0&&d.endSide<=0)continue;(O-b||d.endSide-d.startSide)<0||(a<0&&(a=b),d.point&&(l=Math.max(l,O-b)),i.push(d),s.push(b-a),n.push(O-a))}return{mapped:i.length?new Uc(s,n,i,l):null,pos:a}}}class Ae{constructor(e,t,i=Ae.empty,s){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=s}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:s=0,filterTo:n=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(i&&(t=t.slice().sort(jc)),this.isEmpty)return t.length?Ae.of(t):this;let l=new Fm(this,null,-1).goto(0),c=0,d=[],p=new is;for(;l.value||c<t.length;)if(c<t.length&&(l.from-t[c].from||l.startSide-t[c].value.startSide)>=0){let g=t[c++];p.addInner(g.from,g.to,g.value)||d.push(g)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(c==t.length||this.chunkEnd(l.chunkIndex)<t[c].from)&&(!a||s>this.chunkEnd(l.chunkIndex)||n<this.chunkPos[l.chunkIndex])&&p.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!a||s>l.to||n<l.from||a(l.from,l.to,l.value))&&(p.addInner(l.from,l.to,l.value)||d.push(new Gc(l.from,l.to,l.value))),l.next());return p.finishInner(this.nextLayer.isEmpty&&!d.length?Ae.empty:this.nextLayer.update({add:d,filter:a,filterFrom:s,filterTo:n}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],s=-1;for(let a=0;a<this.chunk.length;a++){let l=this.chunkPos[a],c=this.chunk[a],d=e.touchesRange(l,l+c.length);if(d===!1)s=Math.max(s,c.maxPoint),t.push(c),i.push(e.mapPos(l));else if(d===!0){let{mapped:p,pos:g}=c.map(l,e);p&&(s=Math.max(s,p.maxPoint),t.push(p),i.push(g))}}let n=this.nextLayer.map(e);return t.length==0?n:new Ae(i,t,n,s)}between(e,t,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let n=this.chunkPos[s],a=this.chunk[s];if(t>=n&&e<=n+a.length&&a.between(n,e-n,t-n,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Lr.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Lr.from(e).goto(t)}static compare(e,t,i,s,n=-1){let a=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=n),l=t.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=n),c=Vm(a,l,i),d=new Nr(a,c,n),p=new Nr(l,c,n);i.iterGaps((g,b,O)=>Wm(d,g,p,b,O,s)),i.empty&&i.length==0&&Wm(d,0,p,0,0,s)}static eq(e,t,i=0,s){s==null&&(s=1e9);let n=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0),a=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(n.length!=a.length)return!1;if(!n.length)return!0;let l=Vm(n,a),c=new Nr(n,l,0).goto(i),d=new Nr(a,l,0).goto(i);for(;;){if(c.to!=d.to||!qc(c.active,d.active)||c.point&&(!d.point||!c.point.eq(d.point)))return!1;if(c.to>s)return!0;c.next(),d.next()}}static spans(e,t,i,s,n=-1){var a;let l=new Nr(e,null,n,(a=s.filterPoint)===null||a===void 0?void 0:a.bind(s)).goto(t),c=t,d=l.openStart;for(;;){let p=Math.min(l.to,i);if(l.point?(s.point(c,p,l.point,l.activeForPoint(l.to),d),d=l.openEnd(p)+(l.to>p?1:0)):p>c&&(s.span(c,p,l.active,d),d=l.openEnd(p)),l.to>i)break;c=l.to,l.next()}return d}static of(e,t=!1){let i=new is;for(let s of e instanceof Gc?[e]:t?uM(e):e)i.add(s.from,s.to,s.value);return i.finish()}}Ae.empty=new Ae([],[],null,-1);function uM(o){if(o.length>1)for(let e=o[0],t=1;t<o.length;t++){let i=o[t];if(jc(e,i)>0)return o.slice().sort(jc);e=i}return o}Ae.empty.nextLayer=Ae.empty;class is{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Uc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new is)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Ae.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=new Ae(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Vm(o,e,t){let i=new Map;for(let n of o)for(let a=0;a<n.chunk.length;a++)n.chunk[a].maxPoint<=0&&i.set(n.chunk[a],n.chunkPos[a]);let s=new Set;for(let n of e)for(let a=0;a<n.chunk.length;a++){let l=i.get(n.chunk[a]);l!=null&&(t?t.mapPos(l):l)==n.chunkPos[a]&&!(t!=null&&t.touchesRange(l,l+n.chunk[a].length))&&s.add(n.chunk[a])}return s}class Fm{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Lr{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let n=0;n<e.length;n++)for(let a=e[n];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&s.push(new Fm(a,t,i,n));return s.length==1?s[0]:new Lr(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Zc(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Zc(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Zc(this.heap,0)}}}function Zc(o,e){for(let t=o[e];;){let i=(e<<1)+1;if(i>=o.length)break;let s=o[i];if(i+1<o.length&&s.compare(o[i+1])>=0&&(s=o[i+1],i++),t.compare(s)<0)break;o[i]=t,o[e]=s,e=i}}class Nr{constructor(e,t,i,s=()=>!0){this.minPoint=i,this.filterPoint=s,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Lr.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ta(this.active,e),ta(this.activeTo,e),ta(this.activeRank,e),this.minActive=zm(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:n}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=n;)t++;ia(this.active,t,i),ia(this.activeTo,t,s),ia(this.activeRank,t,n),e&&ia(e,t,this.cursor.from),this.minActive=zm(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null,s=0;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&ta(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else if(!this.filterPoint(this.cursor.from,this.cursor.to,this.cursor.value,this.cursor.rank))this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.from<e&&(s=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){let n=0;for(;n<i.length&&i[n]<e;)n++;this.openStart=n+s}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Wm(o,e,t,i,s,n){o.goto(e),t.goto(i);let a=i+s,l=i,c=i-e;for(;;){let d=o.to+c-t.to||o.endSide-t.endSide,p=d<0?o.to+c:t.to,g=Math.min(p,a);if(o.point||t.point?o.point&&t.point&&(o.point==t.point||o.point.eq(t.point))&&qc(o.activeForPoint(o.to+c),t.activeForPoint(t.to))||n.comparePoint(l,g,o.point,t.point):g>l&&!qc(o.active,t.active)&&n.compareRange(l,g,o.active,t.active),p>a)break;l=p,d<=0&&o.next(),d>=0&&t.next()}}function qc(o,e){if(o.length!=e.length)return!1;for(let t=0;t<o.length;t++)if(o[t]!=e[t]&&!o[t].eq(e[t]))return!1;return!0}function ta(o,e){for(let t=e,i=o.length-1;t<i;t++)o[t]=o[t+1];o.pop()}function ia(o,e,t){for(let i=o.length-1;i>=e;i--)o[i+1]=o[i];o[e]=t}function zm(o,e){let t=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||o[s].endSide-o[t].endSide)<0&&(t=s,i=e[s]);return t}for(var ss={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},sa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},fM=typeof navigator<"u"&&/Mac/.test(navigator.platform),pM=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ht=0;ht<10;ht++)ss[48+ht]=ss[96+ht]=String(ht);for(var ht=1;ht<=24;ht++)ss[ht+111]="F"+ht;for(var ht=65;ht<=90;ht++)ss[ht]=String.fromCharCode(ht+32),sa[ht]=String.fromCharCode(ht);for(var Kc in ss)sa.hasOwnProperty(Kc)||(sa[Kc]=ss[Kc]);function gM(o){var e=fM&&o.metaKey&&o.shiftKey&&!o.ctrlKey&&!o.altKey||pM&&o.shiftKey&&o.key&&o.key.length==1||o.key=="Unidentified",t=!e&&o.key||(o.shiftKey?sa:ss)[o.keyCode]||o.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function na(o){let e;return o.nodeType==11?e=o.getSelection?o:o.ownerDocument:e=o,e.getSelection()}function kn(o,e){return e?o==e||o.contains(e.nodeType!=1?e.parentNode:e):!1}function mM(){let o=document.activeElement;for(;o&&o.shadowRoot;)o=o.shadowRoot.activeElement;return o}function Jc(o,e){if(!e.anchorNode)return!1;try{return kn(o,e.anchorNode)}catch{return!1}}function Dr(o){return o.nodeType==3?Mr(o,0,o.nodeValue.length).getClientRects():o.nodeType==1?o.getClientRects():[]}function ra(o,e,t,i){return t?Xm(o,e,t,i,-1)||Xm(o,e,t,i,1):!1}function eh(o){for(var e=0;;e++)if(o=o.previousSibling,!o)return e}function Xm(o,e,t,i,s){for(;;){if(o==t&&e==i)return!0;if(e==(s<0?0:oa(o))){if(o.nodeName=="DIV")return!1;let n=o.parentNode;if(!n||n.nodeType!=1)return!1;e=eh(o)+(s<0?0:1),o=n}else if(o.nodeType==1){if(o=o.childNodes[e+(s<0?-1:0)],o.nodeType==1&&o.contentEditable=="false")return!1;e=s<0?oa(o):0}else return!1}}function oa(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}const Ym={left:0,right:0,top:0,bottom:0};function aa(o,e){let t=e?o.left:o.right;return{left:t,right:t,top:o.top,bottom:o.bottom}}function bM(o){return{left:0,right:o.innerWidth,top:0,bottom:o.innerHeight}}function yM(o,e,t,i,s,n,a,l){let c=o.ownerDocument,d=c.defaultView;for(let p=o;p;)if(p.nodeType==1){let g,b=p==c.body;if(b)g=bM(d);else{if(p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.parentNode;continue}let h=p.getBoundingClientRect();g={left:h.left,right:h.left+p.clientWidth,top:h.top,bottom:h.top+p.clientHeight}}let O=0,r=0;if(s=="nearest")e.top<g.top?(r=-(g.top-e.top+a),t>0&&e.bottom>g.bottom+r&&(r=e.bottom-g.bottom+r+a)):e.bottom>g.bottom&&(r=e.bottom-g.bottom+a,t<0&&e.top-r<g.top&&(r=-(g.top+r-e.top+a)));else{let h=e.bottom-e.top,u=g.bottom-g.top;r=(s=="center"&&h<=u?e.top+h/2-u/2:s=="start"||s=="center"&&t<0?e.top-a:e.bottom-u+a)-g.top}if(i=="nearest"?e.left<g.left?(O=-(g.left-e.left+n),t>0&&e.right>g.right+O&&(O=e.right-g.right+O+n)):e.right>g.right&&(O=e.right-g.right+n,t<0&&e.left<g.left+O&&(O=-(g.left+O-e.left+n))):O=(i=="center"?e.left+(e.right-e.left)/2-(g.right-g.left)/2:i=="start"==l?e.left-n:e.right-(g.right-g.left)+n)-g.left,O||r)if(b)d.scrollBy(O,r);else{if(r){let h=p.scrollTop;p.scrollTop+=r,r=p.scrollTop-h}if(O){let h=p.scrollLeft;p.scrollLeft+=O,O=p.scrollLeft-h}e={left:e.left-O,top:e.top-r,right:e.right-O,bottom:e.bottom-r}}if(b)break;p=p.assignedSlot||p.parentNode,i=s="nearest"}else if(p.nodeType==11)p=p.host;else break}class OM{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let Sn=null;function Hm(o){if(o.setActive)return o.setActive();if(Sn)return o.focus(Sn);let e=[];for(let t=o;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(o.focus(Sn==null?{get preventScroll(){return Sn={preventScroll:!0},!0}}:void 0),!Sn){Sn=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],n=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=n&&(i.scrollLeft=n)}}}let Gm;function Mr(o,e,t=e){let i=Gm||(Gm=document.createRange());return i.setEnd(o,t),i.setStart(o,e),i}function Rr(o,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},s=new KeyboardEvent("keydown",i);s.synthetic=!0,o.dispatchEvent(s);let n=new KeyboardEvent("keyup",i);return n.synthetic=!0,o.dispatchEvent(n),s.defaultPrevented||n.defaultPrevented}function xM(o){for(;o;){if(o&&(o.nodeType==9||o.nodeType==11&&o.host))return o;o=o.assignedSlot||o.parentNode}return null}function jm(o){for(;o.attributes.length;)o.removeAttributeNode(o.attributes[0])}class dt{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new dt(e.parentNode,eh(e),t)}static after(e,t){return new dt(e.parentNode,eh(e)+1,t)}}const th=[];class We{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,i=null,s;for(let n of this.children){if(n.dirty){if(!n.dom&&(s=i?i.nextSibling:t.firstChild)){let a=We.get(s);(!a||!a.parent&&a.constructor==n.constructor)&&n.reuseDOM(s)}n.sync(e),n.dirty=0}if(s=i?i.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&s!=n.dom&&(e.written=!0),n.dom.parentNode==t)for(;s&&s!=n.dom;)s=Um(s);else t.insertBefore(n.dom,s);i=n.dom}for(s=i?i.nextSibling:t.firstChild,s&&e&&e.node==t&&(e.written=!0);s;)s=Um(s)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let s=oa(e)==0?0:t==0?-1:1;for(;;){let n=e.parentNode;if(n==this.dom)break;s==0&&n.firstChild!=n.lastChild&&(e==n.firstChild?s=-1:s=1),e=n}s<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!We.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,n=0;;s++){let a=this.children[s];if(a.dom==i)return n;n+=a.length+a.breakAfter}}domBoundsAround(e,t,i=0){let s=-1,n=-1,a=-1,l=-1;for(let c=0,d=i,p=i;c<this.children.length;c++){let g=this.children[c],b=d+g.length;if(d<e&&b>t)return g.domBoundsAround(e,t,d);if(b>=e&&s==-1&&(s=c,n=d),d>t&&g.dom.parentNode==this.dom){a=c,l=p;break}p=b,d=b+g.breakAfter}return{from:n,to:l<0?i+this.length:l,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=th){this.markDirty();for(let s=e;s<t;s++){let n=this.children[s];n.parent==this&&n.destroy()}this.children.splice(e,t-e,...i);for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Zm(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,s,n,a){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}We.prototype.breakAfter=0;function Um(o){let e=o.nextSibling;return o.parentNode.removeChild(o),e}class Zm{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function qm(o,e,t,i,s,n,a,l,c){let{children:d}=o,p=d.length?d[e]:null,g=n.length?n[n.length-1]:null,b=g?g.breakAfter:a;if(!(e==i&&p&&!a&&!b&&n.length<2&&p.merge(t,s,n.length?g:null,t==0,l,c))){if(i<d.length){let O=d[i];O&&s<O.length?(e==i&&(O=O.split(s),s=0),!b&&g&&O.merge(0,s,g,!0,0,c)?n[n.length-1]=O:(s&&O.merge(0,s,null,!1,0,c),n.push(O))):O!=null&&O.breakAfter&&(g?g.breakAfter=1:a=1),i++}for(p&&(p.breakAfter=a,t>0&&(!a&&n.length&&p.merge(t,p.length,n[0],!1,l,0)?p.breakAfter=n.shift().breakAfter:(t<p.length||p.children.length&&p.children[p.children.length-1].length==0)&&p.merge(t,p.length,null,!1,l,0),e++));e<i&&n.length;)if(d[i-1].become(n[n.length-1]))i--,n.pop(),c=n.length?0:l;else if(d[e].become(n[0]))e++,n.shift(),l=n.length?0:c;else break;!n.length&&e&&i<d.length&&!d[e-1].breakAfter&&d[i].merge(0,0,d[e-1],!1,l,c)&&e--,(e<i||n.length)&&o.replaceChildren(e,i,n)}}function Km(o,e,t,i,s,n){let a=o.childCursor(),{i:l,off:c}=a.findPos(t,1),{i:d,off:p}=a.findPos(e,-1),g=e-t;for(let b of i)g+=b.length;o.length+=g,qm(o,d,p,l,c,i,0,s,n)}let Pt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},ih=typeof document<"u"?document:{documentElement:{style:{}}};const sh=/Edge\/(\d+)/.exec(Pt.userAgent),Jm=/MSIE \d/.test(Pt.userAgent),nh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Pt.userAgent),la=!!(Jm||nh||sh),eb=!la&&/gecko\/(\d+)/i.test(Pt.userAgent),rh=!la&&/Chrome\/(\d+)/.exec(Pt.userAgent),tb="webkitFontSmoothing"in ih.documentElement.style,ib=!la&&/Apple Computer/.test(Pt.vendor),sb=ib&&(/Mobile\/\w+/.test(Pt.userAgent)||Pt.maxTouchPoints>2);var ce={mac:sb||/Mac/.test(Pt.platform),windows:/Win/.test(Pt.platform),linux:/Linux|X11/.test(Pt.platform),ie:la,ie_version:Jm?ih.documentMode||6:nh?+nh[1]:sh?+sh[1]:0,gecko:eb,gecko_version:eb?+(/Firefox\/(\d+)/.exec(Pt.userAgent)||[0,0])[1]:0,chrome:!!rh,chrome_version:rh?+rh[1]:0,ios:sb,android:/Android\b/.test(Pt.userAgent),webkit:tb,safari:ib,webkit_version:tb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:ih.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const vM=256;class ns extends We{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof ns)||this.length-(t-e)+i.length>vM)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new ns(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new dt(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return oh(this.dom,e,t)}}class hi extends We{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let s of t)s.setParent(this)}setAttrs(e){if(jm(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,s,n,a){return i&&(!(i instanceof hi&&i.mark.eq(this.mark))||e&&n<=0||t<this.length&&a<=0)?!1:(Km(this,e,t,i?i.children:[],n-1,a-1),this.markDirty(),!0)}split(e){let t=[],i=0,s=-1,n=0;for(let l of this.children){let c=i+l.length;c>e&&t.push(i<e?l.split(e-i):l),s<0&&i>=e&&(s=n),i=c,n++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new hi(this.mark,t,a)}domAtPos(e){return ob(this.dom,this.children,e)}coordsAt(e,t){return lb(this,e,t)}}function oh(o,e,t){let i=o.nodeValue.length;e>i&&(e=i);let s=e,n=e,a=0;e==0&&t<0||e==i&&t>=0?ce.chrome||ce.gecko||(e?(s--,a=1):(n++,a=-1)):t<0?s--:n++;let l=Mr(o,s,n).getClientRects();if(!l.length)return Ym;let c=l[(a?a<0:t>=0)?0:l.length-1];return ce.safari&&!a&&c.width==0&&(c=Array.prototype.find.call(l,d=>d.width)||c),a?aa(c,a<0):c||null}class rs extends We{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||rs)(e,t,i)}split(e){let t=rs.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,s,n,a){return i&&(!(i instanceof rs)||!this.widget.compare(i.widget)||e>0&&n<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof rs&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return _e.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):_e.empty}domAtPos(e){return e==0?dt.before(this.dom):dt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),s=null;if(!i.length)return Ym;for(let n=e>0?i.length-1:0;s=i[n],!(e>0?n==0:n==i.length-1||s.top<s.bottom);n+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?s:aa(s,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class nb extends rs{domAtPos(e){let{topView:t,text:i}=this.widget;return t?ah(e,0,t,i,(s,n)=>s.domAtPos(n),s=>new dt(i,Math.min(s,i.nodeValue.length))):new dt(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:s}=this.widget;return i?rb(e,t,i,s):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:s}=this.widget;return i?ah(e,t,i,s,(n,a,l)=>n.coordsAt(a,l),(n,a)=>oh(s,n,a)):oh(s,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function ah(o,e,t,i,s,n){if(t instanceof hi){for(let a of t.children){let l=kn(a.dom,i),c=l?i.nodeValue.length:a.length;if(o<c||o==c&&a.getSide()<=0)return l?ah(o,e,a,i,s,n):s(a,o,e);o-=c}return s(t,t.length,-1)}else return t.dom==i?n(o,e):s(t,o,e)}function rb(o,e,t,i){if(t instanceof hi)for(let s of t.children){let n=0,a=kn(s.dom,i);if(kn(s.dom,o))return n+(a?rb(o,e,s,i):s.localPosFromDOM(o,e));n+=a?i.nodeValue.length:s.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(o,e)}class Cn extends We{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Cn&&e.side==this.side}split(){return new Cn(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return dt.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=wM(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return _e.empty}}ns.prototype.children=rs.prototype.children=Cn.prototype.children=th;function wM(o,e){let t=o.parent,i=t?t.children.indexOf(o):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let s=t.children[i+e];if(s instanceof ns){let n=s.coordsAt(e<0?s.length:0,e);if(n)return n}i+=e}else if(t instanceof hi&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let s=t.dom.lastChild;if(s&&s.nodeName=="BR")return s.getClientRects()[0];break}}function ob(o,e,t){let i=0;for(let s=0;i<e.length;i++){let n=e[i],a=s+n.length;if(!(a==s&&n.getSide()<=0)){if(t>s&&t<a&&n.dom.parentNode==o)return n.domAtPos(t-s);if(t<=s)break;s=a}}for(;i>0;i--){let s=e[i-1].dom;if(s.parentNode==o)return dt.after(s)}return new dt(o,0)}function ab(o,e,t){let i,{children:s}=o;t>0&&e instanceof hi&&s.length&&(i=s[s.length-1])instanceof hi&&i.mark.eq(e.mark)?ab(i,e.children[0],t-1):(s.push(e),e.setParent(o)),o.length+=e.length}function lb(o,e,t){for(let n=0,a=0;a<o.children.length;a++){let l=o.children[a],c=n+l.length,d;if((t<=0||c==o.length||l.getSide()>0?c>=e:c>e)&&(e<c||a+1==o.children.length||(d=o.children[a+1]).length||d.getSide()>0)){let p=0;if(c==n){if(l.getSide()<=0)continue;p=t=-l.getSide()}let g=l.coordsAt(Math.max(0,e-n),t);return p&&g?aa(g,t<0):g}n=c}let i=o.dom.lastChild;if(!i)return o.dom.getBoundingClientRect();let s=Dr(i);return s[s.length-1]||null}function lh(o,e){for(let t in o)t=="class"&&e.class?e.class+=" "+o.class:t=="style"&&e.style?e.style+=";"+o.style:e[t]=o[t];return e}function ch(o,e){if(o==e)return!0;if(!o||!e)return!1;let t=Object.keys(o),i=Object.keys(e);if(t.length!=i.length)return!1;for(let s of t)if(i.indexOf(s)==-1||o[s]!==e[s])return!1;return!0}function hh(o,e,t){if(e)for(let i in e)t&&i in t||o.removeAttribute(i);if(t)for(let i in t)e&&e[i]==t[i]||o.setAttribute(i,t[i])}class Li{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var $e=function(o){return o[o.Text=0]="Text",o[o.WidgetBefore=1]="WidgetBefore",o[o.WidgetAfter=2]="WidgetAfter",o[o.WidgetRange=3]="WidgetRange",o}($e||($e={}));class oe extends Ls{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new ca(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Ns(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:n,end:a}=cb(e,t);i=(n?t?-3e8:-1:5e8)-1,s=(a?t?2e8:1:-6e8)+1}return new Ns(e,i,s,t,e.widget||null,!0)}static line(e){return new Ir(e)}static set(e,t=!1){return Ae.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}oe.none=Ae.empty;class ca extends oe{constructor(e){let{start:t,end:i}=cb(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof ca&&this.tagName==e.tagName&&this.class==e.class&&ch(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ca.prototype.point=!1;class Ir extends oe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ir&&ch(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Ir.prototype.mapMode=lt.TrackBefore,Ir.prototype.point=!0;class Ns extends oe{constructor(e,t,i,s,n,a){super(t,i,n,e),this.block=s,this.isReplace=a,this.mapMode=s?t<=0?lt.TrackBefore:lt.TrackAfter:lt.TrackDel}get type(){return this.startSide<this.endSide?$e.WidgetRange:this.startSide<=0?$e.WidgetBefore:$e.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Ns&&kM(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Ns.prototype.point=!0;function cb(o,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=o;return t==null&&(t=o.inclusive),i==null&&(i=o.inclusive),{start:t??e,end:i??e}}function kM(o,e){return o==e||!!(o&&e&&o.compare(e))}function dh(o,e,t,i=0){let s=t.length-1;s>=0&&t[s]+i>=o?t[s]=Math.max(t[s],e):t.push(o,e)}class xt extends We{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,s,n,a){if(i){if(!(i instanceof xt))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),Km(this,e,t,i?i.children:[],n,a),!0}split(e){let t=new xt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:s}=this.childPos(e);s&&(t.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let n=i;n<this.children.length;n++)t.append(this.children[n],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ch(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ab(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=lh(t,this.attrs||{})),i&&(this.attrs=lh({class:i},this.attrs||{}))}domAtPos(e){return ob(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(jm(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(hh(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&We.get(i)instanceof hi;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((t=We.get(i))===null||t===void 0?void 0:t.isEditable)==!1&&(!ce.ios||!this.children.some(s=>s instanceof ns))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof ns))return null;let i=Dr(t.dom);if(i.length!=1)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return lb(this,e,t)}become(e){return!1}get type(){return $e.Text}static find(e,t){for(let i=0,s=0;i<e.children.length;i++){let n=e.children[i],a=s+n.length;if(a>=t){if(n instanceof xt)return n;if(a>t)break}s=a+n.breakAfter}return null}}class Ds extends We{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,s,n,a){return i&&(!(i instanceof Ds)||!this.widget.compare(i.widget)||e>0&&n<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?dt.before(this.dom):dt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Ds(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return th}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):_e.empty}domBoundsAround(){return null}become(e){return e instanceof Ds&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class uh{constructor(e,t,i,s){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsBelow=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Ds&&e.type==$e.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new xt),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(ha(new Cn(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:n,lineBreak:a,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=n,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,i)),this.getLine().append(ha(new ns(this.text.slice(this.textOff,this.textOff+s)),t),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,t,i,s){this.buildText(t-e,i,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,i,s,n){let a=t-e;if(i instanceof Ns)if(i.block){let{type:l}=i;l==$e.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ds(i.widget||new hb("div"),a,l))}else{let l=rs.create(i.widget||new hb("span"),a,i.startSide),c=this.atCursorPos&&!l.isEditable&&n<=s.length&&(e<t||i.startSide>0),d=!l.isEditable&&(e<t||i.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(s),c&&(p.append(ha(new Cn(1),s),n),n=s.length+Math.max(0,n-s.length)),p.append(ha(l,s),n),this.atCursorPos=d,this.pendingBuffer=d?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=n)}filterPoint(e,t,i,s){if(s<this.disallowBlockEffectsBelow&&i instanceof Ns){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}return!0}static build(e,t,i,s,n){let a=new uh(e,t,i,n);return a.openEnd=Ae.spans(s,t,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function ha(o,e){for(let t of e)o=new hi(t,[o],o.length);return o}class hb extends Li{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const SM=[],db=re.define(),ub=re.define(),fb=re.define(),pb=re.define(),fh=re.define(),gb=re.define(),ph=ue.define({map:(o,e)=>o.map(e)}),mb=ue.define({map:(o,e)=>o.map(e)});class _n{constructor(e,t="nearest",i="nearest",s=5,n=5){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=n}map(e){return e.empty?this:new _n(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const bb=ue.define({map:(o,e)=>o.map(e)});function Yt(o,e,t){let i=o.facet(pb);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Br=re.define({combine:o=>o.length?o[0]:!0});class CM{constructor(e,t){this.field=e,this.get=t}}class mt{from(e){return new CM(this,e)}static define(){return new mt}}mt.decorations=mt.define(),mt.atomicRanges=mt.define(),mt.scrollMargins=mt.define();let _M=0;const Qr=re.define();class et{constructor(e,t,i){this.id=e,this.create=t,this.fields=i,this.extension=Qr.of(this)}static define(e,t){let{eventHandlers:i,provide:s,decorations:n}=t||{},a=[];if(s)for(let l of Array.isArray(s)?s:[s])a.push(l);return i&&a.push(yb.from(l=>({plugin:l,handlers:i}))),n&&a.push(mt.decorations.from(n)),new et(_M++,e,a)}static fromClass(e,t){return et.define(i=>new e(i),t)}}const yb=mt.define();class gh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}takeField(e,t){if(this.spec)for(let{field:i,get:s}of this.spec.fields)i==e&&t.push(s(this.value))}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Yt(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Yt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Yt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Ob=re.define(),xb=re.define(),Ms=re.define(),Vr=re.define();class Ni{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new Ni(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let s=0,n=0,a=0,l=0;;s++){let c=s==e.length?null:e[s],d=a-l,p=c?c.fromB:1e9;for(;n<t.length&&t[n]<p;){let g=t[n],b=t[n+1],O=Math.max(l,g),r=Math.min(p,b);if(O<=r&&new Ni(O+d,r+d,O,r).addToSet(i),b>p)break;n+=2}if(!c)return i;new Ni(c.fromA,c.toA,c.fromB,c.toB).addToSet(i),a=c.toA,l=c.toB}}}class vb{constructor(e,t,i=SM){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=it.empty(this.startState.doc.length);for(let a of i)this.changes=this.changes.compose(a.changes);let s=[];this.changes.iterChangedRanges((a,l,c,d)=>s.push(new Ni(a,l,c,d))),this.changedRanges=s;let n=e.hasFocus;n!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=n,this.flags|=1)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var we=function(o){return o[o.LTR=0]="LTR",o[o.RTL=1]="RTL",o}(we||(we={}));const mh=we.LTR,TM=we.RTL;function wb(o){let e=[];for(let t=0;t<o.length;t++)e.push(1<<+o[t]);return e}const AM=wb("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),EM=wb("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),bh=Object.create(null),di=[];for(let o of["()","[]","{}"]){let e=o.charCodeAt(0),t=o.charCodeAt(1);bh[e]=t,bh[t]=-e}function $M(o){return o<=247?AM[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?EM[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8203||o==8204?256:1}const PM=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class Tn{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?TM:mh}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,s){let n=-1;for(let a=0;a<e.length;a++){let l=e[a];if(l.from<=t&&l.to>=t){if(l.level==i)return a;(n<0||(s!=0?s<0?l.from<t:l.to>t:e[n].level>l.level))&&(n=a)}}if(n<0)throw new RangeError("Index out of range");return n}}const Be=[];function LM(o,e){let t=o.length,i=e==mh?1:2,s=e==mh?2:1;if(!o||i==1&&!PM.test(o))return kb(t);for(let a=0,l=i,c=i;a<t;a++){let d=$M(o.charCodeAt(a));d==512?d=l:d==8&&c==4&&(d=16),Be[a]=d==4?2:d,d&7&&(c=d),l=d}for(let a=0,l=i,c=i;a<t;a++){let d=Be[a];if(d==128)a<t-1&&l==Be[a+1]&&l&24?d=Be[a]=l:Be[a]=256;else if(d==64){let p=a+1;for(;p<t&&Be[p]==64;)p++;let g=a&&l==8||p<t&&Be[p]==8?c==1?1:8:256;for(let b=a;b<p;b++)Be[b]=g;a=p-1}else d==8&&c==1&&(Be[a]=1);l=d,d&7&&(c=d)}for(let a=0,l=0,c=0,d,p,g;a<t;a++)if(p=bh[d=o.charCodeAt(a)])if(p<0){for(let b=l-3;b>=0;b-=3)if(di[b+1]==-p){let O=di[b+2],r=O&2?i:O&4?O&1?s:i:0;r&&(Be[a]=Be[di[b]]=r),l=b;break}}else{if(di.length==189)break;di[l++]=a,di[l++]=d,di[l++]=c}else if((g=Be[a])==2||g==1){let b=g==i;c=b?0:1;for(let O=l-3;O>=0;O-=3){let r=di[O+2];if(r&2)break;if(b)di[O+2]|=2;else{if(r&4)break;di[O+2]|=4}}}for(let a=0;a<t;a++)if(Be[a]==256){let l=a+1;for(;l<t&&Be[l]==256;)l++;let c=(a?Be[a-1]:i)==1,d=(l<t?Be[l]:i)==1,p=c==d?c?1:2:i;for(let g=a;g<l;g++)Be[g]=p;a=l-1}let n=[];if(i==1)for(let a=0;a<t;){let l=a,c=Be[a++]!=1;for(;a<t&&c==(Be[a]!=1);)a++;if(c)for(let d=a;d>l;){let p=d,g=Be[--d]!=2;for(;d>l&&g==(Be[d-1]!=2);)d--;n.push(new Tn(d,p,g?2:1))}else n.push(new Tn(l,a,0))}else for(let a=0;a<t;){let l=a,c=Be[a++]==2;for(;a<t&&c==(Be[a]==2);)a++;n.push(new Tn(l,a,c?1:2))}return n}function kb(o){return[new Tn(0,o,0)]}let Sb="";function NM(o,e,t,i,s){var n;let a=i.head-o.from,l=-1;if(a==0){if(!s||!o.length)return null;e[0].level!=t&&(a=e[0].side(!1,t),l=0)}else if(a==o.length){if(s)return null;let b=e[e.length-1];b.level!=t&&(a=b.side(!0,t),l=e.length-1)}l<0&&(l=Tn.find(e,a,(n=i.bidiLevel)!==null&&n!==void 0?n:-1,i.assoc));let c=e[l];a==c.side(s,t)&&(c=e[l+=s?1:-1],a=c.side(!s,t));let d=s==(c.dir==t),p=$t(o.text,a,d);if(Sb=o.text.slice(Math.min(a,p),Math.max(a,p)),p!=c.side(s,t))return G.cursor(p+o.from,d?-1:1,c.level);let g=l==(s?e.length-1:0)?null:e[l+(s?1:-1)];return!g&&c.level!=t?G.cursor(s?o.to:o.from,s?-1:1,t):g&&g.level<c.level?G.cursor(g.side(!s,t)+o.from,s?1:-1,g.level):G.cursor(p+o.from,s?-1:1,c.level)}const os="￿";class Cb{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ve.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=os}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s),this.readNode(s);let n=s.nextSibling;if(n==t)break;let a=We.get(s),l=We.get(n);(a&&l?a.breakAfter:(a?a.breakAfter:_b(s))||_b(n)&&(s.nodeName!="BR"||s.cmIgnore))&&this.lineBreak(),s=n}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let n=-1,a=1,l;if(this.lineSeparator?(n=t.indexOf(this.lineSeparator,i),a=this.lineSeparator.length):(l=s.exec(t))&&(n=l.index,a=l[0].length),this.append(t.slice(i,n<0?t.length:n)),n<0)break;if(this.lineBreak(),a>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=a-1);i=n+a}}readNode(e){if(e.cmIgnore)return;let t=We.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function _b(o){return o.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(o.nodeName)}class Tb{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Ab extends We{constructor(e){super(),this.view=e,this.compositionDeco=oe.none,this.decorations=[],this.pluginDecorationLength=0,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new xt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ni(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:a,toA:l})=>l<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=oe.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=MM(this.view,e.changes)),(ce.ie||ce.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,s=this.updateDeco(),n=QM(i,s,e.changes);return t=Ni.extendWithRanges(t,n),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.minWidth=this.minWidth?this.minWidth+"px":"";let n=ce.chrome||ce.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(n),this.dirty=0,n&&(n.written||i.selectionRange.focusNode!=n.node)&&(this.forceSelection=!0),this.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let n of this.children)n instanceof Ds&&n.widget instanceof Eb&&s.push(n.dom);i.updateGaps(s)}updateChildren(e,t){let i=this.childCursor(t);for(let s=e.length-1;;s--){let n=s>=0?e[s]:null;if(!n)break;let{fromA:a,toA:l,fromB:c,toB:d}=n,{content:p,breakAtStart:g,openStart:b,openEnd:O}=uh.build(this.view.state.doc,c,d,this.decorations,this.pluginDecorationLength),{i:r,off:h}=i.findPos(l,1),{i:u,off:m}=i.findPos(a,-1);qm(this,u,m,r,h,p,g,b,O)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection())||ce.ios&&this.view.inputState.rapidCompositionStart)return;let i=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,n=this.domAtPos(s.anchor),a=s.empty?n:this.domAtPos(s.head);if(ce.gecko&&s.empty&&DM(n)){let c=document.createTextNode("");this.view.observer.ignore(()=>n.node.insertBefore(c,n.node.childNodes[n.offset]||null)),n=a=new dt(c,0),i=!0}let l=this.view.observer.selectionRange;(i||!l.focusNode||!ra(n.node,n.offset,l.anchorNode,l.anchorOffset)||!ra(a.node,a.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{ce.android&&ce.chrome&&this.dom.contains(l.focusNode)&&VM(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let c=na(this.root);if(s.empty){if(ce.gecko){let d=IM(n.node,n.offset);if(d&&d!=3){let p=Pb(n.node,n.offset,d==1?1:-1);p&&(n=new dt(p,d==1?0:p.nodeValue.length))}}c.collapse(n.node,n.offset),s.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=s.bidiLevel)}else if(c.extend)c.collapse(n.node,n.offset),c.extend(a.node,a.offset);else{let d=document.createRange();s.anchor>s.head&&([n,a]=[a,n]),d.setEnd(a.node,a.offset),d.setStart(n.node,n.offset),c.removeAllRanges(),c.addRange(d)}}),this.view.observer.setSelectionRange(n,a)),this.impreciseAnchor=n.precise?null:new dt(l.anchorNode,l.anchorOffset),this.impreciseHead=a.precise?null:new dt(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=na(this.root);if(!e.empty||!e.assoc||!t.modify)return;let i=xt.find(this,e.head);if(!i)return;let s=i.posAtStart;if(e.head==s||e.head==s+i.length)return;let n=this.coordsAt(e.head,-1),a=this.coordsAt(e.head,1);if(!n||!a||n.bottom>a.top)return;let l=this.domAtPos(e.head+e.assoc);t.collapse(l.node,l.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(Br)?this.root.activeElement==this.dom:Jc(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let i=We.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(i<s.length||s instanceof xt)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,s=this.children.length-1;;s--){let n=this.children[s],a=i-n.breakAfter-n.length;if(e>a||e==a&&n.type!=$e.WidgetBefore&&n.type!=$e.WidgetAfter&&(!s||t==2||this.children[s-1].breakAfter||this.children[s-1].type==$e.WidgetBefore&&t>-2))return n.coordsAt(e-a,t);i=a}}measureVisibleLineHeights(){let e=[],{from:t,to:i}=this.view.viewState.viewport,s=this.view.contentDOM.clientWidth,n=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1;for(let l=0,c=0;c<this.children.length;c++){let d=this.children[c],p=l+d.length;if(p>i)break;if(l>=t){let g=d.dom.getBoundingClientRect();if(e.push(g.height),n){let b=d.dom.lastChild,O=b?Dr(b):[];if(O.length){let r=O[O.length-1],h=this.view.textDirection==we.LTR?r.right-g.left:g.right-r.left;h>a&&(a=h,this.minWidth=s,this.minWidthFrom=l,this.minWidthTo=p)}}}l=p+d.breakAfter}return e}measureTextSize(){for(let s of this.children)if(s instanceof xt){let n=s.measureTextSize();if(n)return n}let e=document.createElement("div"),t,i;return e.className="cm-line",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Dr(e.firstChild)[0];t=e.getBoundingClientRect().height,i=s?s.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Zm(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let n=s==t.viewports.length?null:t.viewports[s],a=n?n.from-1:this.length;if(a>i){let l=t.lineBlockAt(a).bottom-t.lineBlockAt(i).top;e.push(oe.replace({widget:new Eb(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,a))}if(!n)break;i=n.to+1}return oe.set(e)}updateDeco(){let e=this.view.pluginField(mt.decorations);return this.pluginDecorationLength=e.length,this.decorations=[...e,...this.view.state.facet(Ms),this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!i)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let n=0,a=0,l=0,c=0;for(let p of this.view.pluginField(mt.scrollMargins))if(p){let{left:g,right:b,top:O,bottom:r}=p;g!=null&&(n=Math.max(n,g)),b!=null&&(a=Math.max(a,b)),O!=null&&(l=Math.max(l,O)),r!=null&&(c=Math.max(c,r))}let d={left:i.left-n,top:i.top-l,right:i.right+a,bottom:i.bottom+c};yM(this.view.scrollDOM,d,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==we.LTR)}}function DM(o){return o.node.nodeType==1&&o.node.firstChild&&(o.offset==0||o.node.childNodes[o.offset-1].contentEditable=="false")&&(o.offset==o.node.childNodes.length||o.node.childNodes[o.offset].contentEditable=="false")}class Eb extends Li{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function $b(o){let e=o.observer.selectionRange,t=e.focusNode&&Pb(e.focusNode,e.focusOffset,0);if(!t)return null;let i=o.docView.nearest(t);if(!i)return null;if(i instanceof xt){let s=t;for(;s.parentNode!=i.dom;)s=s.parentNode;let n=s.previousSibling;for(;n&&!We.get(n);)n=n.previousSibling;let a=n?We.get(n).posAtEnd:i.posAtStart;return{from:a,to:a,node:s,text:t}}else{for(;;){let{parent:n}=i;if(!n)return null;if(n instanceof xt)break;i=n}let s=i.posAtStart;return{from:s,to:s+i.length,node:i.dom,text:t}}}function MM(o,e){let t=$b(o);if(!t)return oe.none;let{from:i,to:s,node:n,text:a}=t,l=e.mapPos(i,1),c=Math.max(l,e.mapPos(s,-1)),{state:d}=o,p=n.nodeType==3?n.nodeValue:new Cb([],d).readRange(n.firstChild,null).text;if(c-l<p.length)if(d.doc.sliceString(l,Math.min(d.doc.length,l+p.length),os)==p)c=l+p.length;else if(d.doc.sliceString(Math.max(0,c-p.length),c,os)==p)l=c-p.length;else return oe.none;else if(d.doc.sliceString(l,c,os)!=p)return oe.none;let g=We.get(n);return g instanceof nb?g=g.widget.topView:g&&(g.parent=null),oe.set(oe.replace({widget:new RM(n,a,g)}).range(l,c))}class RM extends Li{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return nb}}function Pb(o,e,t){for(;;){if(o.nodeType==3)return o;if(o.nodeType==1&&e>0&&t<=0)o=o.childNodes[e-1],e=oa(o);else if(o.nodeType==1&&e<o.childNodes.length&&t>=0)o=o.childNodes[e],e=0;else return null}}function IM(o,e){return o.nodeType!=1?0:(e&&o.childNodes[e-1].contentEditable=="false"?1:0)|(e<o.childNodes.length&&o.childNodes[e].contentEditable=="false"?2:0)}class BM{constructor(){this.changes=[]}compareRange(e,t){dh(e,t,this.changes)}comparePoint(e,t){dh(e,t,this.changes)}}function QM(o,e,t){let i=new BM;return Ae.compare(o,e,t,i),i.changes}function VM(o,e){for(let t=o;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function FM(o,e,t=1){let i=o.charCategorizer(e),s=o.doc.lineAt(e),n=e-s.from;if(s.length==0)return G.cursor(e);n==0?t=1:n==s.length&&(t=-1);let a=n,l=n;t<0?a=$t(s.text,n,!1):l=$t(s.text,n);let c=i(s.text.slice(a,l));for(;a>0;){let d=$t(s.text,a,!1);if(i(s.text.slice(d,a))!=c)break;a=d}for(;l<s.length;){let d=$t(s.text,l);if(i(s.text.slice(l,d))!=c)break;l=d}return G.range(a+s.from,l+s.from)}function WM(o,e){return e.left>o?e.left-o:Math.max(0,o-e.right)}function zM(o,e){return e.top>o?e.top-o:Math.max(0,o-e.bottom)}function yh(o,e){return o.top<e.bottom-1&&o.bottom>e.top+1}function Lb(o,e){return e<o.top?{top:e,left:o.left,right:o.right,bottom:o.bottom}:o}function Nb(o,e){return e>o.bottom?{top:o.top,left:o.left,right:o.right,bottom:e}:o}function Oh(o,e,t){let i,s,n,a,l,c,d,p;for(let O=o.firstChild;O;O=O.nextSibling){let r=Dr(O);for(let h=0;h<r.length;h++){let u=r[h];s&&yh(s,u)&&(u=Lb(Nb(u,s.bottom),s.top));let m=WM(e,u),y=zM(t,u);if(m==0&&y==0)return O.nodeType==3?Db(O,e,t):Oh(O,e,t);(!i||a>y||a==y&&n>m)&&(i=O,s=u,n=m,a=y),m==0?t>u.bottom&&(!d||d.bottom<u.bottom)?(l=O,d=u):t<u.top&&(!p||p.top>u.top)&&(c=O,p=u):d&&yh(d,u)?d=Nb(d,u.bottom):p&&yh(p,u)&&(p=Lb(p,u.top))}}if(d&&d.bottom>=t?(i=l,s=d):p&&p.top<=t&&(i=c,s=p),!i)return{node:o,offset:0};let g=Math.max(s.left,Math.min(s.right,e));if(i.nodeType==3)return Db(i,g,t);if(!n&&i.contentEditable=="true")return Oh(i,g,t);let b=Array.prototype.indexOf.call(o.childNodes,i)+(e>=(s.left+s.right)/2?1:0);return{node:o,offset:b}}function Db(o,e,t){let i=o.nodeValue.length,s=-1,n=1e9,a=0;for(let l=0;l<i;l++){let c=Mr(o,l,l+1).getClientRects();for(let d=0;d<c.length;d++){let p=c[d];if(p.top==p.bottom)continue;a||(a=e-p.left);let g=(p.top>t?p.top-t:t-p.bottom)-1;if(p.left-1<=e&&p.right+1>=e&&g<n){let b=e>=(p.left+p.right)/2,O=b;if((ce.chrome||ce.gecko)&&Mr(o,l).getBoundingClientRect().left==p.right&&(O=!b),g<=0)return{node:o,offset:l+(O?1:0)};s=l+(O?1:0),n=g}}}return{node:o,offset:s>-1?s:a>0?o.nodeValue.length:0}}function Mb(o,{x:e,y:t},i,s=-1){var n;let a=o.contentDOM.getBoundingClientRect(),l=a.top+o.viewState.paddingTop,c,{docHeight:d}=o.viewState,p=t-l;if(p<0)return 0;if(p>d)return o.state.doc.length;for(let m=o.defaultLineHeight/2,y=!1;c=o.elementAtHeight(p),c.type!=$e.Text;)for(;p=s>0?c.bottom+m:c.top-m,!(p>=0&&p<=d);){if(y)return i?null:0;y=!0,s=-s}t=l+p;let g=c.from;if(g<o.viewport.from)return o.viewport.from==0?0:i?null:Rb(o,a,c,e,t);if(g>o.viewport.to)return o.viewport.to==o.state.doc.length?o.state.doc.length:i?null:Rb(o,a,c,e,t);let b=o.dom.ownerDocument,O=o.root.elementFromPoint?o.root:b,r=O.elementFromPoint(e,t);r&&!o.contentDOM.contains(r)&&(r=null),r||(e=Math.max(a.left+1,Math.min(a.right-1,e)),r=O.elementFromPoint(e,t),r&&!o.contentDOM.contains(r)&&(r=null));let h,u=-1;if(r&&((n=o.docView.nearest(r))===null||n===void 0?void 0:n.isEditable)!=!1){if(b.caretPositionFromPoint){let m=b.caretPositionFromPoint(e,t);m&&({offsetNode:h,offset:u}=m)}else if(b.caretRangeFromPoint){let m=b.caretRangeFromPoint(e,t);m&&({startContainer:h,startOffset:u}=m,ce.safari&&XM(h,u,e)&&(h=void 0))}}if(!h||!o.docView.dom.contains(h)){let m=xt.find(o.docView,g);if(!m)return p>c.top+c.height/2?c.to:c.from;({node:h,offset:u}=Oh(m.dom,e,t))}return o.docView.posFromDOM(h,u)}function Rb(o,e,t,i,s){let n=Math.round((i-e.left)*o.defaultCharacterWidth);if(o.lineWrapping&&t.height>o.defaultLineHeight*1.5){let l=Math.floor((s-t.top)/o.defaultLineHeight);n+=l*o.viewState.heightOracle.lineLength}let a=o.state.sliceDoc(t.from,t.to);return t.from+Rc(a,n,o.state.tabSize)}function XM(o,e,t){let i;if(o.nodeType!=3||e!=(i=o.nodeValue.length))return!1;for(let s=o.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return Mr(o,i-1,i).getBoundingClientRect().left>t}function YM(o,e,t,i){let s=o.state.doc.lineAt(e.head),n=!i||!o.lineWrapping?null:o.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(n){let c=o.dom.getBoundingClientRect(),d=o.posAtCoords({x:t==(o.textDirection==we.LTR)?c.right-1:c.left+1,y:(n.top+n.bottom)/2});if(d!=null)return G.cursor(d,t?-1:1)}let a=xt.find(o.docView,e.head),l=a?t?a.posAtEnd:a.posAtStart:t?s.to:s.from;return G.cursor(l,t?-1:1)}function Ib(o,e,t,i){let s=o.state.doc.lineAt(e.head),n=o.bidiSpans(s);for(let a=e,l=null;;){let c=NM(s,n,o.textDirection,a,t),d=Sb;if(!c){if(s.number==(t?o.state.doc.lines:1))return a;d=`
`,s=o.state.doc.line(s.number+(t?1:-1)),n=o.bidiSpans(s),c=G.cursor(t?s.from:s.to)}if(l){if(!l(d))return a}else{if(!i)return c;l=i(d)}a=c}}function HM(o,e,t){let i=o.state.charCategorizer(e),s=i(t);return n=>{let a=i(n);return s==Ot.Space&&(s=a),s==a}}function GM(o,e,t,i){let s=e.head,n=t?1:-1;if(s==(t?o.state.doc.length:0))return G.cursor(s,e.assoc);let a=e.goalColumn,l,c=o.contentDOM.getBoundingClientRect(),d=o.coordsAtPos(s),p=o.documentTop;if(d)a==null&&(a=d.left-c.left),l=n<0?d.top:d.bottom;else{let O=o.viewState.lineBlockAt(s-p);a==null&&(a=Math.min(c.right-c.left,o.defaultCharacterWidth*(s-O.from))),l=(n<0?O.top:O.bottom)+p}let g=c.left+a,b=i??o.defaultLineHeight>>1;for(let O=0;;O+=10){let r=l+(b+O)*n,h=Mb(o,{x:g,y:r},!1,n);if(r<c.top||r>c.bottom||(n<0?h<s:h>s))return G.cursor(h,e.assoc,void 0,a)}}function xh(o,e,t){let i=o.pluginField(mt.atomicRanges);for(;;){let s=!1;for(let n of i)n.between(t.from-1,t.from+1,(a,l,c)=>{t.from>a&&t.from<l&&(t=e.from>t.from?G.cursor(a,1):G.cursor(l,-1),s=!0)});if(!s)return t}}class jM{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in nt){let i=nt[t];e.contentDOM.addEventListener(t,s=>{!Vb(e,s)||this.ignoreDuringComposition(s)||t=="keydown"&&this.keydown(e,s)||(this.mustFlushObserver(s)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,s)?s.preventDefault():i(e,s))}),this.registeredEvents.push(t)}this.notifiedFocused=e.hasFocus,this.ensureHandlers(e),ce.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e){let t=this.customHandlers=e.pluginField(yb);for(let i of t)for(let s in i.handlers)this.registeredEvents.indexOf(s)<0&&s!="scroll"&&(this.registeredEvents.push(s),e.contentDOM.addEventListener(s,n=>{Vb(e,n)&&this.runCustomHandlers(s,e,n)&&n.preventDefault()}))}runCustomHandlers(e,t,i){for(let s of this.customHandlers){let n=s.handlers[e];if(n)try{if(n.call(s.plugin,i,t)||i.defaultPrevented)return!0}catch(a){Yt(t.state,a)}}return!1}runScrollHandlers(e,t){for(let i of this.customHandlers){let s=i.handlers.scroll;if(s)try{s.call(i.plugin,t,e)}catch(n){Yt(e.state,n)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(ce.android&&ce.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return ce.ios&&(i=Bb.find(s=>s.keyCode==t.keyCode))&&!(t.ctrlKey||t.altKey||t.metaKey)&&!t.synthetic?(this.pendingIOSKey=i,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Rr(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ce.safari&&Date.now()-this.compositionEndedAt<500?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!ce.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Bb=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Qb=[16,17,18,20,91,92,224,225];class UM{constructor(e,t,i,s){this.view=e,this.style=i,this.mustSelect=s,this.lastEvent=t;let n=e.contentDOM.ownerDocument;n.addEventListener("mousemove",this.move=this.move.bind(this)),n.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ve.allowMultipleSelections)&&ZM(e,t),this.dragMove=qM(e,t),this.dragging=KM(e,t)&&vh(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function ZM(o,e){let t=o.state.facet(db);return t.length?t[0](e):ce.mac?e.metaKey:e.ctrlKey}function qM(o,e){let t=o.state.facet(ub);return t.length?t[0](e):ce.mac?!e.altKey:!e.ctrlKey}function KM(o,e){let{main:t}=o.state.selection;if(t.empty)return!1;let i=na(o.root);if(i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let n=0;n<s.length;n++){let a=s[n];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function Vb(o,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=o.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=We.get(t))&&i.ignoreEvent(e))return!1;return!0}const nt=Object.create(null),Fb=ce.ie&&ce.ie_version<15||ce.ios&&ce.webkit_version<604;function JM(o){let e=o.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{o.focus(),t.remove(),Wb(o,t.value)},50)}function Wb(o,e){let{state:t}=o,i,s=1,n=t.toText(e),a=n.lines==t.selection.ranges.length;if(wh!=null&&t.selection.ranges.every(c=>c.empty)&&wh==n.toString()){let c=-1;i=t.changeByRange(d=>{let p=t.doc.lineAt(d.from);if(p.from==c)return{range:d};c=p.from;let g=t.toText((a?n.line(s++).text:e)+t.lineBreak);return{changes:{from:p.from,insert:g},range:G.cursor(d.from+g.length)}})}else a?i=t.changeByRange(c=>{let d=n.line(s++);return{changes:{from:c.from,to:c.to,insert:d.text},range:G.cursor(c.from+d.length)}}):i=t.replaceSelection(n);o.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}nt.keydown=(o,e)=>{o.inputState.setSelectionOrigin("select"),e.keyCode==27?o.inputState.lastEscPress=Date.now():Qb.indexOf(e.keyCode)<0&&(o.inputState.lastEscPress=0)};let zb=0;nt.touchstart=(o,e)=>{zb=Date.now(),o.inputState.setSelectionOrigin("select.pointer")},nt.touchmove=o=>{o.inputState.setSelectionOrigin("select.pointer")},nt.mousedown=(o,e)=>{if(o.observer.flush(),zb>Date.now()-2e3&&vh(e)==1)return;let t=null;for(let i of o.state.facet(fb))if(t=i(o,e),t)break;if(!t&&e.button==0&&(t=iR(o,e)),t){let i=o.root.activeElement!=o.contentDOM;i&&o.observer.ignore(()=>Hm(o.contentDOM)),o.inputState.startMouseSelection(new UM(o,e,t,i))}};function Xb(o,e,t,i){if(i==1)return G.cursor(e,t);if(i==2)return FM(o.state,e,t);{let s=xt.find(o.docView,e),n=o.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:n.from,l=s?s.posAtEnd:n.to;return l<o.state.doc.length&&l==n.to&&l++,G.range(a,l)}}let Yb=(o,e)=>o>=e.top&&o<=e.bottom,Hb=(o,e,t)=>Yb(e,t)&&o>=t.left&&o<=t.right;function eR(o,e,t,i){let s=xt.find(o.docView,e);if(!s)return 1;let n=e-s.posAtStart;if(n==0)return 1;if(n==s.length)return-1;let a=s.coordsAt(n,-1);if(a&&Hb(t,i,a))return-1;let l=s.coordsAt(n,1);return l&&Hb(t,i,l)?1:a&&Yb(i,a)?-1:1}function Gb(o,e){let t=o.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:eR(o,t,e.clientX,e.clientY)}}const tR=ce.ie&&ce.ie_version<=11;let jb=null,Ub=0,Zb=0;function vh(o){if(!tR)return o.detail;let e=jb,t=Zb;return jb=o,Zb=Date.now(),Ub=!e||t>Date.now()-400&&Math.abs(e.clientX-o.clientX)<2&&Math.abs(e.clientY-o.clientY)<2?(Ub+1)%3:1}function iR(o,e){let t=Gb(o,e),i=vh(e),s=o.state.selection,n=t,a=e;return{update(l){l.docChanged&&(t&&(t.pos=l.changes.mapPos(t.pos)),s=s.map(l.changes),a=null)},get(l,c,d){let p;if(a&&l.clientX==a.clientX&&l.clientY==a.clientY?p=n:(p=n=Gb(o,l),a=l),!p||!t)return s;let g=Xb(o,p.pos,p.bias,i);if(t.pos!=p.pos&&!c){let b=Xb(o,t.pos,t.bias,i),O=Math.min(b.from,g.from),r=Math.max(b.to,g.to);g=O<g.from?G.range(O,r):G.range(r,O)}return c?s.replaceRange(s.main.extend(g.from,g.to)):d?s.addRange(g):G.create([g])}}}nt.dragstart=(o,e)=>{let{selection:{main:t}}=o.state,{mouseSelection:i}=o.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",o.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function qb(o,e,t,i){if(!t)return;let s=o.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:n}=o.inputState,a=i&&n&&n.dragging&&n.dragMove?{from:n.dragging.from,to:n.dragging.to}:null,l={from:s,insert:t},c=o.state.changes(a?[a,l]:l);o.focus(),o.dispatch({changes:c,selection:{anchor:c.mapPos(s,-1),head:c.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"})}nt.drop=(o,e)=>{if(!e.dataTransfer)return;if(o.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),s=0,n=()=>{++s==t.length&&qb(o,e,i.filter(a=>a!=null).join(o.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let l=new FileReader;l.onerror=n,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[a]=l.result),n()},l.readAsText(t[a])}}else qb(o,e,e.dataTransfer.getData("Text"),!0)},nt.paste=(o,e)=>{if(o.state.readOnly)return e.preventDefault();o.observer.flush();let t=Fb?null:e.clipboardData;t?(Wb(o,t.getData("text/plain")),e.preventDefault()):JM(o)};function sR(o,e){let t=o.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),o.focus()},50)}function nR(o){let e=[],t=[],i=!1;for(let s of o.selection.ranges)s.empty||(e.push(o.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:n}of o.selection.ranges){let a=o.doc.lineAt(n);a.number>s&&(e.push(a.text),t.push({from:a.from,to:Math.min(o.doc.length,a.to+1)})),s=a.number}i=!0}return{text:e.join(o.lineBreak),ranges:t,linewise:i}}let wh=null;nt.copy=nt.cut=(o,e)=>{let{text:t,ranges:i,linewise:s}=nR(o.state);if(!t&&!s)return;wh=s?t:null;let n=Fb?null:e.clipboardData;n?(e.preventDefault(),n.clearData(),n.setData("text/plain",t)):sR(o,t),e.type=="cut"&&!o.state.readOnly&&o.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})},nt.focus=nt.blur=o=>{setTimeout(()=>{o.hasFocus!=o.inputState.notifiedFocused&&o.update([])},10)};function Kb(o,e){if(o.docView.compositionDeco.size){o.inputState.rapidCompositionStart=e;try{o.update([])}finally{o.inputState.rapidCompositionStart=!1}}}nt.compositionstart=nt.compositionupdate=o=>{o.inputState.compositionFirstChange==null&&(o.inputState.compositionFirstChange=!0),o.inputState.composing<0&&(o.inputState.composing=0,o.docView.compositionDeco.size&&(o.observer.flush(),Kb(o,!0)))},nt.compositionend=o=>{o.inputState.composing=-1,o.inputState.compositionEndedAt=Date.now(),o.inputState.compositionFirstChange=null,setTimeout(()=>{o.inputState.composing<0&&Kb(o,!1)},50)},nt.contextmenu=o=>{o.inputState.lastContextMenu=Date.now()},nt.beforeinput=(o,e)=>{var t;let i;if(ce.chrome&&ce.android&&(i=Bb.find(s=>s.inputType==e.inputType))&&(o.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var n;(((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0)>s+10&&o.hasFocus&&(o.contentDOM.blur(),o.focus())},100)}};const Jb=["pre-wrap","normal","pre-line","break-spaces"];class rR{constructor(){this.doc=_e.empty,this.lineWrapping=!1,this.direction=we.LTR,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForStyle(e,t){return Jb.indexOf(e)>-1!=this.lineWrapping||this.direction!=t}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,i,s,n,a){let l=Jb.indexOf(e)>-1,c=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=l||this.direction!=t;if(this.lineWrapping=l,this.direction=t,this.lineHeight=i,this.charWidth=s,this.lineLength=n,c){this.heightSamples={};for(let d=0;d<a.length;d++){let p=a[d];p<0?d++:this.heightSamples[Math.floor(p*10)]=!0}}return c}}class oR{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Di{constructor(e,t,i,s,n){this.from=e,this.length=t,this.top=i,this.height=s,this.type=n}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Di(this.from,this.length+e.length,this.top,this.height+e.height,t)}moveY(e){return e?new Di(this.from,this.length,this.top+e,this.height,Array.isArray(this.type)?this.type.map(t=>t.moveY(e)):this.type):this}}var Le=function(o){return o[o.ByPos=0]="ByPos",o[o.ByHeight=1]="ByHeight",o[o.ByPosNoHeight=2]="ByPosNoHeight",o}(Le||(Le={}));const da=.001;class kt{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>da&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return kt.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let n=this;for(let a=s.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:d,toB:p}=s[a],g=n.lineAt(l,Le.ByPosNoHeight,t,0,0),b=g.to>=c?g:n.lineAt(c,Le.ByPosNoHeight,t,0,0);for(p+=b.to-c,c=b.to;a>0&&g.from<=s[a-1].toA;)l=s[a-1].fromA,d=s[a-1].fromB,a--,l<g.from&&(g=n.lineAt(l,Le.ByPosNoHeight,t,0,0));d+=g.from-l,l=g.from;let O=kh.build(i,e,d,p);n=n.replace(l,c,O)}return n.updateHeight(i,0)}static empty(){return new Lt(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,s=0,n=0;for(;;)if(t==i)if(s>n*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,s-=l.size}else if(n>s*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,n-=l.size}else break;else if(s<n){let l=e[t++];l&&(s+=l.size)}else{let l=e[--i];l&&(n+=l.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,i++),new aR(kt.of(e.slice(0,t)),a,kt.of(e.slice(i)))}}kt.prototype.size=1;class ey extends kt{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,s){return new Di(s,this.length,i,this.height,this.type)}lineAt(e,t,i,s,n){return this.blockAt(0,i,s,n)}forEachLine(e,t,i,s,n,a){a(this.blockAt(0,i,s,n))}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(e,s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Lt extends ey{constructor(e,t){super(e,t,$e.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let s=i[0];return i.length==1&&(s instanceof Lt||s instanceof ut&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof ut?s=new Lt(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):kt.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setHeight(e,s.heights[s.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ut extends kt{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,s=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:s,lineHeight:this.height/(s-i+1)}}blockAt(e,t,i,s){let{firstLine:n,lastLine:a,lineHeight:l}=this.lines(t,s),c=Math.max(0,Math.min(a-n,Math.floor((e-i)/l))),{from:d,length:p}=t.line(n+c);return new Di(d,p,i+l*c,l,$e.Text)}lineAt(e,t,i,s,n){if(t==Le.ByHeight)return this.blockAt(e,i,s,n);if(t==Le.ByPosNoHeight){let{from:g,to:b}=i.lineAt(e);return new Di(g,b-g,0,0,$e.Text)}let{firstLine:a,lineHeight:l}=this.lines(i,n),{from:c,length:d,number:p}=i.lineAt(e);return new Di(c,d,s+l*(p-a),l,$e.Text)}forEachLine(e,t,i,s,n,a){let{firstLine:l,lineHeight:c}=this.lines(i,n);for(let d=Math.max(e,n),p=Math.min(n+this.length,t);d<=p;){let g=i.lineAt(d);d==e&&(s+=c*(g.number-l)),a(new Di(g.from,g.length,s,c,$e.Text)),s+=c,d=g.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let n=i[i.length-1];n instanceof ut?i[i.length-1]=new ut(n.length+s):i.push(null,new ut(s-1))}if(e>0){let n=i[0];n instanceof ut?i[0]=new ut(e+n.length):i.unshift(new ut(e-1),null)}return kt.of(i)}decomposeLeft(e,t){t.push(new ut(e-1),null)}decomposeRight(e,t){t.push(null,new ut(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let n=t+this.length;if(s&&s.from<=t+this.length&&s.more){let a=[],l=Math.max(t,s.from),c=-1,d=e.heightChanged;for(s.from>t&&a.push(new ut(s.from-t-1).updateHeight(e,t));l<=n&&s.more;){let g=e.doc.lineAt(l).length;a.length&&a.push(null);let b=s.heights[s.index++];c==-1?c=b:Math.abs(b-c)>=da&&(c=-2);let O=new Lt(g,b);O.outdated=!1,a.push(O),l+=g+1}l<=n&&a.push(null,new ut(n-l).updateHeight(e,l));let p=kt.of(a);return e.heightChanged=d||c<0||Math.abs(p.height-this.height)>=da||Math.abs(c-this.lines(e.doc,t).lineHeight)>=da,p}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class aR extends kt{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,s){let n=i+this.left.height;return e<n?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,n,s+this.left.length+this.break)}lineAt(e,t,i,s,n){let a=s+this.left.height,l=n+this.left.length+this.break,c=t==Le.ByHeight?e<a:e<l,d=c?this.left.lineAt(e,t,i,s,n):this.right.lineAt(e,t,i,a,l);if(this.break||(c?d.to<l:d.from>l))return d;let p=t==Le.ByPosNoHeight?Le.ByPosNoHeight:Le.ByPos;return c?d.join(this.right.lineAt(l,p,i,a,l)):this.left.lineAt(l,p,i,s,n).join(d)}forEachLine(e,t,i,s,n,a){let l=s+this.left.height,c=n+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,t,i,s,n,a),t>=c&&this.right.forEachLine(e,t,i,l,c,a);else{let d=this.lineAt(c,Le.ByPos,i,s,n);e<d.from&&this.left.forEachLine(e,d.from-1,i,s,n,a),d.to>=e&&d.from<=t&&a(d),t>d.to&&this.right.forEachLine(d.to+1,t,i,l,c,a)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let n=[];e>0&&this.decomposeLeft(e,n);let a=n.length;for(let l of i)n.push(l);if(e>0&&ty(n,a-1),t<this.length){let l=n.length;this.decomposeRight(t,n),ty(n,l)}return kt.of(n)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?kt.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:n,right:a}=this,l=t+n.length+this.break,c=null;return s&&s.from<=t+n.length&&s.more?c=n=n.updateHeight(e,t,i,s):n.updateHeight(e,t,i),s&&s.from<=l+a.length&&s.more?c=a=a.updateHeight(e,l,i,s):a.updateHeight(e,l,i),c?this.balanced(n,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ty(o,e){let t,i;o[e]==null&&(t=o[e-1])instanceof ut&&(i=o[e+1])instanceof ut&&o.splice(e-1,3,new ut(t.length+1+i.length))}const lR=5;class kh{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Lt?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Lt(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0;s<0&&(s=this.oracle.lineHeight);let n=t-e;i.block?this.addBlock(new ey(n,s,i.type)):(n||s>=lR)&&this.addLineDeco(s,n)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Lt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new ut(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Lt)return e;let t=new Lt(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==$e.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=$e.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Lt)&&!this.isCovered?this.nodes.push(new Lt(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof Lt&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,t,i,s){let n=new kh(i,e);return Ae.spans(t,i,s,n,0),n.finish(i)}}function cR(o,e,t){let i=new hR;return Ae.compare(o,e,t,i,0),i.changes}class hR{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&dh(e,t,this.changes,5)}}function dR(o,e){let t=o.getBoundingClientRect(),i=Math.max(0,t.left),s=Math.min(innerWidth,t.right),n=Math.max(0,t.top),a=Math.min(innerHeight,t.bottom),l=o.ownerDocument.body;for(let c=o.parentNode;c&&c!=l;)if(c.nodeType==1){let d=c,p=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&p.overflow!="visible"){let g=d.getBoundingClientRect();i=Math.max(i,g.left),s=Math.min(s,g.right),n=Math.max(n,g.top),a=Math.min(a,g.bottom)}c=p.position=="absolute"||p.position=="fixed"?d.offsetParent:d.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:i-t.left,right:Math.max(i,s)-t.left,top:n-(t.top+e),bottom:Math.max(n,a)-(t.top+e)}}function uR(o,e){let t=o.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Sh{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],n=t[i];if(s.from!=n.from||s.to!=n.to||s.size!=n.size)return!1}return!0}draw(e){return oe.replace({widget:new fR(this.size,e)}).range(this.from,this.to)}}class fR extends Li{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class iy{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new rR,this.scaler=ry,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.heightMap=kt.empty().applyChanges(e.facet(Ms),_e.empty,this.heightOracle.setDoc(e.doc),[new Ni(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=oe.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some(({from:n,to:a})=>s>=n&&s<=a)){let{from:n,to:a}=this.lineBlockAt(s);e.push(new ua(n,a))}}this.viewports=e.sort((i,s)=>i.from-s.from),this.scaler=this.heightMap.height<=7e6?ry:new mR(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Fr(e,this.scaler))})}update(e,t=null){let i=this.state;this.state=e.state;let s=this.state.facet(Ms),n=e.changedRanges,a=Ni.extendWithRanges(n,cR(e.startState.facet(Ms),s,e?e.changes:it.empty(this.state.doc.length))),l=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(s,i.doc,this.heightOracle.setDoc(this.state.doc),a),this.heightMap.height!=l&&(e.flags|=2);let c=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<c.from||t.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,t));let d=!e.changes.empty||e.flags&2||c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,this.updateForViewport(),d&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,n=i.whiteSpace,a=i.direction=="rtl"?we.RTL:we.LTR,l=this.heightOracle.mustRefreshForStyle(n,a),c=l||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight,d=0,p=0;if(this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=8),c){this.mustMeasureContent=!1,this.contentDOMHeight=t.clientHeight;let m=parseInt(i.paddingTop)||0,y=parseInt(i.paddingBottom)||0;(this.paddingTop!=m||this.paddingBottom!=y)&&(d|=8,this.paddingTop=m,this.paddingBottom=y)}let g=(this.printing?uR:dR)(t,this.paddingTop),b=g.top-this.pixelViewport.top,O=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let r=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(r!=this.inView&&(this.inView=r,r&&(c=!0)),!this.inView)return 0;let h=t.clientWidth;if((this.contentDOMWidth!=h||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=h,this.editorHeight=e.scrollDOM.clientHeight,d|=8),c){let m=e.docView.measureVisibleLineHeights();if(s.mustRefreshForHeights(m)&&(l=!0),l||s.lineWrapping&&Math.abs(h-this.contentDOMWidth)>s.charWidth){let{lineHeight:y,charWidth:v}=e.docView.measureTextSize();l=s.refresh(n,a,y,v,h/v,m),l&&(e.docView.minWidth=0,d|=8)}b>0&&O>0?p=Math.max(b,O):b<0&&O<0&&(p=Math.min(b,O)),s.heightChanged=!1,this.heightMap=this.heightMap.updateHeight(s,0,l,new oR(this.viewport.from,m)),s.heightChanged&&(d|=2)}let u=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return u&&(this.viewport=this.getViewport(p,this.scrollTarget)),this.updateForViewport(),(d&2||u)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,n=this.state.doc,{visibleTop:a,visibleBottom:l}=this,c=new ua(s.lineAt(a-i*1e3,Le.ByHeight,n,0,0).from,s.lineAt(l+(1-i)*1e3,Le.ByHeight,n,0,0).to);if(t){let{head:d}=t.range;if(d<c.from||d>c.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=s.lineAt(d,Le.ByPos,n,0,0),b;t.y=="center"?b=(g.top+g.bottom)/2-p/2:t.y=="start"||t.y=="nearest"&&d<c.from?b=g.top:b=g.bottom-p,c=new ua(s.lineAt(b-1e3/2,Le.ByHeight,n,0,0).from,s.lineAt(b+p+1e3/2,Le.ByHeight,n,0,0).to)}}return c}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new ua(this.heightMap.lineAt(i,Le.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(s,Le.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Le.ByPos,this.state.doc,0,0),{bottom:n}=this.heightMap.lineAt(t,Le.ByPos,this.state.doc,0,0),{visibleTop:a,visibleBottom:l}=this;return(e==0||s<=a-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||n>=l+Math.max(10,Math.min(i,250)))&&s>a-2*1e3&&n<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new Sh(t.mapPos(s.from),t.mapPos(s.to),s.size));return i}ensureLineGaps(e){let t=[];if(this.heightOracle.direction!=we.LTR)return t;for(let i of this.viewportLines){if(i.length<4e3)continue;let s=pR(i.from,i.to,this.state);if(s.total<4e3)continue;let n,a;if(this.heightOracle.lineWrapping){let d=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;n=fa(s,(this.visibleTop-i.top-d)/i.height),a=fa(s,(this.visibleBottom-i.top+d)/i.height)}else{let d=s.total*this.heightOracle.charWidth,p=2e3*this.heightOracle.charWidth;n=fa(s,(this.pixelViewport.left-p)/d),a=fa(s,(this.pixelViewport.right+p)/d)}let l=[];n>i.from&&l.push({from:i.from,to:n}),a<i.to&&l.push({from:a,to:i.to});let c=this.state.selection.main;c.from>=i.from&&c.from<=i.to&&ny(l,c.from-10,c.from+10),!c.empty&&c.to>=i.from&&c.to<=i.to&&ny(l,c.to-10,c.to+10);for(let{from:d,to:p}of l)p-d>1e3&&t.push(gR(e,g=>g.from>=i.from&&g.to<=i.to&&Math.abs(g.from-d)<1e3&&Math.abs(g.to-p)<1e3)||new Sh(d,p,this.gapSize(i,d,p,s)))}return t}gapSize(e,t,i,s){let n=sy(s,i)-sy(s,t);return this.heightOracle.lineWrapping?e.height*n:s.total*this.heightOracle.charWidth*n}updateLineGaps(e){Sh.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=oe.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.state.facet(Ms);this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Ae.spans(e,this.viewport.from,this.viewport.to,{span(s,n){t.push({from:s,to:n})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((s,n)=>s.from!=t[n].from||s.to!=t[n].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Fr(this.heightMap.lineAt(e,Le.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Fr(this.heightMap.lineAt(this.scaler.fromDOM(e),Le.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Fr(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ua{constructor(e,t){this.from=e,this.to=t}}function pR(o,e,t){let i=[],s=o,n=0;return Ae.spans(t.facet(Ms),o,e,{span(){},point(a,l){a>s&&(i.push({from:s,to:a}),n+=a-s),s=l}},20),s<e&&(i.push({from:s,to:e}),n+=e-s),{total:n,ranges:i}}function fa({total:o,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(o*t);for(let s=0;;s++){let{from:n,to:a}=e[s],l=a-n;if(i<=l)return n+i;i-=l}}function sy(o,e){let t=0;for(let{from:i,to:s}of o.ranges){if(e<=s){t+=e-i;break}t+=s-i}return t/o.total}function ny(o,e,t){for(let i=0;i<o.length;i++){let s=o[i];if(s.from<t&&s.to>e){let n=[];s.from<e&&n.push({from:s.from,to:e}),s.to>t&&n.push({from:t,to:s.to}),o.splice(i,1,...n),i+=n.length-1}}}function gR(o,e){for(let t of o)if(e(t))return t}const ry={toDOM(o){return o},fromDOM(o){return o},scale:1};class mR{constructor(e,t,i){let s=0,n=0,a=0;this.viewports=i.map(({from:l,to:c})=>{let d=t.lineAt(l,Le.ByPos,e,0,0).top,p=t.lineAt(c,Le.ByPos,e,0,0).bottom;return s+=p-d,{from:l,to:c,top:d,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let l of this.viewports)l.domTop=a+(l.top-n)*this.scale,a=l.domBottom=l.domTop+(l.bottom-l.top),n=l.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.top)return s+(e-i)*this.scale;if(e<=n.bottom)return n.domTop+(e-n.top);i=n.bottom,s=n.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.domTop)return i+(e-s)/this.scale;if(e<=n.domBottom)return n.top+(e-n.domTop);i=n.bottom,s=n.domBottom}}}function Fr(o,e){if(e.scale==1)return o;let t=e.toDOM(o.top),i=e.toDOM(o.bottom);return new Di(o.from,o.length,t,i-t,Array.isArray(o.type)?o.type.map(s=>Fr(s,e)):o.type)}const pa=re.define({combine:o=>o.join(" ")}),Ch=re.define({combine:o=>o.indexOf(!0)>-1}),_h=ts.newName(),oy=ts.newName(),ay=ts.newName(),ly={"&light":"."+oy,"&dark":"."+ay};function Th(o,e,t){return new ts(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return o;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):o+" "+i}})}const bR=Th("."+_h,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ly),yR={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ah=ce.ie&&ce.ie_version<=11;class OR{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.selectionRange=new OM,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(s=>{for(let n of s)this.queue.push(n);(ce.ie&&ce.ie_version<=11||ce.ios&&e.composing)&&s.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),Ah&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(s=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),s.length>0&&s[s.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(s=>{s.length>0&&s[s.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,i=this.selectionRange;if(t.state.facet(Br)?t.root.activeElement!=this.dom:!Jc(t.dom,i))return;let s=i.anchorNode&&t.docView.nearest(i.anchorNode);s&&s.ignoreEvent(e)||((ce.ie&&ce.ie_version<=11||ce.android&&ce.chrome)&&!t.state.selection.main.empty&&i.focusNode&&ra(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=na(e),i=ce.safari&&e.nodeType==11&&mM()==this.view.contentDOM&&xR(this.view)||t;return this.selectionRange.eq(i)?!1:(this.selectionRange.setRange(i),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,yR),Ah&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Ah&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame(()=>{let i=this.delayedAndroidKey;this.delayedAndroidKey=null;let s=this.view.state;Rr(this.view.contentDOM,i.key,i.keyCode)?this.processRecords():this.flush(),this.view.state==s&&this.view.update([])}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let n of this.observer.takeRecords())e.push(n);e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let n of e){let a=this.readMutation(n);a&&(a.typeOver&&(s=!0),t==-1?{from:t,to:i}=a:(t=Math.min(a.from,t),i=Math.max(a.to,i)))}return{from:t,to:i,typeOver:s}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:i,typeOver:s}=this.processRecords(),n=this.selectionChanged&&Jc(this.dom,this.selectionRange);if(t<0&&!n)return;this.selectionChanged=!1;let a=this.view.state;this.onChange(t,i,s),this.view.state==a&&this.view.update([])}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=cy(t,e.previousSibling||e.target.previousSibling,-1),s=cy(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resize)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function cy(o,e,t){for(;e;){let i=We.get(e);if(i&&i.parent==o)return i;let s=e.parentNode;e=s!=o.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function xR(o){let e=null;function t(c){c.preventDefault(),c.stopImmediatePropagation(),e=c.getTargetRanges()[0]}if(o.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),o.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,s=e.startOffset,n=e.endContainer,a=e.endOffset,l=o.docView.domAtPos(o.state.selection.main.anchor);return ra(l.node,l.offset,n,a)&&([i,s,n,a]=[n,a,i,s]),{anchorNode:i,anchorOffset:s,focusNode:n,focusOffset:a}}function vR(o,e,t,i){let s,n,a=o.state.selection.main;if(e>-1){let l=o.docView.domBoundsAround(e,t,0);if(!l||o.state.readOnly)return;let{from:c,to:d}=l,p=o.docView.impreciseHead||o.docView.impreciseAnchor?[]:kR(o),g=new Cb(p,o.state);g.readRange(l.startDOM,l.endDOM);let b=a.from,O=null;(o.inputState.lastKeyCode===8&&o.inputState.lastKeyTime>Date.now()-100||ce.android&&g.text.length<d-c)&&(b=a.to,O="end");let r=wR(o.state.doc.sliceString(c,d,os),g.text,b-c,O);r&&(ce.chrome&&o.inputState.lastKeyCode==13&&r.toB==r.from+2&&g.text.slice(r.from,r.toB)==os+os&&r.toB--,s={from:c+r.from,to:c+r.toA,insert:_e.of(g.text.slice(r.from,r.toB).split(os))}),n=SR(p,c)}else if(o.hasFocus||!o.state.facet(Br)){let l=o.observer.selectionRange,{impreciseHead:c,impreciseAnchor:d}=o.docView,p=c&&c.node==l.focusNode&&c.offset==l.focusOffset||!kn(o.contentDOM,l.focusNode)?o.state.selection.main.head:o.docView.posFromDOM(l.focusNode,l.focusOffset),g=d&&d.node==l.anchorNode&&d.offset==l.anchorOffset||!kn(o.contentDOM,l.anchorNode)?o.state.selection.main.anchor:o.docView.posFromDOM(l.anchorNode,l.anchorOffset);(p!=a.head||g!=a.anchor)&&(n=G.single(g,p))}if(!(!s&&!n)){if(!s&&i&&!a.empty&&n&&n.main.empty?s={from:a.from,to:a.to,insert:o.state.doc.slice(a.from,a.to)}:s&&s.from>=a.from&&s.to<=a.to&&(s.from!=a.from||s.to!=a.to)&&a.to-a.from-(s.to-s.from)<=4&&(s={from:a.from,to:a.to,insert:o.state.doc.slice(a.from,s.from).append(s.insert).append(o.state.doc.slice(s.to,a.to))}),s){let l=o.state;if(ce.ios&&o.inputState.flushIOSKey(o)||ce.android&&(s.from==a.from&&s.to==a.to&&s.insert.length==1&&s.insert.lines==2&&Rr(o.contentDOM,"Enter",13)||s.from==a.from-1&&s.to==a.to&&s.insert.length==0&&Rr(o.contentDOM,"Backspace",8)||s.from==a.from&&s.to==a.to+1&&s.insert.length==0&&Rr(o.contentDOM,"Delete",46)))return;let c=s.insert.toString();if(o.state.facet(gb).some(g=>g(o,s.from,s.to,c)))return;o.inputState.composing>=0&&o.inputState.composing++;let d;if(s.from>=a.from&&s.to<=a.to&&s.to-s.from>=(a.to-a.from)/3&&(!n||n.main.empty&&n.main.from==s.from+s.insert.length)&&o.inputState.composing<0){let g=a.from<s.from?l.sliceDoc(a.from,s.from):"",b=a.to>s.to?l.sliceDoc(s.to,a.to):"";d=l.replaceSelection(o.state.toText(g+s.insert.sliceString(0,void 0,o.state.lineBreak)+b))}else{let g=l.changes(s),b=n&&!l.selection.main.eq(n.main)&&n.main.to<=g.newLength?n.main:void 0;if(l.selection.ranges.length>1&&o.inputState.composing>=0&&s.to<=a.to&&s.to>=a.to-10){let O=o.state.sliceDoc(s.from,s.to),r=$b(o)||o.state.doc.lineAt(a.head),h=a.to-s.to,u=a.to-a.from;d=l.changeByRange(m=>{if(m.from==a.from&&m.to==a.to)return{changes:g,range:b||m.map(g)};let y=m.to-h,v=y-O.length;if(m.to-m.from!=u||o.state.sliceDoc(v,y)!=O||r&&m.to>=r.from&&m.from<=r.to)return{range:m};let w=l.changes({from:v,to:y,insert:s.insert}),S=m.to-a.to;return{changes:w,range:b?G.range(Math.max(0,b.anchor+S),Math.max(0,b.head+S)):m.map(w)}})}else d={changes:g,selection:b&&l.selection.replaceRange(b)}}let p="input.type";o.composing&&(p+=".compose",o.inputState.compositionFirstChange&&(p+=".start",o.inputState.compositionFirstChange=!1)),o.dispatch(d,{scrollIntoView:!0,userEvent:p})}else if(n&&!n.main.eq(a)){let l=!1,c="select";o.inputState.lastSelectionTime>Date.now()-50&&(o.inputState.lastSelectionOrigin=="select"&&(l=!0),c=o.inputState.lastSelectionOrigin),o.dispatch({selection:n,scrollIntoView:l,userEvent:c})}}}function wR(o,e,t,i){let s=Math.min(o.length,e.length),n=0;for(;n<s&&o.charCodeAt(n)==e.charCodeAt(n);)n++;if(n==s&&o.length==e.length)return null;let a=o.length,l=e.length;for(;a>0&&l>0&&o.charCodeAt(a-1)==e.charCodeAt(l-1);)a--,l--;if(i=="end"){let c=Math.max(0,n-Math.min(a,l));t-=a+c-n}if(a<n&&o.length<e.length){let c=t<=n&&t>=a?n-t:0;n-=c,l=n+(l-a),a=n}else if(l<n){let c=t<=n&&t>=l?n-t:0;n-=c,a=n+(a-l),l=n}return{from:n,toA:a,toB:l}}function kR(o){let e=[];if(o.root.activeElement!=o.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:n}=o.observer.selectionRange;return t&&(e.push(new Tb(t,i)),(s!=t||n!=i)&&e.push(new Tb(s,n))),e}function SR(o,e){if(o.length==0)return null;let t=o[0].pos,i=o.length==2?o[1].pos:t;return t>-1&&i>-1?G.single(t+e,i+e):null}class ae{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this.root=e.root||xM(e.parent)||document,this.viewState=new iy(e.state||ve.create()),this.plugins=this.state.facet(Qr).map(t=>new gh(t));for(let t of this.plugins)t.update(this);this.observer=new OR(this,(t,i,s)=>{vR(this,t,i,s)},t=>{this.inputState.runScrollHandlers(this,t),this.observer.intersecting&&this.measure()}),this.inputState=new jM(this),this.docView=new Ab(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof st?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i,s=this.state;for(let a of e){if(a.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=a.state}if(this.destroyed){this.viewState.state=s;return}if(s.facet(ve.phrases)!=this.state.facet(ve.phrases))return this.setState(s);i=new vb(this,s,e);let n=this.viewState.scrollTarget;try{this.updateState=2;for(let a of e){if(n&&(n=n.map(a.changes)),a.scrollIntoView){let{main:l}=a.state.selection;n=new _n(l.empty?l:G.cursor(l.head,l.head>l.anchor?-1:1))}for(let l of a.effects)l.is(ph)?n=new _n(l.value):l.is(mb)?n=new _n(l.value,"center"):l.is(bb)&&(n=l.value)}this.viewState.update(i,n),this.bidiCache=ga.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Vr)!=this.styleModules&&this.mountStyles(),this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(a=>a.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(pa)!=i.state.facet(pa)&&(this.viewState.mustMeasureContent=!0),(t||n||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let a of this.state.facet(fh))a(i)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new iy(e),this.plugins=e.facet(Qr).map(i=>new gh(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new Ab(this),this.inputState.ensureHandlers(this),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Qr),i=e.state.facet(Qr);if(t!=i){let s=[];for(let n of i){let a=t.indexOf(n);if(a<0)s.push(new gh(n));else{let l=this.plugins[a];l.mustUpdate=e,s.push(l)}}for(let n of this.plugins)n.mustUpdate!=e&&n.destroy(this);this.plugins=s,this.pluginMap.clear(),this.inputState.ensureHandlers(this)}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let i=0;;i++){this.updateState=1;let s=this.viewport,n=this.viewState.measure(this);if(!n&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(i>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];n&4||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map(g=>{try{return g.read(this)}catch(b){return Yt(this.state,b),hy}}),c=new vb(this,this.state),d=!1,p=!1;c.flags|=n,t?t.flags|=n:t=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),d=this.docView.update(c));for(let g=0;g<a.length;g++)if(l[g]!=hy)try{let b=a[g];b.write&&b.write(l[g],this)}catch(b){Yt(this.state,b)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,p=!0),d&&this.docView.updateSelection(!0),this.viewport.from==s.from&&this.viewport.to==s.to&&!p&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let i of this.state.facet(fh))i(t)}get themeClasses(){return _h+" "+(this.state.facet(Ch)?ay:oy)+" "+this.state.facet(pa)}updateAttrs(){let e=dy(this,Ob,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Br)?"true":"false",class:"cm-content",style:`${ce.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),dy(this,xb,t),this.observer.ignore(()=>{hh(this.contentDOM,this.contentAttrs,t),hh(this.dom,this.editorAttrs,e)}),this.editorAttrs=e,this.contentAttrs=t}showAnnouncements(e){let t=!0;for(let i of e)for(let s of i.effects)if(s.is(ae.announce)){t&&(this.announceDOM.textContent=""),t=!1;let n=this.announceDOM.appendChild(document.createElement("div"));n.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Vr),ts.mount(this.root,this.styleModules.concat(bR).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}pluginField(e){let t=[];for(let i of this.plugins)i.update(this).takeField(e,t);return t}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}blockAtHeight(e,t){let i=Eh(t,this);return this.elementAtHeight(e-i).moveY(i)}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}visualLineAtHeight(e,t){let i=Eh(t,this);return this.lineBlockAtHeight(e-i).moveY(i)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}viewportLines(e,t){let i=Eh(t,this);for(let s of this.viewportLineBlocks)e(s.moveY(i))}get viewportLineBlocks(){return this.viewState.viewportLines}visualLineAt(e,t=0){return this.lineBlockAt(e).moveY(t+this.viewState.paddingTop)}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return xh(this,e,Ib(this,e,t,i))}moveByGroup(e,t){return xh(this,e,Ib(this,e,t,i=>HM(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return YM(this,e,t,i)}moveVertically(e,t,i){return xh(this,e,GM(this,e,t,i))}scrollPosIntoView(e){this.dispatch({effects:ph.of(G.cursor(e))})}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Mb(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),n=this.bidiSpans(s),a=n[Tn.find(n,e-s.from,-1,t)];return aa(i,a.dir==we.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.heightOracle.direction}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>CR)return kb(e.length);let t=this.textDirection;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t)return s.order;let i=LM(e.text,this.textDirection);return this.bidiCache.push(new ga(e.from,e.to,t,i)),i}get hasFocus(){var e;return(document.hasFocus()||ce.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Hm(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return bb.of(new _n(typeof e=="number"?G.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return et.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=ts.newName(),s=[pa.of(i),Vr.of(Th(`.${i}`,e))];return t&&t.dark&&s.push(Ch.of(!0)),s}static baseTheme(e){return vn.lowest(Vr.of(Th("."+_h,e,ly)))}}ae.scrollTo=ph,ae.centerOn=mb,ae.styleModule=Vr,ae.inputHandler=gb,ae.exceptionSink=pb,ae.updateListener=fh,ae.editable=Br,ae.mouseSelectionStyle=fb,ae.dragMovesSelection=ub,ae.clickAddsSelectionRange=db,ae.decorations=Ms,ae.darkTheme=Ch,ae.contentAttributes=xb,ae.editorAttributes=Ob,ae.lineWrapping=ae.contentAttributes.of({class:"cm-lineWrapping"}),ae.announce=ue.define();const CR=4096;function Eh(o,e){return(o??e.contentDOM.getBoundingClientRect().top)+e.viewState.paddingTop}const hy={};class ga{constructor(e,t,i,s){this.from=e,this.to=t,this.dir=i,this.order=s}static update(e,t){if(t.empty)return e;let i=[],s=e.length?e[e.length-1].dir:we.LTR;for(let n=Math.max(0,e.length-10);n<e.length;n++){let a=e[n];a.dir==s&&!t.touchesRange(a.from,a.to)&&i.push(new ga(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.order))}return i}}function dy(o,e,t){for(let i=o.state.facet(e),s=i.length-1;s>=0;s--){let n=i[s],a=typeof n=="function"?n(o):n;a&&lh(a,t)}return t}const _R=ce.mac?"mac":ce.windows?"win":ce.linux?"linux":"key";function TR(o,e){const t=o.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let s,n,a,l;for(let c=0;c<t.length-1;++c){const d=t[c];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))n=!0;else if(/^s(hift)?$/i.test(d))a=!0;else if(/^mod$/i.test(d))e=="mac"?l=!0:n=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(i="Alt-"+i),n&&(i="Ctrl-"+i),l&&(i="Meta-"+i),a&&(i="Shift-"+i),i}function $h(o,e,t){return e.altKey&&(o="Alt-"+o),e.ctrlKey&&(o="Ctrl-"+o),e.metaKey&&(o="Meta-"+o),t!==!1&&e.shiftKey&&(o="Shift-"+o),o}const AR=ae.domEventHandlers({keydown(o,e){return py(fy(e.state),o,e,"editor")}}),Wr=re.define({enables:AR}),uy=new WeakMap;function fy(o){let e=o.facet(Wr),t=uy.get(e);return t||uy.set(e,t=LR(e.reduce((i,s)=>i.concat(s),[]))),t}function ER(o,e,t){return py(fy(o.state),e,o,t)}let as=null;const PR=4e3;function LR(o,e=_R){let t=Object.create(null),i=Object.create(null),s=(a,l)=>{let c=i[a];if(c==null)i[a]=l;else if(c!=l)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},n=(a,l,c,d)=>{let p=t[a]||(t[a]=Object.create(null)),g=l.split(/ (?!$)/).map(r=>TR(r,e));for(let r=1;r<g.length;r++){let h=g.slice(0,r).join(" ");s(h,!0),p[h]||(p[h]={preventDefault:!0,commands:[u=>{let m=as={view:u,prefix:h,scope:a};return setTimeout(()=>{as==m&&(as=null)},PR),!0}]})}let b=g.join(" ");s(b,!1);let O=p[b]||(p[b]={preventDefault:!1,commands:[]});O.commands.push(c),d&&(O.preventDefault=!0)};for(let a of o){let l=a[e]||a.key;if(l)for(let c of a.scope?a.scope.split(" "):["editor"])n(c,l,a.run,a.preventDefault),a.shift&&n(c,"Shift-"+l,a.shift,a.preventDefault)}return t}function py(o,e,t,i){let s=gM(e),n=s.length==1&&s!=" ",a="",l=!1;as&&as.view==t&&as.scope==i&&(a=as.prefix+" ",(l=Qb.indexOf(e.keyCode)<0)&&(as=null));let c=g=>{if(g){for(let b of g.commands)if(b(t))return!0;g.preventDefault&&(l=!0)}return!1},d=o[i],p;if(d){if(c(d[a+$h(s,e,!n)]))return!0;if(n&&(e.shiftKey||e.altKey||e.metaKey)&&(p=ss[e.keyCode])&&p!=s){if(c(d[a+$h(p,e,!0)]))return!0}else if(n&&e.shiftKey&&c(d[a+$h(s,e,!0)]))return!0}return l}const gy=!ce.ios,zr=re.define({combine(o){return es(o,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function NR(o={}){return[zr.of(o),DR,MR]}class my{constructor(e,t,i,s,n){this.left=e,this.top=t,this.width=i,this.height=s,this.className=n}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const DR=et.fromClass(class{constructor(o){this.view=o,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=o.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=o.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),o.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(zr).cursorBlinkRate+"ms"}update(o){let e=o.startState.facet(zr)!=o.state.facet(zr);(e||o.selectionSet||o.geometryChanged||o.viewportChanged)&&this.view.requestMeasure(this.measureReq),o.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:o}=this.view,e=o.facet(zr),t=o.selection.ranges.map(s=>s.empty?[]:RR(this.view,s)).reduce((s,n)=>s.concat(n)),i=[];for(let s of o.selection.ranges){let n=s==o.selection.main;if(s.empty?!n||gy:e.drawRangeCursor){let a=IR(this.view,s,n);a&&i.push(a)}}return{rangePieces:t,cursors:i}}drawSel({rangePieces:o,cursors:e}){if(o.length!=this.rangePieces.length||o.some((t,i)=>!t.eq(this.rangePieces[i]))){this.selectionLayer.textContent="";for(let t of o)this.selectionLayer.appendChild(t.draw());this.rangePieces=o}if(e.length!=this.cursors.length||e.some((t,i)=>!t.eq(this.cursors[i]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const i of e)this.cursorLayer.appendChild(i.draw())}else e.forEach((i,s)=>i.adjust(t[s]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),by={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};gy&&(by[".cm-line"].caretColor="transparent !important");const MR=vn.highest(ae.theme(by));function yy(o){let e=o.scrollDOM.getBoundingClientRect();return{left:(o.textDirection==we.LTR?e.left:e.right-o.scrollDOM.clientWidth)-o.scrollDOM.scrollLeft,top:e.top-o.scrollDOM.scrollTop}}function Oy(o,e,t){let i=G.cursor(e);return{from:Math.max(t.from,o.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,o.moveToLineBoundary(i,!0,!0).from),type:$e.Text}}function xy(o,e){let t=o.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==$e.Text))return i}return t}function RR(o,e){if(e.to<=o.viewport.from||e.from>=o.viewport.to)return[];let t=Math.max(e.from,o.viewport.from),i=Math.min(e.to,o.viewport.to),s=o.textDirection==we.LTR,n=o.contentDOM,a=n.getBoundingClientRect(),l=yy(o),c=window.getComputedStyle(n.firstChild),d=a.left+parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)),p=a.right-parseInt(c.paddingRight),g=xy(o,t),b=xy(o,i),O=g.type==$e.Text?g:null,r=b.type==$e.Text?b:null;if(o.lineWrapping&&(O&&(O=Oy(o,t,O)),r&&(r=Oy(o,i,r))),O&&r&&O.from==r.from)return u(m(e.from,e.to,O));{let v=O?m(e.from,null,O):y(g,!1),w=r?m(null,e.to,r):y(b,!0),S=[];return(O||g).to<(r||b).from-1?S.push(h(d,v.bottom,p,w.top)):v.bottom<w.top&&o.elementAtHeight((v.bottom+w.top)/2).type==$e.Text&&(v.bottom=w.top=(v.bottom+w.top)/2),u(v).concat(S).concat(u(w))}function h(v,w,S,C){return new my(v-l.left,w-l.top-.01,S-v,C-w+.01,"cm-selectionBackground")}function u({top:v,bottom:w,horizontal:S}){let C=[];for(let T=0;T<S.length;T+=2)C.push(h(S[T],v,S[T+1],w));return C}function m(v,w,S){let C=1e9,T=-1e9,_=[];function $(E,x,k,A,L){let D=o.coordsAtPos(E,E==S.to?-2:2),M=o.coordsAtPos(k,k==S.from?2:-2);C=Math.min(D.top,M.top,C),T=Math.max(D.bottom,M.bottom,T),L==we.LTR?_.push(s&&x?d:D.left,s&&A?p:M.right):_.push(!s&&A?d:M.left,!s&&x?p:D.right)}let N=v??S.from,P=w??S.to;for(let E of o.visibleRanges)if(E.to>N&&E.from<P)for(let x=Math.max(E.from,N),k=Math.min(E.to,P);;){let A=o.state.doc.lineAt(x);for(let L of o.bidiSpans(A)){let D=L.from+A.from,M=L.to+A.from;if(D>=k)break;M>x&&$(Math.max(D,x),v==null&&D<=N,Math.min(M,k),w==null&&M>=P,L.dir)}if(x=A.to+1,x>=k)break}return _.length==0&&$(N,v==null,P,w==null,o.textDirection),{top:C,bottom:T,horizontal:_}}function y(v,w){let S=a.top+(w?v.top:v.bottom);return{top:S,bottom:S,horizontal:[]}}}function IR(o,e,t){let i=o.coordsAtPos(e.head,e.assoc||1);if(!i)return null;let s=yy(o);return new my(i.left-s.left,i.top-s.top,-1,i.bottom-i.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const vy=ue.define({map(o,e){return o==null?null:e.mapPos(o)}}),Xr=ct.define({create(){return null},update(o,e){return o!=null&&(o=e.changes.mapPos(o)),e.effects.reduce((t,i)=>i.is(vy)?i.value:t,o)}}),BR=et.fromClass(class{constructor(o){this.view=o,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(o){var e;let t=o.state.field(Xr);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(o.startState.field(Xr)!=t||o.docChanged||o.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let o=this.view.state.field(Xr),e=o!=null&&this.view.coordsAtPos(o);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(o){this.cursor&&(o?(this.cursor.style.left=o.left+"px",this.cursor.style.top=o.top+"px",this.cursor.style.height=o.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(o){this.view.state.field(Xr)!=o&&this.view.dispatch({effects:vy.of(o)})}},{eventHandlers:{dragover(o){this.setDropPos(this.view.posAtCoords({x:o.clientX,y:o.clientY}))},dragleave(o){(o.target==this.view.contentDOM||!this.view.contentDOM.contains(o.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function QR(){return[Xr,BR]}function wy(o,e,t,i,s){e.lastIndex=0;for(let n=o.iterRange(t,i),a=t,l;!n.next().done;a+=n.value.length)if(!n.lineBreak)for(;l=e.exec(n.value);)s(a+l.index,a+l.index+l[0].length,l)}function VR(o,e){let t=o.visibleRanges;if(t.length==1&&t[0].from==o.viewport.from&&t[0].to==o.viewport.to)return t;let i=[];for(let{from:s,to:n}of t)s=Math.max(o.state.doc.lineAt(s).from,s-e),n=Math.min(o.state.doc.lineAt(n).to,n+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=n:i.push({from:s,to:n});return i}class FR{constructor(e){let{regexp:t,decoration:i,boundary:s,maxLength:n=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco=typeof i=="function"?i:()=>i,this.boundary=s,this.maxLength=n}createDeco(e){let t=new is;for(let{from:i,to:s}of VR(e,this.maxLength))wy(e.state.doc,this.regexp,i,s,(n,a,l)=>t.add(n,a,this.getDeco(l,e,n)));return t.finish()}updateDeco(e,t){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((n,a,l,c)=>{c>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),s=Math.max(c,s))}),e.viewportChanged||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),i,s):t}updateRange(e,t,i,s){for(let n of e.visibleRanges){let a=Math.max(n.from,i),l=Math.min(n.to,s);if(l>a){let c=e.state.doc.lineAt(a),d=c.to<l?e.state.doc.lineAt(l):c,p=Math.max(n.from,c.from),g=Math.min(n.to,d.to);if(this.boundary){for(;a>c.from;a--)if(this.boundary.test(c.text[a-1-c.from])){p=a;break}for(;l<d.to;l++)if(this.boundary.test(d.text[l-d.from])){g=l;break}}let b=[],O;if(c==d)for(this.regexp.lastIndex=p-c.from;(O=this.regexp.exec(c.text))&&O.index<g-c.from;){let r=O.index+c.from;b.push(this.getDeco(O,e,r).range(r,r+O[0].length))}else wy(e.state.doc,this.regexp,p,g,(r,h,u)=>b.push(this.getDeco(u,e,r).range(r,h)));t=t.update({filterFrom:p,filterTo:g,filter:(r,h)=>r<p||h>g,add:b})}}return t}}const Ph=/x/.unicode!=null?"gu":"g",WR=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮\uFEFF￹-￼]`,Ph),zR={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Lh=null;function XR(){var o;if(Lh==null&&typeof document<"u"&&document.body){let e=document.body.style;Lh=((o=e.tabSize)!==null&&o!==void 0?o:e.MozTabSize)!=null}return Lh||!1}const ma=re.define({combine(o){let e=es(o,{render:null,specialChars:WR,addSpecialChars:null});return(e.replaceTabs=!XR())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Ph)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Ph)),e}});function YR(o={}){return[ma.of(o),HR()]}let ky=null;function HR(){return ky||(ky=et.fromClass(class{constructor(o){this.view=o,this.decorations=oe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(o.state.facet(ma)),this.decorations=this.decorator.createDeco(o)}makeDecorator(o){return new FR({regexp:o.specialChars,decoration:(e,t,i)=>{let{doc:s}=t.state,n=gt(e[0],0);if(n==9){let a=s.lineAt(i),l=t.state.tabSize,c=Ar(a.text,l,i-a.from);return oe.replace({widget:new ZR((l-c%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[n]||(this.decorationCache[n]=oe.replace({widget:new UR(o,n)}))},boundary:o.replaceTabs?void 0:/[^]/})}update(o){let e=o.state.facet(ma);o.startState.facet(ma)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(o.view)):this.decorations=this.decorator.updateDeco(o,this.decorations)}},{decorations:o=>o.decorations}))}const GR="•";function jR(o){return o>=32?GR:o==10?"␤":String.fromCharCode(9216+o)}class UR extends Li{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=jR(this.code),i=e.state.phrase("Control character")+" "+(zR[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,t);if(s)return s;let n=document.createElement("span");return n.textContent=t,n.title=i,n.setAttribute("aria-label",i),n.className="cm-specialChar",n}ignoreEvent(){return!1}}class ZR extends Li{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function qR(){return JR}const KR=oe.line({class:"cm-activeLine"}),JR=et.fromClass(class{constructor(o){this.decorations=this.getDeco(o)}update(o){(o.docChanged||o.selectionSet)&&(this.decorations=this.getDeco(o.view))}getDeco(o){let e=-1,t=[];for(let i of o.state.selection.ranges){if(!i.empty)return oe.none;let s=o.lineBlockAt(i.head);s.from>e&&(t.push(KR.range(s.from)),e=s.from)}return oe.set(t)}},{decorations:o=>o.decorations}),Nh=Ji.define(),eI=Ji.define(),tI=re.define(),Sy=re.define({combine(o){return es(o,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function iI(o){let e=0;return o.iterChangedRanges((t,i)=>e=i),e}const Cy=ct.define({create(){return ui.empty},update(o,e){let t=e.state.facet(Sy),i=e.annotation(Nh);if(i){let c=e.docChanged?G.single(iI(e.changes)):void 0,d=St.fromTransaction(e,c),p=i.side,g=p==0?o.undone:o.done;return d?g=ya(g,g.length,t.minDepth,d):g=$y(g,e.startState.selection),new ui(p==0?i.rest:g,p==0?g:i.rest)}let s=e.annotation(eI);if((s=="full"||s=="before")&&(o=o.isolate()),e.annotation(st.addToHistory)===!1)return e.changes.empty?o:o.addMapping(e.changes.desc);let n=St.fromTransaction(e),a=e.annotation(st.time),l=e.annotation(st.userEvent);return n?o=o.addChanges(n,a,l,t.newGroupDelay,t.minDepth):e.selection&&(o=o.addSelection(e.startState.selection,a,l,t.newGroupDelay)),(s=="full"||s=="after")&&(o=o.isolate()),o},toJSON(o){return{done:o.done.map(e=>e.toJSON()),undone:o.undone.map(e=>e.toJSON())}},fromJSON(o){return new ui(o.done.map(St.fromJSON),o.undone.map(St.fromJSON))}});function _y(o={}){return[Cy,Sy.of(o),ae.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Ty:e.inputType=="historyRedo"?Ay:null;return i?(e.preventDefault(),i(t)):!1}})]}function ba(o,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let s=t.field(Cy,!1);if(!s)return!1;let n=s.pop(o,t,e);return n?(i(n),!0):!1}}const Ty=ba(0,!1),Ay=ba(1,!1),sI=ba(0,!0),nI=ba(1,!0);class St{constructor(e,t,i,s,n){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=s,this.selectionsAfter=n}setSelAfter(e){return new St(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new St(e.changes&&it.fromJSON(e.changes),[],e.mapped&&$i.fromJSON(e.mapped),e.startSelection&&G.fromJSON(e.startSelection),e.selectionsAfter.map(G.fromJSON))}static fromTransaction(e,t){let i=Ht;for(let s of e.startState.facet(tI)){let n=s(e);n.length&&(i=i.concat(n))}return!i.length&&e.changes.empty?null:new St(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Ht)}static selection(e){return new St(void 0,Ht,void 0,void 0,e)}}function ya(o,e,t,i){let s=e+1>t+20?e-t-1:0,n=o.slice(s,e);return n.push(i),n}function rI(o,e){let t=[],i=!1;return o.iterChangedRanges((s,n)=>t.push(s,n)),e.iterChangedRanges((s,n,a,l)=>{for(let c=0;c<t.length;){let d=t[c++],p=t[c++];l>=d&&a<=p&&(i=!0)}}),i}function oI(o,e){return o.ranges.length==e.ranges.length&&o.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function Ey(o,e){return o.length?e.length?o.concat(e):o:e}const Ht=[],aI=200;function $y(o,e){if(o.length){let t=o[o.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-aI));return i.length&&i[i.length-1].eq(e)?o:(i.push(e),ya(o,o.length-1,1e9,t.setSelAfter(i)))}else return[St.selection([e])]}function lI(o){let e=o[o.length-1],t=o.slice();return t[o.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Dh(o,e){if(!o.length)return o;let t=o.length,i=Ht;for(;t;){let s=cI(o[t-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let n=o.slice(0,t);return n[t-1]=s,n}else e=s.mapped,t--,i=s.selectionsAfter}return i.length?[St.selection(i)]:Ht}function cI(o,e,t){let i=Ey(o.selectionsAfter.length?o.selectionsAfter.map(l=>l.map(e)):Ht,t);if(!o.changes)return St.selection(i);let s=o.changes.map(e),n=e.mapDesc(o.changes,!0),a=o.mapped?o.mapped.composeDesc(n):n;return new St(s,ue.mapEffects(o.effects,e),a,o.startSelection.map(n),i)}const hI=/^(input\.type|delete)($|\.)/;class ui{constructor(e,t,i=0,s=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new ui(this.done,this.undone):this}addChanges(e,t,i,s,n){let a=this.done,l=a[a.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||hI.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<s&&rI(l.changes,e.changes)||i=="input.type.compose")?a=ya(a,a.length-1,n,new St(e.changes.compose(l.changes),Ey(e.effects,l.effects),l.mapped,l.startSelection,Ht)):a=ya(a,a.length,n,e),new ui(a,Ht,t,i)}addSelection(e,t,i,s){let n=this.done.length?this.done[this.done.length-1].selectionsAfter:Ht;return n.length>0&&t-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&oI(n[n.length-1],e)?this:new ui($y(this.done,e),this.undone,t,i)}addMapping(e){return new ui(Dh(this.done,e),Dh(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let n=s[s.length-1];if(i&&n.selectionsAfter.length)return t.update({selection:n.selectionsAfter[n.selectionsAfter.length-1],annotations:Nh.of({side:e,rest:lI(s)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(n.changes){let a=s.length==1?Ht:s.slice(0,s.length-1);return n.mapped&&(a=Dh(a,n.mapped)),t.update({changes:n.changes,selection:n.startSelection,effects:n.effects,annotations:Nh.of({side:e,rest:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ui.empty=new ui(Ht,Ht);const Py=[{key:"Mod-z",run:Ty,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ay,preventDefault:!0},{key:"Mod-u",run:sI,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:nI,preventDefault:!0}],Ly=1024;let dI=0;class Gt{constructor(e,t){this.from=e,this.to=t}}class fe{constructor(e={}){this.id=dI++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ct.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}fe.closedBy=new fe({deserialize:o=>o.split(" ")}),fe.openedBy=new fe({deserialize:o=>o.split(" ")}),fe.group=new fe({deserialize:o=>o.split(" ")}),fe.contextHash=new fe({perNode:!0}),fe.lookAhead=new fe({perNode:!0}),fe.mounted=new fe({perNode:!0});class uI{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}}const fI=Object.create(null);class Ct{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):fI,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new Ct(e.name||"",t,e.id,i);if(e.props){for(let n of e.props)if(Array.isArray(n)||(n=n(s)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(fe.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return i=>{for(let s=i.prop(fe.group),n=-1;n<(s?s.length:0);n++){let a=t[n<0?i.name:s[n]];if(a)return a}}}}Ct.none=new Ct("",Object.create(null),0,8);class Mh{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let n of e){let a=n(i);a&&(s||(s=Object.assign({},i.props)),s[a[0].id]=a[1])}t.push(s?new Ct(i.name,s,i.id,i.flags):i)}return new Mh(t)}}const Oa=new WeakMap,Ny=new WeakMap;class Qe{constructor(e,t,i,s,n){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,n&&n.length){this.props=Object.create(null);for(let[a,l]of n)this.props[typeof a=="number"?a:a.id]=l}}toString(){let e=this.prop(fe.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let s=i.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e,t=0){let i=e!=null&&Oa.get(this)||this.topNode,s=new Yr(i);return e!=null&&(s.moveTo(e,t),Oa.set(this,s._tree)),s}fullCursor(){return new Yr(this.topNode,1)}get topNode(){return new fi(this,0,0,null)}resolve(e,t=0){let i=An(Oa.get(this)||this.topNode,e,t,!1);return Oa.set(this,i),i}resolveInner(e,t=0){let i=An(Ny.get(this)||this.topNode,e,t,!0);return Ny.set(this,i),i}iterate(e){let{enter:t,leave:i,from:s=0,to:n=this.length}=e;for(let a=this.cursor(),l=()=>a.node;;){let c=!1;if(a.from<=n&&a.to>=s&&(a.type.isAnonymous||t(a.type,a.from,a.to,l)!==!1)){if(a.firstChild())continue;a.type.isAnonymous||(c=!0)}for(;c&&i&&i(a.type,a.from,a.to,l),c=a.type.isAnonymous,!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Bh(Ct.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,s)=>new Qe(this.type,t,i,s,this.propValues),e.makeTree||((t,i,s)=>new Qe(Ct.none,t,i,s)))}static build(e){return gI(e)}}Qe.empty=new Qe(Ct.none,[],[],0);class Rh{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Rh(this.buffer,this.index)}}class Rs{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Ct.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],s=this.set.types[t],n=s.name;if(/\W/.test(n)&&!s.isError&&(n=JSON.stringify(n)),e+=4,i==e)return n;let a=[];for(;e<i;)a.push(this.childString(e)),e=this.buffer[e+3];return n+"("+a.join(",")+")"}findChild(e,t,i,s,n){let{buffer:a}=this,l=-1;for(let c=e;c!=t&&!(Dy(n,s,a[c+1],a[c+2])&&(l=c,i>0));c=a[c+3]);return l}slice(e,t,i,s){let n=this.buffer,a=new Uint16Array(t-e);for(let l=e,c=0;l<t;)a[c++]=n[l++],a[c++]=n[l++]-i,a[c++]=n[l++]-i,a[c++]=n[l++]-e;return new Rs(a,s-i,this.set)}}function Dy(o,e,t,i){switch(o){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function My(o,e){let t=o.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(o=t,t=i.prevSibling):t=i}return o}function An(o,e,t,i){for(var s;o.from==o.to||(t<1?o.from>=e:o.from>e)||(t>-1?o.to<=e:o.to<e);){let n=!i&&o instanceof fi&&o.index<0?null:o.parent;if(!n)return o;o=n}if(i)for(let n=o,a=n.parent;a;n=a,a=n.parent)n instanceof fi&&n.index<0&&((s=a.enter(e,t,!0))===null||s===void 0?void 0:s.from)!=n.from&&(o=a);for(;;){let n=o.enter(e,t,i);if(!n)return o;o=n}}class fi{constructor(e,t,i,s){this.node=e,this._from=t,this.index=i,this._parent=s}get type(){return this.node.type}get name(){return this.node.type.name}get from(){return this._from}get to(){return this._from+this.node.length}nextChild(e,t,i,s,n=0){for(let a=this;;){for(let{children:l,positions:c}=a.node,d=t>0?l.length:-1;e!=d;e+=t){let p=l[e],g=c[e]+a._from;if(Dy(s,i,g,g+p.length)){if(p instanceof Rs){if(n&2)continue;let b=p.findChild(0,p.buffer.length,t,i-g,s);if(b>-1)return new ls(new pI(a,p,e,g),null,b)}else if(n&1||!p.type.isAnonymous||Ih(p)){let b;if(!(n&1)&&p.props&&(b=p.prop(fe.mounted))&&!b.overlay)return new fi(b.tree,g,e,a);let O=new fi(p,g,e,a);return n&1||!O.type.isAnonymous?O:O.nextChild(t<0?p.children.length-1:0,t,i,s)}}}if(n&1||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent.node.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this.node.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this.node.children.length-1,-1,e,-2)}enter(e,t,i=!0,s=!0){let n;if(i&&(n=this.node.prop(fe.mounted))&&n.overlay){let a=e-this.from;for(let{from:l,to:c}of n.overlay)if((t>0?l<=a:l<a)&&(t<0?c>=a:c>a))return new fi(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,s?0:2)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get cursor(){return new Yr(this)}get tree(){return this.node}toTree(){return this.node}resolve(e,t=0){return An(this,e,t,!1)}resolveInner(e,t=0){return An(this,e,t,!0)}enterUnfinishedNodesBefore(e){return My(this,e)}getChild(e,t=null,i=null){let s=xa(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return xa(this,e,t,i)}toString(){return this.node.toString()}}function xa(o,e,t,i){let s=o.cursor,n=[];if(!s.firstChild())return n;if(t!=null){for(;!s.type.is(t);)if(!s.nextSibling())return n}for(;;){if(i!=null&&s.type.is(i))return n;if(s.type.is(e)&&n.push(s.node),!s.nextSibling())return i==null?n:[]}}class pI{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class ls{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:s}=this.context,n=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return n<0?null:new ls(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i,s=!0){if(!s)return null;let{buffer:n}=this.context,a=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return a<0?null:new ls(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ls(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ls(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get cursor(){return new Yr(this)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,n=i.buffer[this.index+3];if(n>s){let a=i.buffer[this.index+1],l=i.buffer[this.index+2];e.push(i.slice(s,n,a,l)),t.push(0)}return new Qe(this.type,e,t,this.to-this.from)}resolve(e,t=0){return An(this,e,t,!1)}resolveInner(e,t=0){return An(this,e,t,!0)}enterUnfinishedNodesBefore(e){return My(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let s=xa(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return xa(this,e,t,i)}}class Yr{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof fi)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof fi?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree.node.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,n=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return n<0?!1:(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=!0,s=!0){return this.buffer?s?this.enterChild(1,e,t):!1:this.yield(this._tree.enter(e,t,i&&!(this.mode&1),s))}parent(){if(!this.buffer)return this.yieldNode(this.mode&1?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&1?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let n=0;n<this.index;n++)if(s.buffer.buffer[n+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let n=t+e,a=e<0?-1:i.node.children.length;n!=a;n+=e){let l=i.node.children[n];if(this.mode&1||l instanceof Rs||!l.type.isAnonymous||Ih(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,n=this.stack.length;n>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;t=a,i=n+1;break e}s=this.stack[--n]}for(let s=i;s<this.stack.length;s++)t=new ls(this.buffer,t,this.stack[s]);return this.bufferNode=new ls(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree.node}}function Ih(o){return o.children.some(e=>e instanceof Rs||!e.type.isAnonymous||Ih(e))}function gI(o){var e;let{buffer:t,nodeSet:i,maxBufferLength:s=Ly,reused:n=[],minRepeatType:a=i.types.length}=o,l=Array.isArray(t)?new Rh(t,t.length):t,c=i.types,d=0,p=0;function g(w,S,C,T,_){let{id:$,start:N,end:P,size:E}=l,x=p;for(;E<0;)if(l.next(),E==-1){let M=n[$];C.push(M),T.push(N-w);return}else if(E==-3){d=$;return}else if(E==-4){p=$;return}else throw new RangeError(`Unrecognized record size: ${E}`);let k=c[$],A,L,D=N-w;if(P-N<=s&&(L=h(l.pos-S,_))){let M=new Uint16Array(L.size-L.skip),Q=l.pos-L.size,B=M.length;for(;l.pos>Q;)B=u(L.start,M,B);A=new Rs(M,P-L.start,i),D=L.start-w}else{let M=l.pos-E;l.next();let Q=[],B=[],X=$>=a?$:-1,te=0,he=P;for(;l.pos>M;)X>=0&&l.id==X&&l.size>=0?(l.end<=he-s&&(O(Q,B,N,te,l.end,he,X,x),te=Q.length,he=l.end),l.next()):g(N,M,Q,B,X);if(X>=0&&te>0&&te<Q.length&&O(Q,B,N,te,N,he,X,x),Q.reverse(),B.reverse(),X>-1&&te>0){let j=b(k);A=Bh(k,Q,B,0,Q.length,0,P-N,j,j)}else A=r(k,Q,B,P-N,x-P)}C.push(A),T.push(D)}function b(w){return(S,C,T)=>{let _=0,$=S.length-1,N,P;if($>=0&&(N=S[$])instanceof Qe){if(!$&&N.type==w&&N.length==T)return N;(P=N.prop(fe.lookAhead))&&(_=C[$]+N.length+P)}return r(w,S,C,T,_)}}function O(w,S,C,T,_,$,N,P){let E=[],x=[];for(;w.length>T;)E.push(w.pop()),x.push(S.pop()+C-_);w.push(r(i.types[N],E,x,$-_,P-$)),S.push(_-C)}function r(w,S,C,T,_=0,$){if(d){let N=[fe.contextHash,d];$=$?[N].concat($):[N]}if(_>25){let N=[fe.lookAhead,_];$=$?[N].concat($):[N]}return new Qe(w,S,C,T,$)}function h(w,S){let C=l.fork(),T=0,_=0,$=0,N=C.end-s,P={size:0,start:0,skip:0};e:for(let E=C.pos-w;C.pos>E;){let x=C.size;if(C.id==S&&x>=0){P.size=T,P.start=_,P.skip=$,$+=4,T+=4,C.next();continue}let k=C.pos-x;if(x<0||k<E||C.start<N)break;let A=C.id>=a?4:0,L=C.start;for(C.next();C.pos>k;){if(C.size<0)if(C.size==-3)A+=4;else break e;else C.id>=a&&(A+=4);C.next()}_=L,T+=x,$+=A}return(S<0||T==w)&&(P.size=T,P.start=_,P.skip=$),P.size>4?P:void 0}function u(w,S,C){let{id:T,start:_,end:$,size:N}=l;if(l.next(),N>=0&&T<a){let P=C;if(N>4){let E=l.pos-(N-4);for(;l.pos>E;)C=u(w,S,C)}S[--C]=P,S[--C]=$-w,S[--C]=_-w,S[--C]=T}else N==-3?d=T:N==-4&&(p=T);return C}let m=[],y=[];for(;l.pos>0;)g(o.start||0,o.bufferStart||0,m,y,-1);let v=(e=o.length)!==null&&e!==void 0?e:m.length?y[0]+m[0].length:0;return new Qe(c[o.topID],m.reverse(),y.reverse(),v)}const Ry=new WeakMap;function va(o,e){if(!o.isAnonymous||e instanceof Rs||e.type!=o)return 1;let t=Ry.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=o||!(i instanceof Qe)){t=1;break}t+=va(o,i)}Ry.set(e,t)}return t}function Bh(o,e,t,i,s,n,a,l,c){let d=0;for(let r=i;r<s;r++)d+=va(o,e[r]);let p=Math.ceil(d*1.5/8),g=[],b=[];function O(r,h,u,m,y){for(let v=u;v<m;){let w=v,S=h[v],C=va(o,r[v]);for(v++;v<m;v++){let T=va(o,r[v]);if(C+T>=p)break;C+=T}if(v==w+1){if(C>p){let T=r[w];O(T.children,T.positions,0,T.children.length,h[w]+y);continue}g.push(r[w])}else{let T=h[v-1]+r[v-1].length-S;g.push(Bh(o,r,h,w,v,S,T,null,c))}b.push(S+y-n)}}return O(e,t,i,s,0),(l||c)(g,b,a)}class Mi{constructor(e,t,i,s,n=!1,a=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(n?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let s=[new Mi(0,e.length,e,0,!1,i)];for(let n of t)n.to>e.length&&s.push(n);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],n=1,a=e.length?e[0]:null;for(let l=0,c=0,d=0;;l++){let p=l<t.length?t[l]:null,g=p?p.fromA:1e9;if(g-c>=i)for(;a&&a.from<g;){let b=a;if(c>=b.from||g<=b.to||d){let O=Math.max(b.from,c)-d,r=Math.min(b.to,g)-d;b=O>=r?null:new Mi(O,r,b.tree,b.offset+d,l>0,!!p)}if(b&&s.push(b),a.to>g)break;a=n<e.length?e[n++]:null}if(!p)break;c=p.toA,d=p.toA-p.toB}return s}}class Iy{startParse(e,t,i){return typeof e=="string"&&(e=new mI(e)),i=i?i.length?i.map(s=>new Gt(s.from,s.to)):[new Gt(0,0)]:[new Gt(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let n=s.advance();if(n)return n}}}class mI{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function bI(o){return(e,t,i,s)=>new OI(e,o,t,i,s)}class By{constructor(e,t,i,s,n){this.parser=e,this.parse=t,this.overlay=i,this.target=s,this.ranges=n}}class yI{constructor(e,t,i,s,n,a,l){this.parser=e,this.predicate=t,this.mounts=i,this.index=s,this.start=n,this.target=a,this.prev=l,this.depth=0,this.ranges=[]}}const Qh=new fe({perNode:!0});class OI{constructor(e,t,i,s,n){this.nest=t,this.input=i,this.fragments=s,this.ranges=n,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let i=this.baseParse.advance();if(!i)return null;if(this.baseParse=null,this.baseTree=i,this.startInner(),this.stoppedAt!=null)for(let s of this.inner)s.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let i=this.baseTree;return this.stoppedAt!=null&&(i=new Qe(i.type,i.children,i.positions,i.length,i.propValues.concat([[Qh,this.stoppedAt]]))),i}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let i=Object.assign(Object.create(null),e.target.props);i[fe.mounted.id]=new uI(t,e.overlay,e.parser),e.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new wI(this.fragments),t=null,i=null,s=new Yr(new fi(this.baseTree,this.ranges[0].from,0,null),1);e:for(let n,a;this.stoppedAt==null||s.from<this.stoppedAt;){let l=!0,c;if(e.hasNode(s)){if(t){let d=t.mounts.find(p=>p.frag.from<=s.from&&p.frag.to>=s.to&&p.mount.overlay);if(d)for(let p of d.mount.overlay){let g=p.from+d.pos,b=p.to+d.pos;g>=s.from&&b<=s.to&&!t.ranges.some(O=>O.from<b&&O.to>g)&&t.ranges.push({from:g,to:b})}}l=!1}else if(i&&(a=xI(i.ranges,s.from,s.to)))l=a!=2;else if(!s.type.isAnonymous&&s.from<s.to&&(n=this.nest(s,this.input))){s.tree||vI(s);let d=e.findMounts(s.from,n.parser);if(typeof n.overlay=="function")t=new yI(n.parser,n.overlay,d,this.inner.length,s.from,s.tree,t);else{let p=Fy(this.ranges,n.overlay||[new Gt(s.from,s.to)]);p.length&&this.inner.push(new By(n.parser,n.parser.startParse(this.input,Wy(d,p),p),n.overlay?n.overlay.map(g=>new Gt(g.from-s.from,g.to-s.from)):null,s.tree,p)),n.overlay?p.length&&(i={ranges:p,depth:0,prev:i}):l=!1}}else t&&(c=t.predicate(s))&&(c===!0&&(c=new Gt(s.from,s.to)),c.from<c.to&&t.ranges.push(c));if(l&&s.firstChild())t&&t.depth++,i&&i.depth++;else for(;!s.nextSibling();){if(!s.parent())break e;if(t&&!--t.depth){let d=Fy(this.ranges,t.ranges);d.length&&this.inner.splice(t.index,0,new By(t.parser,t.parser.startParse(this.input,Wy(t.mounts,d),d),t.ranges.map(p=>new Gt(p.from-t.start,p.to-t.start)),t.target,d)),t=t.prev}i&&!--i.depth&&(i=i.prev)}}}}function xI(o,e,t){for(let i of o){if(i.from>=t)break;if(i.to>e)return i.from<=e&&i.to>=t?2:1}return 0}function Qy(o,e,t,i,s,n){if(e<t){let a=o.buffer[e+1],l=o.buffer[t-2];i.push(o.slice(e,t,a,l)),s.push(a-n)}}function vI(o){let{node:e}=o,t=0;do o.parent(),t++;while(!o.tree);let i=0,s=o.tree,n=0;for(;n=s.positions[i]+o.from,!(n<=e.from&&n+s.children[i].length>=e.to);i++);let a=s.children[i],l=a.buffer;function c(d,p,g,b,O){let r=d;for(;l[r+2]+n<=e.from;)r=l[r+3];let h=[],u=[];Qy(a,d,r,h,u,b);let m=l[r+1],y=l[r+2],v=m+n==e.from&&y+n==e.to&&l[r]==e.type.id;return h.push(v?e.toTree():c(r+4,l[r+3],a.set.types[l[r]],m,y-m)),u.push(m-b),Qy(a,l[r+3],p,h,u,b),new Qe(g,h,u,O)}s.children[i]=c(0,l.length,Ct.none,0,a.length);for(let d=0;d<=t;d++)o.childAfter(e.from)}class Vy{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.fullCursor()}moveTo(e){let{cursor:t}=this,i=e-this.offset;for(;!this.done&&t.from<i;)t.to>=e&&t.enter(i,1,!1,!1)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof Qe)t=t.children[0];else break}return!1}}let wI=class{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let i=this.curFrag=e[0];this.curTo=(t=i.tree.prop(Qh))!==null&&t!==void 0?t:i.to,this.inner=new Vy(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(Qh))!==null&&e!==void 0?e:t.to,this.inner=new Vy(t.tree,-t.offset)}}findMounts(e,t){var i;let s=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let n=this.inner.cursor.node;n;n=n.parent){let a=(i=n.tree)===null||i===void 0?void 0:i.prop(fe.mounted);if(a&&a.parser==t)for(let l=this.fragI;l<this.fragments.length;l++){let c=this.fragments[l];if(c.from>=n.to)break;c.tree==this.curFrag.tree&&s.push({frag:c,pos:n.from-c.offset,mount:a})}}}return s}};function Fy(o,e){let t=null,i=e;for(let s=1,n=0;s<o.length;s++){let a=o[s-1].to,l=o[s].from;for(;n<i.length;n++){let c=i[n];if(c.from>=l)break;c.to<=a||(t||(i=t=e.slice()),c.from<a?(t[n]=new Gt(c.from,a),c.to>l&&t.splice(n+1,0,new Gt(l,c.to))):c.to>l?t[n--]=new Gt(l,c.to):t.splice(n--,1))}}return i}function kI(o,e,t,i){let s=0,n=0,a=!1,l=!1,c=-1e9,d=[];for(;;){let p=s==o.length?1e9:a?o[s].to:o[s].from,g=n==e.length?1e9:l?e[n].to:e[n].from;if(a!=l){let b=Math.max(c,t),O=Math.min(p,g,i);b<O&&d.push(new Gt(b,O))}if(c=Math.min(p,g),c==1e9)break;p==c&&(a?(a=!1,s++):a=!0),g==c&&(l?(l=!1,n++):l=!0)}return d}function Wy(o,e){let t=[];for(let{pos:i,mount:s,frag:n}of o){let a=i+(s.overlay?s.overlay[0].from:0),l=a+s.tree.length,c=Math.max(n.from,a),d=Math.min(n.to,l);if(s.overlay){let p=s.overlay.map(b=>new Gt(b.from+i,b.to+i)),g=kI(e,p,c,d);for(let b=0,O=c;;b++){let r=b==g.length,h=r?d:g[b].from;if(h>O&&t.push(new Mi(O,h,s.tree,-a,n.from>=O,n.to<=h)),r)break;O=g[b].to}}else t.push(new Mi(c,d,s.tree,-a,n.from>=a,n.to<=l))}return t}var Vh;const wa=new fe;function SI(o){return re.define({combine:o?e=>e.concat(o):void 0})}class pi{constructor(e,t,i,s=[]){this.data=e,this.topNode=i,ve.prototype.hasOwnProperty("tree")||Object.defineProperty(ve.prototype,"tree",{get(){return qe(this)}}),this.parser=t,this.extension=[Ri.of(this),ve.languageData.of((n,a,l)=>n.facet(zy(n,a,l)))].concat(s)}isActiveAt(e,t,i=-1){return zy(e,t,i)==this.data}findRegions(e){let t=e.facet(Ri);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],s=(n,a)=>{if(n.prop(wa)==this.data){i.push({from:a,to:a+n.length});return}let l=n.prop(fe.mounted);if(l){if(l.tree.prop(wa)==this.data){if(l.overlay)for(let c of l.overlay)i.push({from:c.from+a,to:c.to+a});else i.push({from:a,to:a+n.length});return}else if(l.overlay){let c=i.length;if(s(l.tree,l.overlay[0].from+a),i.length>c)return}}for(let c=0;c<n.children.length;c++){let d=n.children[c];d instanceof Qe&&s(d,n.positions[c]+a)}};return s(qe(e),0),i}get allowsNesting(){return!0}}pi.setState=ue.define();function zy(o,e,t){let i=o.facet(Ri);if(!i)return null;let s=i.data;if(i.allowsNesting)for(let n=qe(o).topNode;n;n=n.enter(e,t,!0,!1))s=n.type.prop(wa)||s;return s}class En extends pi{constructor(e,t){super(e,t,t.topNode),this.parser=t}static define(e){let t=SI(e.languageData);return new En(t,e.parser.configure({props:[wa.add(i=>i.isTop?t:void 0)]}))}configure(e){return new En(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.wrappers.length>0}}function qe(o){let e=o.field(pi.state,!1);return e?e.tree:Qe.empty}class CI{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Hr=null;class Fh{constructor(e,t,i=[],s,n,a,l,c){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=n,this.viewport=a,this.skipped=l,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}startParse(){return this.parser.startParse(new CI(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Qe.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Mi.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Mi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Hr;Hr=this;try{return e()}finally{Hr=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Xy(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:n,viewport:a,skipped:l}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((d,p,g,b)=>c.push({fromA:d,toA:p,fromB:g,toB:b})),i=Mi.applyChanges(i,c),s=Qe.empty,n=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){l=[];for(let d of this.skipped){let p=e.mapPos(d.from,1),g=e.mapPos(d.to,-1);p<g&&l.push({from:p,to:g})}}}return new Fh(this.parser,t,i,s,n,a,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:n}=this.skipped[i];s<e.to&&n>e.from&&(this.fragments=Xy(this.fragments,s,n),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Iy{createParse(t,i,s){let n=s[0].from,a=s[s.length-1].to;return{parsedPos:n,advance(){let c=Hr;if(c){for(let d of s)c.tempSkipped.push(d);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=a,new Qe(Ct.none,[],[],a-n)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Hr}}function Xy(o,e,t){return Mi.applyChanges(o,[{fromA:e,toA:t,fromB:e,toB:t}])}class $n{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new $n(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=new Fh(e.facet(Ri).parser,e,[],Qe.empty,0,{from:0,to:t},[],null);return i.work(20,t)||i.takeTree(),new $n(i)}}pi.state=ct.define({create:$n.init,update(o,e){for(let t of e.effects)if(t.is(pi.setState))return t.value;return e.startState.facet(Ri)!=e.state.facet(Ri)?$n.init(e.state):o.apply(e)}});let Yy=o=>{let e=setTimeout(()=>o(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Yy=o=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(o,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Wh=typeof navigator<"u"&&(!((Vh=navigator.scheduling)===null||Vh===void 0)&&Vh.isInputPending)?()=>navigator.scheduling.isInputPending():null,_I=et.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(pi.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(pi.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Yy(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,n=i.field(pi.state);if(n.tree==n.context.tree&&n.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Wh?Math.max(25,e.timeRemaining()-5):1e9),l=n.context.treeLen<s&&i.doc.length>s+1e3,c=n.context.work(()=>Wh&&Wh()||Date.now()>a,s+(l?0:1e5));this.chunkBudget-=Date.now()-t,(c||this.chunkBudget<=0)&&(n.context.takeTree(),this.view.dispatch({effects:pi.setState.of(new $n(n.context))})),this.chunkBudget>0&&!(c&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(n.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Yt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ri=re.define({combine(o){return o.length?o[0]:null},enables:[pi.state,_I]});class zh{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const TI=re.define(),ka=re.define({combine:o=>{if(!o.length)return"  ";if(!/^(?: +|\t+)$/.test(o[0]))throw new Error("Invalid indent unit: "+JSON.stringify(o[0]));return o[0]}});function Sa(o){let e=o.facet(ka);return e.charCodeAt(0)==9?o.tabSize*e.length:e.length}function Gr(o,e){let t="",i=o.tabSize;if(o.facet(ka).charCodeAt(0)==9)for(;e>=i;)t+="	",e-=i;for(let s=0;s<e;s++)t+=" ";return t}function Xh(o,e){o instanceof ve&&(o=new Ca(o));for(let i of o.state.facet(TI)){let s=i(o,e);if(s!=null)return s}let t=qe(o.state);return t?AI(o,t,e):null}class Ca{constructor(e,t={}){this.state=e,this.options=t,this.unit=Sa(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:n}=this.options;return s!=null&&s>=i.from&&s<=i.to?n&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),n=this.countColumn(i,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(n+=a-this.countColumn(i,i.search(/\S|$/))),n}countColumn(e,t=e.length){return Ar(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),n=this.options.overrideIndentation;if(n){let a=n(s);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const _a=new fe;function AI(o,e,t){return Hy(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,o)}function EI(o){return o.pos==o.options.simulateBreak&&o.options.simulateDoubleBreak}function $I(o){let e=o.type.prop(_a);if(e)return e;let t=o.firstChild,i;if(t&&(i=t.type.prop(fe.closedBy))){let s=o.lastChild,n=s&&i.indexOf(s.name)>-1;return a=>Gy(a,!0,1,void 0,n&&!EI(a)?s.from:void 0)}return o.parent==null?PI:null}function Hy(o,e,t){for(;o;o=o.parent){let i=$I(o);if(i)return i(new LI(t,e,o))}return null}function PI(){return 0}class LI extends Ca{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(NI(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?Hy(e,this.pos,this.base):0}}function NI(o,e){for(let t=e;t;t=t.parent)if(o==t)return!0;return!1}function DI(o){let e=o.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let s=o.options.simulateBreak,n=o.state.doc.lineAt(t.from),a=s==null||s<=n.from?n.to:Math.min(n.to,s);for(let l=t.to;;){let c=e.childAfter(l);if(!c||c==i)return null;if(!c.type.isSkipped)return c.from<a?t:null;l=c.to}}function MI({closing:o,align:e=!0,units:t=1}){return i=>Gy(i,e,t,o)}function Gy(o,e,t,i,s){let n=o.textAfter,a=n.match(/^\s*/)[0].length,l=i&&n.slice(a,a+i.length)==i||s==o.pos+a,c=e?DI(o):null;return c?l?o.column(c.from):o.column(c.to):o.baseIndent+(l?0:o.unit*t)}const RI=o=>o.baseIndent;function Ta({except:o,units:e=1}={}){return t=>{let i=o&&o.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const II=200;function BI(){return ve.transactionFilter.of(o=>{if(!o.docChanged||!o.isUserEvent("input.type")&&!o.isUserEvent("input.complete"))return o;let e=o.startState.languageDataAt("indentOnInput",o.startState.selection.main.head);if(!e.length)return o;let t=o.newDoc,{head:i}=o.newSelection.main,s=t.lineAt(i);if(i>s.from+II)return o;let n=t.sliceString(s.from,i);if(!e.some(d=>d.test(n)))return o;let{state:a}=o,l=-1,c=[];for(let{head:d}of a.selection.ranges){let p=a.doc.lineAt(d);if(p.from==l)continue;l=p.from;let g=Xh(a,p.from);if(g==null)continue;let b=/^\s*/.exec(p.text)[0],O=Gr(a,g);b!=O&&c.push({from:p.from,to:p.from+b.length,insert:O})}return c.length?[o,{changes:c,sequential:!0}]:o})}const QI=re.define(),Aa=new fe;function jy(o){let e=o.firstChild,t=o.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?o.to:t.from}:null}function VI(o,e,t){let i=qe(o);if(i.length==0)return null;let s=i.resolveInner(t),n=null;for(let a=s;a;a=a.parent){if(a.to<=t||a.from>t)continue;if(n&&a.from<e)break;let l=a.type.prop(Aa);if(l&&(a.to<i.length-50||i.length==o.doc.length||!FI(a))){let c=l(a,o);c&&c.from<=t&&c.from>=e&&c.to>t&&(n=c)}}return n}function FI(o){let e=o.lastChild;return e&&e.to==o.to&&e.type.isError}function Ea(o,e,t){for(let i of o.facet(QI)){let s=i(o,e,t);if(s)return s}return VI(o,e,t)}class Ii extends Ls{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ii.prototype.elementClass="",Ii.prototype.toDOM=void 0,Ii.prototype.mapMode=lt.TrackBefore,Ii.prototype.startSide=Ii.prototype.endSide=-1,Ii.prototype.point=!0;const $a=re.define(),WI={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ae.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},jr=re.define();function zI(o){return[Uy(),jr.of(Object.assign(Object.assign({},WI),o))]}const XI=ae.baseTheme({".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"}}),Yh=re.define({combine:o=>o.some(e=>e)});function Uy(o){let e=[YI,XI];return o&&o.fixed===!1&&e.push(Yh.of(!0)),e}const YI=et.fromClass(class{constructor(o){this.view=o,this.prevViewport=o.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=o.state.facet(jr).map(e=>new Ky(o,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!o.state.facet(Yh),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),o.scrollDOM.insertBefore(this.dom,o.contentDOM)}update(o){if(this.updateGutters(o)){let e=this.prevViewport,t=o.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}o.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Yh)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=o.view.viewport}syncGutters(o){let e=this.dom.nextSibling;o&&this.dom.remove();let t=Ae.iter(this.view.state.facet($a),this.view.viewport.from),i=[],s=this.gutters.map(n=>new HI(n,this.view.viewport,-this.view.documentPadding.top));for(let n of this.view.viewportLineBlocks){let a;if(Array.isArray(n.type)){for(let l of n.type)if(l.type==$e.Text){a=l;break}}else a=n.type==$e.Text?n:void 0;if(a){i.length&&(i=[]),qy(t,i,n.from);for(let l of s)l.line(this.view,a,i)}}for(let n of s)n.finish();o&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(o){let e=o.startState.facet(jr),t=o.state.facet(jr),i=o.docChanged||o.heightChanged||o.viewportChanged||!Ae.eq(o.startState.facet($a),o.state.facet($a),o.view.viewport.from,o.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(o)&&(i=!0);else{i=!0;let s=[];for(let n of t){let a=e.indexOf(n);a<0?s.push(new Ky(this.view,n)):(this.gutters[a].update(o),s.push(this.gutters[a]))}for(let n of this.gutters)n.dom.remove(),s.indexOf(n)<0&&n.destroy();for(let n of s)this.dom.appendChild(n.dom);this.gutters=s}return i}destroy(){for(let o of this.gutters)o.destroy();this.dom.remove()}},{provide:mt.scrollMargins.from(o=>o.gutters.length==0||!o.fixed?null:o.view.textDirection==we.LTR?{left:o.dom.offsetWidth}:{right:o.dom.offsetWidth})});function Zy(o){return Array.isArray(o)?o:[o]}function qy(o,e,t){for(;o.value&&o.from<=t;)o.from==t&&e.push(o.value),o.next()}class HI{constructor(e,t,i){this.gutter=e,this.height=i,this.localMarkers=[],this.i=0,this.cursor=Ae.iter(e.markers,t.from)}line(e,t,i){this.localMarkers.length&&(this.localMarkers=[]),qy(this.cursor,this.localMarkers,t.from);let s=i.length?this.localMarkers.concat(i):this.localMarkers,n=this.gutter.config.lineMarker(e,t,s);n&&s.unshift(n);let a=this.gutter;if(s.length==0&&!a.config.renderEmptyElements)return;let l=t.top-this.height;if(this.i==a.elements.length){let c=new Jy(e,t.height,l,s);a.elements.push(c),a.dom.appendChild(c.dom)}else a.elements[this.i].update(e,t.height,l,s);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Ky{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,s=>{let n=e.lineBlockAtHeight(s.clientY-e.documentTop);t.domEventHandlers[i](e,n,s)&&s.preventDefault()});this.markers=Zy(t.markers(e)),t.initialSpacer&&(this.spacer=new Jy(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Zy(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!Ae.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Jy{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),GI(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let n=0,a=0;;){let l=a,c=n<t.length?t[n++]:null,d=!1;if(c){let p=c.elementClass;p&&(i+=" "+p);for(let g=a;g<this.markers.length;g++)if(this.markers[g].compare(c)){l=g,d=!0;break}}else l=this.markers.length;for(;a<l;){let p=this.markers[a++];if(p.toDOM){p.destroy(s);let g=s.nextSibling;s.remove(),s=g}}if(!c)break;c.toDOM&&(d?s=s.nextSibling:this.dom.insertBefore(c.toDOM(e),s)),d&&a++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function GI(o,e){if(o.length!=e.length)return!1;for(let t=0;t<o.length;t++)if(!o[t].compare(e[t]))return!1;return!0}const jI=re.define(),Pn=re.define({combine(o){return es(o,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let s in t){let n=i[s],a=t[s];i[s]=n?(l,c,d)=>n(l,c,d)||a(l,c,d):a}return i}})}});class Hh extends Ii{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Gh(o,e){return o.state.facet(Pn).formatNumber(e,o.state)}const UI=jr.compute([Pn],o=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(jI)},lineMarker(e,t,i){return i.some(s=>s.toDOM)?null:new Hh(Gh(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(Pn)!=e.state.facet(Pn),initialSpacer(e){return new Hh(Gh(e,eO(e.state.doc.lines)))},updateSpacer(e,t){let i=Gh(t.view,eO(t.view.state.doc.lines));return i==e.number?e:new Hh(i)},domEventHandlers:o.facet(Pn).domEventHandlers}));function ZI(o={}){return[Pn.of(o),Uy(),UI]}function eO(o){let e=9;for(;e<o;)e=e*10+9;return e}const qI=new class extends Ii{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},KI=$a.compute(["selection"],o=>{let e=[],t=-1;for(let i of o.selection.ranges)if(i.empty){let s=o.doc.lineAt(i.head).from;s>t&&(t=s,e.push(qI.range(s)))}return Ae.of(e)});function JI(){return KI}function tO(o,e){let t=e.mapPos(o.from,1),i=e.mapPos(o.to,-1);return t>=i?void 0:{from:t,to:i}}const Pa=ue.define({map:tO}),Ur=ue.define({map:tO});function iO(o){let e=[];for(let{head:t}of o.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(o.lineBlockAt(t));return e}const Is=ct.define({create(){return oe.none},update(o,e){o=o.map(e.changes);for(let t of e.effects)t.is(Pa)&&!eB(o,t.value.from,t.value.to)?o=o.update({add:[rB.range(t.value.from,t.value.to)]}):t.is(Ur)&&(o=o.update({filter:(i,s)=>t.value.from!=i||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;o.between(i,i,(s,n)=>{s<i&&n>i&&(t=!0)}),t&&(o=o.update({filterFrom:i,filterTo:i,filter:(s,n)=>n<=i||s>=i}))}return o},provide:o=>ae.decorations.from(o)});function La(o,e,t){var i;let s=null;return(i=o.field(Is,!1))===null||i===void 0||i.between(e,t,(n,a)=>{(!s||s.from>n)&&(s={from:n,to:a})}),s}function eB(o,e,t){let i=!1;return o.between(e,e,(s,n)=>{s==e&&n==t&&(i=!0)}),i}function sO(o,e){return o.field(Is,!1)?e:e.concat(ue.appendConfig.of(oO()))}const tB=o=>{for(let e of iO(o)){let t=Ea(o.state,e.from,e.to);if(t)return o.dispatch({effects:sO(o.state,[Pa.of(t),nO(o,t)])}),!0}return!1},iB=o=>{if(!o.state.field(Is,!1))return!1;let e=[];for(let t of iO(o)){let i=La(o.state,t.from,t.to);i&&e.push(Ur.of(i),nO(o,i,!1))}return e.length&&o.dispatch({effects:e}),e.length>0};function nO(o,e,t=!0){let i=o.state.doc.lineAt(e.from).number,s=o.state.doc.lineAt(e.to).number;return ae.announce.of(`${o.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${o.state.phrase("to")} ${s}.`)}const sB=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:tB},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:iB},{key:"Ctrl-Alt-[",run:o=>{let{state:e}=o,t=[];for(let i=0;i<e.doc.length;){let s=o.lineBlockAt(i),n=Ea(e,s.from,s.to);n&&t.push(Pa.of(n)),i=(n?o.lineBlockAt(n.to):s).to+1}return t.length&&o.dispatch({effects:sO(o.state,t)}),!!t.length}},{key:"Ctrl-Alt-]",run:o=>{let e=o.state.field(Is,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,o.state.doc.length,(i,s)=>{t.push(Ur.of({from:i,to:s}))}),o.dispatch({effects:t}),!0}}],nB={placeholderDOM:null,placeholderText:"…"},rO=re.define({combine(o){return es(o,nB)}});function oO(o){let e=[Is,lB];return o&&e.push(rO.of(o)),e}const rB=oe.replace({widget:new class extends Li{toDOM(o){let{state:e}=o,t=e.facet(rO),i=n=>{let a=o.lineBlockAt(o.posAtDOM(n.target)),l=La(o.state,a.from,a.to);l&&o.dispatch({effects:Ur.of(l)}),n.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(o,i);let s=document.createElement("span");return s.textContent=t.placeholderText,s.setAttribute("aria-label",e.phrase("folded code")),s.title=e.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}}}),oB={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{}};class jh extends Ii{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function aB(o={}){let e=Object.assign(Object.assign({},oB),o),t=new jh(e,!0),i=new jh(e,!1),s=et.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(Ri)!=a.state.facet(Ri)||a.startState.field(Is,!1)!=a.state.field(Is,!1)||qe(a.startState)!=qe(a.state))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let l=new is;for(let c of a.viewportLineBlocks){let d=La(a.state,c.from,c.to)?i:Ea(a.state,c.from,c.to)?t:null;d&&l.add(c.from,c.from,d)}return l.finish()}}),{domEventHandlers:n}=e;return[s,zI({class:"cm-foldGutter",markers(a){var l;return((l=a.plugin(s))===null||l===void 0?void 0:l.markers)||Ae.empty},initialSpacer(){return new jh(e,!1)},domEventHandlers:Object.assign(Object.assign({},n),{click:(a,l,c)=>{if(n.click&&n.click(a,l,c))return!0;let d=La(a.state,l.from,l.to);if(d)return a.dispatch({effects:Ur.of(d)}),!0;let p=Ea(a.state,l.from,l.to);return p?(a.dispatch({effects:Pa.of(p)}),!0):!1}})}),oO()]}const lB=ae.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),cB=ae.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),aO=1e4,lO="()[]{}",cO=re.define({combine(o){return es(o,{afterCursor:!0,brackets:lO,maxScanDistance:aO})}}),hB=oe.mark({class:"cm-matchingBracket"}),dB=oe.mark({class:"cm-nonmatchingBracket"}),uB=[ct.define({create(){return oe.none},update(o,e){if(!e.docChanged&&!e.selection)return o;let t=[],i=e.state.facet(cO);for(let s of e.state.selection.ranges){if(!s.empty)continue;let n=gi(e.state,s.head,-1,i)||s.head>0&&gi(e.state,s.head-1,1,i)||i.afterCursor&&(gi(e.state,s.head,1,i)||s.head<e.state.doc.length&&gi(e.state,s.head+1,-1,i));if(!n)continue;let a=n.matched?hB:dB;t.push(a.range(n.start.from,n.start.to)),n.end&&t.push(a.range(n.end.from,n.end.to))}return oe.set(t,!0)},provide:o=>ae.decorations.from(o)}),cB];function fB(o={}){return[cO.of(o),uB]}function Uh(o,e,t){let i=o.prop(e<0?fe.openedBy:fe.closedBy);if(i)return i;if(o.name.length==1){let s=t.indexOf(o.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function gi(o,e,t,i={}){let s=i.maxScanDistance||aO,n=i.brackets||lO,a=qe(o),l=a.resolveInner(e,t);for(let c=l;c;c=c.parent){let d=Uh(c.type,t,n);if(d&&c.from<c.to)return pB(o,e,t,c,d,n)}return gB(o,e,t,a,l.type,s,n)}function pB(o,e,t,i,s,n){let a=i.parent,l={from:i.from,to:i.to},c=0,d=a==null?void 0:a.cursor;if(d&&(t<0?d.childBefore(i.from):d.childAfter(i.to)))do if(t<0?d.to<=i.from:d.from>=i.to){if(c==0&&s.indexOf(d.type.name)>-1&&d.from<d.to)return{start:l,end:{from:d.from,to:d.to},matched:!0};if(Uh(d.type,t,n))c++;else if(Uh(d.type,-t,n)&&(c--,c==0))return{start:l,end:d.from==d.to?void 0:{from:d.from,to:d.to},matched:!1}}while(t<0?d.prevSibling():d.nextSibling());return{start:l,matched:!1}}function gB(o,e,t,i,s,n,a){let l=t<0?o.sliceDoc(e-1,e):o.sliceDoc(e,e+1),c=a.indexOf(l);if(c<0||c%2==0!=t>0)return null;let d={from:t<0?e-1:e,to:t>0?e+1:e},p=o.doc.iterRange(e,t>0?o.doc.length:0),g=0;for(let b=0;!p.next().done&&b<=n;){let O=p.value;t<0&&(b+=O.length);let r=e+b*t;for(let h=t>0?0:O.length-1,u=t>0?O.length:-1;h!=u;h+=t){let m=a.indexOf(O[h]);if(!(m<0||i.resolve(r+h,1).type!=s))if(m%2==0==t>0)g++;else{if(g==1)return{start:d,end:{from:r+h,to:r+h+1},matched:m>>1==c>>1};g--}}t>0&&(b+=O.length)}return p.done?{start:d,matched:!1}:null}function Ln(o,e){return G.create(o.ranges.map(e),o.mainIndex)}function mi(o,e){return o.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Bi({state:o,dispatch:e},t){let i=Ln(o.selection,t);return i.eq(o.selection)?!1:(e(mi(o,i)),!0)}function Na(o,e){return G.cursor(e?o.to:o.from)}function hO(o,e){return Bi(o,t=>t.empty?o.moveByChar(t,e):Na(t,e))}const dO=o=>hO(o,o.textDirection!=we.LTR),uO=o=>hO(o,o.textDirection==we.LTR);function fO(o,e){return Bi(o,t=>t.empty?o.moveByGroup(t,e):Na(t,e))}const mB=o=>fO(o,o.textDirection!=we.LTR),bB=o=>fO(o,o.textDirection==we.LTR);function yB(o,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(o.sliceDoc(e.from,e.to)))||e.firstChild}function Da(o,e,t){let i=qe(o).resolveInner(e.head),s=t?fe.closedBy:fe.openedBy;for(let c=e.head;;){let d=t?i.childAfter(c):i.childBefore(c);if(!d)break;yB(o,d,s)?i=d:c=t?d.to:d.from}let n=i.type.prop(s),a,l;return n&&(a=t?gi(o,i.from,1):gi(o,i.to,-1))&&a.matched?l=t?a.end.to:a.end.from:l=t?i.to:i.from,G.cursor(l,t?-1:1)}const OB=o=>Bi(o,e=>Da(o.state,e,o.textDirection!=we.LTR)),xB=o=>Bi(o,e=>Da(o.state,e,o.textDirection==we.LTR));function pO(o,e){return Bi(o,t=>{if(!t.empty)return Na(t,e);let i=o.moveVertically(t,e);return i.head!=t.head?i:o.moveToLineBoundary(t,e)})}const gO=o=>pO(o,!1),mO=o=>pO(o,!0);function bO(o,e){let{state:t}=o,i=Ln(t.selection,a=>a.empty?o.moveVertically(a,e,o.dom.clientHeight):Na(a,e));if(i.eq(t.selection))return!1;let s=o.coordsAtPos(t.selection.main.head),n=o.scrollDOM.getBoundingClientRect();return o.dispatch(mi(t,i),{effects:s&&s.top>n.top&&s.bottom<n.bottom?ae.scrollIntoView(i.main.head,{y:"start",yMargin:s.top-n.top}):void 0}),!0}const yO=o=>bO(o,!1),Zh=o=>bO(o,!0);function Ma(o,e,t){let i=o.lineBlockAt(e.head),s=o.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?i.to:i.from)&&(s=o.moveToLineBoundary(e,t,!1)),!t&&s.head==i.from&&i.length){let n=/^\s*/.exec(o.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;n&&e.head!=i.from+n&&(s=G.cursor(i.from+n))}return s}const OO=o=>Bi(o,e=>Ma(o,e,!0)),xO=o=>Bi(o,e=>Ma(o,e,!1)),vB=o=>Bi(o,e=>G.cursor(o.lineBlockAt(e.head).from,1)),wB=o=>Bi(o,e=>G.cursor(o.lineBlockAt(e.head).to,-1));function kB(o,e,t){let i=!1,s=Ln(o.selection,n=>{let a=gi(o,n.head,-1)||gi(o,n.head,1)||n.head>0&&gi(o,n.head-1,1)||n.head<o.doc.length&&gi(o,n.head+1,-1);if(!a||!a.end)return n;i=!0;let l=a.start.from==n.head?a.end.to:a.end.from;return t?G.range(n.anchor,l):G.cursor(l)});return i?(e(mi(o,s)),!0):!1}const SB=({state:o,dispatch:e})=>kB(o,e,!1);function bi(o,e){let t=Ln(o.state.selection,i=>{let s=e(i);return G.range(i.anchor,s.head,s.goalColumn)});return t.eq(o.state.selection)?!1:(o.dispatch(mi(o.state,t)),!0)}function vO(o,e){return bi(o,t=>o.moveByChar(t,e))}const wO=o=>vO(o,o.textDirection!=we.LTR),kO=o=>vO(o,o.textDirection==we.LTR);function SO(o,e){return bi(o,t=>o.moveByGroup(t,e))}const CB=o=>SO(o,o.textDirection!=we.LTR),_B=o=>SO(o,o.textDirection==we.LTR),TB=o=>bi(o,e=>Da(o.state,e,o.textDirection!=we.LTR)),AB=o=>bi(o,e=>Da(o.state,e,o.textDirection==we.LTR));function CO(o,e){return bi(o,t=>o.moveVertically(t,e))}const _O=o=>CO(o,!1),TO=o=>CO(o,!0);function AO(o,e){return bi(o,t=>o.moveVertically(t,e,o.dom.clientHeight))}const EO=o=>AO(o,!1),$O=o=>AO(o,!0),PO=o=>bi(o,e=>Ma(o,e,!0)),LO=o=>bi(o,e=>Ma(o,e,!1)),EB=o=>bi(o,e=>G.cursor(o.lineBlockAt(e.head).from)),$B=o=>bi(o,e=>G.cursor(o.lineBlockAt(e.head).to)),NO=({state:o,dispatch:e})=>(e(mi(o,{anchor:0})),!0),DO=({state:o,dispatch:e})=>(e(mi(o,{anchor:o.doc.length})),!0),MO=({state:o,dispatch:e})=>(e(mi(o,{anchor:o.selection.main.anchor,head:0})),!0),RO=({state:o,dispatch:e})=>(e(mi(o,{anchor:o.selection.main.anchor,head:o.doc.length})),!0),PB=({state:o,dispatch:e})=>(e(o.update({selection:{anchor:0,head:o.doc.length},userEvent:"select"})),!0),LB=({state:o,dispatch:e})=>{let t=Ba(o).map(({from:i,to:s})=>G.range(i,Math.min(s+1,o.doc.length)));return e(o.update({selection:G.create(t),userEvent:"select"})),!0},NB=({state:o,dispatch:e})=>{let t=Ln(o.selection,i=>{var s;let n=qe(o).resolveInner(i.head,1);for(;!(n.from<i.from&&n.to>=i.to||n.to>i.to&&n.from<=i.from||!(!((s=n.parent)===null||s===void 0)&&s.parent));)n=n.parent;return G.range(n.to,n.from)});return e(mi(o,t)),!0},DB=({state:o,dispatch:e})=>{let t=o.selection,i=null;return t.ranges.length>1?i=G.create([t.main]):t.main.empty||(i=G.create([G.cursor(t.main.head)])),i?(e(mi(o,i)),!0):!1};function Ra({state:o,dispatch:e},t){if(o.readOnly)return!1;let i="delete.selection",s=o.changeByRange(n=>{let{from:a,to:l}=n;if(a==l){let c=t(a);c<a?i="delete.backward":c>a&&(i="delete.forward"),a=Math.min(a,c),l=Math.max(l,c)}return a==l?{range:n}:{changes:{from:a,to:l},range:G.cursor(a)}});return s.changes.empty?!1:(e(o.update(s,{scrollIntoView:!0,userEvent:i})),!0)}function Ia(o,e,t){if(o instanceof ae)for(let i of o.pluginField(mt.atomicRanges))i.between(e,e,(s,n)=>{s<e&&n>e&&(e=t?n:s)});return e}const IO=(o,e)=>Ra(o,t=>{let{state:i}=o,s=i.doc.lineAt(t),n,a;if(!e&&t>s.from&&t<s.from+200&&!/[^ \t]/.test(n=s.text.slice(0,t-s.from))){if(n[n.length-1]=="	")return t-1;let l=Ar(n,i.tabSize),c=l%Sa(i)||Sa(i);for(let d=0;d<c&&n[n.length-1-d]==" ";d++)t--;a=t}else a=$t(s.text,t-s.from,e,e)+s.from,a==t&&s.number!=(e?i.doc.lines:1)&&(a+=e?1:-1);return Ia(o,a,e)}),qh=o=>IO(o,!1),BO=o=>IO(o,!0),QO=(o,e)=>Ra(o,t=>{let i=t,{state:s}=o,n=s.doc.lineAt(i),a=s.charCategorizer(i);for(let l=null;;){if(i==(e?n.to:n.from)){i==t&&n.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let c=$t(n.text,i-n.from,e)+n.from,d=n.text.slice(Math.min(i,c)-n.from,Math.max(i,c)-n.from),p=a(d);if(l!=null&&p!=l)break;(d!=" "||i!=t)&&(l=p),i=c}return Ia(o,i,e)}),VO=o=>QO(o,!1),MB=o=>QO(o,!0),FO=o=>Ra(o,e=>{let t=o.lineBlockAt(e).to;return Ia(o,e<t?t:Math.min(o.state.doc.length,e+1),!0)}),RB=o=>Ra(o,e=>{let t=o.lineBlockAt(e).from;return Ia(o,e>t?t:Math.max(0,e-1),!1)}),IB=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let t=o.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:_e.of(["",""])},range:G.cursor(i.from)}));return e(o.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},BB=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let t=o.changeByRange(i=>{if(!i.empty||i.from==0||i.from==o.doc.length)return{range:i};let s=i.from,n=o.doc.lineAt(s),a=s==n.from?s-1:$t(n.text,s-n.from,!1)+n.from,l=s==n.to?s+1:$t(n.text,s-n.from,!0)+n.from;return{changes:{from:a,to:l,insert:o.doc.slice(s,l).append(o.doc.slice(a,s))},range:G.cursor(l)}});return t.changes.empty?!1:(e(o.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ba(o){let e=[],t=-1;for(let i of o.selection.ranges){let s=o.doc.lineAt(i.from),n=o.doc.lineAt(i.to);if(!i.empty&&i.to==n.from&&(n=o.doc.lineAt(i.to-1)),t>=s.number){let a=e[e.length-1];a.to=n.to,a.ranges.push(i)}else e.push({from:s.from,to:n.to,ranges:[i]});t=n.number+1}return e}function WO(o,e,t){if(o.readOnly)return!1;let i=[],s=[];for(let n of Ba(o)){if(t?n.to==o.doc.length:n.from==0)continue;let a=o.doc.lineAt(t?n.to+1:n.from-1),l=a.length+1;if(t){i.push({from:n.to,to:a.to},{from:n.from,insert:a.text+o.lineBreak});for(let c of n.ranges)s.push(G.range(Math.min(o.doc.length,c.anchor+l),Math.min(o.doc.length,c.head+l)))}else{i.push({from:a.from,to:n.from},{from:n.to,insert:o.lineBreak+a.text});for(let c of n.ranges)s.push(G.range(c.anchor-l,c.head-l))}}return i.length?(e(o.update({changes:i,scrollIntoView:!0,selection:G.create(s,o.selection.mainIndex),userEvent:"move.line"})),!0):!1}const QB=({state:o,dispatch:e})=>WO(o,e,!1),VB=({state:o,dispatch:e})=>WO(o,e,!0);function zO(o,e,t){if(o.readOnly)return!1;let i=[];for(let s of Ba(o))t?i.push({from:s.from,insert:o.doc.slice(s.from,s.to)+o.lineBreak}):i.push({from:s.to,insert:o.lineBreak+o.doc.slice(s.from,s.to)});return e(o.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const FB=({state:o,dispatch:e})=>zO(o,e,!1),WB=({state:o,dispatch:e})=>zO(o,e,!0),zB=o=>{if(o.state.readOnly)return!1;let{state:e}=o,t=e.changes(Ba(e).map(({from:s,to:n})=>(s>0?s--:n<e.doc.length&&n++,{from:s,to:n}))),i=Ln(e.selection,s=>o.moveVertically(s,!0)).map(t);return o.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function XB(o,e){if(/\(\)|\[\]|\{\}/.test(o.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=qe(o).resolveInner(e),i=t.childBefore(e),s=t.childAfter(e),n;return i&&s&&i.to<=e&&s.from>=e&&(n=i.type.prop(fe.closedBy))&&n.indexOf(s.name)>-1&&o.doc.lineAt(i.to).from==o.doc.lineAt(s.from).from?{from:i.to,to:s.from}:null}const YB=XO(!1),HB=XO(!0);function XO(o){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:n,to:a}=s,l=e.doc.lineAt(n),c=!o&&n==a&&XB(e,n);o&&(n=a=(a<=l.to?l:e.doc.lineAt(a)).to);let d=new Ca(e,{simulateBreak:n,simulateDoubleBreak:!!c}),p=Xh(d,n);for(p==null&&(p=/^\s*/.exec(e.doc.lineAt(n).text)[0].length);a<l.to&&/\s/.test(l.text[a-l.from]);)a++;c?{from:n,to:a}=c:n>l.from&&n<l.from+100&&!/\S/.test(l.text.slice(0,n))&&(n=l.from);let g=["",Gr(e,p)];return c&&g.push(Gr(e,d.lineIndent(l.from,-1))),{changes:{from:n,to:a,insert:_e.of(g)},range:G.cursor(n+1+g[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Kh(o,e){let t=-1;return o.changeByRange(i=>{let s=[];for(let a=i.from;a<=i.to;){let l=o.doc.lineAt(a);l.number>t&&(i.empty||i.to>l.from)&&(e(l,s,i),t=l.number),a=l.to+1}let n=o.changes(s);return{changes:s,range:G.range(n.mapPos(i.anchor,1),n.mapPos(i.head,1))}})}const GB=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let t=Object.create(null),i=new Ca(o,{overrideIndentation:n=>{let a=t[n];return a??-1}}),s=Kh(o,(n,a,l)=>{let c=Xh(i,n.from);if(c==null)return;/\S/.test(n.text)||(c=0);let d=/^\s*/.exec(n.text)[0],p=Gr(o,c);(d!=p||l.from<n.from+d.length)&&(t[n.from]=c,a.push({from:n.from,to:n.from+d.length,insert:p}))});return s.changes.empty||e(o.update(s,{userEvent:"indent"})),!0},YO=({state:o,dispatch:e})=>o.readOnly?!1:(e(o.update(Kh(o,(t,i)=>{i.push({from:t.from,insert:o.facet(ka)})}),{userEvent:"input.indent"})),!0),HO=({state:o,dispatch:e})=>o.readOnly?!1:(e(o.update(Kh(o,(t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let n=Ar(s,o.tabSize),a=0,l=Gr(o,Math.max(0,n-Sa(o)));for(;a<s.length&&a<l.length&&s.charCodeAt(a)==l.charCodeAt(a);)a++;i.push({from:t.from+a,to:t.from+s.length,insert:l.slice(a)})}),{userEvent:"delete.dedent"})),!0),jB=[{key:"Ctrl-b",run:dO,shift:wO,preventDefault:!0},{key:"Ctrl-f",run:uO,shift:kO},{key:"Ctrl-p",run:gO,shift:_O},{key:"Ctrl-n",run:mO,shift:TO},{key:"Ctrl-a",run:vB,shift:EB},{key:"Ctrl-e",run:wB,shift:$B},{key:"Ctrl-d",run:BO},{key:"Ctrl-h",run:qh},{key:"Ctrl-k",run:FO},{key:"Ctrl-Alt-h",run:VO},{key:"Ctrl-o",run:IB},{key:"Ctrl-t",run:BB},{key:"Ctrl-v",run:Zh}],UB=[{key:"ArrowLeft",run:dO,shift:wO,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:mB,shift:CB},{mac:"Cmd-ArrowLeft",run:xO,shift:LO},{key:"ArrowRight",run:uO,shift:kO,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:bB,shift:_B},{mac:"Cmd-ArrowRight",run:OO,shift:PO},{key:"ArrowUp",run:gO,shift:_O,preventDefault:!0},{mac:"Cmd-ArrowUp",run:NO,shift:MO},{mac:"Ctrl-ArrowUp",run:yO,shift:EO},{key:"ArrowDown",run:mO,shift:TO,preventDefault:!0},{mac:"Cmd-ArrowDown",run:DO,shift:RO},{mac:"Ctrl-ArrowDown",run:Zh,shift:$O},{key:"PageUp",run:yO,shift:EO},{key:"PageDown",run:Zh,shift:$O},{key:"Home",run:xO,shift:LO},{key:"Mod-Home",run:NO,shift:MO},{key:"End",run:OO,shift:PO},{key:"Mod-End",run:DO,shift:RO},{key:"Enter",run:YB},{key:"Mod-a",run:PB},{key:"Backspace",run:qh,shift:qh},{key:"Delete",run:BO},{key:"Mod-Backspace",mac:"Alt-Backspace",run:VO},{key:"Mod-Delete",mac:"Alt-Delete",run:MB},{mac:"Mod-Backspace",run:RB},{mac:"Mod-Delete",run:FO}].concat(jB.map(o=>({mac:o.key,run:o.run,shift:o.shift}))),GO=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:OB,shift:TB},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:xB,shift:AB},{key:"Alt-ArrowUp",run:QB},{key:"Shift-Alt-ArrowUp",run:FB},{key:"Alt-ArrowDown",run:VB},{key:"Shift-Alt-ArrowDown",run:WB},{key:"Escape",run:DB},{key:"Mod-Enter",run:HB},{key:"Alt-l",mac:"Ctrl-l",run:LB},{key:"Mod-i",run:NB,preventDefault:!0},{key:"Mod-[",run:HO},{key:"Mod-]",run:YO},{key:"Mod-Alt-\\",run:GB},{key:"Shift-Mod-k",run:zB},{key:"Shift-Mod-\\",run:SB}].concat(UB),ZB={key:"Tab",run:YO,shift:HO},Qa={brackets:["(","[","{","'",'"'],before:")]}:;>"},Bs=ue.define({map(o,e){let t=e.mapPos(o,-1,lt.TrackAfter);return t??void 0}}),Jh=ue.define({map(o,e){return e.mapPos(o)}}),ed=new class extends Ls{};ed.startSide=1,ed.endSide=-1;const jO=ct.define({create(){return Ae.empty},update(o,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(o=Ae.empty)}o=o.map(e.changes);for(let t of e.effects)t.is(Bs)?o=o.update({add:[ed.range(t.value,t.value+1)]}):t.is(Jh)&&(o=o.update({filter:i=>i!=t.value}));return o}});function qB(){return[JB,jO]}const td="()[]{}<>";function UO(o){for(let e=0;e<td.length;e+=2)if(td.charCodeAt(e)==o)return td.charAt(e+1);return Mc(o<128?o:o+1)}function ZO(o,e){return o.languageDataAt("closeBrackets",e)[0]||Qa}const KB=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),JB=ae.inputHandler.of((o,e,t,i)=>{if((KB?o.composing:o.compositionStarted)||o.state.readOnly)return!1;let s=o.state.selection.main;if(i.length>2||i.length==2&&Xt(gt(i,0))==1||e!=s.from||t!=s.to)return!1;let n=tQ(o.state,i);return n?(o.dispatch(n),!0):!1}),eQ=[{key:"Backspace",run:({state:o,dispatch:e})=>{if(o.readOnly)return!1;let i=ZO(o,o.selection.main.head).brackets||Qa.brackets,s=null,n=o.changeByRange(a=>{if(a.empty){let l=iQ(o.doc,a.head);for(let c of i)if(c==l&&Va(o.doc,a.head)==UO(gt(c,0)))return{changes:{from:a.head-c.length,to:a.head+c.length},range:G.cursor(a.head-c.length),userEvent:"delete.backward"}}return{range:s=a}});return s||e(o.update(n,{scrollIntoView:!0})),!s}}];function tQ(o,e){let t=ZO(o,o.selection.main.head),i=t.brackets||Qa.brackets;for(let s of i){let n=UO(gt(s,0));if(e==s)return n==s?rQ(o,s,i.indexOf(s+s+s)>-1):sQ(o,s,n,t.before||Qa.before);if(e==n&&qO(o,o.selection.main.from))return nQ(o,s,n)}return null}function qO(o,e){let t=!1;return o.field(jO).between(0,o.doc.length,i=>{i==e&&(t=!0)}),t}function Va(o,e){let t=o.sliceString(e,e+2);return t.slice(0,Xt(gt(t,0)))}function iQ(o,e){let t=o.sliceString(e-2,e);return Xt(gt(t,0))==t.length?t:t.slice(1)}function sQ(o,e,t,i){let s=null,n=o.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:Bs.of(a.to+e.length),range:G.range(a.anchor+e.length,a.head+e.length)};let l=Va(o.doc,a.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:a.head},effects:Bs.of(a.head+e.length),range:G.cursor(a.head+e.length)}:{range:s=a}});return s?null:o.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function nQ(o,e,t){let i=null,s=o.selection.ranges.map(n=>n.empty&&Va(o.doc,n.head)==t?G.cursor(n.head+t.length):i=n);return i?null:o.update({selection:G.create(s,o.selection.mainIndex),scrollIntoView:!0,effects:o.selection.ranges.map(({from:n})=>Jh.of(n))})}function rQ(o,e,t){let i=null,s=o.changeByRange(n=>{if(!n.empty)return{changes:[{insert:e,from:n.from},{insert:e,from:n.to}],effects:Bs.of(n.to+e.length),range:G.range(n.anchor+e.length,n.head+e.length)};let a=n.head,l=Va(o.doc,a);if(l==e){if(KO(o,a))return{changes:{insert:e+e,from:a},effects:Bs.of(a+e.length),range:G.cursor(a+e.length)};if(qO(o,a)){let c=t&&o.sliceDoc(a,a+e.length*3)==e+e+e;return{range:G.cursor(a+e.length*(c?3:1)),effects:Jh.of(a)}}}else{if(t&&o.sliceDoc(a-2*e.length,a)==e+e&&KO(o,a-2*e.length))return{changes:{insert:e+e+e+e,from:a},effects:Bs.of(a+e.length),range:G.cursor(a+e.length)};if(o.charCategorizer(a)(l)!=Ot.Word){let c=o.sliceDoc(a-1,a);if(c!=e&&o.charCategorizer(a)(c)!=Ot.Word&&!oQ(o,a,e))return{changes:{insert:e+e,from:a},effects:Bs.of(a+e.length),range:G.cursor(a+e.length)}}}return{range:i=n}});return i?null:o.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function KO(o,e){let t=qe(o).resolveInner(e+1);return t.parent&&t.from==e}function oQ(o,e,t){let i=qe(o).resolveInner(e,-1);for(let s=0;s<5;s++){if(o.sliceDoc(i.from,i.from+t.length)==t)return!0;let n=i.to==e&&i.parent;if(!n)break;i=n}return!1}const JO=re.define({combine(o){let e,t;for(let i of o)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Zr(o,e){let t=o.plugin(ex),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const ex=et.fromClass(class{constructor(o){this.input=o.state.facet(qr),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(o));let e=o.state.facet(JO);this.top=new Fa(o,!0,e.topContainer),this.bottom=new Fa(o,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(o){let e=o.state.facet(JO);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Fa(o.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Fa(o.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=o.state.facet(qr);if(t!=this.input){let i=t.filter(c=>c),s=[],n=[],a=[],l=[];for(let c of i){let d=this.specs.indexOf(c),p;d<0?(p=c(o.view),l.push(p)):(p=this.panels[d],p.update&&p.update(o)),s.push(p),(p.top?n:a).push(p)}this.specs=i,this.panels=s,this.top.sync(n),this.bottom.sync(a);for(let c of l)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(o)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:mt.scrollMargins.from(o=>({top:o.top.scrollMargin(),bottom:o.bottom.scrollMargin()}))});class Fa{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=tx(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=tx(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function tx(o){let e=o.nextSibling;return o.remove(),e}const aQ=ae.baseTheme({".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"}}),qr=re.define({enables:[ex,aQ]});function Ne(){var o=arguments[0];typeof o=="string"&&(o=document.createElement(o));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];typeof s=="string"?o.setAttribute(i,s):s!=null&&(o[i]=s)}e++}for(;e<arguments.length;e++)ix(o,arguments[e]);return o}function ix(o,e){if(typeof e=="string")o.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)o.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)ix(o,e[t]);else throw new RangeError("Unsupported child node: "+e)}const sx=typeof String.prototype.normalize=="function"?o=>o.normalize("NFKD"):o=>o;class Nn{constructor(e,t,i=0,s=e.length,n){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=n?a=>n(sx(a)):sx,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return gt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Mc(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Xt(e);let s=this.normalize(t);for(let n=0,a=i;;n++){let l=s.charCodeAt(n),c=this.match(l,a);if(c)return this.value=c,this;if(n==s.length-1)break;a==i&&n<t.length&&t.charCodeAt(n)==l&&a++}}}match(e,t){let i=null;for(let s=0;s<this.matches.length;s+=2){let n=this.matches[s],a=!1;this.query.charCodeAt(n)==e&&(n==this.query.length-1?i={from:this.matches[s+1],to:t+1}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:t+1}:this.matches.push(1,t)),i}}typeof Symbol<"u"&&(Nn.prototype[Symbol.iterator]=function(){return this});const nx={from:-1,to:-1,match:/.*/.exec("")},id="gm"+(/x/.unicode==null?"":"u");class rx{constructor(e,t,i,s=0,n=e.length){if(this.to=n,this.curLine="",this.done=!1,this.value=nx,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new ox(e,t,i,s,n);this.re=new RegExp(t,id+(i!=null&&i.ignoreCase?"i":"")),this.iter=e.iter();let a=e.lineAt(s);this.curLineStart=a.from,this.matchPos=s,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,s=i+t[0].length;if(this.matchPos=s+(i==s?1:0),i==this.curLine.length&&this.nextLine(),i<s||i>this.value.to)return this.value={from:i,to:s,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const sd=new WeakMap;class Dn{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let s=sd.get(e);if(!s||s.from>=i||s.to<=t){let l=new Dn(t,e.sliceString(t,i));return sd.set(e,l),l}if(s.from==t&&s.to==i)return s;let{text:n,from:a}=s;return a>t&&(n=e.sliceString(t,a)+n,a=t),s.to<i&&(n+=e.sliceString(s.to,i)),sd.set(e,new Dn(a,n)),new Dn(t,n.slice(t-a,i-a))}}class ox{constructor(e,t,i,s,n){this.text=e,this.to=n,this.done=!1,this.value=nx,this.matchPos=s,this.re=new RegExp(t,id+(i!=null&&i.ignoreCase?"i":"")),this.flat=Dn.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let i=this.flat.from+t.index,s=i+t[0].length;return this.value={from:i,to:s,match:t},this.matchPos=s+(i==s?1:0),this}else{if(this.flat.to==this.to)return this.done=!0,this;this.flat=Dn.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}}typeof Symbol<"u"&&(rx.prototype[Symbol.iterator]=ox.prototype[Symbol.iterator]=function(){return this});function lQ(o){try{return new RegExp(o,id),!0}catch{return!1}}function nd(o){let e=Ne("input",{class:"cm-textfield",name:"line"}),t=Ne("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),o.dispatch({effects:Wa.of(!1)}),o.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Ne("label",o.state.phrase("Go to line"),": ",e)," ",Ne("button",{class:"cm-button",type:"submit"},o.state.phrase("go")));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!s)return;let{state:n}=o,a=n.doc.lineAt(n.selection.main.head),[,l,c,d,p]=s,g=d?+d.slice(1):0,b=c?+c:a.number;if(c&&p){let r=b/100;l&&(r=r*(l=="-"?-1:1)+a.number/n.doc.lines),b=Math.round(n.doc.lines*r)}else c&&l&&(b=b*(l=="-"?-1:1)+a.number);let O=n.doc.line(Math.max(1,Math.min(n.doc.lines,b)));o.dispatch({effects:Wa.of(!1),selection:G.cursor(O.from+Math.max(0,Math.min(g,O.length))),scrollIntoView:!0}),o.focus()}return{dom:t,pos:-10}}const Wa=ue.define(),ax=ct.define({create(){return!0},update(o,e){for(let t of e.effects)t.is(Wa)&&(o=t.value);return o},provide:o=>qr.from(o,e=>e?nd:null)}),cQ=o=>{let e=Zr(o,nd);if(!e){let t=[Wa.of(!0)];o.state.field(ax,!1)==null&&t.push(ue.appendConfig.of([ax,hQ])),o.dispatch({effects:t}),e=Zr(o,nd)}return e&&e.dom.querySelector("input").focus(),!0},hQ=ae.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),dQ={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!0},lx=re.define({combine(o){return es(o,dQ,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function uQ(o){let e=[bQ,mQ];return o&&e.push(lx.of(o)),e}const fQ=oe.mark({class:"cm-selectionMatch"}),pQ=oe.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function cx(o,e,t,i){return(t==0||o(e.sliceDoc(t-1,t))!=Ot.Word)&&(i==e.doc.length||o(e.sliceDoc(i,i+1))!=Ot.Word)}function gQ(o,e,t,i){return o(e.sliceDoc(t,t+1))==Ot.Word&&o(e.sliceDoc(i-1,i))==Ot.Word}const mQ=et.fromClass(class{constructor(o){this.decorations=this.getDeco(o)}update(o){(o.selectionSet||o.docChanged||o.viewportChanged)&&(this.decorations=this.getDeco(o.view))}getDeco(o){let e=o.state.facet(lx),{state:t}=o,i=t.selection;if(i.ranges.length>1)return oe.none;let s=i.main,n,a=null;if(s.empty){if(!e.highlightWordAroundCursor)return oe.none;let c=t.wordAt(s.head);if(!c)return oe.none;a=t.charCategorizer(s.head),n=t.sliceDoc(c.from,c.to)}else{let c=s.to-s.from;if(c<e.minSelectionLength||c>200)return oe.none;if(e.wholeWords){if(n=t.sliceDoc(s.from,s.to),a=t.charCategorizer(s.head),!(cx(a,t,s.from,s.to)&&gQ(a,t,s.from,s.to)))return oe.none}else if(n=t.sliceDoc(s.from,s.to).trim(),!n)return oe.none}let l=[];for(let c of o.visibleRanges){let d=new Nn(t.doc,n,c.from,c.to);for(;!d.next().done;){let{from:p,to:g}=d.value;if((!a||cx(a,t,p,g))&&(s.empty&&p<=s.from&&g>=s.to?l.push(pQ.range(p,g)):(p>=s.to||g<=s.from)&&l.push(fQ.range(p,g)),l.length>e.maxMatches))return oe.none}}return oe.set(l)}},{decorations:o=>o.decorations}),bQ=ae.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),yQ=({state:o,dispatch:e})=>{let{selection:t}=o,i=G.create(t.ranges.map(s=>o.wordAt(s.head)||G.cursor(s.head)),t.mainIndex);return i.eq(t)?!1:(e(o.update({selection:i})),!0)};function OQ(o,e){let{main:t,ranges:i}=o.selection,s=o.wordAt(t.head),n=s&&s.from==t.from&&s.to==t.to;for(let a=!1,l=new Nn(o.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(a)return null;l=new Nn(o.doc,e,0,Math.max(0,i[i.length-1].from-1)),a=!0}else{if(a&&i.some(c=>c.from==l.value.from))continue;if(n){let c=o.wordAt(l.value.from);if(!c||c.from!=l.value.from||c.to!=l.value.to)continue}return l.value}}const xQ=({state:o,dispatch:e})=>{let{ranges:t}=o.selection;if(t.some(n=>n.from===n.to))return yQ({state:o,dispatch:e});let i=o.sliceDoc(t[0].from,t[0].to);if(o.selection.ranges.some(n=>o.sliceDoc(n.from,n.to)!=i))return!1;let s=OQ(o,i);return s?(e(o.update({selection:o.selection.addRange(G.range(s.from,s.to),!1),effects:ae.scrollIntoView(s.to)})),!0):!1},rd=re.define({combine(o){var e;return{top:o.reduce((t,i)=>t??i.top,void 0)||!1,caseSensitive:o.reduce((t,i)=>t??(i.caseSensitive||i.matchCase),void 0)||!1,createPanel:((e=o.find(t=>t.createPanel))===null||e===void 0?void 0:e.createPanel)||(t=>new $Q(t))}}});class hx{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||lQ(this.search)),this.unquoted=this.search.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new wQ(this):new vQ(this)}getCursor(e,t=0,i=e.length){return this.regexp?Rn(this,e,t,i):Mn(this,e,t,i)}}class dx{constructor(e){this.spec=e}}function Mn(o,e,t,i){return new Nn(e,o.unquoted,t,i,o.caseSensitive?void 0:s=>s.toLowerCase())}class vQ extends dx{constructor(e){super(e)}nextMatch(e,t,i){let s=Mn(this.spec,e,i,e.length).nextOverlapping();return s.done&&(s=Mn(this.spec,e,0,t).nextOverlapping()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=i;;){let n=Math.max(t,s-1e4-this.spec.unquoted.length),a=Mn(this.spec,e,n,s),l=null;for(;!a.nextOverlapping().done;)l=a.value;if(l)return l;if(n==t)return null;s-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let i=Mn(this.spec,e,0,e.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let n=Mn(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.length));for(;!n.next().done;)s(n.value.from,n.value.to)}}function Rn(o,e,t,i){return new rx(e,o.search,o.caseSensitive?void 0:{ignoreCase:!0},t,i)}class wQ extends dx{nextMatch(e,t,i){let s=Rn(this.spec,e,i,e.length).next();return s.done&&(s=Rn(this.spec,e,0,t).next()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=1;;s++){let n=Math.max(t,i-s*1e4),a=Rn(this.spec,e,n,i),l=null;for(;!a.next().done;)l=a.value;if(l&&(n==t||l.from>n+10))return l;if(n==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=Rn(this.spec,e,0,e.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let n=Rn(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.length));for(;!n.next().done;)s(n.value.from,n.value.to)}}const Kr=ue.define(),od=ue.define(),cs=ct.define({create(o){return new ad(cd(o).create(),null)},update(o,e){for(let t of e.effects)t.is(Kr)?o=new ad(t.value.create(),o.panel):t.is(od)&&(o=new ad(o.query,t.value?ld:null));return o},provide:o=>qr.from(o,e=>e.panel)});class ad{constructor(e,t){this.query=e,this.panel=t}}const kQ=oe.mark({class:"cm-searchMatch"}),SQ=oe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),CQ=et.fromClass(class{constructor(o){this.view=o,this.decorations=this.highlight(o.state.field(cs))}update(o){let e=o.state.field(cs);(e!=o.startState.field(cs)||o.docChanged||o.selectionSet||o.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:o,panel:e}){if(!e||!o.spec.valid)return oe.none;let{view:t}=this,i=new is;for(let s=0,n=t.visibleRanges,a=n.length;s<a;s++){let{from:l,to:c}=n[s];for(;s<a-1&&c>n[s+1].from-2*250;)c=n[++s].to;o.highlight(t.state.doc,l,c,(d,p)=>{let g=t.state.selection.ranges.some(b=>b.from==d&&b.to==p);i.add(d,p,g?SQ:kQ)})}return i.finish()}},{decorations:o=>o.decorations});function Jr(o){return e=>{let t=e.state.field(cs,!1);return t&&t.query.spec.valid?o(e,t):fx(e)}}const za=Jr((o,{query:e})=>{let{from:t,to:i}=o.state.selection.main,s=e.nextMatch(o.state.doc,t,i);return!s||s.from==t&&s.to==i?!1:(o.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:hd(o,s),userEvent:"select.search"}),!0)}),Xa=Jr((o,{query:e})=>{let{state:t}=o,{from:i,to:s}=t.selection.main,n=e.prevMatch(t.doc,i,s);return n?(o.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:hd(o,n),userEvent:"select.search"}),!0):!1}),_Q=Jr((o,{query:e})=>{let t=e.matchAll(o.state.doc,1e3);return!t||!t.length?!1:(o.dispatch({selection:G.create(t.map(i=>G.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),TQ=({state:o,dispatch:e})=>{let t=o.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:s}=t.main,n=[],a=0;for(let l=new Nn(o.doc,o.sliceDoc(i,s));!l.next().done;){if(n.length>1e3)return!1;l.value.from==i&&(a=n.length),n.push(G.range(l.value.from,l.value.to))}return e(o.update({selection:G.create(n,a),userEvent:"select.search.matches"})),!0},ux=Jr((o,{query:e})=>{let{state:t}=o,{from:i,to:s}=t.selection.main;if(t.readOnly)return!1;let n=e.nextMatch(t.doc,i,i);if(!n)return!1;let a=[],l,c;if(n.from==i&&n.to==s&&(c=t.toText(e.getReplacement(n)),a.push({from:n.from,to:n.to,insert:c}),n=e.nextMatch(t.doc,n.from,n.to)),n){let d=a.length==0||a[0].from>=n.to?0:n.to-n.from-c.length;l={anchor:n.from-d,head:n.to-d}}return o.dispatch({changes:a,selection:l,scrollIntoView:!!l,effects:n?hd(o,n):void 0,userEvent:"input.replace"}),!0}),AQ=Jr((o,{query:e})=>{if(o.state.readOnly)return!1;let t=e.matchAll(o.state.doc,1e9).map(i=>{let{from:s,to:n}=i;return{from:s,to:n,insert:e.getReplacement(i)}});return t.length?(o.dispatch({changes:t,userEvent:"input.replace.all"}),!0):!1});function ld(o){return o.state.facet(rd).createPanel(o)}function cd(o,e){var t;let i=o.selection.main,s=i.empty||i.to>i.from+100?"":o.sliceDoc(i.from,i.to),n=(t=e==null?void 0:e.caseSensitive)!==null&&t!==void 0?t:o.facet(rd).caseSensitive;return e&&!s?e:new hx({search:s.replace(/\n/g,"\\n"),caseSensitive:n})}const fx=o=>{let e=o.state.field(cs,!1);if(e&&e.panel){let t=Zr(o,ld);if(!t)return!1;let i=t.dom.querySelector("[name=search]");if(i!=o.root.activeElement){let s=cd(o.state,e.query.spec);s.valid&&o.dispatch({effects:Kr.of(s)}),i.focus(),i.select()}}else o.dispatch({effects:[od.of(!0),e?Kr.of(cd(o.state,e.query.spec)):ue.appendConfig.of(LQ)]});return!0},px=o=>{let e=o.state.field(cs,!1);if(!e||!e.panel)return!1;let t=Zr(o,ld);return t&&t.dom.contains(o.root.activeElement)&&o.focus(),o.dispatch({effects:od.of(!1)}),!0},EQ=[{key:"Mod-f",run:fx,scope:"editor search-panel"},{key:"F3",run:za,shift:Xa,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:za,shift:Xa,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:px,scope:"editor search-panel"},{key:"Mod-Shift-l",run:TQ},{key:"Alt-g",run:cQ},{key:"Mod-d",run:xQ,preventDefault:!0}];class $Q{constructor(e){this.view=e;let t=this.query=e.state.field(cs).query.spec;this.commit=this.commit.bind(this),this.searchField=Ne("input",{value:t.search,placeholder:jt(e,"Find"),"aria-label":jt(e,"Find"),class:"cm-textfield",name:"search",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ne("input",{value:t.replace,placeholder:jt(e,"Replace"),"aria-label":jt(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ne("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=Ne("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit});function i(s,n,a){return Ne("button",{class:"cm-button",name:s,onclick:n,type:"button"},a)}this.dom=Ne("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>za(e),[jt(e,"next")]),i("prev",()=>Xa(e),[jt(e,"previous")]),i("select",()=>_Q(e),[jt(e,"all")]),Ne("label",null,[this.caseField,jt(e,"match case")]),Ne("label",null,[this.reField,jt(e,"regexp")]),...e.state.readOnly?[]:[Ne("br"),this.replaceField,i("replace",()=>ux(e),[jt(e,"replace")]),i("replaceAll",()=>AQ(e),[jt(e,"replace all")]),Ne("button",{name:"close",onclick:()=>px(e),"aria-label":jt(e,"close"),type:"button"},["×"])]])}commit(){let e=new hx({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Kr.of(e)}))}keydown(e){ER(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Xa:za)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),ux(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(Kr)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(rd).top}}function jt(o,e){return o.state.phrase(e)}const Ya=30,Ha=/[\s\.,:;?!]/;function hd(o,{from:e,to:t}){let i=o.state.doc.lineAt(e).from,s=o.state.doc.lineAt(t).to,n=Math.max(i,e-Ya),a=Math.min(s,t+Ya),l=o.state.sliceDoc(n,a);if(n!=i){for(let c=0;c<Ya;c++)if(!Ha.test(l[c+1])&&Ha.test(l[c])){l=l.slice(c);break}}if(a!=s){for(let c=l.length-1;c>l.length-Ya;c--)if(!Ha.test(l[c-1])&&Ha.test(l[c])){l=l.slice(0,c);break}}return ae.announce.of(`${o.state.phrase("current match")}. ${l} ${o.state.phrase("on line")} ${o.state.doc.lineAt(e).number}`)}const PQ=ae.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),LQ=[cs,vn.lowest(CQ),PQ],NQ=typeof navigator<"u"&&!/Edge\/(\d+)/.exec(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),dd="-10000px";class gx{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s),this.tooltipViews=this.tooltips.map(i)}update(e){let t=e.state.facet(this.facet),i=t.filter(n=>n);if(t===this.input){for(let n of this.tooltipViews)n.update&&n.update(e);return!1}let s=[];for(let n=0;n<i.length;n++){let a=i[n],l=-1;if(a){for(let c=0;c<this.tooltips.length;c++){let d=this.tooltips[c];d&&d.create==a.create&&(l=c)}if(l<0)s[n]=this.createTooltipView(a);else{let c=s[n]=this.tooltipViews[l];c.update&&c.update(e)}}}for(let n of this.tooltipViews)s.indexOf(n)<0&&n.dom.remove();return this.input=t,this.tooltips=i,this.tooltipViews=s,!0}}function DQ(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const ud=re.define({combine:o=>{var e,t,i;return{position:NQ?"absolute":((e=o.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=o.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=o.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||DQ}}}),mx=et.fromClass(class{constructor(o){var e;this.view=o,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=o.state.facet(ud);this.position=t.position,this.parent=t.parent,this.classes=o.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new gx(o,fd,i=>this.createTooltip(i)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),(e=o.dom.ownerDocument.defaultView)===null||e===void 0||e.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let o of this.manager.tooltipViews)this.intersectionObserver.observe(o.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(o){o.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(o);e&&this.observeIntersection();let t=e||o.geometryChanged,i=o.state.facet(ud);if(i.position!=this.position){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(o){let e=o.create(this.view);if(e.dom.classList.add("cm-tooltip"),o.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=dd,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var o,e;(o=this.view.dom.ownerDocument.defaultView)===null||o===void 0||o.removeEventListener("resize",this.measureSoon);for(let{dom:t}of this.manager.tooltipViews)t.remove();(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let o=this.view.dom.getBoundingClientRect();return{editor:o,parent:this.parent?this.container.getBoundingClientRect():o,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(ud).tooltipSpace(this.view)}}writeMeasure(o){let{editor:e,space:t}=o,i=[];for(let s=0;s<this.manager.tooltips.length;s++){let n=this.manager.tooltips[s],a=this.manager.tooltipViews[s],{dom:l}=a,c=o.pos[s],d=o.size[s];if(!c||c.bottom<=Math.max(e.top,t.top)||c.top>=Math.min(e.bottom,t.bottom)||c.right<Math.max(e.left,t.left)-.1||c.left>Math.min(e.right,t.right)+.1){l.style.top=dd;continue}let p=n.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,b=d.right-d.left,O=d.bottom-d.top,r=a.offset||RQ,h=this.view.textDirection==we.LTR,u=d.width>t.right-t.left?h?t.left:t.right-d.width:h?Math.min(c.left-(p?14:0)+r.x,t.right-b):Math.max(t.left,c.left-b+(p?14:0)-r.x),m=!!n.above;!n.strictSide&&(m?c.top-(d.bottom-d.top)-r.y<t.top:c.bottom+(d.bottom-d.top)+r.y>t.bottom)&&m==t.bottom-c.bottom>c.top-t.top&&(m=!m);let y=m?c.top-O-g-r.y:c.bottom+g+r.y,v=u+b;if(a.overlap!==!0)for(let w of i)w.left<v&&w.right>u&&w.top<y+O&&w.bottom>y&&(y=m?w.top-O-2-g:w.bottom+g+2);this.position=="absolute"?(l.style.top=y-o.parent.top+"px",l.style.left=u-o.parent.left+"px"):(l.style.top=y+"px",l.style.left=u+"px"),p&&(p.style.left=`${c.left+(h?r.x:-r.x)-(u+14-7)}px`),a.overlap!==!0&&i.push({left:u,top:y,right:v,bottom:y+O}),l.classList.toggle("cm-tooltip-above",m),l.classList.toggle("cm-tooltip-below",!m),a.positioned&&a.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let o of this.manager.tooltipViews)o.dom.style.top=dd}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),MQ=ae.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),RQ={x:0,y:0},fd=re.define({enables:[mx,MQ]}),Ga=re.define();class pd{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new gx(e,Ga,t=>this.createHostedView(t))}static create(e){return new pd(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const IQ=fd.compute([Ga],o=>{let e=o.facet(Ga).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:pd.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class BQ{constructor(e,t,i,s,n){this.view=e,this.source=t,this.field=i,this.setHover=s,this.hoverTime=n,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){var e;clearTimeout(this.restartTimeout);let{lastMove:t}=this,i=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(i==null)return;let s=this.view.coordsAtPos(i);if(s==null||t.y<s.top||t.y>s.bottom||t.x<s.left-this.view.defaultCharacterWidth||t.x>s.right+this.view.defaultCharacterWidth)return;let n=this.view.bidiSpans(this.view.state.doc.lineAt(i)).find(c=>c.from<=i&&c.to>=i),a=n&&n.dir==we.RTL?-1:1,l=this.source(this.view,i,t.x<s.left?-a:a);if(!((e=l)===null||e===void 0)&&e.then){let c=this.pending={pos:i};l.then(d=>{this.pending==c&&(this.pending=null,d&&this.view.dispatch({effects:this.setHover.of(d)}))},d=>Yt(this.view.state,d,"hover tooltip"))}else l&&this.view.dispatch({effects:this.setHover.of(l)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!QQ(this.lastMove.target)||this.pending){let{pos:s}=i||this.pending,n=(t=i==null?void 0:i.end)!==null&&t!==void 0?t:s;(s==n?this.view.posAtCoords(this.lastMove)!=s:!VQ(this.view,s,n,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function QQ(o){for(let e=o;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function VQ(o,e,t,i,s,n){let a=document.createRange(),l=o.domAtPos(e),c=o.domAtPos(t);a.setEnd(c.node,c.offset),a.setStart(l.node,l.offset);let d=a.getClientRects();a.detach();for(let p=0;p<d.length;p++){let g=d[p];if(Math.max(g.top-s,s-g.bottom,g.left-i,i-g.right)<=n)return!0}return!1}function FQ(o,e={}){let t=ue.define(),i=ct.define({create(){return null},update(s,n){if(s&&e.hideOnChange&&(n.docChanged||n.selection))return null;for(let a of n.effects){if(a.is(t))return a.value;if(a.is(zQ))return null}if(s&&n.docChanged){let a=n.changes.mapPos(s.pos,-1,lt.TrackDel);if(a==null)return null;let l=Object.assign(Object.create(null),s);return l.pos=a,s.end!=null&&(l.end=n.changes.mapPos(s.end)),l}return s},provide:s=>Ga.from(s)});return[i,et.define(s=>new BQ(s,o,i,t,e.hoverTime||300)),IQ]}function WQ(o,e){let t=o.plugin(mx);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const zQ=ue.define();class XQ{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=qe(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),s=t.text.slice(i-t.from,this.pos-t.from),n=s.search(xx(e,!1));return n<0?null:{from:i+n,to:this.pos,text:s.slice(n)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function bx(o){let e=Object.keys(o).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function YQ(o){let e=Object.create(null),t=Object.create(null);for(let{label:s}of o){e[s[0]]=!0;for(let n=1;n<s.length;n++)t[s[n]]=!0}let i=bx(e)+bx(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function yx(o){let e=o.map(s=>typeof s=="string"?{label:s}:s),[t,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:YQ(e);return s=>{let n=s.matchBefore(i);return n||s.explicit?{from:n?n.from:s.pos,options:e,span:t}:null}}function HQ(o,e){return t=>{for(let i=qe(t.state).resolveInner(t.pos,-1);i;i=i.parent)if(o.indexOf(i.name)>-1)return null;return e(t)}}let Ox=class{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}};function Qs(o){return o.selection.main.head}function xx(o,e){var t;let{source:i}=o,s=e&&i[0]!="^",n=i[i.length-1]!="$";return!s&&!n?o:new RegExp(`${s?"^":""}(?:${i})${n?"$":""}`,(t=o.flags)!==null&&t!==void 0?t:o.ignoreCase?"i":"")}const GQ=Ji.define();function vx(o,e){let t=e.completion.apply||e.completion.label,i=e.source;typeof t=="string"?o.dispatch({changes:{from:i.from,to:i.to,insert:t},selection:{anchor:i.from+t.length},userEvent:"input.complete",annotations:GQ.of(e.completion)}):t(o,e.completion,i.from,i.to)}const wx=new WeakMap;function jQ(o){if(!Array.isArray(o))return o;let e=wx.get(o);return e||wx.set(o,e=yx(o)),e}class UQ{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=gt(e,t),s=Xt(i);this.chars.push(i);let n=e.slice(t,t+s),a=n.toUpperCase();this.folded.push(gt(a==n?n.toLowerCase():a,0)),t+=s}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:s,precise:n,byWord:a}=this;if(t.length==1){let y=gt(e,0);return y==t[0]?[0,0,Xt(y)]:y==i[0]?[-200,0,Xt(y)]:null}let l=e.indexOf(this.pattern);if(l==0)return[0,0,this.pattern.length];let c=t.length,d=0;if(l<0){for(let y=0,v=Math.min(e.length,200);y<v&&d<c;){let w=gt(e,y);(w==t[d]||w==i[d])&&(s[d++]=y),y+=Xt(w)}if(d<c)return null}let p=0,g=0,b=!1,O=0,r=-1,h=-1,u=/[a-z]/.test(e),m=!0;for(let y=0,v=Math.min(e.length,200),w=0;y<v&&g<c;){let S=gt(e,y);l<0&&(p<c&&S==t[p]&&(n[p++]=y),O<c&&(S==t[O]||S==i[O]?(O==0&&(r=y),h=y+1,O++):O=0));let C,T=S<255?S>=48&&S<=57||S>=97&&S<=122?2:S>=65&&S<=90?1:0:(C=Mc(S))!=C.toLowerCase()?1:C!=C.toUpperCase()?2:0;(!y||T==1&&u||w==0&&T!=0)&&(t[g]==S||i[g]==S&&(b=!0)?a[g++]=y:a.length&&(m=!1)),w=T,y+=Xt(S)}return g==c&&a[0]==0&&m?this.result(-100+(b?-200:0),a,e):O==c&&r==0?[-200-e.length,0,h]:l>-1?[-700-e.length,l,l+this.pattern.length]:O==c?[-200+-700-e.length,r,h]:g==c?this.result(-100+(b?-200:0)+-700+(m?0:-1100),a,e):t.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,i){let s=[e-i.length],n=1;for(let a of t){let l=a+(this.astral?Xt(gt(i,a)):1);n>1&&s[n-1]==a?s[n-1]=l:(s[n++]=a,s[n++]=l)}return s}}const Vs=re.define({combine(o){return es(o,{activateOnTyping:!0,override:null,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>i=>ZQ(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function ZQ(o,e){return o?e?o+" "+e:o:e}function qQ(o){let e=o.addToOptions.slice();return o.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,s){let n=document.createElement("span");n.className="cm-completionLabel";let{label:a}=t,l=0;for(let c=1;c<s.length;){let d=s[c++],p=s[c++];d>l&&n.appendChild(document.createTextNode(a.slice(l,d)));let g=n.appendChild(document.createElement("span"));g.appendChild(document.createTextNode(a.slice(d,p))),g.className="cm-completionMatchedText",l=p}return l<a.length&&n.appendChild(document.createTextNode(a.slice(l))),n},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function kx(o,e,t){if(o<=t)return{from:0,to:o};if(e<=o>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let i=Math.floor((o-e)/t);return{from:o-(i+1)*t,to:o-i*t}}class KQ{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this};let i=e.state.field(t),{options:s,selected:n}=i.open,a=e.state.facet(Vs);this.optionContent=qQ(a),this.optionClass=a.optionClass,this.range=kx(s.length,n,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",l=>{for(let c=l.target,d;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(d=/-(\d+)$/.exec(c.id))&&+d[1]<s.length){vx(e,s[+d[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(s,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=kx(t.options.length,t.selected,this.view.state.facet(Vs).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=t.options[t.selected],{info:s}=i;if(!s)return;let n=typeof s=="string"?document.createTextNode(s):s(i);if(!n)return;"then"in n?n.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a)}).catch(a=>Yt(this.view.state,a,"completion info")):this.addInfoPane(n)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&eV(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect();if(s.top>Math.min(innerHeight,t.bottom)-10||s.bottom<Math.max(0,t.top)+10)return null;let n=Math.max(0,Math.min(s.top,innerHeight-i.height))-t.top,a=this.view.textDirection==we.RTL,l=t.left,c=innerWidth-t.right;return a&&l<Math.min(i.width,c)?a=!1:!a&&c<Math.min(i.width,l)&&(a=!0),{top:n,left:a}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,i){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true");for(let n=i.from;n<i.to;n++){let{completion:a,match:l}=e[n];const c=s.appendChild(document.createElement("li"));c.id=t+"-"+n,c.setAttribute("role","option");let d=this.optionClass(a);d&&(c.className=d);for(let p of this.optionContent){let g=p(a,this.view.state,l);g&&c.appendChild(g)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}}function JQ(o){return e=>new KQ(e,o)}function eV(o,e){let t=o.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?o.scrollTop-=t.top-i.top:i.bottom>t.bottom&&(o.scrollTop+=i.bottom-t.bottom)}const tV=300;function Sx(o){return(o.boost||0)*100+(o.apply?10:0)+(o.info?5:0)+(o.type?1:0)}function iV(o,e){let t=[],i=0;for(let a of o)if(a.hasResult())if(a.result.filter===!1)for(let l of a.result.options)t.push(new Ox(l,a,[1e9-i++]));else{let l=new UQ(e.sliceDoc(a.from,a.to)),c;for(let d of a.result.options)(c=l.match(d.label))&&(d.boost!=null&&(c[0]+=d.boost),t.push(new Ox(d,a,c)))}let s=[],n=null;for(let a of t.sort(oV)){if(s.length==tV)break;!n||n.label!=a.completion.label||n.detail!=a.completion.detail||n.type!=a.completion.type||n.apply!=a.completion.apply?s.push(a):Sx(a.completion)>Sx(n)&&(s[s.length-1]=a),n=a.completion}return s}class eo{constructor(e,t,i,s,n){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=s,this.selected=n}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new eo(this.options,Cx(t,e),this.tooltip,this.timestamp,e)}static build(e,t,i,s,n){let a=iV(e,t);if(!a.length)return null;let l=0;if(s&&s.selected){let c=s.options[s.selected].completion;for(let d=0;d<a.length;d++)if(a[d].completion==c){l=d;break}}return new eo(a,Cx(i,l),{pos:e.reduce((c,d)=>d.hasResult()?Math.min(c,d.from):c,1e8),create:JQ(si),above:n.aboveCursor},s?s.timestamp:Date.now(),l)}map(e){return new eo(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class ja{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new ja(rV,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Vs),n=(i.override||t.languageDataAt("autocomplete",Qs(t)).map(jQ)).map(l=>(this.active.find(d=>d.source==l)||new _t(l,this.active.some(d=>d.state!=0)?1:0)).update(e,i));n.length==this.active.length&&n.every((l,c)=>l==this.active[c])&&(n=this.active);let a=e.selection||n.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!sV(n,this.active)?eo.build(n,t,this.id,this.open,i):this.open&&e.docChanged?this.open.map(e.changes):this.open;!a&&n.every(l=>l.state!=1)&&n.some(l=>l.hasResult())&&(n=n.map(l=>l.hasResult()?new _t(l.source,0):l));for(let l of e.effects)l.is(Tx)&&(a=a&&a.setSelected(l.value,this.id));return n==this.active&&a==this.open?this:new ja(n,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:nV}}function sV(o,e){if(o==e)return!0;for(let t=0,i=0;;){for(;t<o.length&&!o[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let s=t==o.length,n=i==e.length;if(s||n)return s==n;if(o[t++].result!=e[i++].result)return!1}}const nV={"aria-autocomplete":"list"};function Cx(o,e){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":o+"-"+e,"aria-controls":o}}const rV=[];function oV(o,e){let t=e.match[0]-o.match[0];return t||o.completion.label.localeCompare(e.completion.label)}function gd(o){return o.isUserEvent("input.type")?"input":o.isUserEvent("delete.backward")?"delete":null}class _t{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=gd(e),s=this;i?s=s.handleUserEvent(e,i,t):e.docChanged?s=s.handleChange(e):e.selection&&s.state!=0&&(s=new _t(s.source,0));for(let n of e.effects)if(n.is(md))s=new _t(s.source,1,n.value?Qs(e.state):-1);else if(n.is(bd))s=new _t(s.source,0);else if(n.is(_x))for(let a of n.value)a.source==s.source&&(s=a);return s}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new _t(this.source,1)}handleChange(e){return e.changes.touchesRange(Qs(e.startState))?new _t(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new _t(this.source,this.state,e.mapPos(this.explicitPos))}}class Ua extends _t{constructor(e,t,i,s,n,a){super(e,2,t),this.result=i,this.from=s,this.to=n,this.span=a}hasResult(){return!0}handleUserEvent(e,t,i){let s=e.changes.mapPos(this.from),n=e.changes.mapPos(this.to,1),a=Qs(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>n||t=="delete"&&Qs(e.startState)==this.from)return new _t(this.source,t=="input"&&i.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return this.span&&(s==n||this.span.test(e.state.sliceDoc(s,n)))?new Ua(this.source,l,this.result,s,n,this.span):new _t(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new _t(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Ua(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1),this.span)}}const md=ue.define(),bd=ue.define(),_x=ue.define({map(o,e){return o.map(t=>t.map(e))}}),Tx=ue.define(),si=ct.define({create(){return ja.start()},update(o,e){return o.update(e)},provide:o=>[fd.from(o,e=>e.tooltip),ae.contentAttributes.from(o,e=>e.attrs)]}),Ax=75;function Za(o,e="option"){return t=>{let i=t.state.field(si,!1);if(!i||!i.open||Date.now()-i.open.timestamp<Ax)return!1;let s=1,n;e=="page"&&(n=WQ(t,i.open.tooltip))&&(s=Math.max(2,Math.floor(n.dom.offsetHeight/n.dom.querySelector("li").offsetHeight)-1));let a=i.open.selected+s*(o?1:-1),{length:l}=i.open.options;return a<0?a=e=="page"?0:l-1:a>=l&&(a=e=="page"?l-1:0),t.dispatch({effects:Tx.of(a)}),!0}}const aV=o=>{let e=o.state.field(si,!1);return o.state.readOnly||!e||!e.open||Date.now()-e.open.timestamp<Ax?!1:(vx(o,e.open.options[e.open.selected]),!0)},lV=o=>o.state.field(si,!1)?(o.dispatch({effects:md.of(!0)}),!0):!1,cV=o=>{let e=o.state.field(si,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(o.dispatch({effects:bd.of(null)}),!0)};class hV{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Ex=50,dV=50,uV=1e3,fV=et.fromClass(class{constructor(o){this.view=o,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of o.state.field(si).active)e.state==1&&this.startQuery(e)}update(o){let e=o.state.field(si);if(!o.selectionSet&&!o.docChanged&&o.startState.field(si)==e)return;let t=o.transactions.some(i=>(i.selection||i.docChanged)&&!gd(i));for(let i=0;i<this.running.length;i++){let s=this.running[i];if(t||s.updates.length+o.transactions.length>dV&&Date.now()-s.time>uV){for(let n of s.context.abortListeners)try{n()}catch(a){Yt(this.view.state,a)}s.context.abortListeners=null,this.running.splice(i--,1)}else s.updates.push(...o.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(s=>s.active.source==i.source))?setTimeout(()=>this.startUpdate(),Ex):-1,this.composing!=0)for(let i of o.transactions)gd(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:o}=this.view,e=o.field(si);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(o){let{state:e}=this.view,t=Qs(e),i=new XQ(e,t,o.explicitPos==t),s=new hV(o,i);this.running.push(s),Promise.resolve(o.source(i)).then(n=>{s.context.aborted||(s.done=n||null,this.scheduleAccept())},n=>{this.view.dispatch({effects:bd.of(null)}),Yt(this.view.state,n)})}scheduleAccept(){this.running.every(o=>o.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),Ex))}accept(){var o;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Vs);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=new Ua(s.active.source,s.active.explicitPos,s.done,s.done.from,(o=s.done.to)!==null&&o!==void 0?o:Qs(s.updates.length?s.updates[0].startState:this.view.state),s.done.span&&s.done.filter!==!1?xx(s.done.span,!0):null);for(let l of s.updates)a=a.update(l,t);if(a.hasResult()){e.push(a);continue}}let n=this.view.state.field(si).active.find(a=>a.source==s.active.source);if(n&&n.state==1)if(s.done==null){let a=new _t(s.active.source,0);for(let l of s.updates)a=a.update(l,t);a.state!=1&&e.push(a)}else this.startQuery(n)}e.length&&this.view.dispatch({effects:_x.of(e)})}},{eventHandlers:{compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:md.of(!1)}),20),this.composing=0}}}),$x=ae.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class pV{constructor(e,t,i,s){this.field=e,this.line=t,this.from=i,this.to=s}}class yd{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,lt.TrackDel),i=e.mapPos(this.to,1,lt.TrackDel);return t==null||i==null?null:new yd(this.field,t,i)}}class Od{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],s=[t],n=e.doc.lineAt(t),a=/^\s*/.exec(n.text)[0];for(let c of this.lines){if(i.length){let d=a,p=/^\t*/.exec(c)[0].length;for(let g=0;g<p;g++)d+=e.facet(ka);s.push(t+d.length-p),c=d+c.slice(p)}i.push(c),t+=c.length+1}let l=this.fieldPositions.map(c=>new yd(c.field,s[c.line]+c.from,s[c.line]+c.to));return{text:i,ranges:l}}static parse(e){let t=[],i=[],s=[],n;for(let a of e.split(/\r\n?|\n/)){for(;n=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(a);){let l=n[1]?+n[1]:null,c=n[2]||n[3]||"",d=-1;for(let p=0;p<t.length;p++)(l!=null?t[p].seq==l:c&&t[p].name==c)&&(d=p);if(d<0){let p=0;for(;p<t.length&&(l==null||t[p].seq!=null&&t[p].seq<l);)p++;t.splice(p,0,{seq:l,name:c}),d=p;for(let g of s)g.field>=d&&g.field++}s.push(new pV(d,i.length,n.index,n.index+c.length)),a=a.slice(0,n.index)+c+a.slice(n.index+n[0].length)}i.push(a)}return new Od(i,s)}}let gV=oe.widget({widget:new class extends Li{toDOM(){let o=document.createElement("span");return o.className="cm-snippetFieldPosition",o}ignoreEvent(){return!1}}}),mV=oe.mark({class:"cm-snippetField"});class In{constructor(e,t){this.ranges=e,this.active=t,this.deco=oe.set(e.map(i=>(i.from==i.to?gV:mV).range(i.from,i.to)))}map(e){let t=[];for(let i of this.ranges){let s=i.map(e);if(!s)return null;t.push(s)}return new In(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const to=ue.define({map(o,e){return o&&o.map(e)}}),bV=ue.define(),io=ct.define({create(){return null},update(o,e){for(let t of e.effects){if(t.is(to))return t.value;if(t.is(bV)&&o)return new In(o.ranges,t.value)}return o&&e.docChanged&&(o=o.map(e.changes)),o&&e.selection&&!o.selectionInsideField(e.selection)&&(o=null),o},provide:o=>ae.decorations.from(o,e=>e?e.deco:oe.none)});function xd(o,e){return G.create(o.filter(t=>t.field==e).map(t=>G.range(t.from,t.to)))}function yV(o){let e=Od.parse(o);return(t,i,s,n)=>{let{text:a,ranges:l}=e.instantiate(t.state,s),c={changes:{from:s,to:n,insert:_e.of(a)}};if(l.length&&(c.selection=xd(l,0)),l.length>1){let d=new In(l,0),p=c.effects=[to.of(d)];t.state.field(io,!1)===void 0&&p.push(ue.appendConfig.of([io,xV,vV,$x]))}t.dispatch(t.state.update(c))}}function Px(o){return({state:e,dispatch:t})=>{let i=e.field(io,!1);if(!i||o<0&&i.active==0)return!1;let s=i.active+o,n=o>0&&!i.ranges.some(a=>a.field==s+o);return t(e.update({selection:xd(i.ranges,s),effects:to.of(n?null:new In(i.ranges,s))})),!0}}const OV=[{key:"Tab",run:Px(1),shift:Px(-1)},{key:"Escape",run:({state:o,dispatch:e})=>o.field(io,!1)?(e(o.update({effects:to.of(null)})),!0):!1}],Lx=re.define({combine(o){return o.length?o[0]:OV}}),xV=vn.highest(Wr.compute([Lx],o=>o.facet(Lx)));function Fs(o,e){return Object.assign(Object.assign({},e),{apply:yV(o)})}const vV=ae.domEventHandlers({mousedown(o,e){let t=e.state.field(io,!1),i;if(!t||(i=e.posAtCoords({x:o.clientX,y:o.clientY}))==null)return!1;let s=t.ranges.find(n=>n.from<=i&&n.to>=i);return!s||s.field==t.active?!1:(e.dispatch({selection:xd(t.ranges,s.field),effects:to.of(t.ranges.some(n=>n.field>s.field)?new In(t.ranges,s.field):null)}),!0)}});function wV(o={}){return[si,Vs.of(o),fV,kV,$x]}const Nx=[{key:"Ctrl-Space",run:lV},{key:"Escape",run:cV},{key:"ArrowDown",run:Za(!0)},{key:"ArrowUp",run:Za(!1)},{key:"PageDown",run:Za(!0,"page")},{key:"PageUp",run:Za(!1,"page")},{key:"Enter",run:aV}],kV=vn.highest(Wr.computeN([Vs],o=>o.facet(Vs).defaultKeymap?[Nx]:[])),SV=o=>{let e=wd(o.state);return e.line?CV(o):e.block?TV(o):!1};function vd(o,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=o(e,t);return s?(i(t.update(s)),!0):!1}}const CV=vd(PV,0),_V=vd(Dx,0),TV=vd((o,e)=>Dx(o,e,$V(e)),0),AV=[{key:"Mod-/",run:SV},{key:"Alt-A",run:_V}];function wd(o,e=o.selection.main.head){let t=o.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const so=50;function EV(o,{open:e,close:t},i,s){let n=o.sliceDoc(i-so,i),a=o.sliceDoc(s,s+so),l=/\s*$/.exec(n)[0].length,c=/^\s*/.exec(a)[0].length,d=n.length-l;if(n.slice(d-e.length,d)==e&&a.slice(c,c+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:s+c,margin:c&&1}};let p,g;s-i<=2*so?p=g=o.sliceDoc(i,s):(p=o.sliceDoc(i,i+so),g=o.sliceDoc(s-so,s));let b=/^\s*/.exec(p)[0].length,O=/\s*$/.exec(g)[0].length,r=g.length-O-t.length;return p.slice(b,b+e.length)==e&&g.slice(r,r+t.length)==t?{open:{pos:i+b+e.length,margin:/\s/.test(p.charAt(b+e.length))?1:0},close:{pos:s-O-t.length,margin:/\s/.test(g.charAt(r-1))?1:0}}:null}function $V(o){let e=[];for(let t of o.selection.ranges){let i=o.doc.lineAt(t.from),s=t.to<=i.to?i:o.doc.lineAt(t.to),n=e.length-1;n>=0&&e[n].to>i.from?e[n].to=s.to:e.push({from:i.from,to:s.to})}return e}function Dx(o,e,t=e.selection.ranges){let i=t.map(n=>wd(e,n.from).block);if(!i.every(n=>n))return null;let s=t.map((n,a)=>EV(e,i[a],n.from,n.to));if(o!=2&&!s.every(n=>n))return{changes:e.changes(t.map((n,a)=>s[a]?[]:[{from:n.from,insert:i[a].open+" "},{from:n.to,insert:" "+i[a].close}]))};if(o!=1&&s.some(n=>n)){let n=[];for(let a=0,l;a<s.length;a++)if(l=s[a]){let c=i[a],{open:d,close:p}=l;n.push({from:d.pos-c.open.length,to:d.pos+d.margin},{from:p.pos-p.margin,to:p.pos+c.close.length})}return{changes:n}}return null}function PV(o,e,t=e.selection.ranges){let i=[],s=-1;for(let{from:n,to:a}of t){let l=i.length,c=1e9;for(let d=n;d<=a;){let p=e.doc.lineAt(d);if(p.from>s&&(n==a||a>p.from)){s=p.from;let g=wd(e,d).line;if(!g)continue;let b=/^\s*/.exec(p.text)[0].length,O=b==p.length,r=p.text.slice(b,b+g.length)==g?b:-1;b<p.text.length&&b<c&&(c=b),i.push({line:p,comment:r,token:g,indent:b,empty:O,single:!1})}d=p.to+1}if(c<1e9)for(let d=l;d<i.length;d++)i[d].indent<i[d].line.text.length&&(i[d].indent=c);i.length==l+1&&(i[l].single=!0)}if(o!=2&&i.some(n=>n.comment<0&&(!n.empty||n.single))){let n=[];for(let{line:l,token:c,indent:d,empty:p,single:g}of i)(g||!p)&&n.push({from:l.from+d,insert:c+" "});let a=e.changes(n);return{changes:a,selection:e.selection.map(a,1)}}else if(o!=1&&i.some(n=>n.comment>=0)){let n=[];for(let{line:a,comment:l,token:c}of i)if(l>=0){let d=a.from+l,p=d+c.length;a.text[p-a.from]==" "&&p++,n.push({from:d,to:p})}return{changes:n}}return null}const kd=2e3;function LV(o,e,t){let i=Math.min(e.line,t.line),s=Math.max(e.line,t.line),n=[];if(e.off>kd||t.off>kd||e.col<0||t.col<0){let a=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let c=i;c<=s;c++){let d=o.doc.line(c);d.length<=l&&n.push(G.range(d.from+a,d.to+l))}}else{let a=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let c=i;c<=s;c++){let d=o.doc.line(c),p=Rc(d.text,a,o.tabSize,!0);if(p>-1){let g=Rc(d.text,l,o.tabSize);n.push(G.range(d.from+p,d.from+g))}}}return n}function NV(o,e){let t=o.coordsAtPos(o.viewport.from);return t?Math.round(Math.abs((t.left-e)/o.defaultCharacterWidth)):-1}function Mx(o,e){let t=o.posAtCoords({x:e.clientX,y:e.clientY},!1),i=o.state.doc.lineAt(t),s=t-i.from,n=s>kd?-1:s==i.length?NV(o,e.clientX):Ar(i.text,o.state.tabSize,t-i.from);return{line:i.number,col:n,off:s}}function DV(o,e){let t=Mx(o,e),i=o.state.selection;return t?{update(s){if(s.docChanged){let n=s.changes.mapPos(s.startState.doc.line(t.line).from),a=s.state.doc.lineAt(n);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},i=i.map(s.changes)}},get(s,n,a){let l=Mx(o,s);if(!l)return i;let c=LV(o.state,t,l);return c.length?a?G.create(c.concat(i.ranges)):G.create(c):i}}:null}function MV(o){let e=(o==null?void 0:o.eventFilter)||(t=>t.altKey&&t.button==0);return ae.mouseSelectionStyle.of((t,i)=>e(i)?DV(t,i):null)}const RV={Alt:[18,o=>o.altKey],Control:[17,o=>o.ctrlKey],Shift:[16,o=>o.shiftKey],Meta:[91,o=>o.metaKey]},IV={style:"cursor: crosshair"};function BV(o={}){let[e,t]=RV[o.key||"Alt"],i=et.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventHandlers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)}}});return[i,ae.contentAttributes.of(s=>{var n;return!((n=s.plugin(i))===null||n===void 0)&&n.isDown?IV:null})]}let QV=0;class yi{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=QV++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new yi([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new qa;return t=>t.modified.indexOf(e)>-1?t:qa.get(t.base||t,t.modified.concat(e).sort((i,s)=>i.id-s.id))}}let VV=0;class qa{constructor(){this.instances=[],this.id=VV++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&FV(t,l.modified));if(i)return i;let s=[],n=new yi(s,e,t);for(let l of t)l.instances.push(n);let a=Rx(t);for(let l of e.set)for(let c of a)s.push(qa.get(l,c));return n}}function FV(o,e){return o.length==e.length&&o.every((t,i)=>t==e[i])}function Rx(o){let e=[o];for(let t=0;t<o.length;t++)for(let i of Rx(o.slice(0,t).concat(o.slice(t+1))))e.push(i);return e}function Sd(o){let e=Object.create(null);for(let t in o){let i=o[t];Array.isArray(i)||(i=[i]);for(let s of t.split(" "))if(s){let n=[],a=2,l=s;for(let g=0;;){if(l=="..."&&g>0&&g+3==s.length){a=1;break}let b=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!b)throw new RangeError("Invalid path: "+s);if(n.push(b[0]=="*"?null:b[0][0]=='"'?JSON.parse(b[0]):b[0]),g+=b[0].length,g==s.length)break;let O=s[g++];if(g==s.length&&O=="!"){a=0;break}if(O!="/")throw new RangeError("Invalid path: "+s);l=s.slice(g)}let c=n.length-1,d=n[c];if(!d)throw new RangeError("Invalid path: "+s);let p=new WV(i,a,c>0?n.slice(0,c):null);e[d]=p.sort(e[d])}}return Ix.add(e)}const Ix=new fe,Ka=re.define({combine(o){return o.length?Ja.combinedMatch(o):null}}),Bx=re.define({combine(o){return o.length?o[0].match:null}});function Cd(o){return o.facet(Ka)||o.facet(Bx)}class WV{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}class Ja{constructor(e,t){this.map=Object.create(null);let i;function s(a){let l=ts.newName();return(i||(i=Object.create(null)))["."+l]=a,l}this.all=typeof t.all=="string"?t.all:t.all?s(t.all):null;for(let a of e){let l=(a.class||s(Object.assign({},a,{tag:null})))+(this.all?" "+this.all:""),c=a.tag;if(!Array.isArray(c))this.map[c.id]=l;else for(let d of c)this.map[d.id]=l}this.module=i?new ts(i):null,this.scope=t.scope||null,this.match=this.match.bind(this);let n=[XV];this.module&&n.push(ae.styleModule.of(this.module)),this.extension=n.concat(t.themeType==null?Ka.of(this):Ka.computeN([ae.darkTheme],a=>a.facet(ae.darkTheme)==(t.themeType=="dark")?[this]:[])),this.fallback=n.concat(Bx.of(this))}match(e,t){if(this.scope&&t!=this.scope)return null;for(let i of e.set){let s=this.map[i.id];if(s!==void 0)return i!=e&&(this.map[e.id]=s),s}return this.map[e.id]=this.all}static combinedMatch(e){if(e.length==1)return e[0].match;let t=e.some(i=>i.scope)?void 0:Object.create(null);return(i,s)=>{let n=t&&t[i.id];if(n!==void 0)return n;let a=null;for(let l of e){let c=l.match(i,s);c&&(a=a?a+" "+c:c)}return t&&(t[i.id]=a),a}}static define(e,t){return new Ja(e,t||{})}static get(e,t,i){let s=Cd(e);return s&&s(t,i||Ct.none)}}class zV{constructor(e){this.markCache=Object.create(null),this.tree=qe(e.state),this.decorations=this.buildDeco(e,Cd(e.state))}update(e){let t=qe(e.state),i=Cd(e.state),s=i!=e.startState.facet(Ka);t.length<e.view.viewport.to&&!s&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return oe.none;let i=new is;for(let{from:s,to:n}of e.visibleRanges)HV(this.tree,s,n,t,(a,l,c)=>{i.add(a,l,this.markCache[c]||(this.markCache[c]=oe.mark({class:c})))});return i.finish()}}const XV=vn.high(et.fromClass(zV,{decorations:o=>o.decorations})),Qx=[""];class YV{constructor(e,t,i){this.at=e,this.style=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,n,a){let{type:l,from:c,to:d}=e;if(c>=i||d<=t)return;Qx[n]=l.name,l.isTop&&(a=l);let p=s,g=l.prop(Ix),b=!1;for(;g;){if(!g.context||GV(g.context,Qx,n)){for(let r of g.tags){let h=this.style(r,a);h&&(p&&(p+=" "),p+=h,g.mode==1?s+=(s?" ":"")+h:g.mode==0&&(b=!0))}break}g=g.next}if(this.startSpan(e.from,p),b)return;let O=e.tree&&e.tree.prop(fe.mounted);if(O&&O.overlay){let r=e.node.enter(O.overlay[0].from+c,1),h=e.firstChild();for(let u=0,m=c;;u++){let y=u<O.overlay.length?O.overlay[u]:null,v=y?y.from+c:d,w=Math.max(t,m),S=Math.min(i,v);if(w<S&&h)for(;e.from<S&&(this.highlightRange(e,w,S,s,n+1,a),this.startSpan(Math.min(i,e.to),p),!(e.to>=v||!e.nextSibling())););if(!y||v>i)break;m=y.to+c,m>t&&(this.highlightRange(r.cursor,Math.max(t,y.from+c),Math.min(i,m),s,n,O.tree.type),this.startSpan(m,p))}h&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,n+1,a),this.startSpan(Math.min(i,e.to),p)}while(e.nextSibling());e.parent()}}}function HV(o,e,t,i,s){let n=new YV(e,i,s);n.highlightRange(o.cursor(),e,t,"",0,o.type),n.flush(t)}function GV(o,e,t){if(o.length>t-1)return!1;for(let i=t-1,s=o.length-1;s>=0;s--,i--){let n=o[s];if(n&&n!=e[i])return!1}return!0}const q=yi.define,el=q(),hs=q(),Vx=q(hs),Fx=q(hs),ds=q(),tl=q(ds),_d=q(ds),Oi=q(),Ws=q(Oi),xi=q(),vi=q(),Td=q(),no=q(Td),il=q(),V={comment:el,lineComment:q(el),blockComment:q(el),docComment:q(el),name:hs,variableName:q(hs),typeName:Vx,tagName:q(Vx),propertyName:Fx,attributeName:q(Fx),className:q(hs),labelName:q(hs),namespace:q(hs),macroName:q(hs),literal:ds,string:tl,docString:q(tl),character:q(tl),attributeValue:q(tl),number:_d,integer:q(_d),float:q(_d),bool:q(ds),regexp:q(ds),escape:q(ds),color:q(ds),url:q(ds),keyword:xi,self:q(xi),null:q(xi),atom:q(xi),unit:q(xi),modifier:q(xi),operatorKeyword:q(xi),controlKeyword:q(xi),definitionKeyword:q(xi),moduleKeyword:q(xi),operator:vi,derefOperator:q(vi),arithmeticOperator:q(vi),logicOperator:q(vi),bitwiseOperator:q(vi),compareOperator:q(vi),updateOperator:q(vi),definitionOperator:q(vi),typeOperator:q(vi),controlOperator:q(vi),punctuation:Td,separator:q(Td),bracket:no,angleBracket:q(no),squareBracket:q(no),paren:q(no),brace:q(no),content:Oi,heading:Ws,heading1:q(Ws),heading2:q(Ws),heading3:q(Ws),heading4:q(Ws),heading5:q(Ws),heading6:q(Ws),contentSeparator:q(Oi),list:q(Oi),quote:q(Oi),emphasis:q(Oi),strong:q(Oi),link:q(Oi),monospace:q(Oi),strikethrough:q(Oi),inserted:q(),deleted:q(),changed:q(),invalid:q(),meta:il,documentMeta:q(il),annotation:q(il),processingInstruction:q(il),definition:yi.defineModifier(),constant:yi.defineModifier(),function:yi.defineModifier(),standard:yi.defineModifier(),local:yi.defineModifier(),special:yi.defineModifier()},Wx=Ja.define([{tag:V.link,textDecoration:"underline"},{tag:V.heading,textDecoration:"underline",fontWeight:"bold"},{tag:V.emphasis,fontStyle:"italic"},{tag:V.strong,fontWeight:"bold"},{tag:V.strikethrough,textDecoration:"line-through"},{tag:V.keyword,color:"#708"},{tag:[V.atom,V.bool,V.url,V.contentSeparator,V.labelName],color:"#219"},{tag:[V.literal,V.inserted],color:"#164"},{tag:[V.string,V.deleted],color:"#a11"},{tag:[V.regexp,V.escape,V.special(V.string)],color:"#e40"},{tag:V.definition(V.variableName),color:"#00f"},{tag:V.local(V.variableName),color:"#30a"},{tag:[V.typeName,V.namespace],color:"#085"},{tag:V.className,color:"#167"},{tag:[V.special(V.variableName),V.macroName],color:"#256"},{tag:V.definition(V.propertyName),color:"#00c"},{tag:V.comment,color:"#940"},{tag:V.meta,color:"#7a757a"},{tag:V.invalid,color:"#f00"}]);class jV{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class zs{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let s=oe.set(e.map(n=>n.from==n.to||n.from==n.to-1&&i.doc.lineAt(n.from).to==n.from?oe.widget({widget:new iF(n),diagnostic:n}).range(n.from):oe.mark({attributes:{class:"cm-lintRange cm-lintRange-"+n.severity},diagnostic:n}).range(n.from,n.to)),!0);return new zs(s,t,Bn(s))}}function Bn(o,e=null,t=0){let i=null;return o.between(t,1e9,(s,n,{spec:a})=>{if(!(e&&a.diagnostic!=e))return i=new jV(s,n,a.diagnostic),!1}),i}function UV(o,e){return o.field(Nt,!1)?e:e.concat(ue.appendConfig.of([Nt,ae.decorations.compute([Nt],t=>{let{selected:i,panel:s}=t.field(Nt);return!i||!s||i.from==i.to?oe.none:oe.set([qV.range(i.from,i.to)])}),FQ(KV),nF]))}const ZV=ue.define(),Ad=ue.define(),zx=ue.define(),Nt=ct.define({create(){return new zs(oe.none,null,null)},update(o,e){if(e.docChanged){let t=o.diagnostics.map(e.changes),i=null;if(o.selected){let s=e.changes.mapPos(o.selected.from,1);i=Bn(t,o.selected.diagnostic,s)||Bn(t,null,s)}o=new zs(t,o.panel,i)}for(let t of e.effects)t.is(ZV)?o=zs.init(t.value,o.panel,e.state):t.is(Ad)?o=new zs(o.diagnostics,t.value?sl.open:null,o.selected):t.is(zx)&&(o=new zs(o.diagnostics,o.panel,t.value));return o},provide:o=>[qr.from(o,e=>e.panel),ae.decorations.from(o,e=>e.diagnostics)]}),qV=oe.mark({class:"cm-lintRange cm-lintRange-active"});function KV(o,e,t){let{diagnostics:i}=o.state.field(Nt),s=[],n=2e8,a=0;return i.between(e-(t<0?1:0),e+(t>0?1:0),(l,c,{spec:d})=>{e>=l&&e<=c&&(l==c||(e>l||t>0)&&(e<c||t<0))&&(s.push(d.diagnostic),n=Math.min(l,n),a=Math.max(c,a))}),s.length?{pos:n,end:a,above:o.state.doc.lineAt(n).to<a,create(){return{dom:JV(o,s)}}}:null}function JV(o,e){return Ne("ul",{class:"cm-tooltip-lint"},e.map(t=>Hx(o,t,!1)))}const eF=o=>{let e=o.state.field(Nt,!1);(!e||!e.panel)&&o.dispatch({effects:UV(o.state,[Ad.of(!0)])});let t=Zr(o,sl.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Xx=o=>{let e=o.state.field(Nt,!1);return!e||!e.panel?!1:(o.dispatch({effects:Ad.of(!1)}),!0)},tF=[{key:"Mod-Shift-m",run:eF},{key:"F8",run:o=>{let e=o.state.field(Nt,!1);if(!e)return!1;let t=o.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(o.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)}}];function Yx(o){let e=[];if(o)e:for(let{name:t}of o){for(let i=0;i<t.length;i++){let s=t[i];if(/[a-zA-Z]/.test(s)&&!e.some(n=>n.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function Hx(o,e,t){var i;let s=t?Yx(e.actions):[];return Ne("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ne("span",{class:"cm-diagnosticText"},e.message),(i=e.actions)===null||i===void 0?void 0:i.map((n,a)=>{let l=g=>{g.preventDefault();let b=Bn(o.state.field(Nt).diagnostics,e);b&&n.apply(o,b.from,b.to)},{name:c}=n,d=s[a]?c.indexOf(s[a]):-1,p=d<0?c:[c.slice(0,d),Ne("u",c.slice(d,d+1)),c.slice(d+1)];return Ne("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${d<0?"":` (access key "${s[a]})"`}.`},p)}),e.source&&Ne("div",{class:"cm-diagnosticSource"},e.source))}class iF extends Li{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Ne("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Gx{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Hx(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class sl{constructor(e){this.view=e,this.items=[];let t=s=>{if(s.keyCode==27)Xx(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:n}=this.items[this.selectedIndex],a=Yx(n.actions);for(let l=0;l<a.length;l++)if(a[l].toUpperCase().charCodeAt(0)==s.keyCode){let c=Bn(this.view.state.field(Nt).diagnostics,n);c&&n.actions[l].apply(e,c.from,c.to)}}else return;s.preventDefault()},i=s=>{for(let n=0;n<this.items.length;n++)this.items[n].dom.contains(s.target)&&this.moveSelection(n)};this.list=Ne("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Ne("div",{class:"cm-panel-lint"},this.list,Ne("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Xx(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Nt).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Nt),i=0,s=!1,n=null;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{let d=-1,p;for(let g=i;g<this.items.length;g++)if(this.items[g].diagnostic==c.diagnostic){d=g;break}d<0?(p=new Gx(this.view,c.diagnostic),this.items.splice(i,0,p),s=!0):(p=this.items[d],d>i&&(this.items.splice(i,d-i),s=!0)),t&&p.diagnostic==t.diagnostic?p.dom.hasAttribute("aria-selected")||(p.dom.setAttribute("aria-selected","true"),n=p):p.dom.hasAttribute("aria-selected")&&p.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new Gx(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),n?(this.list.setAttribute("aria-activedescendant",n.id),this.view.requestMeasure({key:this,read:()=>({sel:n.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{a.top<l.top?this.list.scrollTop-=l.top-a.top:a.bottom>l.bottom&&(this.list.scrollTop+=a.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Nt),i=Bn(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:zx.of(i)})}static open(e){return new sl(e)}}function sF(o,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(o)}</svg>')`}function Ed(o){return sF(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${o}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const nF=ae.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ed("#d11")},".cm-lintRange-warning":{backgroundImage:Ed("orange")},".cm-lintRange-info":{backgroundImage:Ed("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),rF=[ZI(),JI(),YR(),_y(),aB(),NR(),QR(),ve.allowMultipleSelections.of(!0),BI(),Wx.fallback,fB(),qB(),wV(),MV(),BV(),qR(),uQ(),Wr.of([...eQ,...GO,...EQ,...Py,...sB,...AV,...Nx,...tF])];class nl{constructor(e,t,i,s,n,a,l,c,d,p=0,g){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=n,this.score=a,this.buffer=l,this.bufferBase=c,this.curContext=d,this.lookAhead=p,this.parent=g}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new nl(e,[],t,i,i,0,[],0,s?new jx(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=e&65535,{parser:s}=this.p,n=s.dynamicPrecedence(i);if(n&&(this.score+=n),t==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let a=this.stack.length-(t-1)*3-(e&262144?6:0),l=this.stack[a-2],c=this.stack[a-1],d=this.bufferBase+this.buffer.length-c;if(i<s.minRepeatTerm||e&131072){let p=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,p,d+4,!0)}if(e&262144)this.state=this.stack[a];else{let p=this.stack[a-3];this.state=s.getGoto(p,i,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(i,l)}storeNode(e,t,i,s=4,n=!1){if(e==0){let a=this,l=this.buffer.length;if(l==0&&a.parent&&(l=a.bufferBase-a.parent.bufferBase,a=a.parent),l>0&&a.buffer[l-4]==0&&a.buffer[l-1]>-1){if(t==i)return;if(a.buffer[l-2]>=t){a.buffer[l-2]=i;return}}}if(!n||this.pos==i)this.buffer.push(e,t,i,s);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0)for(;a>0&&this.buffer[a-2]>i;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4);this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=i,this.buffer[a+3]=s}}shift(e,t,i){let s=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=i,this.shiftContext(t,s),t<=this.p.parser.maxNode&&this.buffer.push(t,s,i,4);else{let n=e,{parser:a}=this.p;(i>this.pos||t<=a.maxNode)&&(this.pos=i,a.stateFlag(n,1)||(this.reducePos=i)),this.pushState(n,s),this.shiftContext(t,s),t<=a.maxNode&&this.buffer.push(t,s,i,4)}}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new nl(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new oF(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(!(i&65536))return!0;if(i==0)return!1;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let n=0,a;n<t.length;n+=2)(a=t[n+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(t[n],a);if(this.stack.length<120)for(let n=0;s.length<8&&n<t.length;n+=2){let a=t[n+1];s.some((l,c)=>c&1&&l==a)||s.push(t[n],a)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let n=t[s+1];if(n==this.state)continue;let a=this.split();a.storeNode(0,a.pos,a.pos,4,!0),a.pushState(n,this.pos),a.shiftContext(t[s],this.pos),a.score-=200,i.push(a)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(e&65536))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,s=e&65535,n=this.stack.length-i*3;if(n<0||t.getGoto(this.stack[n],s,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new jx(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class jx{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var Ux;(function(o){o[o.Insert=200]="Insert",o[o.Delete=190]="Delete",o[o.Reduce=100]="Reduce",o[o.MaxNext=4]="MaxNext",o[o.MaxInsertStackDepth=300]="MaxInsertStackDepth",o[o.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(Ux||(Ux={}));class oF{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class rl{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new rl(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new rl(this.stack,this.pos,this.index)}}class ol{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Zx=new ol;class aF{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Zx,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,n=this.pos+e;for(;n<i.from;){if(!s)return null;let a=this.ranges[--s];n-=i.from-a.to,i=a}for(;t<0?n>i.to:n>=i.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];n+=a.from-i.to,i=a}return n}peek(e){let t=this.chunkOff+e,i,s;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let n=this.resolveOffset(e,1);if(n==null)return-1;if(i=n,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let a=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Zx,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class al{constructor(e,t){this.data=e,this.id=t}token(e,t){lF(this.data,e,t,this.id)}}al.prototype.contextual=al.prototype.fallback=al.prototype.extend=!1;class wi{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function lF(o,e,t,i){let s=0,n=1<<i,{parser:a}=t.p,{dialect:l}=a;e:for(;n&o[s];){let c=o[s+1];for(let d=s+3;d<c;d+=2)if((o[d+1]&n)>0){let p=o[d];if(l.allows(p)&&(e.token.value==-1||e.token.value==p||a.overrides(p,e.token.value))){e.acceptToken(p);break}}for(let d=e.next,p=0,g=o[s+2];p<g;){let b=p+g>>1,O=c+b+(b<<1),r=o[O],h=o[O+1];if(d<r)g=b;else if(d>=h)p=b+1;else{s=o[O+2],e.advance();continue e}}break}}function ll(o,e=Uint16Array){if(typeof o!="string")return o;let t=null;for(let i=0,s=0;i<o.length;){let n=0;for(;;){let a=o.charCodeAt(i++),l=!1;if(a==126){n=65535;break}a>=92&&a--,a>=34&&a--;let c=a-32;if(c>=46&&(c-=46,l=!0),n+=c,l)break;n*=46}t?t[s++]=n:t=new e(n)}return t}const ni=typeof process<"u"&&/\bparse\b/.test(process.env.LOG);let $d=null;var qx;(function(o){o[o.Margin=25]="Margin"})(qx||(qx={}));function Kx(o,e,t){let i=o.fullCursor();for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(o.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:o.length}}class cF{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Kx(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Kx(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=i.children[s],a=this.start[t]+i.positions[s];if(a>e)return this.nextStart=a,null;if(n instanceof Qe){if(a==e){if(a<this.safeFrom)return null;let l=a+n.length;if(l<=this.safeTo){let c=n.prop(fe.lookAhead);if(!c||l+c<this.fragment.to)return n}}this.index[t]++,a+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+n.length}}}class hF{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new ol)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:n}=s,a=s.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,c=0;for(let d=0;d<n.length;d++){if(!(1<<d&a))continue;let p=n[d],g=this.tokens[d];if(!(i&&!p.fallback)&&((p.contextual||g.start!=e.pos||g.mask!=a||g.context!=l)&&(this.updateCachedToken(g,p,e),g.mask=a,g.context=l),g.lookAhead>g.end+25&&(c=Math.max(g.lookAhead,c)),g.value!=0)){let b=t;if(g.extended>-1&&(t=this.addActions(e,g.extended,g.end,t)),t=this.addActions(e,g.value,g.end,t),!p.extend&&(i=g,t>b))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new ol,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new ol,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){if(t.token(this.stream.reset(i.pos,e),i),e.value>-1){let{parser:s}=i.p;for(let n=0;n<s.specialized.length;n++)if(s.specialized[n]==e.value){let a=s.specializers[n](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){a&1?e.extended=a>>1:e.value=a>>1;break}}}else e.value=0,e.end=Math.min(i.p.stream.end,i.pos+1)}putAction(e,t,i,s){for(let n=0;n<s;n+=3)if(this.actions[n]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:n}=e,{parser:a}=e.p,{data:l}=a;for(let c=0;c<2;c++)for(let d=a.stateSlot(n,c?2:1);;d+=3){if(l[d]==65535)if(l[d+1]==1)d=Qi(l,d+2);else{s==0&&l[d+1]==2&&(s=this.putAction(Qi(l,d+2),t,i,s));break}l[d]==t&&(s=this.putAction(Qi(l,d+1),t,i,s))}return s}}var Jx;(function(o){o[o.Distance=5]="Distance",o[o.MaxRemainingPerStep=3]="MaxRemainingPerStep",o[o.MinBufferLengthPrune=500]="MinBufferLengthPrune",o[o.ForceReduceLimit=10]="ForceReduceLimit",o[o.CutDepth=15e3]="CutDepth",o[o.CutTo=9e3]="CutTo"})(Jx||(Jx={}));class dF{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new aF(t,s),this.tokens=new hF(e,this.stream),this.topTerm=e.top[1];let{from:n}=s[0];this.stacks=[nl.start(this,e.top[0],n)],this.fragments=i.length&&this.stream.end-n>e.bufferLength*4?new cF(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],s,n;for(let a=0;a<e.length;a++){let l=e[a];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{s||(s=[],n=[]),s.push(l);let c=this.tokens.getMainToken(l);n.push(c.value,c.end)}}break}}if(!i.length){let a=s&&fF(s);if(a)return this.stackToTree(a);if(this.parser.strict)throw ni&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,n,i);if(a)return this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(i.length>a)for(i.sort((l,c)=>c.score-l.score);i.length>a;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1)e:for(let a=0;a<i.length-1;a++){let l=i[a];for(let c=a+1;c<i.length;c++){let d=i[c];if(l.sameState(d)||l.buffer.length>500&&d.buffer.length>500)if((l.score-d.score||l.buffer.length-d.buffer.length)>0)i.splice(c--,1);else{i.splice(a--,1);continue e}}}this.minStackPos=i[0].pos;for(let a=1;a<i.length;a++)i[a].pos<this.minStackPos&&(this.minStackPos=i[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:n}=this,a=ni?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,p=d?e.curContext.hash:0;for(let g=this.fragments.nodeAt(s);g;){let b=this.parser.nodeSet.types[g.type.id]==g.type?n.getGoto(e.state,g.type.id):-1;if(b>-1&&g.length&&(!d||(g.prop(fe.contextHash)||0)==p))return e.useNode(g,b),ni&&console.log(a+this.stackID(e)+` (via reuse of ${n.getName(g.type.id)})`),!0;if(!(g instanceof Qe)||g.children.length==0||g.positions[0]>0)break;let O=g.children[0];if(O instanceof Qe&&g.positions[0]==0)g=O;else break}}let l=n.stateSlot(e.state,4);if(l>0)return e.reduce(l),ni&&console.log(a+this.stackID(e)+` (via always-reduce ${n.getName(l&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let d=0;d<c.length;){let p=c[d++],g=c[d++],b=c[d++],O=d==c.length||!i,r=O?e:e.split();if(r.apply(p,g,b),ni&&console.log(a+this.stackID(r)+` (via ${p&65536?`reduce of ${n.getName(p&65535)}`:"shift"} for ${n.getName(g)} @ ${s}${r==e?"":", split"})`),O)return!0;r.pos>s?t.push(r):i.push(r)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return e0(e,t),!0}}runRecovery(e,t,i){let s=null,n=!1;for(let a=0;a<e.length;a++){let l=e[a],c=t[a<<1],d=t[(a<<1)+1],p=ni?this.stackID(l)+" -> ":"";if(l.deadEnd&&(n||(n=!0,l.restart(),ni&&console.log(p+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let g=l.split(),b=p;for(let O=0;g.forceReduce()&&O<10&&(ni&&console.log(b+this.stackID(g)+" (via force-reduce)"),!this.advanceFully(g,i));O++)ni&&(b=this.stackID(g)+" -> ");for(let O of l.recoverByInsert(c))ni&&console.log(p+this.stackID(O)+" (via recover-insert)"),this.advanceFully(O,i);this.stream.end>l.pos?(d==l.pos&&(d++,c=0),l.recoverByDelete(c,d),ni&&console.log(p+this.stackID(l)+` (via recover-delete ${this.parser.getName(c)})`),e0(l,i)):(!s||s.score<l.score)&&(s=l)}return s}stackToTree(e){return e.close(),Qe.build({buffer:rl.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=($d||($d=new WeakMap)).get(e);return t||$d.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function e0(o,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==o.pos&&i.sameState(o)){e[t].score<o.score&&(e[t]=o);return}}e.push(o)}class uF{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const Pd=o=>o;class t0{constructor(e){this.start=e.start,this.shift=e.shift||Pd,this.reduce=e.reduce||Pd,this.reuse=e.reuse||Pd,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class Qn extends Iy{constructor(e){if(super(),this.wrappers=[],e.version!=13)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (13)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),s=[];for(let l=0;l<t.length;l++)s.push([]);function n(l,c,d){s[l].push([c,c.deserialize(String(d))])}if(e.nodeProps)for(let l of e.nodeProps){let c=l[0];for(let d=1;d<l.length;){let p=l[d++];if(p>=0)n(p,c,l[d++]);else{let g=l[d+-p];for(let b=-p;b>0;b--)n(l[d++],c,g);d++}}}this.nodeSet=new Mh(t.map((l,c)=>Ct.define({name:c>=this.minRepeatTerm?void 0:l,id:c,props:s[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),this.strict=!1,this.bufferLength=Ly;let a=ll(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let l=0;l<e.specialized.length;l++)this.specialized[l]=e.specialized[l].term,this.specializers[l]=e.specialized[l].get;this.states=ll(e.states,Uint32Array),this.data=ll(e.stateData),this.goto=ll(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new al(a,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new dF(this,e,t,i);for(let n of this.wrappers)s=n(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let n=s[t+1];;){let a=s[n++],l=a&1,c=s[n++];if(l&&i)return c;for(let d=n+(a>>1);n<d;n++)if(s[n]==e)return c;if(l)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let n=this.stateSlot(e,s?2:1),a;;n+=3){if((a=i[n])==65535)if(i[n+1]==1)a=i[n=Qi(i,n+2)];else{if(i[n+1]==2)return Qi(i,n+2);break}if(a==t||a==0)return Qi(i,n+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Qi(this.data,i+2);else return!1;if(t==Qi(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Qi(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];t.some((n,a)=>a&1&&n==s)||t.push(this.data[i],s)}}return t}overrides(e,t){let i=i0(this.data,this.tokenPrecTable,t);return i<0||i0(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(Qn.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(n=>n.from==i);return s?s.to:i})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let n of e.split(" ")){let a=t.indexOf(n);a>=0&&(i[a]=!0)}let s=null;for(let n=0;n<t.length;n++)if(!i[n])for(let a=this.dialects[t[n]],l;(l=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[l]=1;return new uF(e,i,s)}static deserialize(e){return new Qn(e)}}function Qi(o,e){return o[e]|o[e+1]<<16}function i0(o,e,t){for(let i=e,s;(s=o[i])!=65535;i++)if(s==t)return i-e;return-1}function fF(o){let e=null;for(let t of o){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}const s0=279,n0=1,pF=2,cl=280,gF=3,mF=281,r0=282,bF=4,yF=284,OF=285,xF=5,vF=6,wF=1,kF=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],o0=125,SF=123,CF=59,a0=47,_F=42,TF=43,AF=45,EF=36,$F=96,PF=92,LF=new t0({start:!1,shift(o,e){return e==xF||e==vF||e==yF?o:e==OF},strict:!1}),NF=new wi((o,e)=>{let{next:t}=o;(t==o0||t==-1||e.context)&&e.canShift(r0)&&o.acceptToken(r0)},{contextual:!0,fallback:!0}),DF=new wi((o,e)=>{let{next:t}=o,i;kF.indexOf(t)>-1||t==a0&&((i=o.peek(1))==a0||i==_F)||t!=o0&&t!=CF&&t!=-1&&!e.context&&e.canShift(s0)&&o.acceptToken(s0)},{contextual:!0}),MF=new wi((o,e)=>{let{next:t}=o;if((t==TF||t==AF)&&(o.advance(),t==o.next)){o.advance();let i=!e.context&&e.canShift(n0);o.acceptToken(i?n0:pF)}},{contextual:!0}),RF=new wi(o=>{for(let e=!1,t=0;;t++){let{next:i}=o;if(i<0){t&&o.acceptToken(cl);break}else if(i==$F){t?o.acceptToken(cl):o.acceptToken(mF,1);break}else if(i==SF&&e){t==1?o.acceptToken(gF,1):o.acceptToken(cl,-1);break}else if(i==10&&t){o.advance(),o.acceptToken(cl);break}else i==PF&&o.advance();e=i==EF,o.advance()}});function IF(o,e){return o=="extends"&&e.dialectEnabled(wF)?bF:-1}const BF={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:472,finally:474,return:478,throw:482,break:486,continue:490,debugger:494},QF={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},VF={__proto__:null,"<":129},FF=Qn.deserialize({version:13,states:"$1jO`QYOOO'QQ!LdO'#ChO'XOSO'#DVO)dQYO'#D]O)tQYO'#DhO){QYO'#DrO-xQYO'#DxOOQO'#E]'#E]O.]QWO'#E[O.bQWO'#E[OOQ!LS'#Ef'#EfO0aQ!LdO'#IrO2wQ!LdO'#IsO3eQWO'#EzO3jQpO'#FaOOQ!LS'#FS'#FSO3rO!bO'#FSO4QQWO'#FhO5_QWO'#FgOOQ!LS'#Is'#IsOOQ!LQ'#Ir'#IrOOQQ'#J['#J[O5dQWO'#HnO5iQ!LYO'#HoOOQQ'#If'#IfOOQQ'#Hp'#HpQ`QYOOO){QYO'#DjO5qQWO'#G[O5vQ#tO'#CmO6UQWO'#EZO6aQWO'#EgO6fQ#tO'#FRO7QQWO'#G[O7VQWO'#G`O7bQWO'#G`O7pQWO'#GcO7pQWO'#GdO7pQWO'#GfO5qQWO'#GiO8aQWO'#GlO9oQWO'#CdO:PQWO'#GyO:XQWO'#HPO:XQWO'#HRO`QYO'#HTO:XQWO'#HVO:XQWO'#HYO:^QWO'#H`O:cQ!LZO'#HdO){QYO'#HfO:nQ!LZO'#HhO:yQ!LZO'#HjO5iQ!LYO'#HlO){QYO'#DWOOOS'#Hr'#HrO;UOSO,59qOOQ!LS,59q,59qO=gQbO'#ChO=qQYO'#HsO>UQWO'#ItO@TQbO'#ItO'dQYO'#ItO@[QWO,59wO@rQ&jO'#DbOAkQWO'#E]OAxQWO'#JPOBTQWO'#JOOBTQWO'#JOOB]QWO,5:yOBbQWO'#I}OBiQWO'#DyO5vQ#tO'#EZOBwQWO'#EZOCSQ`O'#FROOQ!LS,5:S,5:SOC[QYO,5:SOEYQ!LdO,5:^OEvQWO,5:dOFaQ!LYO'#I|O7VQWO'#I{OFhQWO'#I{OFpQWO,5:xOFuQWO'#I{OGTQYO,5:vOITQWO'#EWOJ_QWO,5:vOKnQWO'#DlOKuQYO'#DqOLPQ&jO,5;PO){QYO,5;POOQQ'#Er'#ErOOQQ'#Et'#EtO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;ROOQQ'#Ex'#ExOLXQYO,5;cOOQ!LS,5;h,5;hOOQ!LS,5;i,5;iONXQWO,5;iOOQ!LS,5;j,5;jO){QYO'#H}ON^Q!LYO,5<TONxQWO,5;RO){QYO,5;fO! bQpO'#JTO! PQpO'#JTO! iQpO'#JTO! zQpO,5;qOOOO,5;{,5;{O!!YQYO'#FcOOOO'#H|'#H|O3rO!bO,5;nO!!aQpO'#FeOOQ!LS,5;n,5;nO!!}Q,UO'#CrOOQ!LS'#Cu'#CuO!#bQWO'#CuO!#gOSO'#CyO!$TQ#tO,5<QO!$[QWO,5<SO!%hQWO'#FrO!%uQWO'#FsO!%zQWO'#FwO!&|Q&jO'#F{O!'oQ,UO'#IoOOQ!LS'#Io'#IoO!'yQWO'#InO!(XQWO'#ImOOQ!LS'#Cs'#CsOOQ!LS'#C|'#C|O!(aQWO'#DOOJdQWO'#FjOJdQWO'#FlO!(fQWO'#FnO!(kQWO'#FoO!(pQWO'#FuOJdQWO'#FzO!(uQWO'#E^O!)^QWO,5<RO`QYO,5>YOOQQ'#Ii'#IiOOQQ,5>Z,5>ZOOQQ-E;n-E;nO!+YQ!LdO,5:UOOQ!LQ'#Cp'#CpO!+yQ#tO,5<vOOQO'#Cf'#CfO!,[QWO'#CqO!,dQ!LYO'#IjO5_QWO'#IjO:^QWO,59XO!,rQpO,59XO!,zQ#tO,59XO5vQ#tO,59XO!-VQWO,5:vO!-_QWO'#GxO!-mQWO'#J`O){QYO,5;kO!-uQ&jO,5;mO!-zQWO,5=cO!.PQWO,5=cO!.UQWO,5=cO5iQ!LYO,5=cO5qQWO,5<vO!.dQWO'#E_O!.xQ&jO'#E`OOQ!LQ'#I}'#I}O!/ZQ!LYO'#J]O5iQ!LYO,5<zO7pQWO,5=QOOQO'#Cr'#CrO!/fQpO,5<}O!/nQ#tO,5=OO!/yQWO,5=QO!0OQ`O,5=TO:^QWO'#GnO5qQWO'#GpO!0WQWO'#GpO5vQ#tO'#GsO!0]QWO'#GsOOQQ,5=W,5=WO!0bQWO'#GtO!0jQWO'#CmO!0oQWO,59OO!0yQWO,59OO!2{QYO,59OOOQQ,59O,59OO!3YQ!LYO,59OO){QYO,59OO!3eQYO'#G{OOQQ'#G|'#G|OOQQ'#G}'#G}O`QYO,5=eO!3uQWO,5=eO){QYO'#DxO`QYO,5=kO`QYO,5=mO!3zQWO,5=oO`QYO,5=qO!4PQWO,5=tO!4UQYO,5=zOOQQ,5>O,5>OO){QYO,5>OO5iQ!LYO,5>QOOQQ,5>S,5>SO!8VQWO,5>SOOQQ,5>U,5>UO!8VQWO,5>UOOQQ,5>W,5>WO!8[Q`O,59rOOOS-E;p-E;pOOQ!LS1G/]1G/]O!8aQbO,5>_O'dQYO,5>_OOQO,5>d,5>dO!8kQYO'#HsOOQO-E;q-E;qO!8xQWO,5?`O!9QQbO,5?`O!9XQWO,5?jOOQ!LS1G/c1G/cO!9aQpO'#DTOOQO'#Iv'#IvO){QYO'#IvO!:OQpO'#IvO!:mQpO'#DcO!;OQ&jO'#DcO!=ZQYO'#DcO!=bQWO'#IuO!=jQWO,59|O!=oQWO'#EaO!=}QWO'#JQO!>VQWO,5:zO!>mQ&jO'#DcO){QYO,5?kO!>wQWO'#HxOOQO-E;v-E;vO!9XQWO,5?jOOQ!LQ1G0e1G0eO!@TQ&jO'#D|OOQ!LS,5:e,5:eO){QYO,5:eOITQWO,5:eO!@[QWO,5:eO:^QWO,5:uO!,rQpO,5:uO!,zQ#tO,5:uO5vQ#tO,5:uOOQ!LS1G/n1G/nOOQ!LS1G0O1G0OOOQ!LQ'#EV'#EVO){QYO,5?hO!@gQ!LYO,5?hO!@xQ!LYO,5?hO!APQWO,5?gO!AXQWO'#HzO!APQWO,5?gOOQ!LQ1G0d1G0dO7VQWO,5?gOOQ!LS1G0b1G0bO!AsQ!LdO1G0bO!BdQ!LbO,5:rOOQ!LS'#Fq'#FqO!CQQ!LdO'#IoOGTQYO1G0bO!EPQ#tO'#IwO!EZQWO,5:WO!E`QbO'#IxO){QYO'#IxO!EjQWO,5:]OOQ!LS'#DT'#DTOOQ!LS1G0k1G0kO!EoQWO1G0kO!HQQ!LdO1G0mO!HXQ!LdO1G0mO!JlQ!LdO1G0mO!JsQ!LdO1G0mO!LzQ!LdO1G0mO!M_Q!LdO1G0mO#!OQ!LdO1G0mO#!VQ!LdO1G0mO#$jQ!LdO1G0mO#$qQ!LdO1G0mO#&fQ!LdO1G0mO#)`Q7^O'#ChO#+ZQ7^O1G0}O#-UQ7^O'#IsOOQ!LS1G1T1G1TO#-iQ!LdO,5>iOOQ!LQ-E;{-E;{O#.YQ!LdO1G0mOOQ!LS1G0m1G0mO#0[Q!LdO1G1QO#0{QpO,5;sO#1QQpO,5;tO#1VQpO'#F[O#1kQWO'#FZOOQO'#JU'#JUOOQO'#H{'#H{O#1pQpO1G1]OOQ!LS1G1]1G1]OOOO1G1f1G1fO#2OQ7^O'#IrO#2YQWO,5;}OLXQYO,5;}OOOO-E;z-E;zOOQ!LS1G1Y1G1YOOQ!LS,5<P,5<PO#2_QpO,5<POOQ!LS,59a,59aOITQWO'#C{OOOS'#Hq'#HqO#2dOSO,59eOOQ!LS,59e,59eO){QYO1G1lO!(kQWO'#IPO#2oQWO,5<eOOQ!LS,5<b,5<bOOQO'#GV'#GVOJdQWO,5<pOOQO'#GX'#GXOJdQWO,5<rOJdQWO,5<tOOQO1G1n1G1nO#2zQ`O'#CpO#3_Q`O,5<^O#3fQWO'#JXO5qQWO'#JXO#3tQWO,5<`OJdQWO,5<_O#3yQ`O'#FqO#4WQ`O'#JYO#4bQWO'#JYOITQWO'#JYO#4gQWO,5<cOOQ!LQ'#Dg'#DgO#4lQWO'#FtO#4wQpO'#F|O!&wQ&jO'#F|O!&wQ&jO'#GOO#5YQWO'#GPO!(pQWO'#GSOOQO'#IR'#IRO#5_Q&jO,5<gOOQ!LS,5<g,5<gO#5fQ&jO'#F|O#5tQ&jO'#F}O#5|Q&jO'#F}OOQ!LS,5<u,5<uOJdQWO,5?YOJdQWO,5?YO#6RQWO'#ISO#6^QWO,5?XOOQ!LS'#Ch'#ChO#7QQ#tO,59jOOQ!LS,59j,59jO#7sQ#tO,5<UO#8fQ#tO,5<WO#8pQWO,5<YOOQ!LS,5<Z,5<ZO#8uQWO,5<aO#8zQ#tO,5<fOGTQYO1G1mO#9[QWO1G1mOOQQ1G3t1G3tOOQ!LS1G/p1G/pONXQWO1G/pOOQQ1G2b1G2bOITQWO1G2bO){QYO1G2bOITQWO1G2bO#9aQWO1G2bO#9oQWO,59]O#:xQWO'#EWOOQ!LQ,5?U,5?UO#;SQ!LYO,5?UOOQQ1G.s1G.sO:^QWO1G.sO!,rQpO1G.sO!,zQ#tO1G.sO#;bQWO1G0bO#;gQWO'#ChO#;rQWO'#JaO#;zQWO,5=dO#<PQWO'#JaO#<UQWO'#JaO#<^QWO'#I[O#<lQWO,5?zO#<tQbO1G1VOOQ!LS1G1X1G1XO5qQWO1G2}O#<{QWO1G2}O#=QQWO1G2}O#=VQWO1G2}OOQQ1G2}1G2}O#=[Q#tO1G2bO7VQWO'#JOO7VQWO'#EaO7VQWO'#IUO#=mQ!LYO,5?wOOQQ1G2f1G2fO!/yQWO1G2lOITQWO1G2iO#=xQWO1G2iOOQQ1G2j1G2jOITQWO1G2jO#=}QWO1G2jO#>VQ&jO'#GhOOQQ1G2l1G2lO!&wQ&jO'#IWO!0OQ`O1G2oOOQQ1G2o1G2oOOQQ,5=Y,5=YO#>_Q#tO,5=[O5qQWO,5=[O#5YQWO,5=_O5_QWO,5=_O!,rQpO,5=_O!,zQ#tO,5=_O5vQ#tO,5=_O#>pQWO'#J_O#>{QWO,5=`OOQQ1G.j1G.jO#?QQ!LYO1G.jO#?]QWO1G.jO#?bQWO1G.jO5iQ!LYO1G.jO#?jQbO,5?|O#?tQWO,5?|O#@PQYO,5=gO#@WQWO,5=gO7VQWO,5?|OOQQ1G3P1G3PO`QYO1G3POOQQ1G3V1G3VOOQQ1G3X1G3XO:XQWO1G3ZO#@]QYO1G3]O#DWQYO'#H[OOQQ1G3`1G3`O:^QWO1G3fO#DeQWO1G3fO5iQ!LYO1G3jOOQQ1G3l1G3lOOQ!LQ'#Fx'#FxO5iQ!LYO1G3nO5iQ!LYO1G3pOOOS1G/^1G/^O#DmQ`O,5<TO#DuQbO1G3yOOQO1G4O1G4OO){QYO,5>_O#EPQWO1G4zO#EXQWO1G5UO#EaQWO,5?bOLXQYO,5:{O7VQWO,5:{O:^QWO,59}OLXQYO,59}O!,rQpO,59}O#EfQ7^O,59}OOQO,5:{,5:{O#EpQ&jO'#HtO#FWQWO,5?aOOQ!LS1G/h1G/hO#F`Q&jO'#HyO#FtQWO,5?lOOQ!LQ1G0f1G0fO!;OQ&jO,59}O#F|QbO1G5VO7VQWO,5>dOOQ!LQ'#ES'#ESO#GWQ!LrO'#ETO!?{Q&jO'#D}OOQO'#Hw'#HwO#GrQ&jO,5:hOOQ!LS,5:h,5:hO#GyQ&jO'#D}O#H[Q&jO'#D}O#HcQ&jO'#EYO#HfQ&jO'#ETO#HsQ&jO'#ETO!?{Q&jO'#ETO#IWQWO1G0PO#I]Q`O1G0POOQ!LS1G0P1G0PO){QYO1G0POITQWO1G0POOQ!LS1G0a1G0aO:^QWO1G0aO!,rQpO1G0aO!,zQ#tO1G0aO#IdQ!LdO1G5SO){QYO1G5SO#ItQ!LYO1G5SO#JVQWO1G5RO7VQWO,5>fOOQO,5>f,5>fO#J_QWO,5>fOOQO-E;x-E;xO#JVQWO1G5RO#JmQ!LdO,59jO#LlQ!LdO,5<UO#NnQ!LdO,5<WO$!pQ!LdO,5<fOOQ!LS7+%|7+%|O$$xQ!LdO7+%|O$%iQWO'#HuO$%sQWO,5?cOOQ!LS1G/r1G/rO$%{QYO'#HvO$&YQWO,5?dO$&bQbO,5?dOOQ!LS1G/w1G/wOOQ!LS7+&V7+&VO$&lQ7^O,5:^O){QYO7+&iO$&vQ7^O,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$'TQMhO,5;vOLXQYO,5;uOOQO-E;y-E;yOOQ!LS7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$'`QWO1G1iOOQ!LS1G1k1G1kO$'eQ`O,59gOOOS-E;o-E;oOOQ!LS1G/P1G/PO$'lQ!LdO7+'WOOQ!LS,5>k,5>kO$(]QWO,5>kOOQ!LS1G2P1G2PP$(bQWO'#IPPOQ!LS-E;}-E;}O$)RQ#tO1G2[O$)tQ#tO1G2^O$*OQ#tO1G2`OOQ!LS1G1x1G1xO$*VQWO'#IOO$*eQWO,5?sO$*eQWO,5?sO$*mQWO,5?sO$*xQWO,5?sOOQO1G1z1G1zO$+WQ#tO1G1yO$+hQWO'#IQO$+xQWO,5?tOITQWO,5?tO$,QQ`O,5?tOOQ!LS1G1}1G1}O5iQ!LYO,5<hO5iQ!LYO,5<iO$,[QWO,5<iO#5TQWO,5<iO!,rQpO,5<hO$,aQWO,5<jO5iQ!LYO,5<kO$,[QWO,5<nOOQO-E<P-E<POOQ!LS1G2R1G2RO!&wQ&jO,5<hO$,iQWO,5<iO!&wQ&jO,5<jO!&wQ&jO,5<iO$,tQ#tO1G4tO$-OQ#tO1G4tOOQO,5>n,5>nOOQO-E<Q-E<QO!-uQ&jO,59lO){QYO,59lO$-]QWO1G1tOJdQWO1G1{O$-bQ!LdO7+'XOOQ!LS7+'X7+'XOGTQYO7+'XOOQ!LS7+%[7+%[O$.RQ`O'#JZO#IWQWO7+'|O$.]QWO7+'|O$.eQ`O7+'|OOQQ7+'|7+'|OITQWO7+'|O){QYO7+'|OITQWO7+'|OOQO1G.w1G.wO$.oQ!LbO'#ChO$/PQ!LbO,5<lO$/nQWO,5<lOOQ!LQ1G4p1G4pOOQQ7+$_7+$_O:^QWO7+$_O!,rQpO7+$_OGTQYO7+%|O$/sQWO'#IZO$0UQWO,5?{OOQO1G3O1G3OO5qQWO,5?{O$0UQWO,5?{O$0^QWO,5?{OOQO,5>v,5>vOOQO-E<Y-E<YOOQ!LS7+&q7+&qO$0cQWO7+(iO5iQ!LYO7+(iO5qQWO7+(iO$0hQWO7+(iO$0mQWO7+'|OOQ!LQ,5>p,5>pOOQ!LQ-E<S-E<SOOQQ7+(W7+(WO$0{Q!LbO7+(TOITQWO7+(TO$1VQ`O7+(UOOQQ7+(U7+(UOITQWO7+(UO$1^QWO'#J^O$1iQWO,5=SOOQO,5>r,5>rOOQO-E<U-E<UOOQQ7+(Z7+(ZO$2cQ&jO'#GqOOQQ1G2v1G2vOITQWO1G2vO){QYO1G2vOITQWO1G2vO$2jQWO1G2vO$2xQ#tO1G2vO5iQ!LYO1G2yO#5YQWO1G2yO5_QWO1G2yO!,rQpO1G2yO!,zQ#tO1G2yO$3ZQWO'#IYO$3fQWO,5?yO$3nQ&jO,5?yOOQ!LQ1G2z1G2zOOQQ7+$U7+$UO$3vQWO7+$UO5iQ!LYO7+$UO$3{QWO7+$UO){QYO1G5hO){QYO1G5iO$4QQYO1G3RO$4XQWO1G3RO$4^QYO1G3RO$4eQ!LYO1G5hOOQQ7+(k7+(kO5iQ!LYO7+(uO`QYO7+(wOOQQ'#Jd'#JdOOQQ'#I]'#I]O$4oQYO,5=vOOQQ,5=v,5=vO){QYO'#H]O$4|QWO'#H_OOQQ7+)Q7+)QO$5RQYO7+)QO7VQWO7+)QOOQQ7+)U7+)UOOQQ7+)Y7+)YOOQQ7+)[7+)[OOQO1G4|1G4|O$9PQ7^O1G0gO$9ZQWO1G0gOOQO1G/i1G/iO$9fQ7^O1G/iO:^QWO1G/iOLXQYO'#DcOOQO,5>`,5>`OOQO-E;r-E;rOOQO,5>e,5>eOOQO-E;w-E;wO!,rQpO1G/iO:^QWO,5:iOOQO,5:o,5:oO){QYO,5:oO$9pQ!LYO,5:oO$9{Q!LYO,5:oO!,rQpO,5:iOOQO-E;u-E;uOOQ!LS1G0S1G0SO!?{Q&jO,5:iO$:ZQ&jO,5:iO$:lQ!LrO,5:oO$;WQ&jO,5:iO!?{Q&jO,5:oOOQO,5:t,5:tO$;_Q&jO,5:oO$;lQ!LYO,5:oOOQ!LS7+%k7+%kO#IWQWO7+%kO#I]Q`O7+%kOOQ!LS7+%{7+%{O:^QWO7+%{O!,rQpO7+%{O$<QQ!LdO7+*nO){QYO7+*nOOQO1G4Q1G4QO7VQWO1G4QO$<bQWO7+*mO$<jQ!LdO1G2[O$>lQ!LdO1G2^O$@nQ!LdO1G1yO$BvQ#tO,5>aOOQO-E;s-E;sO$CQQbO,5>bO){QYO,5>bOOQO-E;t-E;tO$C[QWO1G5OO$CdQ7^O1G0bO$EkQ7^O1G0mO$ErQ7^O1G0mO$GsQ7^O1G0mO$GzQ7^O1G0mO$IoQ7^O1G0mO$JSQ7^O1G0mO$LaQ7^O1G0mO$LhQ7^O1G0mO$NiQ7^O1G0mO$NpQ7^O1G0mO%!eQ7^O1G0mO%!xQ!LdO<<JTO%#iQ7^O1G0mO%%XQ7^O'#IoO%'UQ7^O1G1QOLXQYO'#F^OOQO'#JV'#JVOOQO1G1b1G1bO%'cQWO1G1aO%'hQ7^O,5>iOOOO7+'T7+'TOOOS1G/R1G/ROOQ!LS1G4V1G4VOJdQWO7+'zO%'rQWO,5>jO5qQWO,5>jOOQO-E;|-E;|O%(QQWO1G5_O%(QQWO1G5_O%(YQWO1G5_O%(eQ`O,5>lO%(oQWO,5>lOITQWO,5>lOOQO-E<O-E<OO%(tQ`O1G5`O%)OQWO1G5`OOQO1G2S1G2SOOQO1G2T1G2TO5iQ!LYO1G2TO$,[QWO1G2TO5iQ!LYO1G2SO%)WQWO1G2UOITQWO1G2UOOQO1G2V1G2VO5iQ!LYO1G2YO!,rQpO1G2SO#5TQWO1G2TO%)]QWO1G2UO%)eQWO1G2TOJdQWO7+*`OOQ!LS1G/W1G/WO%)pQWO1G/WOOQ!LS7+'`7+'`O%)uQ#tO7+'gO%*VQ!LdO<<JsOOQ!LS<<Js<<JsOITQWO'#ITO%*vQWO,5?uOOQQ<<Kh<<KhOITQWO<<KhO#IWQWO<<KhO%+OQWO<<KhO%+WQ`O<<KhOITQWO1G2WOOQQ<<Gy<<GyO:^QWO<<GyO%+bQ!LdO<<IhOOQ!LS<<Ih<<IhOOQO,5>u,5>uO%,RQWO,5>uO%,WQWO,5>uOOQO-E<X-E<XO%,`QWO1G5gO%,`QWO1G5gO5qQWO1G5gO%,hQWO<<LTOOQQ<<LT<<LTO%,mQWO<<LTO5iQ!LYO<<LTO){QYO<<KhOITQWO<<KhOOQQ<<Ko<<KoO$0{Q!LbO<<KoOOQQ<<Kp<<KpO$1VQ`O<<KpO%,rQ&jO'#IVO%,}QWO,5?xOLXQYO,5?xOOQQ1G2n1G2nO#GWQ!LrO'#ETO!?{Q&jO'#GrOOQO'#IX'#IXO%-VQ&jO,5=]OOQQ,5=],5=]O%-^Q&jO'#ETO%-iQ&jO'#ETO%.QQ&jO'#ETO%.[Q&jO'#GrO%.mQWO7+(bO%.rQWO7+(bO%.zQ`O7+(bOOQQ7+(b7+(bOITQWO7+(bO){QYO7+(bOITQWO7+(bO%/UQWO7+(bOOQQ7+(e7+(eO5iQ!LYO7+(eO#5YQWO7+(eO5_QWO7+(eO!,rQpO7+(eO%/dQWO,5>tOOQO-E<W-E<WOOQO'#Gu'#GuO%/oQWO1G5eO5iQ!LYO<<GpOOQQ<<Gp<<GpO%/wQWO<<GpO%/|QWO7++SO%0RQWO7++TOOQQ7+(m7+(mO%0WQWO7+(mO%0]QYO7+(mO%0dQWO7+(mO){QYO7++SO){QYO7++TOOQQ<<La<<LaOOQQ<<Lc<<LcOOQQ-E<Z-E<ZOOQQ1G3b1G3bO%0iQWO,5=wOOQQ,5=y,5=yO:^QWO<<LlO%0nQWO<<LlOLXQYO7+&ROOQO7+%T7+%TO%0sQ7^O1G5VO:^QWO7+%TOOQO1G0T1G0TO%0}Q!LdO1G0ZOOQO1G0Z1G0ZO){QYO1G0ZO%1XQ!LYO1G0ZO:^QWO1G0TO!,rQpO1G0TO!?{Q&jO1G0TO%1dQ!LYO1G0ZO%1rQ&jO1G0TO%2TQ!LYO1G0ZO%2iQ!LrO1G0ZO%2sQ&jO1G0TO!?{Q&jO1G0ZOOQ!LS<<IV<<IVOOQ!LS<<Ig<<IgO:^QWO<<IgO%2zQ!LdO<<NYOOQO7+)l7+)lO%3[Q!LdO7+'gO%5dQbO1G3|O%5nQ7^O7+%|O%5{Q7^O,59jO%7xQ7^O,5<UO%9uQ7^O,5<WO%;rQ7^O,5<fO%=bQ7^O7+'WO%=oQ7^O7+'XO%=|QWO,5;xOOQO7+&{7+&{O%>RQ#tO<<KfOOQO1G4U1G4UO%>cQWO1G4UO%>nQWO1G4UO%>|QWO7+*yO%>|QWO7+*yOITQWO1G4WO%?UQ`O1G4WO%?`QWO7+*zOOQO7+'o7+'oO5iQ!LYO7+'oOOQO7+'n7+'nO$,[QWO7+'pO%?hQ`O7+'pOOQO7+'t7+'tO5iQ!LYO7+'nO$,[QWO7+'oO%?oQWO7+'pOITQWO7+'pO#5TQWO7+'oO%?tQ#tO<<MzOOQ!LS7+$r7+$rO%@OQ`O,5>oOOQO-E<R-E<RO#IWQWOANASOOQQANASANASOITQWOANASO%@YQ!LbO7+'rOOQQAN=eAN=eO5qQWO1G4aOOQO1G4a1G4aO%@gQWO1G4aO%@lQWO7++RO%@lQWO7++RO5iQ!LYOANAoO%@tQWOANAoOOQQANAoANAoO%@yQWOANASO%ARQ`OANASOOQQANAZANAZOOQQANA[ANA[O%A]QWO,5>qOOQO-E<T-E<TO%AhQ7^O1G5dO#5YQWO,5=^O5_QWO,5=^O!,rQpO,5=^OOQO-E<V-E<VOOQQ1G2w1G2wO$:lQ!LrO,5:oO!?{Q&jO,5=^O%ArQ&jO,5=^O%BTQ&jO,5:oOOQQ<<K|<<K|OITQWO<<K|O%.mQWO<<K|O%B_QWO<<K|O%BgQ`O<<K|O){QYO<<K|OITQWO<<K|OOQQ<<LP<<LPO5iQ!LYO<<LPO#5YQWO<<LPO5_QWO<<LPO%BqQ&jO1G4`O%ByQWO7++POOQQAN=[AN=[O5iQ!LYOAN=[OOQQ<<Nn<<NnOOQQ<<No<<NoOOQQ<<LX<<LXO%CRQWO<<LXO%CWQYO<<LXO%C_QWO<<NnO%CdQWO<<NoOOQQ1G3c1G3cOOQQANBWANBWO:^QWOANBWO%CiQ7^O<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%0}Q!LdO7+%uO){QYO7+%uOOQO7+%o7+%oO:^QWO7+%oO!,rQpO7+%oO%CsQ!LYO7+%uO!?{Q&jO7+%oO%DOQ!LYO7+%uO%D^Q&jO7+%oO%DoQ!LYO7+%uOOQ!LSAN?RAN?RO%ETQ!LdO<<KfO%G]Q7^O<<JTO%GjQ7^O1G1yO%IYQ7^O1G2[O%KVQ7^O1G2^O%MSQ7^O<<JsO%MaQ7^O<<IhOOQO1G1d1G1dOOQO7+)p7+)pO%MnQWO7+)pO%MyQWO<<NeO%NRQ`O7+)rOOQO<<KZ<<KZO5iQ!LYO<<K[O$,[QWO<<K[OOQO<<KY<<KYO5iQ!LYO<<KZO%N]Q`O<<K[O$,[QWO<<KZOOQQG26nG26nO#IWQWOG26nOOQO7+){7+){O5qQWO7+){O%NdQWO<<NmOOQQG27ZG27ZO5iQ!LYOG27ZOITQWOG26nOLXQYO1G4]O%NlQWO7++OO5iQ!LYO1G2xO#5YQWO1G2xO5_QWO1G2xO!,rQpO1G2xO!?{Q&jO1G2xO%2iQ!LrO1G0ZO%NtQ&jO1G2xO%.mQWOANAhOOQQANAhANAhOITQWOANAhO& VQWOANAhO& _Q`OANAhOOQQANAkANAkO5iQ!LYOANAkO#5YQWOANAkOOQO'#Gv'#GvOOQO7+)z7+)zOOQQG22vG22vOOQQANAsANAsO& iQWOANAsOOQQANDYANDYOOQQANDZANDZO& nQYOG27rOOQO<<Ia<<IaO%0}Q!LdO<<IaOOQO<<IZ<<IZO:^QWO<<IZO){QYO<<IaO!,rQpO<<IZO&%lQ!LYO<<IaO!?{Q&jO<<IZO&%wQ!LYO<<IaO&&VQ7^O7+'gOOQO<<M[<<M[OOQOAN@vAN@vO5iQ!LYOAN@vOOQOAN@uAN@uO$,[QWOAN@vO5iQ!LYOAN@uOOQQLD,YLD,YOOQO<<Mg<<MgOOQQLD,uLD,uO#IWQWOLD,YO&'uQ7^O7+)wOOQO7+(d7+(dO5iQ!LYO7+(dO#5YQWO7+(dO5_QWO7+(dO!,rQpO7+(dO!?{Q&jO7+(dOOQQG27SG27SO%.mQWOG27SOITQWOG27SOOQQG27VG27VO5iQ!LYOG27VOOQQG27_G27_O:^QWOLD-^OOQOAN>{AN>{OOQOAN>uAN>uO%0}Q!LdOAN>{O:^QWOAN>uO){QYOAN>{O!,rQpOAN>uO&(PQ!LYOAN>{O&([Q7^O<<KfOOQOG26bG26bO5iQ!LYOG26bOOQOG26aG26aOOQQ!$( t!$( tOOQO<<LO<<LOO5iQ!LYO<<LOO#5YQWO<<LOO5_QWO<<LOO!,rQpO<<LOOOQQLD,nLD,nO%.mQWOLD,nOOQQLD,qLD,qOOQQ!$(!x!$(!xOOQOG24gG24gOOQOG24aG24aO%0}Q!LdOG24gO:^QWOG24aO){QYOG24gOOQOLD+|LD+|OOQOANAjANAjO5iQ!LYOANAjO#5YQWOANAjO5_QWOANAjOOQQ!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%0}Q!LdOLD*ROOQOG27UG27UO5iQ!LYOG27UO#5YQWOG27UOOQO!$'Mm!$'MmOOQOLD,pLD,pO5iQ!LYOLD,pOOQO!$(![!$(![OLXQYO'#DrO&)zQbO'#IrOLXQYO'#DjO&*RQ!LdO'#ChO&*lQbO'#ChO&*|QYO,5:vOLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO'#H}O&,|QWO,5<TO&.`QWO,5;ROLXQYO,5;fO!(aQWO'#DOO!(aQWO'#DOOITQWO'#FjO&-UQWO'#FjOITQWO'#FlO&-UQWO'#FlOITQWO'#FzO&-UQWO'#FzOLXQYO,5?kO&*|QYO1G0bO&.gQ7^O'#ChOLXQYO1G1lOITQWO,5<pO&-UQWO,5<pOITQWO,5<rO&-UQWO,5<rOITQWO,5<_O&-UQWO,5<_O&*|QYO1G1mOLXQYO7+&iOITQWO1G1{O&-UQWO1G1{O&*|QYO7+'XO&*|QYO7+%|OITQWO7+'zO&-UQWO7+'zO&.qQWO'#E[O&.vQWO'#E[O&/OQWO'#EzO&/TQWO'#EgO&/YQWO'#JPO&/eQWO'#I}O&/pQWO,5:vO&/uQ#tO,5<QO&/|QWO'#FsO&0RQWO'#FsO&0WQWO,5<RO&0`QWO,5:vO&0hQ7^O1G0}O&0oQWO,5<aO&0tQWO,5<aO&0yQWO1G1mO&1OQWO1G0bO&1TQ#tO1G2`O&1[Q#tO1G2`O4QQWO'#FhO5_QWO'#FgOBwQWO'#EZOLXQYO,5;cO!(pQWO'#FuO!(pQWO'#FuOJdQWO,5<tOJdQWO,5<t",stateData:"&2X~O'WOS'XOSTOSUOS~OPTOQTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&X!RO&Z!SO&]!TO&_!UO&a!VO'ZPO'dQO'mYO'zaO~OP[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'U[X'd[X'n[X'u[X'v[X~O!]$lX~P$zOR!WO'S!XO'T!ZO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'Z![O'dQO'mYO'zaO~O!Q!`O!R!]O!O'hP!O'rP~P'dO!S!mO~P`OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'Z9YO'dQO'mYO'zaO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'dQO'mYO'zaO~O!Q!rO#U!uO#V!rO'Z9ZO!c'oP~P+{O#W!vO~O!]!wO#W!vO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'dQO'n#[O'u!}O'v#OO~O_'fX'U'fX!c'fX!O'fX!T'fX%Q'fX!]'fX~P.jO!{#eO#o#eOP'gXZ'gX_'gXj'gXu'gXv'gXx'gX!R'gX!a'gX!b'gX!d'gX!j'gX#['gX#]'gX#^'gX#_'gX#`'gX#a'gX#b'gX#e'gX#g'gX#i'gX#j'gX'd'gX'n'gX'u'gX'v'gX~O#c'gX'U'gX!O'gX!c'gXn'gX!T'gX%Q'gX!]'gX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO'Z#pO'd#sO'_'aP~O!d$XO~O!]$ZO~O_$[O'U$[O~O'Z$`O~O!d$XO'Z$`O'[$bO'`$cO~Oc$iO!d$XO'Z$`O~O#c#TO~O]$rOu$nO!T$kO!d$mO%R$qO'Z$`O'[$bO^(SP~O!n$sO~Ox$tO!T$uO'Z$`O~Ox$tO!T$uO%Z$yO'Z$`O~O'Z$zO~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%TOc%SO!n%QO%P%RO%c%PO~P7uOb%WOcmO!T%VO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%ZO!{%^O%R%XO'[$bO~P8tO!d%_O!g%cO~O!d%dO~O!TSO~O_$[O'R%lO'U$[O~O_$[O'R%oO'U$[O~O_$[O'R%qO'U$[O~OR!WO'S!XO'T%uO~OP[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'd[X'n[X'u[X'v[X~O!O[X!OdX~P;aO!Q%wO!O&gX!O&lX!R&gX!R&lX~P'dO!R%yO!O'hX~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R%yO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'dQO'n#[O'u!}O'v#OO~O!O'hX~P>^O!O&OO~Ox&RO!W&]O!X&UO!Y&UO'[$bO~O]&SOk&SO!Q&VO'e&PO!S'iP!S'tP~P@aO!O'qX!R'qX!]'qX!c'qX'n'qX~O!{'qX#W#PX!S'qX~PAYO!{&^O!O'sX!R'sX~O!R&_O!O'rX~O!O&bO~O!{#eO~PAYOS&fO!T&cO!o&eO'Z$`O~Oc&kO!d$XO'Z$`O~Ou$nO!d$mO~O!S&lO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'dQOP!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'n!fa'u!fa'v!fa~O_!fa'U!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCcO!c&mO~O!]!wO!{&oO'n&nO!R'pX_'pX'U'pX~O!c'pX~PE{O!R&sO!c'oX~O!c&uO~Ox$tO!T$uO#V&vO'Z$`O~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'Z9YO'dQO'mYO'zaO~O]#qOh$OOj#rOk#qOl#qOq$POs9lOx#xO!T#yO!_:oO!d#vO#V9rO#t$TO$_9nO$a9pO$d$UO'Z&zO'd#sO~O#W&|O~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO'Z&zO'd#sO~O'_'kP~PJdO!Q'QO!c'lP~P){O'e'SO'mYO~OP9VOQ9VO]cOb:mOc!jOhcOj9VOkcOlcOq9VOs9VOxRO{cO|cO}cO!T!bO!_9XO!dUO!g9VO!h9VO!i9VO!j9VO!k9VO!n!iO#t!lO#x^O'Z'bO'dQO'mYO'z:kO~O!d!zO~O!R#bO_$]a'U$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'iO~PITO!]'kO!T'wX#w'wX#z'wX$R'wX~Ou'lO~P! POu'lO!T'wX#w'wX#z'wX$R'wX~O!T'nO#w'rO#z'mO$R'sO~O!Q'vO~PLXO#z#fO$R'yO~Ou$eXx$eX!b$eX'n$eX'u$eX'v$eX~OSfX!RfX!{fX'_fX'_$eX~P!!iOk'{O~OR'|O'S'}O'T(PO~Ou(ROx(SO'n#[O'u(UO'v(WO~O'_(QO~P!#rO'_(ZO~O]#qOh$OOj#rOk#qOl#qOq$POs9lOx#xO!T#yO!_:oO!d#vO#V9rO#t$TO$_9nO$a9pO$d$UO'd#sO~O!Q(_O'Z([O!c'{P~P!$aO#W(aO~O!Q(eO'Z(bO!O'|P~P!$aO_(nOj(sOx(kO!W(qO!X(jO!Y(jO!d(hO!x(rO$w(mO'[$bO'e(gO~O!S(pO~P!&XO!b!yOu'cXx'cX'n'cX'u'cX'v'cX!R'cX!{'cX~O'_'cX#m'cX~P!'TOS(vO!{(uO!R'bX'_'bX~O!R(wO'_'aX~O'Z(yO~O!d)OO~O'Z&zO~O!d(hO~Ox$tO!Q!rO!T$uO#U!uO#V!rO'Z$`O!c'oP~O!]!wO#W)SO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'dQO'n#[O'u!}O'v#OO~O_!^a!R!^a'U!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)fOS)[O!T&cO!o)ZO%Q)YO'`$cO~O'Z$zO'_'aP~O!])_O!T'^X_'^X'U'^X~O!d$XO'`$cO~O!d$XO'Z$`O'`$cO~O!]!wO#W&|O~O])jO%R)kO'Z)gO!S(TP~O!R)lO^(SX~O'e'SO~OZ)pO~O^)qO~O!T$kO'Z$`O'[$bO^(SP~Ox$tO!Q)vO!R&_O!T$uO'Z$`O!O'rP~O]&YOk&YO!Q)wO'e'SO!S'tP~O!R)xO_(PX'U(PX~O!{)|O'`$cO~OS*PO!T#yO'`$cO~O!T*RO~Ou*TO!TSO~O!n*YO~Oc*_O~O'Z(yO!S(RP~Oc$iO~O%RtO'Z$zO~P8tOZ*eO^*dO~OPTOQTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'dQO'mYO'zaO~O!T!bO#t!lO'Z9YO~P!1RO^*dO_$[O'U$[O~O_*iO#d*kO%T*kO%U*kO~P){O!d%_O~O%t*pO~O!T*rO~O&U*uO&V*tOP&SaQ&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&X&Sa&Z&Sa&]&Sa&_&Sa&a&Sa'Q&Sa'Z&Sa'd&Sa'm&Sa'z&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O'Z*xO~On*{O~O!O&ga!R&ga~P!)fO!Q+PO!O&gX!R&gX~P){O!R%yO!O'ha~O!O'ha~P>^O!R&_O!O'ra~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'`!ZX~O!]+UO!{+TO!R#TX!R'jX!S#TX!S'jX!]'jX!d'jX'`'jX~O!]+WO!d$XO'`$cO!R!VX!S!VX~O]&QOk&QOx&RO'e(gO~OP9VOQ9VO]cOb:mOc!jOhcOj9VOkcOlcOq9VOs9VOxRO{cO|cO}cO!T!bO!_9XO!dUO!g9VO!h9VO!i9VO!j9VO!k9VO!n!iO#t!lO#x^O'dQO'mYO'z:kO~O'Z9vO~P!;^O!R+[O!S'iX~O!S+^O~O!]+UO!{+TO!R#TX!S#TX~O!R+_O!S'tX~O!S+aO~O]&QOk&QOx&RO'[$bO'e(gO~O!X+bO!Y+bO~P!>[Ox$tO!Q+dO!T$uO'Z$`O!O&lX!R&lX~O_+hO!W+kO!X+gO!Y+gO!r+oO!s+mO!t+nO!u+lO!x+pO'[$bO'e(gO'm+eO~O!S+jO~P!?]OS+uO!T&cO!o+tO~O!{+{O!R'pa!c'pa_'pa'U'pa~O!]!wO~P!@gO!R&sO!c'oa~Ox$tO!Q,OO!T$uO#U,QO#V,OO'Z$`O!R&nX!c&nX~O_#Oi!R#Oi'U#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)fO#W!za!R!za!c!za!{!za!T!za_!za'U!za!O!za~P!#rO#W'cXP'cXZ'cX_'cXj'cXv'cX!a'cX!d'cX!j'cX#['cX#]'cX#^'cX#_'cX#`'cX#a'cX#b'cX#c'cX#e'cX#g'cX#i'cX#j'cX'U'cX'd'cX!c'cX!O'cX!T'cXn'cX%Q'cX!]'cX~P!'TO!R,ZO'_'kX~P!#rO'_,]O~O!R,^O!c'lX~P!)fO!c,aO~O!O,bO~OP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'dQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'U#Zi'n#Zi'u#Zi'v#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!EtO#[#PO~P!EtOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'dQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'U#Zi'n#Zi'u#Zi'v#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!H`Oj#RO~P!H`OP#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'dQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'U#Zi'n#Zi'u#Zi'v#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!JzOZ#dO!a#TO#a#TO#b#TO#c#TO~P!JzOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'dQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'U#Zi'n#Zi'v#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'u#Zi~P!MrO'u!}O~P!MrOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'dQO'u!}O_#Zi!R#Zi#i#Zi#j#Zi'U#Zi'n#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'v#Zi~P#!^O'v#OO~P#!^OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'dQO'u!}O'v#OO~O_#Zi!R#Zi#j#Zi'U#Zi'n#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#$xOP[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'd[X'n[X'u[X'v[X!R[X!S[X~O#m[X~P#']OP#^OZ9jOj9_Ou!{Ov!{Ox!|O!a9aO!b!yO!d!zO!j#^O#[9]O#]9^O#^9^O#_9^O#`9`O#a9aO#b9aO#c9aO#e9bO#g9dO#i9fO#j9gO'dQO'n#[O'u!}O'v#OO~O#m,dO~P#)gOP'gXZ'gXj'gXu'gXv'gXx'gX!a'gX!b'gX!d'gX!j'gX#['gX#]'gX#^'gX#_'gX#`'gX#a'gX#b'gX#e'gX#g'gX#i'gX#j'gX'd'gX'n'gX'u'gX'v'gX!R'gX~O!{9kO#o9kO#c'gX#m'gX!S'gX~P#+bO_&qa!R&qa'U&qa!c&qan&qa!O&qa!T&qa%Q&qa!]&qa~P!)fOP#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'U#Zi'd#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!#rO_#ni!R#ni'U#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)fO#z,fO~O#z,gO~O!]'kO!{,hO!T$OX#w$OX#z$OX$R$OX~O!Q,iO~O!T'nO#w,kO#z'mO$R,lO~O!R9hO!S'fX~P#)gO!S,mO~O$R,oO~OR'|O'S'}O'T,rO~O],uOk,uO!O,vO~O!RdX!]dX!cdX!c$eX'ndX~P!!iO!c,|O~P!#rO!R,}O!]!wO'n&nO!c'{X~O!c-SO~O!O$eX!R$eX!]$lX~P!!iO!R-UO!O'|X~P!#rO!]-WO~O!O-YO~O!Q(_O'Z$`O!c'{P~Oj-^O!]!wO!d$XO'`$cO'n&nO~O!])_O~O!S-dO~P!&XO!X-eO!Y-eO'[$bO'e(gO~Ox-gO'e(gO~O!x-hO~O'Z$zO!R&vX'_&vX~O!R(wO'_'aa~Ou-mOv-mOx-nO'nra'ura'vra!Rra!{ra~O'_ra#mra~P#6fOu(ROx(SO'n$^a'u$^a'v$^a!R$^a!{$^a~O'_$^a#m$^a~P#7[Ou(ROx(SO'n$`a'u$`a'v$`a!R$`a!{$`a~O'_$`a#m$`a~P#7}O]-oO~O#W-pO~O'_$na!R$na#m$na!{$na~P!#rO#W-sO~OS-|O!T&cO!o-{O%Q-zO~O'_-}O~O]#qOj#rOk#qOl#qOq$POs9lOx#xO!T#yO!_:oO!d#vO#V9rO#t$TO$_9nO$a9pO$d$UO'd#sO~Oh.PO'Z.OO~P#9tO!])_O!T'^a_'^a'U'^a~O#W.VO~OZ[X!RdX!SdX~O!R.WO!S(TX~O!S.YO~OZ.ZO~O].]O'Z)gO~O!T$kO'Z$`O^'OX!R'OX~O!R)lO^(Sa~O!c.`O~P!)fO].bO~OZ.cO~O^.dO~OS-|O!T&cO!o-{O%Q-zO'`$cO~O!R)xO_(Pa'U(Pa~O!{.jO~OS.mO!T#yO~O'e'SO!S(QP~OS.wO!T.sO!o.vO%Q.uO'`$cO~OZ/RO!R/PO!S(RX~O!S/SO~O^/UO_$[O'U$[O~O]/VO~O]/WO'Z(yO~O#c/XO%r/YO~P0zO!{#eO#c/XO%r/YO~O_/ZO~P){O_/]O~O%{/aOP%yiQ%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&X%yi&Z%yi&]%yi&_%yi&a%yi'Q%yi'Z%yi'd%yi'm%yi'z%yi!S%yi`%yi&Q%yi~O`/gO!S/eO&Q/fO~P`O!TSO!d/jO~O!R#bOn$]a~O!O&gi!R&gi~P!)fO!R%yO!O'hi~O!R&_O!O'ri~O!O/nO~O!R!Va!S!Va~P#)gO]&QOk&QO!Q/tO'e(gO!R&hX!S&hX~P@aO!R+[O!S'ia~O]&YOk&YO!Q)wO'e'SO!R&mX!S&mX~O!R+_O!S'ta~O!O'si!R'si~P!)fO_$[O!]!wO!d$XO!j0OO!{/|O'U$[O'`$cO'n&nO~O!S0RO~P!?]O!X0SO!Y0SO'[$bO'e(gO'm+eO~O!W0TO~P#GyO!TSO!W0TO!u0VO!x0WO~P#GyO!W0TO!s0YO!t0YO!u0VO!x0WO~P#GyO!T&cO~O!T&cO~P!#rO!R'pi!c'pi_'pi'U'pi~P!)fO!{0cO!R'pi!c'pi_'pi'U'pi~O!R&sO!c'oi~Ox$tO!T$uO#V0eO'Z$`O~O#WraPraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Ura'dra!cra!Ora!Tranra%Qra!]ra~P#6fO#W$^aP$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'U$^a'd$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#7[O#W$`aP$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'U$`a'd$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#7}O#W$naP$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'U$na'd$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!#rO_#Oq!R#Oq'U#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)fO!R&iX'_&iX~PJdO!R,ZO'_'ka~O!Q0mO!R&jX!c&jX~P){O!R,^O!c'la~O!R,^O!c'la~P!)fO#m!fa!S!fa~PCcO#m!^a!R!^a!S!^a~P#)gO!T1QO#x^O$P1RO~O!S1VO~On1WO~P!#rO_$Yq!R$Yq'U$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)fO!O1XO~O],uOk,uO~Ou(ROx(SO'v(WO'n$xi'u$xi!R$xi!{$xi~O'_$xi#m$xi~P$(jOu(ROx(SO'n$zi'u$zi'v$zi!R$zi!{$zi~O'_$zi#m$zi~P$)]O#m1YO~P!#rO!Q1[O'Z$`O!R&rX!c&rX~O!R,}O!c'{a~O!R,}O!]!wO!c'{a~O!R,}O!]!wO'n&nO!c'{a~O'_$gi!R$gi#m$gi!{$gi~P!#rO!Q1cO'Z(bO!O&tX!R&tX~P!$aO!R-UO!O'|a~O!R-UO!O'|a~P!#rO!]!wO~O!]!wO#c1mO~Oj1qO!]!wO'n&nO~O!R'bi'_'bi~P!#rO!{1tO!R'bi'_'bi~P!#rO!c1wO~O_$Zq!R$Zq'U$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)fO!R1{O!T'}X~P!#rO!T&cO%Q2OO~O!T&cO%Q2OO~P!#rO!T$eX$u[X_$eX'U$eX~P!!iO$u2SOugXxgX!TgX'ngX'ugX'vgX_gX'UgX~O$u2SO~O]2YO%R2ZO'Z)gO!R&}X!S&}X~O!R.WO!S(Ta~OZ2_O~O^2`O~O]2cO~OS2eO!T&cO!o2dO%Q2OO~O_$[O'U$[O~P!#rO!T#yO~P!#rO!R2jO!{2lO!S(QX~O!S2mO~Ox(kO!W2vO!X2oO!Y2oO!r2uO!s2tO!t2tO!x2sO'[$bO'e(gO'm+eO~O!S2rO~P$1nOS2}O!T.sO!o2|O%Q2{O~OS2}O!T.sO!o2|O%Q2{O'`$cO~O'Z(yO!R&|X!S&|X~O!R/PO!S(Ra~O]3XO'e3WO~O]3YO~O^3[O~O!c3_O~P){O_3aO~O_3aO~P){O#c3cO%r3dO~PE{O`/gO!S3hO&Q/fO~P`O!]3jO~O&V3kOP&SqQ&SqX&Sq]&Sq_&Sqb&Sqc&Sqh&Sqj&Sqk&Sql&Sqq&Sqs&Sqx&Sq{&Sq|&Sq}&Sq!T&Sq!_&Sq!d&Sq!g&Sq!h&Sq!i&Sq!j&Sq!k&Sq!n&Sq#d&Sq#t&Sq#x&Sq%P&Sq%R&Sq%T&Sq%U&Sq%X&Sq%Z&Sq%^&Sq%_&Sq%a&Sq%n&Sq%t&Sq%v&Sq%x&Sq%z&Sq%}&Sq&T&Sq&X&Sq&Z&Sq&]&Sq&_&Sq&a&Sq'Q&Sq'Z&Sq'd&Sq'm&Sq'z&Sq!S&Sq%{&Sq`&Sq&Q&Sq~O!R#Ti!S#Ti~P#)gO!{3mO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#)gO_$[O!{3tO'U$[O~O_$[O!]!wO!{3tO'U$[O~O!X3xO!Y3xO'[$bO'e(gO'm+eO~O_$[O!]!wO!d$XO!j3yO!{3tO'U$[O'`$cO'n&nO~O!W3zO~P$:ZO!W3zO!u3}O!x4OO~P$:ZO_$[O!]!wO!j3yO!{3tO'U$[O'n&nO~O!R'pq!c'pq_'pq'U'pq~P!)fO!R&sO!c'oq~O#W$xiP$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'U$xi'd$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$(jO#W$ziP$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'U$zi'd$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$)]O#W$giP$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'U$gi'd$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!#rO!R&ia'_&ia~P!#rO!R&ja!c&ja~P!)fO!R,^O!c'li~O#m#Oi!R#Oi!S#Oi~P#)gOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'dQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'n#Zi'u#Zi'v#Zi!R#Zi!S#Zi~O#[#Zi~P$CqO#[9]O~P$CqOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9]O#]9^O#^9^O#_9^O'dQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'n#Zi'u#Zi'v#Zi!R#Zi!S#Zi~Oj#Zi~P$EyOj9_O~P$EyOP#^Oj9_Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9]O#]9^O#^9^O#_9^O#`9`O'dQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'n#Zi'u#Zi'v#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$HROZ9jO!a9aO#a9aO#b9aO#c9aO~P$HROP#^OZ9jOj9_Ou!{Ov!{Ox!|O!a9aO!b!yO!d!zO!j#^O#[9]O#]9^O#^9^O#_9^O#`9`O#a9aO#b9aO#c9aO#e9bO'dQO#g#Zi#i#Zi#j#Zi#m#Zi'n#Zi'v#Zi!R#Zi!S#Zi~O'u#Zi~P$JgO'u!}O~P$JgOP#^OZ9jOj9_Ou!{Ov!{Ox!|O!a9aO!b!yO!d!zO!j#^O#[9]O#]9^O#^9^O#_9^O#`9`O#a9aO#b9aO#c9aO#e9bO#g9dO'dQO'u!}O#i#Zi#j#Zi#m#Zi'n#Zi!R#Zi!S#Zi~O'v#Zi~P$LoO'v#OO~P$LoOP#^OZ9jOj9_Ou!{Ov!{Ox!|O!a9aO!b!yO!d!zO!j#^O#[9]O#]9^O#^9^O#_9^O#`9`O#a9aO#b9aO#c9aO#e9bO#g9dO#i9fO'dQO'u!}O'v#OO~O#j#Zi#m#Zi'n#Zi!R#Zi!S#Zi~P$NwO_#ky!R#ky'U#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)fOP#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'd#Zi!R#Zi!S#Zi~P!#rO!b!yOP'cXZ'cXj'cXu'cXv'cXx'cX!a'cX!d'cX!j'cX#['cX#]'cX#^'cX#_'cX#`'cX#a'cX#b'cX#c'cX#e'cX#g'cX#i'cX#j'cX#m'cX'd'cX'n'cX'u'cX'v'cX!R'cX!S'cX~O#m#ni!R#ni!S#ni~P#)gO!S4`O~O!R&qa!S&qa~P#)gO!]!wO'n&nO!R&ra!c&ra~O!R,}O!c'{i~O!R,}O!]!wO!c'{i~O!O&ta!R&ta~P!#rO!]4gO~O!R-UO!O'|i~P!#rO!R-UO!O'|i~O!O4mO~O!]!wO#c4sO~Oj4tO!]!wO'n&nO~O!O4vO~O'_$iq!R$iq#m$iq!{$iq~P!#rO_$Zy!R$Zy'U$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)fO!R1{O!T'}a~O!T&cO%Q4{O~O!T&cO%Q4{O~P!#rO_#Oy!R#Oy'U#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)fOZ5OO~O]5QO'Z)gO~O!R.WO!S(Ti~O]5TO~O^5UO~O'e'SO!R&yX!S&yX~O!R2jO!S(Qa~O!S5cO~P$1nOx-gO'e(gO'm+eO~O!W5fO!X5eO!Y5eO!x0WO'[$bO'e(gO'm+eO~O!s5gO!t5gO~P%-iO!X5eO!Y5eO'[$bO'e(gO'm+eO~O!T.sO~O!T.sO%Q5iO~O!T.sO%Q5iO~P!#rOS5nO!T.sO!o5mO%Q5iO~OZ5sO!R&|a!S&|a~O!R/PO!S(Ri~O]5vO~O!c5wO~O!c5xO~O!c5yO~O!c5yO~P){O_5{O~O!]6OO~O!c6QO~O!R'si!S'si~P#)gO_$[O'U$[O~P!)fO_$[O!{6VO'U$[O~O_$[O!]!wO!{6VO'U$[O~O!X6[O!Y6[O'[$bO'e(gO'm+eO~O_$[O!]!wO!j6]O!{6VO'U$[O'n&nO~O!d$XO'`$cO~P%2TO!W6^O~P%1rO!R'py!c'py_'py'U'py~P!)fO#W$iqP$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'U$iq'd$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!#rO!R&ji!c&ji~P!)fO#m#Oq!R#Oq!S#Oq~P#)gOu-mOv-mOx-nOPraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'dra'nra'ura'vra!Rra!Sra~Ou(ROx(SOP$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'd$^a'n$^a'u$^a'v$^a!R$^a!S$^a~Ou(ROx(SOP$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'd$`a'n$`a'u$`a'v$`a!R$`a!S$`a~OP$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'd$na!R$na!S$na~P!#rO#m$Yq!R$Yq!S$Yq~P#)gO#m$Zq!R$Zq!S$Zq~P#)gO!S6hO~O'_$|y!R$|y#m$|y!{$|y~P!#rO!]!wO!R&ri!c&ri~O!]!wO'n&nO!R&ri!c&ri~O!R,}O!c'{q~O!O&ti!R&ti~P!#rO!R-UO!O'|q~O!O6oO~P!#rO!O6oO~O!R'by'_'by~P!#rO!R&wa!T&wa~P!#rO!T$tq_$tq'U$tq~P!#rOZ6wO~O!R.WO!S(Tq~O]6zO~O!T&cO%Q6{O~O!T&cO%Q6{O~P!#rO!{6|O!R&ya!S&ya~O!R2jO!S(Qi~P#)gO!X7SO!Y7SO'[$bO'e(gO'm+eO~O!W7UO!x4OO~P%ArO!T.sO%Q7XO~O!T.sO%Q7XO~P!#rO]7`O'e7_O~O!R/PO!S(Rq~O!c7bO~O!c7bO~P){O!c7dO~O!c7eO~O!R#Ty!S#Ty~P#)gO_$[O!{7kO'U$[O~O_$[O!]!wO!{7kO'U$[O~O!X7nO!Y7nO'[$bO'e(gO'm+eO~O_$[O!]!wO!j7oO!{7kO'U$[O'n&nO~O#W$|yP$|yZ$|y_$|yj$|yv$|y!R$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y'U$|y'd$|y!c$|y!O$|y!T$|y!{$|yn$|y%Q$|y!]$|y~P!#rO#m#ky!R#ky!S#ky~P#)gOP$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'd$gi!R$gi!S$gi~P!#rOu(ROx(SO'v(WOP$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'd$xi'n$xi'u$xi!R$xi!S$xi~Ou(ROx(SOP$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'd$zi'n$zi'u$zi'v$zi!R$zi!S$zi~O#m$Zy!R$Zy!S$Zy~P#)gO#m#Oy!R#Oy!S#Oy~P#)gO!]!wO!R&rq!c&rq~O!R,}O!c'{y~O!O&tq!R&tq~P!#rO!O7uO~P!#rO!R.WO!S(Ty~O!R2jO!S(Qq~O!X8RO!Y8RO'[$bO'e(gO'm+eO~O!T.sO%Q8UO~O!T.sO%Q8UO~P!#rO!c8XO~O&V8YOP&S!ZQ&S!ZX&S!Z]&S!Z_&S!Zb&S!Zc&S!Zh&S!Zj&S!Zk&S!Zl&S!Zq&S!Zs&S!Zx&S!Z{&S!Z|&S!Z}&S!Z!T&S!Z!_&S!Z!d&S!Z!g&S!Z!h&S!Z!i&S!Z!j&S!Z!k&S!Z!n&S!Z#d&S!Z#t&S!Z#x&S!Z%P&S!Z%R&S!Z%T&S!Z%U&S!Z%X&S!Z%Z&S!Z%^&S!Z%_&S!Z%a&S!Z%n&S!Z%t&S!Z%v&S!Z%x&S!Z%z&S!Z%}&S!Z&T&S!Z&X&S!Z&Z&S!Z&]&S!Z&_&S!Z&a&S!Z'Q&S!Z'Z&S!Z'd&S!Z'm&S!Z'z&S!Z!S&S!Z%{&S!Z`&S!Z&Q&S!Z~O_$[O!{8_O'U$[O~O_$[O!]!wO!{8_O'U$[O~OP$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'd$iq!R$iq!S$iq~P!#rO!R&yq!S&yq~P#)gO_$[O!{8tO'U$[O~OP$|yZ$|yj$|yv$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y#m$|y'd$|y!R$|y!S$|y~P!#rOn'fX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'ndX~P;aOP9VOQ9VO]cOb:mOc!jOhcOj9VOkcOlcOq9VOs9VOxRO{cO|cO}cO!TSO!_9XO!dUO!g9VO!h9VO!i9VO!j9VO!k9VO!n!iO#t!lO#x^O'Z'bO'dQO'mYO'z:kO~O!R9hO!S$]a~O]#qOh$OOj#rOk#qOl#qOq$POs9mOx#xO!T#yO!_:pO!d#vO#V9sO#t$TO$_9oO$a9qO$d$UO'Z&zO'd#sO~O#d'iO~P&-UO!S[X!SdX~P;aO#W9[O~O!]!wO#W9[O~O!{9kO~O#c9aO~O!{9tO!R'sX!S'sX~O!{9kO!R'qX!S'qX~O#W9uO~O'_9wO~P!#rO#W9|O~O#W9}O~O!]!wO#W:OO~O!]!wO#W9uO~O#m:PO~P#)gO#W:QO~O#W:RO~O#W:SO~O#W:TO~O#m:UO~P!#rO#m:VO~P!#rO#x~!b!r!t!u#U#V'z$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'z#]}'W'X#z'W'Z'e~",goto:"#Ed(XPPPPPPPP(YP(jP*^PPPP-uPP.[3n5b5uP5uPPP5uP7c5uP5uP7gPP7lP8Q<cPPPP<gPPPP<g?XPPP?_AjP<gPDTPPPPE{<gPPPPPGt<gPPJuKrPPPPKvM`PMhNiPKr<g<g!#p!&k!+^!+^!.mPPP!.t!1j<gPPPPPPPPPP!4aP!5rPP<g!7PP<gP<g<g<g<gP<g!9dPP!<]P!?Q!?Y!?^!?^P!<YP!?b!?bP!BVP!BZ<g<g!Ba!ET5uP5uP5u5uP!FW5u5u!HO5u!JQ5u!Kr5u5u!L`!NY!NY!N^!NY!NfP!NYP5u# b5u#!l5u5u-uPPP##yPP#$c#$cP#$cP#$x#$cPP#%OP#$uP#$u#%bMd#$u#&P#&V#&Y(Y#&](YP#&d#&d#&dP(YP(YP(YP(YPP(YP#&j#&mP#&m(YPPP(YP(YP(YP(YP(YP(Y(Y#&q#&{#'R#'X#'g#'m#'s#'}#(T#(d#(j#(x#)O#)U#)d#)y#+]#+k#+q#+w#+}#,T#,_#,e#,k#,u#-X#-_PPPPPPPP#-ePP#.X#2VPP#3m#3t#3|PP#8Y#:m#@i#@l#@o#@z#@}PP#AQ#AU#As#Bj#Bn#CSPP#CW#C^#CbP#Ce#Ci#Cl#D[#Dr#Dw#Dz#D}#ET#EW#E[#E`mhOSj}!n$Z%b%e%f%h*m*r/a/dQ$hmQ$opQ%YyS&U!b+[Q&j!jS(j#y(oQ)e$iQ)r$qQ*^%SQ+b&]S+g&c+iQ+y&kQ-e(qQ/O*_Y0S+k+l+m+n+oS2o.s2qU3x0T0V0YU5e2t2u2vS6[3z3}S7S5f5gQ7n6^R8R7U$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8t!j'd#]#k&V'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nQ(z$QQ)j$kQ*`%VQ*g%_Q,T9lQ.Q)_Q.])kQ/W*eQ2Y.WQ3U/PQ4X9mR5Q2ZpeOSjy}!n$Z%X%b%e%f%h*m*r/a/dR*b%Z&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%y&R&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:m:n[!cRU!]!`%w&VQ$alQ$gmS$lp$qv$vrs!r!u$X$t&_&s&v)v)w)x*k+U+d,O,Q/j0eQ%OwQ&g!iQ&i!jS(^#v(hS)d$h$iQ)h$kQ)u$sQ*X%QQ*]%SS+x&j&kQ-R(_Q.U)eQ.[)kQ.^)lQ.a)pQ.y*YS.}*^*_Q0a+yQ1Z,}Q2X.WQ2].ZQ2b.cQ3T/OQ4d1[Q5P2ZQ5S2_Q6v5OR7x6w!Y$em!j$g$h$i&T&i&j&k(i)d)e+X+f+x+y-_.U/y0P0U0a1p3w3|6Y7l8`Q)]$aQ)}${Q*Q$|Q*[%SQ.e)uQ.x*XU.|*]*^*_Q3O.yS3S.}/OQ5`2nQ5r3TS7Q5a5dS8P7R7TQ8j8QR8y8kW#|a$c(w:kS${t%XQ$|uQ$}vR){$y$V#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+u,Z-U-W-p-z-|.j.m.u.w1Y1c1m1t1{2O2S2e2{2}4g4s4{5i5n6{7X8U9j9n9o9p9q9r9s9x9y9z9{9|9}:Q:R:U:V:k:q:rT'}#s(OV({$Q9l9mU&Y!b$u+_Q'T!{Q)o$nQ.n*RQ1u-mR5[2j&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:n$]#aZ!_!o$_%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n*}+Y+c+z,Y,`,c,e,s-q/o/r0b0l0p0q0r0s0t0u0v0w0x0y0z0{0|1P1U1y2V3o3r4S4V4W4]4^5^6R6U6b6f6g7h7{8]8r8}9W:dT!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nQ&W!bR/u+[Y&Q!b&U&]+[+bS(i#y(oS+f&c+iS-_(j(qQ-`(kQ-f(rQ.p*TU0P+g+k+lU0U+m+n+oS0Z+p2sQ1p-eQ1r-gQ1s-hS2n.s2qU3w0S0T0VQ3{0WQ3|0YS5a2o2vS5d2t2uU6Y3x3z3}Q6_4OS7R5e5fQ7T5gS7l6[6^S8Q7S7UQ8`7nR8k8RlhOSj}!n$Z%b%e%f%h*m*r/a/dQ%j!QS&w!v9[Q)b$fQ*V%OQ*W%PQ+v&hS,X&|9uS-r)S:OQ.S)cQ.r*UQ/h*tQ/i*uQ/q+VQ0X+mQ0_+wS1z-s:SQ2T.TS2W.V:TQ3n/sQ3q/zQ4Q0`Q4}2UQ6P3kQ6S3pQ6W3vQ6`4RQ7f6QQ7i6XQ8[7jQ8o8YQ8q8^R8|8s$W#`Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n*}+Y+c+z,Y,`,c,s-q/o/r0b0l0p0q0r0s0t0u0v0w0x0y0z0{0|1P1U1y2V3o3r4S4V4W4]4^5^6R6U6b6f6g7h7{8]8r8}9W:dU(t#z&{1OT)W$_,e$W#_Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n*}+Y+c+z,Y,`,c,s-q/o/r0b0l0p0q0r0s0t0u0v0w0x0y0z0{0|1P1U1y2V3o3r4S4V4W4]4^5^6R6U6b6f6g7h7{8]8r8}9W:dQ'e#`S)V$_,eR-t)W&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nQ%e{Q%f|Q%h!OQ%i!PR/`*pQ&d!iQ)X$aQ+s&gS-y)])uS0[+q+rW1}-v-w-x.eS4P0]0^U4z2P2Q2RU6t4y5W5XQ7w6uR8f7zT+h&c+iS+f&c+iU0P+g+k+lU0U+m+n+oS0Z+p2sS2n.s2qU3w0S0T0VQ3{0WQ3|0YS5a2o2vS5d2t2uU6Y3x3z3}Q6_4OS7R5e5fQ7T5gS7l6[6^S8Q7S7UQ8`7nR8k8RS+h&c+iT2p.s2qS&q!q/^Q-Q(^Q-](iS0O+f2nQ1`-RS1j-^-fU3y0U0Z5dQ4c1ZS4q1q1sU6]3{3|7TQ6j4dQ6s4tR7o6_Q!xXS&p!q/^Q)T$YQ)`$dQ)f$jQ+|&qQ-P(^Q-[(iQ-a(lQ.R)aQ.z*ZS/}+f2nS1_-Q-RS1i-]-fQ1l-`Q1o-bQ3Q.{W3u0O0U0Z5dQ4b1ZQ4f1`S4k1j1sQ4r1rQ5p3RW6Z3y3{3|7TS6i4c4dQ6n4mQ6q4qQ7O5_Q7]5qS7m6]6_Q7q6jQ7s6oQ7v6sQ7}7PQ8W7^Q8a7oQ8d7uQ8h8OQ8w8iQ9P8xQ9T9QQ:^:XQ:g:bR:h:c$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8tS!xn!k!j:W#]#k&V'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nR:^:m$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8tQ$Yb!Y$dm!j$g$h$i&T&i&j&k(i)d)e+X+f+x+y-_.U/y0P0U0a1p3w3|6Y7l8`S$jn!kQ)a$eQ*Z%SW.{*[*]*^*_U3R.|.}/OQ5_2nS5q3S3TU7P5`5a5dQ7^5rU8O7Q7R7TS8i8P8QS8x8j8kQ9Q8y!j:X#]#k&V'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nQ:b:lR:c:m$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8tY!hRU!]!`%wv$vrs!r!u$X$t&_&s&v)v)w)x*k+U+d,O,Q/j0eQ*h%_!h:Y#]#k'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nR:]&VS&Z!b$uR/w+_$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8t!j'd#]#k&V'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nR*g%_$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8tQ'T!{!k:Z#]#k&V'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:n!h#VZ!_$_%v%|&x'P'^'_'`'a'f'j)n*}+c+z,Y,`,s-q0b0l0|1y2V3r4S4V6U7h8]8r8}9W!R9c'c't+Y,e/o/r0p0x0y0z0{1P1U3o4W4]4^5^6R6b6f6g7{:d!d#XZ!_$_%v%|&x'P'`'a'f'j)n*}+c+z,Y,`,s-q0b0l0|1y2V3r4S4V6U7h8]8r8}9W}9e'c't+Y,e/o/r0p0z0{1P1U3o4W4]4^5^6R6b6f6g7{:d!`#]Z!_$_%v%|&x'P'f'j)n*}+c+z,Y,`,s-q0b0l0|1y2V3r4S4V6U7h8]8r8}9Wl(Y#t&})R,{-T-i-j0j1x4a4u:_:i:jx:n'c't+Y,e/o/r0p1P1U3o4W4]4^5^6R6b6f6g7{:d!`:q&y'h(](c+r,W,p-X-u-x.i.k0^0i1a1e2R2g2i2y4U4h4n4w4|5X5l6a6l6r7ZZ:r0}4[6c7p8b&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nS#l`#mR1R,h&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,h,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nS#g^#nT'm#i'qT#h^#nT'o#i'q&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+P+T+W+t+{,^,d,h,i-n-s-{.V.v/X/Y/Z/]/a/d/f/t/|0c0m1Q2d2l2|3a3c3d3m3t5m5{6V6|7k8_8t9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:nT#l`#mQ#o`R'x#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+P+t+{,^,d-n-s-{.V.v/X/Y/Z/]/a/d/f/|0c0m2d2|3a3c3d3t5m5{6V7k8_8t!k:l#]#k&V'v+T+W,i/t1Q2l3m6|9V9X9[9]9^9_9`9a9b9c9d9e9f9g9h9k9t9u9w:O:P:S:T:n#RdOSUj}!S!W!n!|#k$Z%Z%^%_%b%d%e%f%h%l&R&e'v)Z*i*m*r+t,i-n-{.v/X/Y/Z/]/a/d/f1Q2d2|3a3c3d5m5{t#za!y$R$S$W(V(X(Y(a(u(v,Z-p1Y1t:k:q:r!|&{!w#d#v#x&f'|(e)Y)[)_)|*P+u-U-W-z-|.j.m.u.w1c1m1{2O2S2e2{2}4g4s4{5i5n6{7X8U9n9p9r9x9z9|:Q:UQ)P$UQ,t(Rc1O9j9o9q9s9y9{9}:R:Vt#wa!y$R$S$W(V(X(Y(a(u(v,Z-p1Y1t:k:q:rS(l#y(oQ)Q$VQ-b(m!|:`!w#d#v#x&f'|(e)Y)[)_)|*P+u-U-W-z-|.j.m.u.w1c1m1{2O2S2e2{2}4g4s4{5i5n6{7X8U9n9p9r9x9z9|:Q:Ub:a9j9o9q9s9y9{9}:R:VQ:e:oR:f:pt#za!y$R$S$W(V(X(Y(a(u(v,Z-p1Y1t:k:q:r!|&{!w#d#v#x&f'|(e)Y)[)_)|*P+u-U-W-z-|.j.m.u.w1c1m1{2O2S2e2{2}4g4s4{5i5n6{7X8U9n9p9r9x9z9|:Q:Uc1O9j9o9q9s9y9{9}:R:VlfOSj}!n$Z%b%e%f%h*m*r/a/dQ(d#xQ*y%oQ*z%qR1b-U$U#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+u,Z-U-W-p-z-|.j.m.u.w1Y1c1m1t1{2O2S2e2{2}4g4s4{5i5n6{7X8U9j9n9o9p9q9r9s9x9y9z9{9|9}:Q:R:U:V:k:q:rQ*O$|Q.l*QQ2h.kR5Z2iT(n#y(oS(n#y(oT2p.s2qQ)`$dQ-a(lQ.R)aQ.z*ZQ3Q.{Q5p3RQ7O5_Q7]5qQ7}7PQ8W7^Q8h8OQ8w8iQ9P8xR9T9Ql(V#t&})R,{-T-i-j0j1x4a4u:_:i:j!`9x&y'h(](c+r,W,p-X-u-x.i.k0^0i1a1e2R2g2i2y4U4h4n4w4|5X5l6a6l6r7ZZ9y0}4[6c7p8bn(X#t&})R,y,{-T-i-j0j1x4a4u:_:i:j!b9z&y'h(](c+r,W,p-X-u-x.i.k0^0g0i1a1e2R2g2i2y4U4h4n4w4|5X5l6a6l6r7Z]9{0}4[6c6d7p8bpeOSjy}!n$Z%X%b%e%f%h*m*r/a/dQ%UxR*i%_peOSjy}!n$Z%X%b%e%f%h*m*r/a/dR%UxQ*S$}R.h){qeOSjy}!n$Z%X%b%e%f%h*m*r/a/dQ.t*XS2z.x.yW5h2w2x2y3OU7W5j5k5lU8S7V7Y7ZQ8l8TR8z8mQ%]yR*c%XR3X/RR7`5sS$lp$qR.^)lQ%bzR*m%cR*s%iT/b*r/dQjOQ!nST$^j!nQ(O#sR,q(OQ!YQR%t!YQ!^RU%z!^%{+QQ%{!_R+Q%|Q+]&WR/v+]Q,[&}R0k,[Q,_'PS0n,_0oR0o,`Q+i&cR0Q+iS!eR$tU&`!e&a+RQ&a!fR+R%}Q+`&ZR/x+`Q&t!sQ+}&rU,R&t+}0fR0f,SQ'q#iR,j'qQ#m`R'w#mQ#cZU'g#c*|9iQ*|9WR9i'tQ-O(^W1]-O1^4e6kU1^-P-Q-RS4e1_1`R6k4f#q(T#t&y&}'h(](c(|(})R+r,U,V,W,p,y,z,{-T-X-i-j-u-x.i.k0^0g0h0i0j0}1a1e1x2R2g2i2y4U4Y4Z4[4a4h4n4u4w4|5X5l6a6c6d6e6l6r7Z7p8b:_:i:jQ-V(cU1d-V1f4iQ1f-XR4i1eQ(o#yR-c(oQ(x#}R-l(xQ1|-uR4x1|Q)y$wR.g)yQ2k.nS5]2k6}R6}5^Q*U%OR.q*UQ2q.sR5b2qQ/Q*`S3V/Q5tR5t3XQ.X)hW2[.X2^5R6xQ2^.[Q5R2]R6x5SQ)m$lR._)mQ/d*rR3g/dWiOSj!nQ%g}Q)U$ZQ*l%bQ*n%eQ*o%fQ*q%hQ/_*mS/b*r/dR3f/aQ$]gQ%k!RQ%n!TQ%p!UQ%r!VQ)t$rQ)z$xQ*b%]Q*w%mS/T*c*fQ/k*vQ/l*yQ/m*zS/{+f2nQ1g-ZQ1h-[Q1n-aQ2a.bQ2f.iQ3P.zQ3Z/VQ3e/`Y3s/}0O0U0Z5dQ4j1iQ4l1kQ4o1oQ5V2cQ5Y2gQ5o3QQ5u3Y[6T3r3u3y3{3|7TQ6m4kQ6p4pQ6y5TQ7[5pQ7a5vW7g6U6Z6]6_Q7r6nQ7t6qQ7y6zQ7|7OQ8V7]U8Z7h7m7oQ8c7sQ8e7vQ8g7}Q8n8WS8p8]8aQ8u8dQ8v8hQ8{8rQ9O8wQ9R8}Q9S9PR9U9TQ$fmQ&h!jU)c$g$h$iQ+V&TU+w&i&j&kQ-Z(iS.T)d)eQ/s+XQ/z+fS0`+x+yQ1k-_Q2U.UQ3p/yS3v0P0UQ4R0aQ4p1pS6X3w3|Q7j6YQ8^7lR8s8`S#ua:kR)^$cU#}a$c:kR-k(wQ#taS&y!w)_Q&}!yQ'h#dQ(]#vQ(c#xQ(|$RQ(}$SQ)R$WQ+r&fQ,U9nQ,V9pQ,W9rQ,p'|Q,y(VQ,z(XQ,{(YQ-T(aQ-X(eQ-i(uQ-j(vd-u)Y-z.u2O2{4{5i6{7X8UQ-x)[Q.i)|Q.k*PQ0^+uQ0g9xQ0h9zQ0i9|Q0j,ZQ0}9jQ1a-UQ1e-WQ1x-pQ2R-|Q2g.jQ2i.mQ2y.wQ4U:QQ4Y9oQ4Z9qQ4[9sQ4a1YQ4h1cQ4n1mQ4u1tQ4w1{Q4|2SQ5X2eQ5l2}Q6a:UQ6c9}Q6d9yQ6e9{Q6l4gQ6r4sQ7Z5nQ7p:RQ8b:VQ:_:kQ:i:qR:j:rlgOSj}!n$Z%b%e%f%h*m*r/a/dS!pU%dQ%m!SQ%s!WQ'U!|Q'u#kS*f%Z%^Q*j%_Q*v%lQ+S&RQ+q&eQ,n'vQ-w)ZQ/[*iQ0]+tQ1T,iQ1v-nQ2Q-{Q2x.vQ3]/XQ3^/YQ3`/ZQ3b/]Q3i/fQ4_1QQ5W2dQ5k2|Q5z3aQ5|3cQ5}3dQ7Y5mR7c5{!vZOSUj}!S!n!|$Z%Z%^%_%b%d%e%f%h%l&R&e)Z*i*m*r+t-n-{.v/X/Y/Z/]/a/d/f2d2|3a3c3d5m5{Q!_RQ!oTQ$_kS%v!]%yQ%|!`Q&x!vQ'P!zQ'V#PQ'W#QQ'X#RQ'Y#SQ'Z#TQ'[#UQ']#VQ'^#WQ'_#XQ'`#YQ'a#ZQ'c#]Q'f#bQ'j#eW't#k'v,i1QQ)n$mS*}%w+PS+Y&V/tQ+c&^Q+z&oQ,Y&|Q,`'QQ,c9VQ,e9XQ,s(QQ-q)SQ/o+TQ/r+WQ0b+{Q0l,^Q0p9[Q0q9]Q0r9^Q0s9_Q0t9`Q0u9aQ0v9bQ0w9cQ0x9dQ0y9eQ0z9fQ0{9gQ0|,dQ1P9kQ1U9hQ1y-sQ2V.VQ3o9tQ3r/|Q4S0cQ4V0mQ4W9uQ4]9wQ4^:OQ5^2lQ6R3mQ6U3tQ6b:PQ6f:SQ6g:TQ7h6VQ7{6|Q8]7kQ8r8_Q8}8tQ9W!WR:d:nR!aRR&X!bS&T!b+[S+X&U&]R/y+bR'O!yR'R!zT!tU$XS!sU$XU$wrs*kS&r!r!uQ,P&sQ,S&vQ.f)xS0d,O,QR4T0e`!dR!]!`$t%w&_)v+dh!qUrs!r!u$X&s&v)x,O,Q0eQ/^*kQ/p+UQ3l/jT:[&V)wT!gR$tS!fR$tS%x!]&_S%}!`)vS+O%w+dT+Z&V)wT&[!b$uQ#i^R'z#nT'p#i'qR1S,hT(`#v(hR(f#xQ-v)YQ2P-zQ2w.uQ4y2OQ5j2{Q6u4{Q7V5iQ7z6{Q8T7XR8m8UlhOSj}!n$Z%b%e%f%h*m*r/a/dQ%[yR*b%XV$xrs*kR.o*RR*a%VQ$ppR)s$qR)i$kT%`z%cT%az%cT/c*r/d",nodeNames:"⚠ ArithOp ArithOp InterpolationStart extends LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try catch finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:330,context:LF,nodeProps:[[fe.closedBy,3,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],[fe.group,-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,238,240,242,244,246,248,249,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],[fe.openedBy,30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T,T%jg$UW'W+{OX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T,T'YR$UW'X+{O!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T'u(rZ$UW]!ROY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j'u*{R$P&j$UW]!RO!^%T!_#o%T#p~%T'm+ZV]!ROY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U'm+wO$P&j]!R'm+zROr+Urs,Ts~+U'm,[U$P&j]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R,sU]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R-[O]!R!R-_PO~,n'u-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k'u.VZ$P&j$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/PZ$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/yR$UW]!RO!^%T!_#o%T#p~%T!Z0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.xy0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`y1g]$UW'mqOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`&i2k_$UW#zS'Z%k'epOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T%r5lU'v%j$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T'u6jZ$UW]!ROY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w'm8YV]!ROY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T'm8rROw8Twx8{x~8T'm9SU$P&j]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R9kU]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R:QPO~9f'u:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c'u:xZ$P&j$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z;rZ$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k%V=QR!d$}$UWO!^%T!_#o%T#p~%TZ=bR!cR$UWO!^%T!_#o%T#p~%T%R=tU'[!R#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T$u>rSj$m$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T&i?gVu%n$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%Ty@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%Ty@iR!Qq$UWO!^%T!_#o%T#p~%Ty@yZ$UWkqO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%TyAqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyBiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyCVV$UWkqO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T,TCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du,TJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl,TKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko,TL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko,TMSR$UWU+{O!^%T!_#o%T#p~%T+{M`ROzM]z{Mi{~M]+{MlTOzM]z{Mi{!PM]!P!QM{!Q~M]+{NQOU+{,TNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl,T! ^_$UWU+{}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T+{!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]+{!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]+{!#|UU+{}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd+{!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`+{!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`+{!%sTU+{OYG{Z#OG{#O#PH_#P#QFx#Q~G{+{!&VTOY!$`YZM]Zz!$`z{!${{~!$`+{!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]+{!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M],T!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|,T!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|,T!*PY$UWU+{OYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq,T!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|,T!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl,T!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko,T!-lV$UWT+{OY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e+{!.WQT+{OY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Duy!0cd$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%Ty!1x_$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%Ty!3OR$UWkqO!^%T!_#o%T#p~%Ty!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%Ty!3}Y$UWkqO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%Ty!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%Ty!5`X$UWkqO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%Ty!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%Ty!6z]$UWkqO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T%w!7|R!]V$UW#m%hO!^%T!_#o%T#p~%T!P!8^R_w$UWO!^%T!_#o%T#p~%T+c!8rR'`d!a%Y#x&s'zP!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v%w!9kT!{%o$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%w!:gT'_!s#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T%w!<YV'n%o$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T$`!<vRv$W$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T&e!=kRx&]$UWO!^%T!_#o%T#p~%TZ!={R!OR$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$P!>pR$UW'd#wO!^%T!_#o%T#p~%T~!?OO!T~%r!?VT'u%j$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T$u!?oR!S$knQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T,T!@gr$UW'W+{#zS'Z%k'epOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`,T!CO_$UW'X+{#zS'Z%k'epOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[DF,MF,RF,0,1,2,3,4,5,6,7,8,NF],topRules:{Script:[0,7]},dialects:{jsx:11335,ts:11337},dynamicPrecedences:{149:1,176:1},specialized:[{term:287,get:(o,e)=>IF(o,e)<<1},{term:287,get:o=>BF[o]||-1},{term:297,get:o=>QF[o]||-1},{term:63,get:o=>VF[o]||-1}],tokenPrec:11358}),WF=[Fs("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Fs("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Fs("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Fs(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"block",type:"keyword"}),Fs(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Fs('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Fs('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Vn=En.define({parser:FF.configure({props:[_a.add({IfStatement:Ta({except:/^\s*({|else\b)/}),TryStatement:Ta({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:RI,SwitchBody:o=>{let e=o.textAfter,t=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return o.baseIndent+(t?0:i?1:2)*o.unit},Block:MI({closing:"}"}),ArrowFunction:o=>o.baseIndent+o.unit,"TemplateString BlockComment":()=>-1,"Statement Property":Ta({except:/^{/}),JSXElement(o){let e=/^\s*<\//.test(o.textAfter);return o.lineIndent(o.node.from)+(e?0:o.unit)},JSXEscape(o){let e=/\s*\}/.test(o.textAfter);return o.lineIndent(o.node.from)+(e?0:o.unit)},"JSXOpenTag JSXSelfClosingTag"(o){return o.column(o.node.from)+o.unit}}),Aa.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":jy,BlockComment(o){return{from:o.from+2,to:o.to-2}}}),Sd({"get set async static":V.modifier,"for while do if else switch try catch finally return throw break continue default case":V.controlKeyword,"in of await yield void typeof delete instanceof":V.operatorKeyword,"let var const function class extends":V.definitionKeyword,"import export from":V.moduleKeyword,"with debugger as new":V.keyword,TemplateString:V.special(V.string),Super:V.atom,BooleanLiteral:V.bool,this:V.self,null:V.null,Star:V.modifier,VariableName:V.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":V.function(V.variableName),VariableDefinition:V.definition(V.variableName),Label:V.labelName,PropertyName:V.propertyName,PrivatePropertyName:V.special(V.propertyName),"CallExpression/MemberExpression/PropertyName":V.function(V.propertyName),"FunctionDeclaration/VariableDefinition":V.function(V.definition(V.variableName)),"ClassDeclaration/VariableDefinition":V.definition(V.className),PropertyDefinition:V.definition(V.propertyName),PrivatePropertyDefinition:V.definition(V.special(V.propertyName)),UpdateOp:V.updateOperator,LineComment:V.lineComment,BlockComment:V.blockComment,Number:V.number,String:V.string,ArithOp:V.arithmeticOperator,LogicOp:V.logicOperator,BitOp:V.bitwiseOperator,CompareOp:V.compareOperator,RegExp:V.regexp,Equals:V.definitionOperator,"Arrow : Spread":V.punctuation,"( )":V.paren,"[ ]":V.squareBracket,"{ }":V.brace,"InterpolationStart InterpolationEnd":V.special(V.brace),".":V.derefOperator,", ;":V.separator,TypeName:V.typeName,TypeDefinition:V.definition(V.typeName),"type enum interface implements namespace module declare":V.definitionKeyword,"abstract global Privacy readonly override":V.modifier,"is keyof unique infer":V.operatorKeyword,JSXAttributeValue:V.attributeValue,JSXText:V.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":V.angleBracket,"JSXIdentifier JSXNameSpacedName":V.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":V.attributeName})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),zF=Vn.configure({dialect:"ts"}),XF=Vn.configure({dialect:"jsx"}),YF=Vn.configure({dialect:"jsx ts"});function l0(o={}){let e=o.jsx?o.typescript?YF:XF:o.typescript?zF:Vn;return new zh(e,Vn.data.of({autocomplete:HQ(["LineComment","BlockComment","String"],yx(WF))}))}const HF=53,GF=1,jF=54,UF=2,ZF=55,qF=3,hl=4,c0=5,h0=6,d0=7,u0=8,KF=9,JF=10,eW=11,Ld=56,tW=12,f0=57,iW=18,sW=27,nW=30,rW=33,oW=35,aW=0,lW={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},cW={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},p0={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function hW(o){return o==45||o==46||o==58||o>=65&&o<=90||o==95||o>=97&&o<=122||o>=161}function g0(o){return o==9||o==10||o==13||o==32}let m0=null,b0=null,y0=0;function Nd(o,e){let t=o.pos+e;if(y0==t&&b0==o)return m0;let i=o.peek(e);for(;g0(i);)i=o.peek(++e);let s="";for(;hW(i);)s+=String.fromCharCode(i),i=o.peek(++e);return b0=o,y0=t,m0=s?s.toLowerCase():i==uW||i==fW?void 0:null}const O0=60,dW=62,x0=47,uW=63,fW=33;function v0(o,e){this.name=o,this.parent=e,this.hash=e?e.hash:0;for(let t=0;t<o.length;t++)this.hash+=(this.hash<<4)+o.charCodeAt(t)+(o.charCodeAt(t)<<8)}const pW=[hl,u0,c0,h0,d0],gW=new t0({start:null,shift(o,e,t,i){return pW.indexOf(e)>-1?new v0(Nd(i,1)||"",o):o},reduce(o,e){return e==iW&&o?o.parent:o},reuse(o,e,t,i){let s=e.type.id;return s==hl||s==oW?new v0(Nd(i,1)||"",o):o},hash(o){return o?o.hash:0},strict:!1}),mW=new wi((o,e)=>{if(o.next!=O0){o.next<0&&e.context&&o.acceptToken(Ld);return}o.advance();let t=o.next==x0;t&&o.advance();let i=Nd(o,0);if(i===void 0)return;if(!i)return o.acceptToken(t?tW:hl);let s=e.context?e.context.name:null;if(t){if(i==s)return o.acceptToken(KF);if(s&&cW[s])return o.acceptToken(Ld,-2);if(e.dialectEnabled(aW))return o.acceptToken(JF);for(let n=e.context;n;n=n.parent)if(n.name==i)return;o.acceptToken(eW)}else{if(i=="script")return o.acceptToken(c0);if(i=="style")return o.acceptToken(h0);if(i=="textarea")return o.acceptToken(d0);if(lW.hasOwnProperty(i))return o.acceptToken(u0);s&&p0[s]&&p0[s][i]?o.acceptToken(Ld,-1):o.acceptToken(hl)}},{contextual:!0}),bW=new wi(o=>{for(let e=0,t=0;;t++){if(o.next<0){t&&o.acceptToken(f0);break}if(o.next=="-->".charCodeAt(e)){if(e++,e==3){t>3&&o.acceptToken(f0,-2);break}}else e=0;o.advance()}});function Dd(o,e,t){let i=2+o.length;return new wi(s=>{for(let n=0,a=0,l=0;;l++){if(s.next<0){l&&s.acceptToken(e);break}if(n==0&&s.next==O0||n==1&&s.next==x0||n>=2&&n<i&&s.next==o.charCodeAt(n-2))n++,a++;else if((n==2||n==i)&&g0(s.next))a++;else if(n==i&&s.next==dW){l>a?s.acceptToken(e,-a):s.acceptToken(t,-(a-2));break}else if((s.next==10||s.next==13)&&l){s.acceptToken(e,1);break}else n=a=0;s.advance()}})}const yW=Dd("script",HF,GF),OW=Dd("style",jF,UF),xW=Dd("textarea",ZF,qF),vW=Qn.deserialize({version:13,states:",xOVOxOOO!WQ!bO'#CoO!]Q!bO'#CyO!bQ!bO'#C|O!gQ!bO'#DPO!lQ!bO'#DRO!qOXO'#CnO!|OYO'#CnO#XO[O'#CnO$eOxO'#CnOOOW'#Cn'#CnO$lO!rO'#DSO$tQ!bO'#DUO$yQ!bO'#DVOOOW'#Dj'#DjOOOW'#DX'#DXQVOxOOO%OQ#tO,59ZO%WQ#tO,59eO%`Q#tO,59hO%hQ#tO,59kO%pQ#tO,59mOOOX'#D]'#D]O%xOXO'#CwO&TOXO,59YOOOY'#D^'#D^O&]OYO'#CzO&hOYO,59YOOO['#D_'#D_O&pO[O'#C}O&{O[O,59YOOOW'#D`'#D`O'TOxO,59YO'[Q!bO'#DQOOOW,59Y,59YOOO`'#Da'#DaO'aO!rO,59nOOOW,59n,59nO'iQ!bO,59pO'nQ!bO,59qOOOW-E7V-E7VO'sQ#tO'#CqOOQO'#DY'#DYO(OQ#tO1G.uOOOX1G.u1G.uO(WQ#tO1G/POOOY1G/P1G/PO(`Q#tO1G/SOOO[1G/S1G/SO(hQ#tO1G/VOOOW1G/V1G/VO(pQ#tO1G/XOOOW1G/X1G/XOOOX-E7Z-E7ZO(xQ!bO'#CxOOOW1G.t1G.tOOOY-E7[-E7[O(}Q!bO'#C{OOO[-E7]-E7]O)SQ!bO'#DOOOOW-E7^-E7^O)XQ!bO,59lOOO`-E7_-E7_OOOW1G/Y1G/YOOOW1G/[1G/[OOOW1G/]1G/]O)^Q&jO,59]OOQO-E7W-E7WOOOX7+$a7+$aOOOY7+$k7+$kOOO[7+$n7+$nOOOW7+$q7+$qOOOW7+$s7+$sO)iQ!bO,59dO)nQ!bO,59gO)sQ!bO,59jOOOW1G/W1G/WO)xO,UO'#CtO*WO7[O'#CtOOQO1G.w1G.wOOOW1G/O1G/OOOOW1G/R1G/ROOOW1G/U1G/UOOOO'#DZ'#DZO*fO,UO,59`OOQO,59`,59`OOOO'#D['#D[O*tO7[O,59`OOOO-E7X-E7XOOQO1G.z1G.zOOOO-E7Y-E7Y",stateData:"+[~O!]OS~OSSOTPOUQOVROWTOY]OZ[O[^O^^O_^O`^Oa^Ow^Oz_O!cZO~OdaO~OdbO~OdcO~OddO~OdeO~O!VfOPkP!YkP~O!WiOQnP!YnP~O!XlORqP!YqP~OSSOTPOUQOVROWTOXqOY]OZ[O[^O^^O_^O`^Oa^Ow^O!cZO~O!YrO~P#dO!ZsO!duO~OdvO~OdwO~OfyOj|O~OfyOj!OO~OfyOj!QO~OfyOj!SO~OfyOj!UO~O!VfOPkX!YkX~OP!WO!Y!XO~O!WiOQnX!YnX~OQ!ZO!Y!XO~O!XlORqX!YqX~OR!]O!Y!XO~O!Y!XO~P#dOd!_O~O!ZsO!d!aO~Oj!bO~Oj!cO~Og!dOfeXjeX~OfyOj!fO~OfyOj!gO~OfyOj!hO~OfyOj!iO~OfyOj!jO~Od!kO~Od!lO~Od!mO~Oj!nO~Oi!qO!_!oO!a!pO~Oj!rO~Oj!sO~Oj!tO~O_!uO`!uO!_!wO!`!uO~O_!xO`!xO!a!wO!b!xO~O_!uO`!uO!_!{O!`!uO~O_!xO`!xO!a!{O!b!xO~O`_a!cwz!c~",goto:"%o!_PPPPPPPPPPPPPPPPPP!`!fP!lPP!xPP!{#O#R#X#[#_#e#h#k#q#w!`P!`!`P#}$T$k$q$w$}%T%Z%aPPPPPPPP%gX^OX`pXUOX`pezabcde{}!P!R!TR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ}bQ!PcQ!RdQ!TeZ!e{}!P!R!TQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"⚠ StartCloseTag StartCloseTag StartCloseTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue EndTag ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:66,context:gW,nodeProps:[[fe.closedBy,-11,1,2,3,4,5,6,7,8,9,10,11,"EndTag",-4,19,29,32,35,"CloseTag"],[fe.group,-9,12,15,16,17,18,38,39,40,41,"Entity",14,"Entity TextContent",-3,27,30,33,"TextContent Entity"],[fe.openedBy,26,"StartTag StartCloseTag",-4,28,31,34,36,"OpenTag"]],skippedNodes:[0],repeatNodeCount:9,tokenData:"!#b!aR!WOX$kXY)sYZ)sZ]$k]^)s^p$kpq)sqr$krs*zsv$kvw+dwx2yx}$k}!O3f!O!P$k!P!Q7_!Q![$k![!]8u!]!^$k!^!_>b!_!`!!p!`!a8T!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U$k4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!Z$vc^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!R&[V^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&Rq&xT^P!bpOv&qwx'Xx!^&q!^!_'g!_~&qP'^R^POv'Xw!^'X!_~'Xp'lQ!bpOv'gx~'ga'yU^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r`(bR!``Or(]sv(]w~(]!Q(rT!``!bpOr(krs'gsv(kwx(]x~(kW)WXiWOX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!a*O^^P!``!bp!]^OX&RXY)sYZ)sZ]&R]^)s^p&Rpq)sqr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!Z+TT!_h^P!bpOv&qwx'Xx!^&q!^!_'g!_~&q!Z+kbiWaPOX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst/]tw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^)R!^!a.Q!a$f,s$f$g.Q$g~,s!Z,xbiWOX,sXZ.QZ],s]^.Q^p,sqr,srs.Qst)Rtw,swx.Qx!P,s!P!Q.Q!Q!],s!]!^.i!^!a.Q!a$f,s$f$g.Q$g~,s!R.TTOp.Qqs.Qt!].Q!]!^.d!^~.Q!R.iO_!R!Z.pXiW_!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z/baiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^)R!^!a1q!a$f0g$f$g1q$g~0g!Z0laiWOX0gXZ1qZ]0g]^1q^p0gqr0grs1qsw0gwx1qx!P0g!P!Q1q!Q!]0g!]!^2V!^!a1q!a$f0g$f$g1q$g~0g!R1tSOp1qq!]1q!]!^2Q!^~1q!R2VO`!R!Z2^XiW`!ROX)RZ])R^p)Rqr)Rsw)Rx!P)R!Q!^)R!a$f)R$g~)R!Z3SU!ax^P!``Or'rrs'Xsv'rw!^'r!^!_(]!_~'r!]3qe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O5S!O!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g~$k!]5_d^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!`&R!`!a6m!a$f$k$f$g&R$g~$k!T6xV^P!``!bp!dQOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!X7hX^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_!`&R!`!a8T!a~&R!X8`VjU^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R!a9U!YfSdQ^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx}$k}!O8u!O!P8u!P!Q&R!Q![8u![!]8u!]!^$k!^!_(k!_!a&R!a!c$k!c!}8u!}#R$k#R#S8u#S#T$k#T#o8u#o$f$k$f$g&R$g$}$k$}%O8u%O%W$k%W%o8u%o%p$k%p&a8u&a&b$k&b1p8u1p4U8u4U4d8u4d4e$k4e$IS8u$IS$I`$k$I`$Ib8u$Ib$Je$k$Je$Jg8u$Jg$Kh$k$Kh%#t8u%#t&/x$k&/x&Et8u&Et&FV$k&FV;'S8u;'S;:j<t;:j?&r$k?&r?Ah8u?Ah?BY$k?BY?Mn8u?Mn~$k!a=Pe^PiW!``!bpOX$kXZ&RZ]$k]^&R^p$kpq&Rqr$krs&qsv$kvw)Rwx'rx!P$k!P!Q&R!Q!^$k!^!_(k!_!a&R!a$f$k$f$g&R$g;=`$k;=`<%l8u<%l~$k!R>iW!``!bpOq(kqr?Rrs'gsv(kwx(]x!a(k!a!bKj!b~(k!R?YZ!``!bpOr(krs'gsv(kwx(]x}(k}!O?{!O!f(k!f!gAR!g#W(k#W#XGz#X~(k!R@SV!``!bpOr(krs'gsv(kwx(]x}(k}!O@i!O~(k!R@rT!``!bp!cPOr(krs'gsv(kwx(]x~(k!RAYV!``!bpOr(krs'gsv(kwx(]x!q(k!q!rAo!r~(k!RAvV!``!bpOr(krs'gsv(kwx(]x!e(k!e!fB]!f~(k!RBdV!``!bpOr(krs'gsv(kwx(]x!v(k!v!wBy!w~(k!RCQV!``!bpOr(krs'gsv(kwx(]x!{(k!{!|Cg!|~(k!RCnV!``!bpOr(krs'gsv(kwx(]x!r(k!r!sDT!s~(k!RD[V!``!bpOr(krs'gsv(kwx(]x!g(k!g!hDq!h~(k!RDxW!``!bpOrDqrsEbsvDqvwEvwxFfx!`Dq!`!aGb!a~DqqEgT!bpOvEbvxEvx!`Eb!`!aFX!a~EbPEyRO!`Ev!`!aFS!a~EvPFXOzPqF`Q!bpzPOv'gx~'gaFkV!``OrFfrsEvsvFfvwEvw!`Ff!`!aGQ!a~FfaGXR!``zPOr(]sv(]w~(]!RGkT!``!bpzPOr(krs'gsv(kwx(]x~(k!RHRV!``!bpOr(krs'gsv(kwx(]x#c(k#c#dHh#d~(k!RHoV!``!bpOr(krs'gsv(kwx(]x#V(k#V#WIU#W~(k!RI]V!``!bpOr(krs'gsv(kwx(]x#h(k#h#iIr#i~(k!RIyV!``!bpOr(krs'gsv(kwx(]x#m(k#m#nJ`#n~(k!RJgV!``!bpOr(krs'gsv(kwx(]x#d(k#d#eJ|#e~(k!RKTV!``!bpOr(krs'gsv(kwx(]x#X(k#X#YDq#Y~(k!RKqW!``!bpOrKjrsLZsvKjvwLowxNPx!aKj!a!b! g!b~KjqL`T!bpOvLZvxLox!aLZ!a!bM^!b~LZPLrRO!aLo!a!bL{!b~LoPMORO!`Lo!`!aMX!a~LoPM^OwPqMcT!bpOvLZvxLox!`LZ!`!aMr!a~LZqMyQ!bpwPOv'gx~'gaNUV!``OrNPrsLosvNPvwLow!aNP!a!bNk!b~NPaNpV!``OrNPrsLosvNPvwLow!`NP!`!a! V!a~NPa! ^R!``wPOr(]sv(]w~(]!R! nW!``!bpOrKjrsLZsvKjvwLowxNPx!`Kj!`!a!!W!a~Kj!R!!aT!``!bpwPOr(krs'gsv(kwx(]x~(k!V!!{VgS^P!``!bpOr&Rrs&qsv&Rwx'rx!^&R!^!_(k!_~&R",tokenizers:[yW,OW,xW,mW,bW,0,1,2,3,4,5],topRules:{Document:[0,13]},dialects:{noMatch:0},tokenPrec:464});function wW(o,e){let t=Object.create(null);for(let i of o.firstChild.getChildren("Attribute")){let s=i.getChild("AttributeName"),n=i.getChild("AttributeValue")||i.getChild("UnquotedAttributeValue");s&&(t[e.read(s.from,s.to)]=n?n.name=="AttributeValue"?e.read(n.from+1,n.to-1):e.read(n.from,n.to):"")}return t}function Md(o,e,t){let i;for(let s of t)if(!s.attrs||s.attrs(i||(i=wW(o.node.parent,e))))return{parser:s.parser};return null}function kW(o){let e=[],t=[],i=[];for(let s of o){let n=s.tag=="script"?e:s.tag=="style"?t:s.tag=="textarea"?i:null;if(!n)throw new RangeError("Only script, style, and textarea tags can host nested parsers");n.push(s)}return bI((s,n)=>{let a=s.type.id;return a==sW?Md(s,n,e):a==nW?Md(s,n,t):a==rW?Md(s,n,i):null})}const SW=93,w0=1,CW=94,_W=95,k0=2,S0=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],TW=58,AW=40,C0=95,EW=91,dl=45,$W=46,PW=35,LW=37;function ul(o){return o>=65&&o<=90||o>=97&&o<=122||o>=161}function NW(o){return o>=48&&o<=57}const DW=new wi((o,e)=>{for(let t=!1,i=0,s=0;;s++){let{next:n}=o;if(ul(n)||n==dl||n==C0||t&&NW(n))!t&&(n!=dl||s>0)&&(t=!0),i===s&&n==dl&&i++,o.advance();else{t&&o.acceptToken(n==AW?CW:i==2&&e.canShift(k0)?k0:_W);break}}}),MW=new wi(o=>{if(S0.includes(o.peek(-1))){let{next:e}=o;(ul(e)||e==C0||e==PW||e==$W||e==EW||e==TW||e==dl)&&o.acceptToken(SW)}}),RW=new wi(o=>{if(!S0.includes(o.peek(-1))){let{next:e}=o;if(e==LW&&(o.advance(),o.acceptToken(w0)),ul(e)){do o.advance();while(ul(o.next));o.acceptToken(w0)}}}),IW={__proto__:null,lang:32,"nth-child":32,"nth-last-child":32,"nth-of-type":32,dir:32,url:60,"url-prefix":60,domain:60,regexp:60,selector:134},BW={__proto__:null,"@import":114,"@media":138,"@charset":142,"@namespace":146,"@keyframes":152,"@supports":164},QW={__proto__:null,not:128,only:128,from:158,to:160},VW=Qn.deserialize({version:13,states:"7WOYQ[OOOOQP'#Cd'#CdOOQP'#Cc'#CcO!ZQ[O'#CfO!}QXO'#CaO#UQ[O'#ChO#aQ[O'#DPO#fQ[O'#DTOOQP'#Ec'#EcO#kQdO'#DeO$VQ[O'#DrO#kQdO'#DtO$hQ[O'#DvO$sQ[O'#DyO$xQ[O'#EPO%WQ[O'#EROOQS'#Eb'#EbOOQS'#ES'#ESQYQ[OOOOQP'#Cg'#CgOOQP,59Q,59QO!ZQ[O,59QO%_Q[O'#EVO%yQWO,58{O&RQ[O,59SO#aQ[O,59kO#fQ[O,59oO%_Q[O,59sO%_Q[O,59uO%_Q[O,59vO'bQ[O'#D`OOQS,58{,58{OOQP'#Ck'#CkOOQO'#C}'#C}OOQP,59S,59SO'iQWO,59SO'nQWO,59SOOQP'#DR'#DROOQP,59k,59kOOQO'#DV'#DVO'sQ`O,59oOOQS'#Cp'#CpO#kQdO'#CqO'{QvO'#CsO)VQtO,5:POOQO'#Cx'#CxO'iQWO'#CwO)kQWO'#CyOOQS'#Ef'#EfOOQO'#Dh'#DhO)pQ[O'#DoO*OQWO'#EiO$xQ[O'#DmO*^QWO'#DpOOQO'#Ej'#EjO%|QWO,5:^O*cQpO,5:`OOQS'#Dx'#DxO*kQWO,5:bO*pQ[O,5:bOOQO'#D{'#D{O*xQWO,5:eO*}QWO,5:kO+VQWO,5:mOOQS-E8Q-E8QOOQP1G.l1G.lO+yQXO,5:qOOQO-E8T-E8TOOQS1G.g1G.gOOQP1G.n1G.nO'iQWO1G.nO'nQWO1G.nOOQP1G/V1G/VO,WQ`O1G/ZO,qQXO1G/_O-XQXO1G/aO-oQXO1G/bO.VQXO'#CdO.zQWO'#DaOOQS,59z,59zO/PQWO,59zO/XQ[O,59zO/`QdO'#CoO/gQ[O'#DOOOQP1G/Z1G/ZO#kQdO1G/ZO/nQpO,59]OOQS,59_,59_O#kQdO,59aO/vQWO1G/kOOQS,59c,59cO/{Q!bO,59eO0TQWO'#DhO0`QWO,5:TO0eQWO,5:ZO$xQ[O,5:VO$xQ[O'#EYO0mQWO,5;TO0xQWO,5:XO%_Q[O,5:[OOQS1G/x1G/xOOQS1G/z1G/zOOQS1G/|1G/|O1ZQWO1G/|O1`QdO'#D|OOQS1G0P1G0POOQS1G0V1G0VOOQS1G0X1G0XOOQP7+$Y7+$YOOQP7+$u7+$uO#kQdO7+$uO#kQdO,59{O1nQ[O'#EXO1xQWO1G/fOOQS1G/f1G/fO1xQWO1G/fO2QQtO'#ETO2uQdO'#EeO3PQWO,59ZO3UQXO'#EhO3]QWO,59jO3bQpO7+$uOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%V7+%VO3jQWO1G/PO#kQdO1G/oOOQO1G/u1G/uOOQO1G/q1G/qO3oQWO,5:tOOQO-E8W-E8WO3}QXO1G/vOOQS7+%h7+%hO4UQYO'#CsO%|QWO'#EZO4^QdO,5:hOOQS,5:h,5:hO4lQpO<<HaO4tQtO1G/gOOQO,5:s,5:sO5XQ[O,5:sOOQO-E8V-E8VOOQS7+%Q7+%QO5cQWO7+%QOOQS-E8R-E8RO#kQdO'#EUO5kQWO,5;POOQT1G.u1G.uO5sQWO,5;SOOQP1G/U1G/UOOQP<<Ha<<HaOOQS7+$k7+$kO5{QdO7+%ZOOQO7+%b7+%bOOQS,5:u,5:uOOQS-E8X-E8XOOQS1G0S1G0SOOQPAN={AN={O6SQtO'#EWO#kQdO'#EWO6}QdO7+%ROOQO7+%R7+%ROOQO1G0_1G0_OOQS<<Hl<<HlO7_QdO,5:pOOQO-E8S-E8SOOQO<<Hu<<HuO7iQtO,5:rOOQS-E8U-E8UOOQO<<Hm<<Hm",stateData:"8j~O#TOSROS~OUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#RPO#WRO~O#RcO~O]hO^hOpfOtiOxjO|kO!PmO#PlO#WeO~O!RnO~P!`O`sO#QqO#RpO~O#RuO~O#RwO~OQ!QObzOf!QOh!QOn!PO#Q}O#RyO#Z{O~Ob!SO!b!UO!e!VO#R!RO!R#]P~Oh![On!PO#R!ZO~O#R!^O~Ob!SO!b!UO!e!VO#R!RO~O!W#]P~P$VOUWOXWO]TO^TOtUOxVO#RPO#WRO~OpfO!RnO~O`!hO#QqO#RpO~OQ!pOUWOXWO]TO^TOtUOxVO!Y_O!ZXO!gYO!iZO!k[O!n]O!t^O#R!oO#WRO~O!Q!qO~P&^Ob!tO~Ob!uO~Ov!vOz!wO~OP!yObgXjgX!WgX!bgX!egX#RgXagXQgXfgXhgXngXpgX#QgX#ZgXvgX!QgX!VgX~Ob!SOj!zO!b!UO!e!VO#R!RO!W#]P~Ob!}O~Ob!SO!b!UO!e!VO#R#OO~Op#SO!`#RO!R#]X!W#]X~Ob#VO~Oj!zO!W#XO~O!W#YO~Oh#ZOn!PO~O!R#[O~O!RnO!`#RO~O!RnO!W#_O~O]hO^hOtiOxjO|kO!PmO#PlO#WeO~Op!ya!R!yaa!ya~P+_Ov#aOz#bO~O]hO^hOtiOxjO#WeO~Op{i|{i!P{i!R{i#P{ia{i~P,`Op}i|}i!P}i!R}i#P}ia}i~P,`Op!Oi|!Oi!P!Oi!R!Oi#P!Oia!Oi~P,`O]WX]!UX^WXpWXtWXxWX|WX!PWX!RWX#PWX#WWX~O]#cO~O!Q#fO!W#dO~O!Q#fO~P&^Oa#XP~P#kOa#[P~P%_Oa#nOj!zO~O!W#pO~Oh#qOo#qO~O]!^Xa![X!`![X~O]#rO~Oa#sO!`#RO~Op#SO!R#]a!W#]a~O!`#ROp!aa!R!aa!W!aaa!aa~O!W#xO~O!Q#|O!q#zO!r#zO#Z#yO~O!Q!{X!W!{X~P&^O!Q$SO!W#dO~Oj!zOQ!wXa!wXb!wXf!wXh!wXn!wXp!wX#Q!wX#R!wX#Z!wX~Op$VOa#XX~P#kOa$XO~Oa#[X~P!`Oa$ZO~Oj!zOv$[O~Oa$]O~O!`#ROp!|a!R!|a!W!|a~Oa$_O~P+_OP!yO!RgX~O!Q$bO!q#zO!r#zO#Z#yO~Oj!zOv$cO~Oj!zOp$eO!V$gO!Q!Ti!W!Ti~P#kO!Q!{a!W!{a~P&^O!Q$iO!W#dO~Op$VOa#Xa~OpfOa#[a~Oa$lO~P#kOj!zOQ!zXb!zXf!zXh!zXn!zXp!zX!Q!zX!V!zX!W!zX#Q!zX#R!zX#Z!zX~Op$eO!V$oO!Q!Tq!W!Tq~P#kOa!xap!xa~P#kOj!zOQ!zab!zaf!zah!zan!zap!za!Q!za!V!za!W!za#Q!za#R!za#Z!za~Oo#Zj!Pj~",goto:",O#_PPPPP#`P#h#vP#h$U#hPP$[PPP$b$k$kP$}P$kP$k%e%wPPP&a&g#hP&mP#hP&sP#hP#h#hPPP&y']'iPP#`PP'o'o'y'oP'oP'o'oP#`P#`P#`P'|#`P(P(SPP#`P#`(V(e(s(y)T)Z)e)kPPPPPP)q)yP*e*hP+^+a+j]`Obn!s#d$QiWObfklmn!s!u#V#d$QiQObfklmn!s!u#V#d$QQdRR!ceQrTR!ghQ!gsQ!|!OR#`!hq!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jp!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jT#z#[#{q!OXZz!t!w!z#b#c#i#r$O$V$^$e$f$jp!QXZz!t!w!z#b#c#i#r$O$V$^$e$f$jQ![[R#Z!]QtTR!ihQ!gtR#`!iQvUR!jiQxVR!kjQoSQ!fgQ#W!XQ#^!`Q#_!aR$`#zQ!rnQ#g!sQ$P#dR$h$QX!pn!s#d$Qa!WY^_|!S!U#R#SR#P!SR!][R!_]R#]!_QbOU!bb!s$QQ!snR$Q#dQ#i!tU$U#i$^$jQ$^#rR$j$VQ$W#iR$k$WQgSS!eg$YR$Y#kQ$f$OR$n$fQ#e!rS$R#e$TR$T#gQ#T!TR#v#TQ#{#[R$a#{]aObn!s#d$Q[SObn!s#d$QQ!dfQ!lkQ!mlQ!nmQ#k!uR#w#VR#j!tQ|XQ!YZQ!xz[#h!t#i#r$V$^$jQ#m!wQ#o!zQ#}#bQ$O#cS$d$O$fR$m$eR#l!uQ!XYQ!a_R!{|U!TY_|Q!`^Q#Q!SQ#U!UQ#t#RR#u#S",nodeNames:"⚠ Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent , PseudoClassName ArgList IdSelector # IdName ] AttributeSelector [ AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList from to SupportsStatement supports AtRule",maxTerm:106,nodeProps:[[fe.openedBy,17,"(",48,"{"],[fe.closedBy,18,")",49,"}"]],skippedNodes:[0,3],repeatNodeCount:8,tokenData:"Ay~R![OX$wX^%]^p$wpq%]qr(crs+}st,otu2Uuv$wvw2rwx2}xy3jyz3uz{3z{|4_|}8U}!O8a!O!P8x!P!Q9Z!Q![;e![!]<Y!]!^<x!^!_$w!_!`=T!`!a=`!a!b$w!b!c>O!c!}$w!}#O?[#O#P$w#P#Q?g#Q#R2U#R#T$w#T#U?r#U#c$w#c#d@q#d#o$w#o#pAQ#p#q2U#q#rA]#r#sAh#s#y$w#y#z%]#z$f$w$f$g%]$g#BY$w#BY#BZ%]#BZ$IS$w$IS$I_%]$I_$I|$w$I|$JO%]$JO$JT$w$JT$JU%]$JU$KV$w$KV$KW%]$KW&FU$w&FU&FV%]&FV~$wW$zQOy%Qz~%QW%VQoWOy%Qz~%Q~%bf#T~OX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q~&}f#T~oWOX%QX^&v^p%Qpq&vqy%Qz#y%Q#y#z&v#z$f%Q$f$g&v$g#BY%Q#BY#BZ&v#BZ$IS%Q$IS$I_&v$I_$I|%Q$I|$JO&v$JO$JT%Q$JT$JU&v$JU$KV%Q$KV$KW&v$KW&FU%Q&FU&FV&v&FV~%Q^(fSOy%Qz#]%Q#]#^(r#^~%Q^(wSoWOy%Qz#a%Q#a#b)T#b~%Q^)YSoWOy%Qz#d%Q#d#e)f#e~%Q^)kSoWOy%Qz#c%Q#c#d)w#d~%Q^)|SoWOy%Qz#f%Q#f#g*Y#g~%Q^*_SoWOy%Qz#h%Q#h#i*k#i~%Q^*pSoWOy%Qz#T%Q#T#U*|#U~%Q^+RSoWOy%Qz#b%Q#b#c+_#c~%Q^+dSoWOy%Qz#h%Q#h#i+p#i~%Q^+wQ!VUoWOy%Qz~%Q~,QUOY+}Zr+}rs,ds#O+}#O#P,i#P~+}~,iOh~~,lPO~+}_,tWtPOy%Qz!Q%Q!Q![-^![!c%Q!c!i-^!i#T%Q#T#Z-^#Z~%Q^-cWoWOy%Qz!Q%Q!Q![-{![!c%Q!c!i-{!i#T%Q#T#Z-{#Z~%Q^.QWoWOy%Qz!Q%Q!Q![.j![!c%Q!c!i.j!i#T%Q#T#Z.j#Z~%Q^.qWfUoWOy%Qz!Q%Q!Q![/Z![!c%Q!c!i/Z!i#T%Q#T#Z/Z#Z~%Q^/bWfUoWOy%Qz!Q%Q!Q![/z![!c%Q!c!i/z!i#T%Q#T#Z/z#Z~%Q^0PWoWOy%Qz!Q%Q!Q![0i![!c%Q!c!i0i!i#T%Q#T#Z0i#Z~%Q^0pWfUoWOy%Qz!Q%Q!Q![1Y![!c%Q!c!i1Y!i#T%Q#T#Z1Y#Z~%Q^1_WoWOy%Qz!Q%Q!Q![1w![!c%Q!c!i1w!i#T%Q#T#Z1w#Z~%Q^2OQfUoWOy%Qz~%QY2XSOy%Qz!_%Q!_!`2e!`~%QY2lQzQoWOy%Qz~%QX2wQXPOy%Qz~%Q~3QUOY2}Zw2}wx,dx#O2}#O#P3d#P~2}~3gPO~2}_3oQbVOy%Qz~%Q~3zOa~_4RSUPjSOy%Qz!_%Q!_!`2e!`~%Q_4fUjS!PPOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q^4}SoWOy%Qz!Q%Q!Q![5Z![~%Q^5bWoW#ZUOy%Qz!Q%Q!Q![5Z![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q^6PWoWOy%Qz{%Q{|6i|}%Q}!O6i!O!Q%Q!Q![6z![~%Q^6nSoWOy%Qz!Q%Q!Q![6z![~%Q^7RSoW#ZUOy%Qz!Q%Q!Q![6z![~%Q^7fYoW#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%Q_8ZQpVOy%Qz~%Q^8fUjSOy%Qz!O%Q!O!P4x!P!Q%Q!Q![7_![~%Q_8}S#WPOy%Qz!Q%Q!Q![5Z![~%Q~9`RjSOy%Qz{9i{~%Q~9nSoWOy9iyz9zz{:o{~9i~9}ROz9zz{:W{~9z~:ZTOz9zz{:W{!P9z!P!Q:j!Q~9z~:oOR~~:tUoWOy9iyz9zz{:o{!P9i!P!Q;W!Q~9i~;_QR~oWOy%Qz~%Q^;jY#ZUOy%Qz!O%Q!O!P5Z!P!Q%Q!Q![7_![!g%Q!g!h5z!h#X%Q#X#Y5z#Y~%QX<_S]POy%Qz![%Q![!]<k!]~%QX<rQ^PoWOy%Qz~%Q_<}Q!WVOy%Qz~%QY=YQzQOy%Qz~%QX=eS|POy%Qz!`%Q!`!a=q!a~%QX=xQ|PoWOy%Qz~%QX>RUOy%Qz!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX>lY!YPoWOy%Qz}%Q}!O>e!O!Q%Q!Q![>e![!c%Q!c!}>e!}#T%Q#T#o>e#o~%QX?aQxPOy%Qz~%Q^?lQvUOy%Qz~%QX?uSOy%Qz#b%Q#b#c@R#c~%QX@WSoWOy%Qz#W%Q#W#X@d#X~%QX@kQ!`PoWOy%Qz~%QX@tSOy%Qz#f%Q#f#g@d#g~%QXAVQ!RPOy%Qz~%Q_AbQ!QVOy%Qz~%QZAmS!PPOy%Qz!_%Q!_!`2e!`~%Q",tokenizers:[MW,RW,DW,0,1,2,3],topRules:{StyleSheet:[0,4]},specialized:[{term:94,get:o=>IW[o]||-1},{term:56,get:o=>BW[o]||-1},{term:95,get:o=>QW[o]||-1}],tokenPrec:1078});let Rd=null;function Id(){if(!Rd&&typeof document=="object"&&document.body){let o=[];for(let e in document.body.style)/[A-Z]|^-|^(item|length)$/.test(e)||o.push(e);Rd=o.sort().map(e=>({type:"property",label:e}))}return Rd||[]}const _0=["active","after","before","checked","default","disabled","empty","enabled","first-child","first-letter","first-line","first-of-type","focus","hover","in-range","indeterminate","invalid","lang","last-child","last-of-type","link","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-of-type","only-child","optional","out-of-range","placeholder","read-only","read-write","required","root","selection","target","valid","visited"].map(o=>({type:"class",label:o})),T0=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(o=>({type:"keyword",label:o})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(o=>({type:"constant",label:o}))),FW=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(o=>({type:"type",label:o})),us=/^[\w-]*/,WW=o=>{let{state:e,pos:t}=o,i=qe(e).resolveInner(t,-1);if(i.name=="PropertyName")return{from:i.from,options:Id(),span:us};if(i.name=="ValueName")return{from:i.from,options:T0,span:us};if(i.name=="PseudoClassName")return{from:i.from,options:_0,span:us};if(i.name=="TagName"){for(let{parent:a}=i;a;a=a.parent)if(a.name=="Block")return{from:i.from,options:Id(),span:us};return{from:i.from,options:FW,span:us}}if(!o.explicit)return null;let s=i.resolve(t),n=s.childBefore(t);return n&&n.name==":"&&s.name=="PseudoClassSelector"?{from:t,options:_0,span:us}:n&&n.name==":"&&s.name=="Declaration"||s.name=="ArgList"?{from:t,options:T0,span:us}:s.name=="Block"?{from:t,options:Id(),span:us}:null},Bd=En.define({parser:VW.configure({props:[_a.add({Declaration:Ta()}),Aa.add({Block:jy}),Sd({"import charset namespace keyframes":V.definitionKeyword,"media supports":V.controlKeyword,"from to selector":V.keyword,NamespaceName:V.namespace,KeyframeName:V.labelName,TagName:V.tagName,ClassName:V.className,PseudoClassName:V.constant(V.className),IdName:V.labelName,"FeatureName PropertyName":V.propertyName,AttributeName:V.attributeName,NumberLiteral:V.number,KeywordQuery:V.keyword,UnaryQueryOp:V.operatorKeyword,"CallTag ValueName":V.atom,VariableName:V.variableName,Callee:V.operatorKeyword,Unit:V.unit,"UniversalSelector NestingSelector":V.definitionOperator,AtKeyword:V.keyword,MatchOp:V.compareOperator,"ChildOp SiblingOp, LogicOp":V.logicOperator,BinOp:V.arithmeticOperator,Important:V.modifier,Comment:V.blockComment,ParenthesizedContent:V.special(V.name),ColorLiteral:V.color,StringLiteral:V.string,":":V.punctuation,"PseudoOp #":V.derefOperator,"; ,":V.separator,"( )":V.paren,"[ ]":V.squareBracket,"{ }":V.brace})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}}),zW=Bd.data.of({autocomplete:WW});function A0(){return new zh(Bd,zW)}const ro=["_blank","_self","_top","_parent"],Qd=["ascii","utf-8","utf-16","latin1","latin1"],Vd=["get","post","put","delete"],Fd=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Dt=["true","false"],ee={},fl={a:{attrs:{href:null,ping:null,type:null,media:null,target:ro,hreflang:null}},abbr:ee,acronym:ee,address:ee,applet:ee,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:ee,aside:ee,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:ee,base:{attrs:{href:null,target:ro}},basefont:ee,bdi:ee,bdo:ee,big:ee,blockquote:{attrs:{cite:null}},body:ee,br:ee,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Fd,formmethod:Vd,formnovalidate:["novalidate"],formtarget:ro,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:ee,center:ee,cite:ee,code:ee,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:ee,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:ee,dir:ee,div:ee,dl:ee,dt:ee,em:ee,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:ee,figure:ee,font:ee,footer:ee,form:{attrs:{action:null,name:null,"accept-charset":Qd,autocomplete:["on","off"],enctype:Fd,method:Vd,novalidate:["novalidate"],target:ro}},frame:ee,frameset:ee,h1:ee,h2:ee,h3:ee,h4:ee,h5:ee,h6:ee,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:ee,hgroup:ee,hr:ee,html:{attrs:{manifest:null}},i:ee,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Fd,formmethod:Vd,formnovalidate:["novalidate"],formtarget:ro,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:ee,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:ee,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:ee,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Qd,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:ee,noframes:ee,noscript:ee,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:ee,param:{attrs:{name:null,value:null}},pre:ee,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:ee,rt:ee,ruby:ee,s:ee,samp:ee,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Qd}},section:ee,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},small:ee,source:{attrs:{src:null,type:null,media:null}},span:ee,strike:ee,strong:ee,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:ee,summary:ee,sup:ee,table:ee,tbody:ee,td:{attrs:{colspan:null,rowspan:null,headers:null}},textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:ee,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:ee,time:{attrs:{datetime:null}},title:ee,tr:ee,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},tt:ee,u:ee,ul:{children:["li","script","template","ul","ol"]},var:ee,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:ee},E0={accesskey:null,class:null,contenteditable:Dt,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Dt,autocorrect:Dt,autocapitalize:Dt,style:null,tabindex:null,title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Dt,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Dt,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Dt,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Dt,"aria-hidden":Dt,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Dt,"aria-multiselectable":Dt,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Dt,"aria-relevant":null,"aria-required":Dt,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},XW=Object.keys(fl),$0=Object.keys(E0);function Fn(o,e,t=o.length){if(!e)return"";let i=e.firstChild,s=i&&i.getChild("TagName");return s?o.sliceString(s.from,Math.min(s.to,t)):""}function pl(o,e=!1){for(let t=o.parent;t;t=t.parent)if(t.name=="Element")if(e)e=!1;else return t;return null}function P0(o,e){let t=fl[Fn(o,pl(e,!0))];return(t==null?void 0:t.children)||XW}function Wd(o,e){let t=[];for(let i=e;i=pl(i);){let s=Fn(o,i);if(s&&i.lastChild.name=="CloseTag")break;s&&t.indexOf(s)<0&&(e.name=="EndTag"||e.from>=i.firstChild.to)&&t.push(s)}return t}const L0=/^[:\-\.\w\u00b7-\uffff]+$/;function N0(o,e,t,i){let s=/\s*>/.test(o.sliceDoc(i,i+5))?"":">";return{from:t,to:i,options:P0(o.doc,e).map(n=>({label:n,type:"type"})).concat(Wd(o.doc,e).map((n,a)=>({label:"/"+n,apply:"/"+n+s,type:"type",boost:99-a}))),span:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function D0(o,e,t,i){let s=/\s*>/.test(o.sliceDoc(i,i+5))?"":">";return{from:t,to:i,options:Wd(o.doc,e).map((n,a)=>({label:n,apply:n+s,type:"type",boost:99-a})),span:L0}}function YW(o,e,t){let i=[],s=0;for(let n of P0(o.doc,e))i.push({label:"<"+n,type:"type"});for(let n of Wd(o.doc,e))i.push({label:"</"+n+">",type:"type",boost:99-s++});return{from:t,to:t,options:i,span:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function HW(o,e,t,i){let s=pl(e),n=s?fl[Fn(o.doc,s)]:null,a=n&&n.attrs?Object.keys(n.attrs).concat($0):$0;return{from:t,to:i,options:a.map(l=>({label:l,type:"property"})),span:L0}}function GW(o,e,t,i){var s;let n=(s=e.parent)===null||s===void 0?void 0:s.getChild("AttributeName"),a=[],l;if(n){let c=o.sliceDoc(n.from,n.to),d=E0[c];if(!d){let p=pl(e),g=p?fl[Fn(o.doc,p)]:null;d=(g==null?void 0:g.attrs)&&g.attrs[c]}if(d){let p=o.sliceDoc(t,i).toLowerCase(),g='"',b='"';/^['"]/.test(p)?(l=p[0]=='"'?/^[^"]*$/:/^[^']*$/,g="",b=o.sliceDoc(i,i+1)==p[0]?"":p[0],p=p.slice(1),t++):l=/^[^\s<>='"]*$/;for(let O of d)a.push({label:O,apply:g+O+b,type:"constant"})}}return{from:t,to:i,options:a,span:l}}function jW(o){let{state:e,pos:t}=o,i=qe(e).resolveInner(t),s=i.resolve(t,-1);for(let n=t,a;i==s&&(a=s.childBefore(n));){let l=a.lastChild;if(!l||!l.type.isError||l.from<l.to)break;i=s=a,n=l.from}return s.name=="TagName"?s.parent&&/CloseTag$/.test(s.parent.name)?D0(e,s,s.from,t):N0(e,s,s.from,t):s.name=="StartTag"?N0(e,s,t,t):s.name=="StartCloseTag"||s.name=="IncompleteCloseTag"?D0(e,s,t,t):o.explicit&&(s.name=="OpenTag"||s.name=="SelfClosingTag")||s.name=="AttributeName"?HW(e,s,s.name=="AttributeName"?s.from:t,t):s.name=="Is"||s.name=="AttributeValue"||s.name=="UnquotedAttributeValue"?GW(e,s,s.name=="Is"?t:s.from,t):o.explicit&&(i.name=="Element"||i.name=="Text"||i.name=="Document")?YW(e,s,t):null}const gl=En.define({parser:vW.configure({props:[_a.add({Element(o){let e=/^(\s*)(<\/)?/.exec(o.textAfter);return o.node.to<=o.pos+e[0].length?o.continue():o.lineIndent(o.node.from)+(e[2]?0:o.unit)},"OpenTag CloseTag SelfClosingTag"(o){return o.column(o.node.from)+o.unit},Document(o){if(o.pos+/\s*/.exec(o.textAfter)[0].length<o.node.to)return o.continue();let e=null,t;for(let i=o.node;;){let s=i.lastChild;if(!s||s.name!="Element"||s.to!=i.to)break;e=i=s}return e&&!((t=e.lastChild)&&(t.name=="CloseTag"||t.name=="SelfClosingTag"))?o.lineIndent(e.from)+o.unit:null}}),Aa.add({Element(o){let e=o.firstChild,t=o.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:t.name=="CloseTag"?t.from:o.to}}}),Sd({"Text RawText":V.content,"StartTag StartCloseTag SelfCloserEndTag EndTag SelfCloseEndTag":V.angleBracket,TagName:V.tagName,"MismatchedCloseTag/TagName":[V.tagName,V.invalid],AttributeName:V.attributeName,"AttributeValue UnquotedAttributeValue":V.attributeValue,Is:V.definitionOperator,"EntityReference CharacterReference":V.character,Comment:V.blockComment,ProcessingInst:V.processingInstruction,DoctypeDecl:V.documentMeta})],wrap:kW([{tag:"script",attrs(o){return!o.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(o.type)},parser:Vn.parser},{tag:"style",attrs(o){return(!o.lang||o.lang=="css")&&(!o.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(o.type))},parser:Bd.parser}])}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),UW=gl.data.of({autocomplete:jW});function ZW(o={}){let e=gl;return o.matchClosingTags===!1&&(e=e.configure({dialect:"noMatch"})),new zh(e,[UW,o.autoCloseTags!==!1?qW:[],l0().support,A0().support])}const qW=ae.inputHandler.of((o,e,t,i)=>{if(o.composing||o.state.readOnly||e!=t||i!=">"&&i!="/"||!gl.isActiveAt(o.state,e,-1))return!1;let{state:s}=o,n=s.changeByRange(a=>{var l,c,d;let{head:p}=a,g=qe(s).resolveInner(p,-1),b;if((g.name=="TagName"||g.name=="StartTag")&&(g=g.parent),i==">"&&g.name=="OpenTag"){if(((c=(l=g.parent)===null||l===void 0?void 0:l.lastChild)===null||c===void 0?void 0:c.name)!="CloseTag"&&(b=Fn(s.doc,g.parent,p)))return{range:G.cursor(p+1),changes:{from:p,insert:`></${b}>`}}}else if(i=="/"&&g.name=="OpenTag"){let O=g.parent,r=O==null?void 0:O.parent;if(O.from==p-1&&((d=r.lastChild)===null||d===void 0?void 0:d.name)!="CloseTag"&&(b=Fn(s.doc,r,p))){let h=`/${b}>`;return{range:G.cursor(p+h.length),changes:{from:p,insert:h}}}}return{range:a}});return n.changes.empty?!1:(o.dispatch(n,{userEvent:"input.type",scrollIntoView:!0}),!0)}),B5="",KW=f.defineComponent({__name:"Codemirror",props:{modelValue:{},config:{}},emits:["update:modelValue"],setup(o,{emit:e}){var p;const t=new Pr,i=ve.transactionExtender.of(g=>{if(!g.docChanged)return null;let b=/^\s*</.test(g.newDoc.sliceString(0,100)),O=g.startState.facet(Ri)==gl;return b==O?null:{effects:t.reconfigure(b?ZW():l0())}}),s=o,n=e,a=f.ref(),l=f.shallowRef(),c=f.shallowRef(),d=`ui-codemirror-${(p=f.getCurrentInstance())==null?void 0:p.uid}`;return f.onMounted(()=>{const g=document.querySelector(`#${d}`),b=ae.updateListener.of(r=>{if(r.docChanged&&!c.value){O();const h=r.state.doc,m=Array(h).join(`
`);n("update:modelValue",m)}c.value=!1});g&&(l.value=new ae({parent:g,state:ve.create({doc:s.modelValue,extensions:[b,_y(),Wx,rF,t.of(A0()),i,Wr.of([...GO,...Py,ZB])]})}));const O=f.watchEffect(()=>{const r=l.value.state.update({changes:{from:0,to:l.value.state.doc.length,insert:s.modelValue}});c.value=!0,l.value.update([r])})}),(g,b)=>(f.openBlock(),f.createElementBlock("div",{id:d,ref_key:"editorRef",ref:a,class:"ui-codemirror"},null,512))}}),Q5="",JW={},ez={class:"ui-breadcrumb"};function tz(o,e){return f.openBlock(),f.createElementBlock("div",ez,[f.renderSlot(o.$slots,"default")])}const iz=je(JW,[["render",tz]]),V5="",sz={class:"ui-breadcrumb-item"},zd=f.defineComponent({__name:"BreadcrumbItem",props:{to:{}},setup(o){return(e,t)=>{const i=f.resolveComponent("router-link");return f.openBlock(),f.createElementBlock("div",sz,[e.to?(f.openBlock(),f.createBlock(i,{key:0,to:e.to},{default:f.withCtx(()=>[f.renderSlot(e.$slots,"default")]),_:3},8,["to"])):f.renderSlot(e.$slots,"default",{key:1})])}}});var oo=(o=>(o.dark="dark",o.light="light",o))(oo||{});const M0={get(){const o=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return localStorage.getItem("ds_color_scheme")??o}},nz="ds_color_scheme",rz=f.defineComponent({__name:"ButtonDarkmode",emits:["changeSchemeColor"],setup(o,{emit:e}){const t=e,i=f.ref("dark_mode"),s=a=>{document.documentElement.setAttribute("data-theme",a),a==oo.dark?i.value="light_mode":i.value="dark_mode"},n=()=>{const a=M0.get()===oo.dark?oo.light:oo.dark;t("changeSchemeColor",a),localStorage.setItem(nz,a),s(a)};return f.onMounted(()=>{s(M0.get())}),(a,l)=>(f.openBlock(),f.createElementBlock("span",{onClick:n},[f.renderSlot(a.$slots,"default",{},()=>[f.createVNode(Rt,{icon:i.value,variant:"plain"},null,8,["icon"])])]))}}),F5="",oz={class:"ui-topbar",id:"ui-topbar"},az={class:"ui-topbar-wrapper"},lz={class:"ui-topbar-content"},cz={class:"ui-topbar-mobile"},hz=f.createElementVNode("span",null,"voltar",-1),dz=f.createElementVNode("span",null,"Início",-1),uz={class:"ui-topbar-actions"},fz={class:"ui-topbar-actions"},pz=f.defineComponent({__name:"Topbar",props:{slug:{},backlink:{},breadcrumb:{},notifications:{},dropdown:{default:()=>[]}},emits:["toggleMenu","toggleNotification","changeSchemeColor"],setup(o,{emit:e}){const t=o,i=e,s=f.inject("menu");f.computed(()=>sm(t.user.name));const n=()=>{i("toggleMenu"),s&&s.toggle()},a=()=>i("changeSchemeColor");return(l,c)=>(f.openBlock(),f.createElementBlock("div",oz,[f.createElementVNode("div",az,[f.createElementVNode("div",lz,[f.createElementVNode("div",cz,[f.createElementVNode("button",{class:"ui-topbar-menu",onClick:n},[f.createVNode(ge,{name:"menu"})]),f.renderSlot(l.$slots,"logo-mobile")]),f.createVNode(iz,null,{default:f.withCtx(()=>[l.backlink?(f.openBlock(),f.createBlock(zd,{key:0,to:{name:l.backlink.to},class:"btn-back"},{default:f.withCtx(()=>[f.createVNode(ge,{name:"arrow_back"}),hz]),_:1},8,["to"])):f.createCommentVNode("",!0),f.createVNode(zd,{to:{name:"home"}},{default:f.withCtx(()=>[dz]),_:1}),(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(l.breadcrumb,d=>(f.openBlock(),f.createBlock(zd,{to:{name:d.to},key:d.name},{default:f.withCtx(()=>[f.createElementVNode("span",null,f.toDisplayString(d.name),1)]),_:2},1032,["to"]))),128))]),_:1})]),f.createElementVNode("div",uz,[f.createElementVNode("div",fz,[f.renderSlot(l.$slots,"topbar-actions"),f.createVNode(rz,{onOnChangedTheme:a})])])])]))}}),gz={},mz={class:"ui-alert-title"};function bz(o,e){return f.openBlock(),f.createElementBlock("p",mz,[f.renderSlot(o.$slots,"default")])}const yz=je(gz,[["render",bz]]),W5="",Wn=f.defineComponent({__name:"FormLayoutItem",props:{group:{type:Boolean}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-form-layout-item",{"-group":e.group}])},[f.renderSlot(e.$slots,"default")],2))}}),z5="",Oz={class:"ui-seo-card"},xz={class:"ui-seo-title"},vz={key:0},wz={class:"ui-seo-domain"},kz={key:0,class:"ui-seo-description"},Sz=f.createElementVNode("ul",null,[f.createElementVNode("li",null,[f.createElementVNode("b",null,"Meta title"),f.createTextVNode(": até 90 caracteres; Google exibe somente 63")]),f.createElementVNode("li",null,[f.createElementVNode("b",null,"Meta description"),f.createTextVNode(": até 250 caracteres; Google exibe somente 160")]),f.createElementVNode("li",null,[f.createElementVNode("b",null,"Meta keywords"),f.createTextVNode(": até 200 caracteres, separados por vírgula")])],-1),Cz=" | ",Xd=f.defineComponent({__name:"Seo",props:{title:{},domain:{},modelValue:{},viewOnly:{type:Boolean},writeOnly:{type:Boolean},isMetaTitle:{type:Boolean},gray:{type:Boolean},slugify:{type:Boolean,default:!0},keyTitle:{default:"meta_title"},keySubTitle:{default:"meta_subtitle"},keyDescription:{default:"meta_description"},metaTitle:{}},emits:["update:modelValue"],setup(o,{emit:e}){const t=o,i=f.ref(""),s=f.ref(""),n=f.ref(""),a=f.computed(()=>{const g=p(t.modelValue[t.keyDescription]||"");return qN(g,250,"...")}),l=e,c=f.computed({get(){return t.modelValue},set(g){l("update:modelValue",g)}}),d=g=>(g&&t.metaTitle&&!t.isMetaTitle&&(g=g+Cz+t.metaTitle),g),p=g=>(g&&(g=g.replace(/(<([^>]+)>)/gi,"")),g);return f.watchEffect(()=>{t.modelValue&&(i.value=d(t.modelValue[t.keyTitle]||t.modelValue.name||i.value),s.value=t.modelValue[t.keySubTitle]||null,n.value=t.modelValue.slug?Zo(t.modelValue.slug):Zo(i.value))}),(g,b)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-seo",{"-gray":g.gray}])},[f.createVNode(yr,null,{default:f.withCtx(()=>[g.viewOnly?f.createCommentVNode("",!0):(f.openBlock(),f.createBlock(Ui,{key:0},{default:f.withCtx(()=>[f.createVNode(Wn,null,{default:f.withCtx(()=>[f.createVNode(Tt,{modelValue:c.value.meta_title,"onUpdate:modelValue":b[0]||(b[0]=O=>c.value.meta_title=O),placeholder:"Meta title",label:"Meta title"},null,8,["modelValue"])]),_:1}),f.createVNode(Wn,null,{default:f.withCtx(()=>[f.createVNode(Tt,{modelValue:c.value.meta_description,"onUpdate:modelValue":b[1]||(b[1]=O=>c.value.meta_description=O),placeholder:"Meta description",label:"Meta description",maxlength:"250",type:"textarea"},null,8,["modelValue"])]),_:1}),f.createVNode(Wn,null,{default:f.withCtx(()=>[f.createVNode(Tt,{modelValue:c.value.meta_keywords,"onUpdate:modelValue":b[2]||(b[2]=O=>c.value.meta_keywords=O),placeholder:"Ex: palavra1, palavra2",label:"Meta keywords",maxlength:"200"},null,8,["modelValue"])]),_:1}),f.createVNode(Wn,null,{default:f.withCtx(()=>[f.createVNode(Tt,{modelValue:c.value.slug,"onUpdate:modelValue":b[3]||(b[3]=O=>c.value.slug=O),placeholder:"Ex: minha-url-amigavel",label:"Url amigável"},null,8,["modelValue"])]),_:1})]),_:1})),g.writeOnly?f.createCommentVNode("",!0):(f.openBlock(),f.createBlock(Ui,{key:1},{default:f.withCtx(()=>[f.createElementVNode("div",Oz,[f.createElementVNode("b",xz,[f.createTextVNode(f.toDisplayString(i.value)+" ",1),s.value?(f.openBlock(),f.createElementBlock("span",vz,"- "+f.toDisplayString(s.value),1)):f.createCommentVNode("",!0)]),f.createElementVNode("span",wz,[f.createTextVNode(" https://"+f.toDisplayString(g.domain),1),f.withDirectives(f.createElementVNode("span",null,"/"+f.toDisplayString(n.value),513),[[f.vShow,n.value&&g.slugify===!0]])]),a.value?(f.openBlock(),f.createElementBlock("div",kz,f.toDisplayString(a.value),1)):f.createCommentVNode("",!0)])]),_:1}))]),_:1}),f.createVNode(co,{show:!g.viewOnly,class:"mt-4"},{default:f.withCtx(()=>[f.createVNode(yz,null,{default:f.withCtx(()=>[f.createTextVNode("Dicas de cadastro")]),_:1}),Sz]),_:1},8,["show"]),f.createVNode(co,{variant:"warning",show:!g.viewOnly,icon:"warning",last:""},{default:f.withCtx(()=>[f.createTextVNode(" Importante: a plataforma se encarrega de preencher estes dados básicos automaticamente. Caso você opte por preenchê-los manualmente, o sistema irá ignorar os dados gerados de forma dinâmica e exibirá os dados que você cadastrou. ")]),_:1},8,["show"])],2))}}),_z=f.defineComponent({__name:"CardSeo",props:{modelValue:{},keyTitle:{},keySubTitle:{},keyDescription:{},domain:{}},emits:["update:modelValue"],setup(o,{emit:e}){const t=o,i=e,s=f.computed({get(){return t.modelValue},set(n){i("update:modelValue",n)}});return(n,a)=>(f.openBlock(),f.createBlock(gn,{dropdown:"",class:"card-seo",dropdownLabel:"Editar",title:"Pré-visualização no Google",dropdownClosed:""},{"header-caption":f.withCtx(()=>[f.createVNode(Xd,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=l=>s.value=l),keyTitle:n.keyTitle,keySubTitle:n.keySubTitle,keyDescription:n.keyDescription,domain:n.domain,viewOnly:"",gray:""},null,8,["modelValue","keyTitle","keySubTitle","keyDescription","domain"])]),default:f.withCtx(()=>[f.createVNode(Xd,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=l=>s.value=l),"write-only":"",gray:""},null,8,["modelValue"])]),_:1}))}}),Tz={},Az={class:"ui-card-item"};function Ez(o,e){return f.openBlock(),f.createElementBlock("div",Az,[f.renderSlot(o.$slots,"default")])}const $z=je(Tz,[["render",Ez]]),Pz={class:"ui-card-section"},Lz={key:0,class:"ui-card-section-header"},Nz={class:"ui-card-section-title"},Dz={key:0,class:"ui-card-section-actions"},Mz={class:"ui-card-section-content"},Rz=f.defineComponent({__name:"CardSection",props:{title:{},actions:{}},setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",Pz,[e.title?(f.openBlock(),f.createElementBlock("div",Lz,[f.createElementVNode("h6",Nz,f.toDisplayString(e.title),1),e.actions?(f.openBlock(),f.createElementBlock("div",Dz,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(e.actions,i=>(f.openBlock(),f.createBlock(It,{key:i.label,onClick:i.onAction},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(i.label),1)]),_:2},1032,["onClick"]))),128))])):f.createCommentVNode("",!0)])):f.createCommentVNode("",!0),f.createElementVNode("div",Mz,[f.renderSlot(e.$slots,"default")])]))}}),Iz={},Bz={class:"ui-card-title"};function Qz(o,e){return f.openBlock(),f.createElementBlock("h4",Bz,[f.renderSlot(o.$slots,"default")])}const Vz=je(Iz,[["render",Qz]]),X5="",Fz=["src"],Wz=f.defineComponent({__name:"ColorThumb",props:{hexadecimal:{},hexadecimalSecondary:{},image:{},size:{default:"md"},width:{}},setup(o){const e=o,t=f.computed(()=>{let s=[];return e.size&&s.push(`-size-${e.size}`),s}),i=f.computed(()=>{const s={};return e.width&&(s.width=`${e.width}px`),s});return(s,n)=>(f.openBlock(),f.createElementBlock("span",{class:f.normalizeClass(["ui-color-thumb",t.value]),style:f.normalizeStyle(i.value)},[s.image?(f.openBlock(),f.createElementBlock("img",{key:0,src:s.image.src,class:"ui-color-thumb-image"},null,8,Fz)):(f.openBlock(),f.createElementBlock(f.Fragment,{key:1},[f.createElementVNode("span",{class:"ui-color-thumb-color",style:f.normalizeStyle({backgroundColor:s.hexadecimal})},null,4),f.createElementVNode("span",{class:"ui-color-thumb-color -secondary",style:f.normalizeStyle({backgroundColor:s.hexadecimalSecondary})},null,4)],64))],6))}}),Y5="",zz={},Xz={class:"button-action-list"};function Yz(o,e){return f.openBlock(),f.createElementBlock("div",Xz,[f.renderSlot(o.$slots,"default")])}const Hz=je(zz,[["render",Yz]]),H5="",Gz={class:"table-responsive"},jz={key:0,class:"ui-table-header"},Uz={class:"ui-table-row -head"},Zz=f.defineComponent({__name:"Table",props:{hover:{type:Boolean},noPadding:{type:Boolean},tiny:{type:Boolean}},emits:["click"],setup(o){return(e,t)=>(f.openBlock(),f.createElementBlock("div",Gz,[f.createElementVNode("div",{class:f.normalizeClass(["ui-table",{"-hover":e.hover,"-no-padding":e.noPadding,"-tiny":e.tiny}])},[e.$slots.header?(f.openBlock(),f.createElementBlock("div",jz,[f.createElementVNode("div",Uz,[f.renderSlot(e.$slots,"header")])])):f.createCommentVNode("",!0),f.renderSlot(e.$slots,"body"),f.renderSlot(e.$slots,"default")],2)]))}}),qz=f.defineComponent({__name:"TableRow",props:{to:{},head:{type:Boolean}},setup(o){const e=o,t=()=>e.to?"router-link":"div";return(i,s)=>(f.openBlock(),f.createBlock(f.resolveDynamicComponent(t()),{class:f.normalizeClass(["ui-table-row",{"-head":i.head}]),to:i.to},{default:f.withCtx(()=>[f.renderSlot(i.$slots,"default")]),_:3},8,["to","class"]))}}),Kz=f.defineComponent({__name:"TableCell",props:{action:{type:Boolean},drag:{type:Boolean},auto:{type:Boolean},handle:{type:Boolean},width:{},noWrap:{type:Boolean}},setup(o){const e=o,t=f.ref([]),i=f.ref({});return f.onMounted(()=>{e.onAction&&t.value.push("-auto"),e.drag&&t.value.push("-drag"),e.handle&&t.value.push("-handle"),e.auto&&t.value.push("-auto"),e.noWrap&&t.value.push("-nowrap"),e.width&&(i.value.width=`${e.width}px`)}),(s,n)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-table-cell",t.value]),style:f.normalizeStyle(i.value)},[f.renderSlot(s.$slots,"default")],6))}}),Jz={},eX={class:"ui-table-cell -head"};function tX(o,e){return f.openBlock(),f.createElementBlock("div",eX,[f.renderSlot(o.$slots,"default")])}const iX=je(Jz,[["render",tX]]),G5="",sX=["id"],nX={class:"ui-modal-content"},rX={key:0,class:"ui-modal-header"},oX={class:"ui-modal-header-wrapper"},aX={class:"ui-modal-title"},lX={key:0,class:"ui-modal-caption"},cX={class:"ui-modal-body"},hX={key:1,class:"ui-modal-footer"},Yd=f.defineComponent({__name:"Modal",props:{caption:{},centered:{type:Boolean},class:{},hideHeader:{type:Boolean},hideFooter:{type:Boolean},id:{},inner:{type:Boolean},modelValue:{type:Boolean},noCloseOnBackdrop:{type:Boolean},params:{},scrollable:{type:Boolean},show:{type:Boolean},size:{},title:{},width:{}},emits:["update:modelValue","close","open"],setup(o,{emit:e}){var r;const t=o,i=e,s=f.useSlots(),n=f.ref(!1),a=f.ref([]),l=f.ref(t.title),c=f.ref({}),d=()=>{t.noCloseOnBackdrop||g()},p=f.shallowRef(t.id);t.id||(p.value=`modal-${(r=f.getCurrentInstance())==null?void 0:r.uid}`);const g=()=>{n.value=!1,setTimeout(()=>{i("update:modelValue",!1),i("close")},300)},b=h=>!!s[h];t.size&&a.value.push(`-${t.size}`),t.class&&a.value.push(t.class),t.width&&(c.value.maxWidth=`${t.width}px`);const O=h=>{h.key=="Escape"&&d()};return f.watchEffect(()=>{t.modelValue?(window.addEventListener("keydown",O,!1),document.body.classList.add("modal-open"),n.value=!0,i("open")):(window.removeEventListener("keydown",O,!1),document.body.classList.remove("modal-open"))}),(h,u)=>(f.openBlock(),f.createBlock(f.Teleport,{to:"body"},[h.modelValue?(f.openBlock(),f.createElementBlock("div",{key:0,id:p.value,class:f.normalizeClass(["ui-modal",[a.value,{"-hide":!n.value,"-scrollable":h.scrollable,"-inner":h.inner}]])},[f.createElementVNode("div",{class:f.normalizeClass(["ui-modal-overlay",{"-closable":!h.noCloseOnBackdrop}]),onClick:d},null,2),f.createElementVNode("div",{class:"ui-modal-dialog",style:f.normalizeStyle(c.value)},[f.createElementVNode("div",nX,[h.hideHeader?f.createCommentVNode("",!0):(f.openBlock(),f.createElementBlock("div",rX,[f.createElementVNode("div",oX,[f.createElementVNode("h4",aX,f.toDisplayString(l.value),1),h.caption?(f.openBlock(),f.createElementBlock("span",lX,f.toDisplayString(h.caption),1)):f.createCommentVNode("",!0)]),f.createVNode(Rt,{class:"ui-modal-close",id:"btn-close",onClick:g,size:"md",variant:"plain",icon:"close"})])),f.createElementVNode("div",cX,[h.modelValue?f.renderSlot(h.$slots,"default",f.normalizeProps(f.mergeProps({key:0},h.params))):f.createCommentVNode("",!0)]),b("footer")?(f.openBlock(),f.createElementBlock("div",hX,[f.renderSlot(h.$slots,"footer")])):f.createCommentVNode("",!0)])],4)],10,sX)):f.createCommentVNode("",!0)]))}}),dX={},uX={class:"ui-modal-item"};function fX(o,e){return f.openBlock(),f.createElementBlock("div",uX,[f.renderSlot(o.$slots,"default")])}const pX=je(dX,[["render",fX]]),j5="",gX={class:"ui-timeline ui-timeline-avatar"},mX={key:0,class:"ui-timeline-input"},bX={class:"ui-timeline-list"},yX={class:"ui-timeline-item-wrapper"},OX={class:"ui-timeline-item-content"},xX={class:"ui-timeline-info"},vX={class:"ui-timeline-item-title-wrapper"},wX={class:"ui-timeline-item-text"},kX={class:"ui-timeline-item-date"},SX=f.defineComponent({__name:"Timeline",props:{modelValue:{},inputMessage:{type:Boolean}},emits:["onAddMessage","onRemoveMessage"],setup(o,{emit:e}){const t=e,i=f.shallowRef();function s(a){return{template:a.textRaw}}function n(){t("onAddMessage",i.value),i.value=null}return(a,l)=>(f.openBlock(),f.createElementBlock("div",gX,[a.inputMessage?(f.openBlock(),f.createElementBlock("div",mX,[f.createElementVNode("form",{action:"",onSubmit:f.withModifiers(n,["prevent"]),autocomplete:"off"},[f.createVNode(wl,{spacing:"sm"},{default:f.withCtx(()=>[f.createVNode(Tt,{required:"",modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=c=>i.value=c),placeholder:"Escreva um comentário..."},null,8,["modelValue"]),f.createVNode(ye,{variant:"primary",type:"submit",label:"Postar"})]),_:1})],32)])):f.createCommentVNode("",!0),f.createElementVNode("ul",bX,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(a.modelValue,(c,d)=>(f.openBlock(),f.createElementBlock("li",{class:"ui-timeline-item",key:d},[f.createElementVNode("div",yX,[f.createElementVNode("div",OX,[f.createElementVNode("div",xX,[f.createElementVNode("div",vX,[c.title?(f.openBlock(),f.createBlock(f.resolveDynamicComponent(c.titleTo?It:"div"),{key:0,to:c.titleTo,class:"ui-timeline-item-title"},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(c.title),1)]),_:2},1032,["to"])):f.createCommentVNode("",!0)]),f.createElementVNode("div",wX,[c.textRaw?(f.openBlock(),f.createBlock(f.resolveDynamicComponent(s(c)),{key:0})):f.createCommentVNode("",!0),f.createTextVNode(" "+f.toDisplayString(c.text),1)]),f.createElementVNode("small",kX,f.toDisplayString(c.date),1)]),f.createVNode(Rt,{onClick:p=>a.$emit("onRemoveMessage",c),icon:"close",size:"sm",variant:"plain"},null,8,["onClick"])])])]))),128))])]))}}),CX={class:"ui-dropdown-item-wrapper"},_X=["href","target"],TX={key:2,class:"ui-dropdown-item"},R0=f.defineComponent({__name:"DropdownItem",props:{href:{},to:{},label:{},target:{default:"_self"}},setup(o){return(e,t)=>{const i=f.resolveComponent("router-link");return f.openBlock(),f.createElementBlock("div",CX,[e.href?(f.openBlock(),f.createElementBlock("a",{key:0,href:e.href,target:e.target,class:"ui-dropdown-item"},[f.renderSlot(e.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(e.label),1)])],8,_X)):e.to?(f.openBlock(),f.createBlock(i,{key:1,to:e.to,class:"ui-dropdown-item"},{default:f.withCtx(()=>[f.renderSlot(e.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(e.label),1)])]),_:3},8,["to"])):(f.openBlock(),f.createElementBlock("span",TX,[f.renderSlot(e.$slots,"default",{},()=>[f.createTextVNode(f.toDisplayString(e.label),1)])]))])}}}),AX={},EX={class:"ui-dropdown-divider"};function $X(o,e){return f.openBlock(),f.createElementBlock("div",EX)}const I0=je(AX,[["render",$X]]),U5="",PX={class:"ui-gmaps"},LX=["href"],NX=["src"],DX=f.createElementVNode("div",{class:"overlay"},[f.createElementVNode("small",null,"Ver no"),f.createElementVNode("b",null,"Google Maps")],-1),MX=f.defineComponent({__name:"Gmaps",props:{address:{},linkOnly:{type:Boolean},style:{},width:{default:720},height:{default:360},zoom:{default:20}},setup(o){const e=o,t=f.ref(null);let i;const s=a=>{if(a){const l=`${a.city} - ${a.state}`;return[a.street,a.number,l,a.zipcode].join("+").replace(/\++$/,"")}},n=()=>`https://www.google.com.br/maps/place/${s(e.address)}`;return f.watchEffect(()=>{clearTimeout(i),i=setTimeout(()=>{const a=s(e.address),l="";t.value=`https://maps.googleapis.com/maps/api/staticmap?zoom=${e.zoom}&size=${e.width}x${e.height}&maptype=roadmap&format=png&visual_refresh=true&markers=color:0x00b7ff%7C40${a}&key=AIzaSyARh-u6T7Ux8wueTasFON8k0GiZRbMejDo${l}`},1e3)}),(a,l)=>(f.openBlock(),f.createElementBlock("div",PX,[a.linkOnly?(f.openBlock(),f.createBlock(It,{key:0,href:n,target:"_blank"},{default:f.withCtx(()=>[f.createTextVNode(" ver no mapa ")]),_:1})):f.createCommentVNode("",!0),!a.linkOnly&&t.value?(f.openBlock(),f.createElementBlock("a",{key:1,href:n(),target:"_blank",class:"ui-gmaps-link"},[f.createElementVNode("img",{class:"",src:t.value,alt:"Google Maps"},null,8,NX),DX],8,LX)):f.createCommentVNode("",!0)]))}}),Z5="",RX={class:"ui-rating"},IX=["onClick"],BX=f.defineComponent({__name:"RatingStar",props:{modelValue:{default:1},size:{}},emits:["update:modelValue","update"],setup(o,{emit:e}){const t=e,i=o,s=a=>a>i.modelValue?"star-border":"star",n=a=>{t("update:modelValue",a),t("update",a)};return(a,l)=>(f.openBlock(),f.createElementBlock("div",RX,[(f.openBlock(),f.createElementBlock(f.Fragment,null,f.renderList(5,c=>f.createElementVNode("span",{class:f.normalizeClass(s(c)),key:c,onClick:f.withModifiers(d=>n(c),["stop"])},[f.createVNode(ge,{name:"star_rate",filled:"",type:"rounded",size:a.size},null,8,["size"]),f.createVNode(ge,{name:"star_rate",type:"rounded",size:a.size},null,8,["size"])],10,IX)),64))]))}}),q5="",QX={class:"ui-callout-card-content"},VX={class:"ui-callout-card-header"},FX={key:0,class:"ui-callout-card-title"},WX={class:"ui-callout-card-text"},zX=f.defineComponent({__name:"CalloutCard",props:{title:{},icon:{},primaryAction:{},justifyCardActions:{},bgColorIconPrimary:{type:Boolean}},setup(o){return(e,t)=>(f.openBlock(),f.createBlock(gn,{class:"ui-callout-card"},{default:f.withCtx(()=>{var i,s,n;return[e.icon?(f.openBlock(),f.createElementBlock("div",{key:0,class:f.normalizeClass(["ui-callout-card-icon",{"-bg-primary":e.bgColorIconPrimary}])},[f.createVNode(ge,{name:e.icon,size:"30"},null,8,["name"])],2)):f.createCommentVNode("",!0),f.createElementVNode("div",QX,[f.createElementVNode("div",VX,[e.title?(f.openBlock(),f.createElementBlock("h5",FX,f.toDisplayString(e.title),1)):f.createCommentVNode("",!0),f.renderSlot(e.$slots,"append-to-header")]),f.createElementVNode("div",WX,[f.renderSlot(e.$slots,"default")]),e.primaryAction?(f.openBlock(),f.createElementBlock("div",{key:0,class:"ui-callout-card-actions",style:f.normalizeStyle({"justify-content":e.justifyCardActions||"flex-end"})},[f.createVNode(ye,{to:e.primaryAction.to,variant:(i=e.primaryAction)==null?void 0:i.variant,label:(s=e.primaryAction)==null?void 0:s.label,onClick:(n=e.primaryAction)==null?void 0:n.onAction,leadingIcon:e.primaryAction.leadingIcon},null,8,["to","variant","label","onClick","leadingIcon"])],4)):f.createCommentVNode("",!0)])]}),_:3}))}}),XX={},YX={class:"ui-form-layout"};function HX(o,e){return f.openBlock(),f.createElementBlock("div",YX,[f.renderSlot(o.$slots,"default")])}const GX=je(XX,[["render",HX]]),K5="",jX={},UX={class:"ui-list-group"};function ZX(o,e){return f.openBlock(),f.createElementBlock("div",UX,[f.renderSlot(o.$slots,"default")])}const qX=je(jX,[["render",ZX]]),J5="",KX={},JX={class:"ui-list-group-item"};function eY(o,e){return f.openBlock(),f.createElementBlock("div",JX,[f.renderSlot(o.$slots,"default")])}const tY=je(KX,[["render",eY]]),e3="",iY={key:0,class:"ui-media-card-video"},sY=["src"],nY=["src"],rY={key:1,class:"ui-media-card-image"},oY=["href"],aY=["src"],lY={class:"ui-media-card-info"},cY=["textContent"],hY={class:"ui-media-card-info-buttons"},dY=f.defineComponent({__name:"MediaCard",props:{title:{},text:{},video:{},image:{},imageHref:{},inverse:{type:Boolean},buttons:{}},setup(o){const e=o,t=f.ref(!1),i=f.ref([]);return e.inverse&&i.value.push("-inverted"),e.video&&i.value.push("-video"),(s,n)=>(f.openBlock(),f.createElementBlock("div",{class:f.normalizeClass(["ui-media-card",i.value])},[s.video?(f.openBlock(),f.createElementBlock("div",iY,[f.createElementVNode("img",{src:`https://img.youtube.com/vi/${s.video}/mqdefault.jpg`,onClick:n[0]||(n[0]=a=>t.value=!t.value)},null,8,sY),f.createVNode(Yd,{modelValue:t.value,"onUpdate:modelValue":n[1]||(n[1]=a=>t.value=a)},{default:f.withCtx(()=>[f.createElementVNode("iframe",{src:"https://www.youtube.com/embed/"+s.video+"?autoplay=1",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:"",style:{height:"70vh"}},null,8,nY)]),_:1},8,["modelValue"]),f.createVNode(ge,{name:"play_arrow",onClick:n[2]||(n[2]=a=>t.value=!t.value)})])):(f.openBlock(),f.createElementBlock("div",rY,[f.createElementVNode("a",{href:s.imageHref},[f.createElementVNode("img",{src:s.image},null,8,aY)],8,oY)])),f.createVNode(gn,{title:s.title},{default:f.withCtx(()=>[f.createElementVNode("div",lY,[f.createElementVNode("p",{class:"ui-media-card-info-text",textContent:f.toDisplayString(s.text)},null,8,cY),f.createElementVNode("div",hY,[(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(s.buttons,a=>(f.openBlock(),f.createBlock(ye,{key:a.label,href:a.to,target:a.target,size:"sm",label:a.label,variant:a.variant},null,8,["href","target","label","variant"]))),128))])])]),_:1},8,["title"])],2))}}),t3="",uY={class:"user-card-btn-wrapper"},fY={class:"user-card-btn-avatar"},pY=["src"],gY={key:1},mY={key:0,class:"user-card-btn-text"},bY={class:"user-card-btn-text-info"},yY={class:"name"},OY={key:0,class:"user-card-btn-text-caption"},xY={class:"icon-arrow-up"},vY=f.defineComponent({__name:"UserButton",props:{userName:{},caption:{},image:{},hideIcon:{type:Boolean}},setup(o){const e=o,t=f.computed(()=>sm(e.userName));return(i,s)=>(f.openBlock(),f.createElementBlock("div",uY,[f.createElementVNode("div",fY,[i.image?(f.openBlock(),f.createElementBlock("img",{key:0,src:i.image},null,8,pY)):(f.openBlock(),f.createElementBlock("span",gY,f.toDisplayString(t.value),1))]),i.userName?(f.openBlock(),f.createElementBlock("div",mY,[f.createElementVNode("div",bY,[f.createElementVNode("span",yY,f.toDisplayString(i.userName),1),i.caption?(f.openBlock(),f.createElementBlock("span",OY,f.toDisplayString(i.caption),1)):f.createCommentVNode("",!0)]),f.createElementVNode("span",xY,[i.hideIcon?f.createCommentVNode("",!0):(f.openBlock(),f.createBlock(ge,{key:0,name:"keyboard_arrow_up",size:"sm"}))])])):f.createCommentVNode("",!0)]))}}),B0=je(vY,[["__scopeId","data-v-dd6e8f3a"]]),i3="",wY={class:"user-card"},kY={key:0,class:"user-card-label"},SY={class:"user-card-btn"},CY={class:"dropdown-item"},_Y={key:0,class:"dropdown-item-caption"},TY=f.defineComponent({__name:"UserProfileCard",props:{user:{},caption:{},dropdown:{},label:{},dropUp:{type:Boolean}},setup(o){const e=o,t=f.computed(()=>{var i;return(i=e.dropdown)==null?void 0:i.map(s=>(s.text?s.to||s.href?s.component=R0:s.component=Sr:s.component=I0,s))});return(i,s)=>(f.openBlock(),f.createElementBlock("div",wY,[i.label?(f.openBlock(),f.createElementBlock("small",kY,f.toDisplayString(i.label),1)):f.createCommentVNode("",!0),f.createElementVNode("div",SY,[f.createVNode(f.unref(pn),{"no-close-on-click-tag":"SMALL","close-on":"",right:"","drop-up":i.dropUp},{"button-content":f.withCtx(()=>{var n;return[f.createVNode(B0,{"user-name":i.user.name,image:(n=i.user.image)==null?void 0:n.src,caption:i.caption},null,8,["user-name","image","caption"])]}),default:f.withCtx(()=>[f.renderSlot(i.$slots,"user-links"),(f.openBlock(!0),f.createElementBlock(f.Fragment,null,f.renderList(t.value,n=>(f.openBlock(),f.createElementBlock("div",CY,[n.caption?(f.openBlock(),f.createElementBlock("small",_Y,f.toDisplayString(n.caption),1)):f.createCommentVNode("",!0),(f.openBlock(),f.createBlock(f.resolveDynamicComponent(n.component),f.mergeProps({key:n,target:n.target,onClick:n.onAction},n),{default:f.withCtx(()=>[n.icon?(f.openBlock(),f.createBlock(ge,{key:0,name:n.icon},null,8,["name"])):f.createCommentVNode("",!0),f.createElementVNode("span",null,f.toDisplayString(n.text),1)]),_:2},1040,["target","onClick"]))]))),256))]),_:3},8,["drop-up"])])]))}}),AY=768,s3="",EY=f.defineComponent({__name:"QuickSearch",props:{title:{default:"Busca rápida"},caption:{default:"Encontre o que precisa na sua loja virtual."},searchOptions:{},modelValue:{type:Boolean},placeholder:{default:"Ex: Camiseta Bagy"},buttonLabel:{default:"Pesquisar"}},emits:["onSubmit","update:modelValue","onChangeOption"],setup(o,{emit:e}){const t=o,i=e,s=Ei(AY),n=f.computed({get:()=>t.modelValue,set:p=>{i("update:modelValue",p)}}),a=f.ref({searchKey:"",searchType:t.searchOptions[0].value});function l(){a.value={searchKey:"",searchType:t.searchOptions[0].value}}function c(){i("onSubmit",a.value),l()}function d(p){i("onChangeOption",p)}return(p,g)=>(f.openBlock(),f.createBlock(Yd,{class:"modal-container",modelValue:n.value,"onUpdate:modelValue":g[2]||(g[2]=b=>n.value=b),title:p.title,caption:p.caption},{default:f.withCtx(()=>[f.createElementVNode("form",{onSubmit:f.withModifiers(c,["prevent"])},[f.createVNode(wl,{class:"form"},{default:f.withCtx(()=>[f.createVNode(Wn,null,{default:f.withCtx(()=>[f.createVNode(gg,{modelValue:a.value.searchType,"onUpdate:modelValue":g[0]||(g[0]=b=>a.value.searchType=b),options:p.searchOptions,name:"searchType",onUpdate:d},null,8,["modelValue","options"])]),_:1}),f.createVNode(Tt,{modelValue:a.value.searchKey,"onUpdate:modelValue":g[1]||(g[1]=b=>a.value.searchKey=b),name:"searchKey",placeholder:p.placeholder,autofocus:""},null,8,["modelValue","placeholder"]),f.createVNode(ye,{leadingIcon:"search",type:"submit",block:f.unref(s),variant:"primary"},{default:f.withCtx(()=>[f.createTextVNode(f.toDisplayString(p.buttonLabel),1)]),_:1},8,["block"])]),_:1}),f.renderSlot(p.$slots,"default")],32)]),_:3},8,["modelValue","title","caption"]))}});W.$dialog=lo,W.$toast=tu,W.Alert=co,W.Apexchart=pL,W.Aside=Un,W.AsideSection=kl,W.Avatar=aA,W.Badge=cu,W.BrowserSelect=am,W.Button=ye,W.ButtonAction=rm,W.ButtonActionList=Hz,W.ButtonGroup=zv,W.CalloutCard=zX,W.Card=gn,W.CardActive=V2,W.CardAnnotation=mg,W.CardItem=$z,W.CardSection=Rz,W.CardSeo=_z,W.CardTitle=Vz,W.Codemirror=KW,W.Col=Ui,W.ColorThumb=Wz,W.Container=Bg,W.CustomScroll=em,W.DescriptionList=Mv,W.DescriptionListItem=Qv,W.Dialog=lu,W.Divider=Tw,W.Dropdown=pn,W.DropdownDivider=I0,W.DropdownItem=R0,W.DropdownItemButton=Sr,W.DropdownSection=lm,W.EmptyData=PL,W.FormAutocomplete=Af,W.FormCheckbox=ms,W.FormColorpicker=jA,W.FormCurrency=_w,W.FormDatepicker=pg,W.FormHelper=tA,W.FormLabel=ho,W.FormLayout=GX,W.FormLayoutItem=Wn,W.FormRadio=Sl,W.FormRange=gw,W.FormRegister=ML,W.FormRichtext=KA,W.FormSelect=gg,W.FormSelectOption=lP,W.FormSpinbutton=qT,W.FormTags=xA,W.FormTextarea=hw,W.FormTextfield=Tt,W.FormValidation=Ul,W.FrameAnnotation=xP,W.Gmaps=MX,W.Icon=ge,W.IconButton=Rt,W.Image=mA,W.InfiniteScroll=om,W.Layout=fP,W.Link=It,W.ListGroup=qX,W.ListGroupItem=tY,W.MediaCard=dY,W.Modal=Yd,W.ModalItem=pX,W.Page=M2,W.PageActions=TA,W.PageHelper=fm,W.PageHelperVideo=dm,W.PageMessageSupport=um,W.ProgressBar=cA,W.QuickSearch=EY,W.RatingStar=BX,W.Row=yr,W.RowExclude=Q2,W.Savebar=Qg,W.Select=Af,W.Seo=Xd,W.Sidebar=oN,W.Skeleton=ws,W.SkeletonList=pA,W.SkeletonTable=Ef,W.Spinner=Fi,W.Stack=wl,W.StatsGroup=j2,W.StatsItem=pm,W.Tab=tm,W.TabItem=Dc,W.Table=Zz,W.TableCell=Kz,W.TableHeadCell=iX,W.TableList=h2,W.TableListEmptyMessage=hm,W.TableListItem=Tr,W.TableListTable=im,W.TableRow=qz,W.Tag=$f,W.TagList=Pf,W.TextStyle=Js,W.Timeline=SX,W.Titlebar=Ig,W.Toast=eu,W.Topbar=pz,W.UserButton=B0,W.UserProfileCard=TY,Object.defineProperty(W,Symbol.toStringTag,{value:"Module"})});
